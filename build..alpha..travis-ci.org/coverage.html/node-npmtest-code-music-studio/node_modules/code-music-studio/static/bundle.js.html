<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-code-music-studio/node_modules/code-music-studio/static/bundle.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-code-music-studio">npmtest-code-music-studio (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-code-music-studio/node_modules/code-music-studio/static/bundle.js</span></h1>
    <h2>
        
        Statements: <span class="metric">8.69% <small>(770 / 8861)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">1.2% <small>(55 / 4601)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">3.9% <small>(45 / 1154)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">90% <small>(9 / 10)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-code-music-studio/node_modules/code-music-studio/static/</a> &#187; bundle.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11</td><td class="line-coverage"><span class="cline-any cline-yes">102</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">16</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">(function e(t,n,r){function s(o,u){if(!n[o]){<span class="missing-if-branch" title="if path not taken" >I</span>if(!t[o]){<span class="cstat-no" title="statement not covered" >var a=typeof require=="function"&amp;&amp;require;<span class="cstat-no" title="statement not covered" >i</span>f(!u&amp;&amp;a)<span class="cstat-no" title="statement not covered" >return a(o,!0);<span class="cstat-no" title="statement not covered" >i</span></span>f(i)<span class="cstat-no" title="statement not covered" >return i(o,!0);<span class="cstat-no" title="statement not covered" >t</span></span>hrow new Error("Cannot find module '"+o+"'")}</span>var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:<span class="branch-1 cbranch-no" title="branch not covered" >e)</span>},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&amp;&amp;require;for(var o=0;o&lt;r.length;o++)s(r[o]);<span class="cstat-no" title="statement not covered" >return s}</span>)({1:[<span class="fstat-no" title="function not covered" >function(require,module,exports){<span class="cstat-no" title="statement not covered" ></span>var fscope=require("frequency-viewer");<span class="cstat-no" title="statement not covered" >m</span>odule.exports=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>addEventListener("message",<span class="fstat-no" title="function not covered" >function(ev){<span class="cstat-no" title="statement not covered" ></span>postMessage(fscope.worker(ev.data))}</span>)}</span>}</span>,{"frequency-viewer":19}],2:[function(require,module,exports){var baudio=require("webaudio");var observable=require("observable");var hyperquest=require("hyperquest");<span class="cstat-no" title="statement not covered" >var keycode=require("keycode");<span class="cstat-no" title="statement not covered" >d</span>ocument.querySelector("#save").addEventListener("submit",onsubmit);<span class="fstat-no" title="function not covered" >f</span>unction onsubmit(ev){<span class="cstat-no" title="statement not covered" ></span>ev.preventDefault();<span class="cstat-no" title="statement not covered" >v</span>ar title=this.elements.title.value;<span class="cstat-no" title="statement not covered" >v</span>ar href=location.protocol+"//"+location.host+"/"+encodeURIComponent(title)+".json";<span class="cstat-no" title="statement not covered" >v</span>ar r=hyperquest.post(href);<span class="cstat-no" title="statement not covered" >r</span>.on("data",<span class="fstat-no" title="function not covered" >function(buf){<span class="cstat-no" title="statement not covered" ></span>console.log(buf)}</span>);<span class="cstat-no" title="statement not covered" >r</span>.end(JSON.stringify({title:title,code:code.value}));<span class="cstat-no" title="statement not covered" >i</span>f(window.history.pushState){<span class="cstat-no" title="statement not covered" >window.history.pushState({},title,"/"+title)}<span class="cstat-no" title="statement not covered" ></span>d</span>ocument.querySelector(".history-link").setAttribute("href","/-/history/"+encodeURIComponent(title))}<span class="cstat-no" title="statement not covered" ></span>var music=<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>return 0}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar ascope=require("amplitude-viewer")();<span class="cstat-no" title="statement not covered" >a</span>scope.appendTo("#ascope");<span class="cstat-no" title="statement not covered" >v</span>ar work=require("webworkify");<span class="cstat-no" title="statement not covered" >v</span>ar w=work(require("./fft.js"));<span class="cstat-no" title="statement not covered" >v</span>ar queue=[];<span class="cstat-no" title="statement not covered" >w</span>.addEventListener("message",<span class="fstat-no" title="function not covered" >function(ev){<span class="cstat-no" title="statement not covered" ></span>queue.shift()(ev.data)}</span>);<span class="cstat-no" title="statement not covered" >v</span>ar fscope=require("frequency-viewer")({worker:<span class="fstat-no" title="function not covered" >function(data,cb){<span class="cstat-no" title="statement not covered" ></span>queue.push(cb);<span class="cstat-no" title="statement not covered" >w</span>.postMessage(data)}</span>});<span class="cstat-no" title="statement not covered" >f</span>scope.appendTo("#fscope");<span class="cstat-no" title="statement not covered" >v</span>ar play=document.querySelector("#play");<span class="cstat-no" title="statement not covered" >p</span>lay.addEventListener("click",togglePlay);<span class="cstat-no" title="statement not covered" >a</span>scope.on("click",togglePlay);<span class="cstat-no" title="statement not covered" >v</span>ar paused=false;<span class="fstat-no" title="function not covered" >f</span>unction togglePlay(){<span class="cstat-no" title="statement not covered" ></span>paused=!paused;<span class="cstat-no" title="statement not covered" >p</span>lay.textContent=paused?"play":"pause"}<span class="cstat-no" title="statement not covered" ></span>window.addEventListener("resize",<span class="fstat-no" title="function not covered" >function(ev){<span class="cstat-no" title="statement not covered" ></span>ascope.resize();<span class="cstat-no" title="statement not covered" >f</span>scope.resize()}</span>);<span class="cstat-no" title="statement not covered" >w</span>indow.addEventListener("keydown",<span class="fstat-no" title="function not covered" >function(ev){<span class="cstat-no" title="statement not covered" ></span>var name=keycode(ev);<span class="cstat-no" title="statement not covered" >i</span>f(name==="page up"||name==="page down"){<span class="cstat-no" title="statement not covered" >ev.preventDefault()}<span class="cstat-no" title="statement not covered" ></span>d</span>ocument.body.scrollTop=0}</span>);<span class="cstat-no" title="statement not covered" >v</span>ar code=document.querySelector("#code");<span class="cstat-no" title="statement not covered" >c</span>ode.addEventListener("keydown",<span class="fstat-no" title="function not covered" >function(ev){<span class="cstat-no" title="statement not covered" ></span>var name=keycode(ev);<span class="cstat-no" title="statement not covered" >i</span>f(name==="page up"){<span class="cstat-no" title="statement not covered" >var x=code.scrollTop-code.offsetHeight;<span class="cstat-no" title="statement not covered" >c</span>ode.scrollTop=Math.max(0,x)}</span>else <span class="cstat-no" title="statement not covered" >if(name==="page down"){<span class="cstat-no" title="statement not covered" >var x=code.scrollTop+code.offsetHeight;<span class="cstat-no" title="statement not covered" >c</span>ode.scrollTop=Math.min(code.scrollHeight,x)}</span>}</span></span>);<span class="cstat-no" title="statement not covered" >v</span>ar state={};<span class="cstat-no" title="statement not covered" >v</span>ar shoe=require("shoe");<span class="cstat-no" title="statement not covered" >v</span>ar stream=shoe("/sock");<span class="cstat-no" title="statement not covered" >v</span>ar split=require("split");<span class="cstat-no" title="statement not covered" >v</span>ar through=require("through");<span class="cstat-no" title="statement not covered" >s</span>tream.pipe(split()).pipe(through(<span class="fstat-no" title="function not covered" >function(line){<span class="cstat-no" title="statement not covered" ></span>try{<span class="cstat-no" title="statement not covered" >var row=JSON.parse(line)}</span>catch(err){<span class="cstat-no" title="statement not covered" >return}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!row||typeof row!=="object")<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >v</span></span>ar keys=Object.keys(row);<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;keys.length;i++){<span class="cstat-no" title="statement not covered" >var key=keys[i];<span class="cstat-no" title="statement not covered" >s</span>tate[key]=row[key]}</span>}</span>));<span class="cstat-no" title="statement not covered" >o</span>bservable.input(code)(<span class="fstat-no" title="function not covered" >function(source){<span class="cstat-no" title="statement not covered" ></span>try{<span class="cstat-no" title="statement not covered" >music=Function(source)()}</span>catch(err){<span class="cstat-no" title="statement not covered" >return console.log(err)}<span class="cstat-no" title="statement not covered" ></span>a</span>scope.draw(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>return music(t,state)}</span>)}</span>);<span class="cstat-no" title="statement not covered" >s</span>etInterval(<span class="fstat-no" title="function not covered" >function f(){<span class="cstat-no" title="statement not covered" ></span>if(paused)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >a</span></span>scope.setTime(time);<span class="cstat-no" title="statement not covered" >a</span>scope.draw(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>return music(t,state)}</span>);<span class="cstat-no" title="statement not covered" >f</span>scope.draw(data)}</span>,50);<span class="cstat-no" title="statement not covered" >v</span>ar time=0;<span class="cstat-no" title="statement not covered" >v</span>ar data=new Float32Array(4e3);<span class="cstat-no" title="statement not covered" >v</span>ar dataIx=0;<span class="cstat-no" title="statement not covered" >v</span>ar b=baudio(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>time=t;<span class="cstat-no" title="statement not covered" >i</span>f(paused)<span class="cstat-no" title="statement not covered" >return 0;<span class="cstat-no" title="statement not covered" >v</span></span>ar x=music(t,state);<span class="cstat-no" title="statement not covered" >d</span>ata[dataIx++%data.length]=x;<span class="cstat-no" title="statement not covered" >r</span>eturn x}</span>);<span class="cstat-no" title="statement not covered" >b</span>.play()}</span>,{"./fft.js":1,"amplitude-viewer":4,"frequency-viewer":19,hyperquest:25,keycode:31,observable:44,shoe:50,split:55,through:64,webaudio:70,webworkify:71}],3:[function(require,module,exports){(function(){var object=typeof exports!="undefined"?exports:<span class="branch-1 cbranch-no" title="branch not covered" >this;</span>var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";<span class="fstat-no" title="function not covered" >function InvalidCharacterError(message){<span class="cstat-no" title="statement not covered" ></span>this.message=message}</span>InvalidCharacterError.prototype=new Error;InvalidCharacterError.prototype.name="InvalidCharacterError";object.btoa||(object.btoa=<span class="fstat-no" title="function not covered" >function(input){<span class="cstat-no" title="statement not covered" ></span>for(var block,charCode,idx=0,map=chars,output="";input.charAt(idx|0)||(map="=",idx%1);output+=map.charAt(63&amp;block&gt;&gt;8-idx%1*8)){<span class="cstat-no" title="statement not covered" >charCode=input.charCodeAt(idx+=3/4);<span class="cstat-no" title="statement not covered" >i</span>f(charCode&gt;255){<span class="cstat-no" title="statement not covered" >throw new InvalidCharacterError("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.")}<span class="cstat-no" title="statement not covered" ></span>b</span>lock=block&lt;&lt;8|charCode}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn output}</span>);object.atob||(object.atob=<span class="fstat-no" title="function not covered" >function(input){<span class="cstat-no" title="statement not covered" ></span>input=input.replace(/=+$/,"");<span class="cstat-no" title="statement not covered" >i</span>f(input.length%4==1){<span class="cstat-no" title="statement not covered" >throw new InvalidCharacterError("'atob' failed: The string to be decoded is not correctly encoded.")}<span class="cstat-no" title="statement not covered" ></span>f</span>or(var bc=0,bs,buffer,idx=0,output="";buffer=input.charAt(idx++);~buffer&amp;&amp;(bs=bc%4?bs*64+buffer:buffer,bc++%4)?output+=String.fromCharCode(255&amp;bs&gt;&gt;(-2*bc&amp;6)):0){<span class="cstat-no" title="statement not covered" >buffer=chars.indexOf(buffer)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn output}</span>)})()},{}],4:[<span class="fstat-no" title="function not covered" >function(require,module,exports){<span class="cstat-no" title="statement not covered" ></span>var fs=require("fs");<span class="cstat-no" title="statement not covered" >v</span>ar html='&lt;div&gt;\n  &lt;div class="sliders"&gt;&lt;/div&gt;\n  &lt;div class="shield"&gt;&lt;/div&gt;\n&lt;/div&gt;\n';<span class="cstat-no" title="statement not covered" >v</span>ar domify=require("domify");<span class="cstat-no" title="statement not covered" >v</span>ar inherits=require("inherits");<span class="cstat-no" title="statement not covered" >v</span>ar EventEmitter=require("events").EventEmitter;<span class="cstat-no" title="statement not covered" >v</span>ar slideways=require("slideways");<span class="cstat-no" title="statement not covered" >m</span>odule.exports=Scope;<span class="cstat-no" title="statement not covered" >i</span>nherits(Scope,EventEmitter);<span class="fstat-no" title="function not covered" >f</span>unction Scope(opts){<span class="cstat-no" title="statement not covered" ></span>var self=this;<span class="cstat-no" title="statement not covered" >i</span>f(!(this instanceof Scope))<span class="cstat-no" title="statement not covered" >return new Scope(opts);<span class="cstat-no" title="statement not covered" >i</span></span>f(!opts)<span class="cstat-no" title="statement not covered" >opts={};<span class="cstat-no" title="statement not covered" >t</span></span>his.element=domify(html)[0];<span class="cstat-no" title="statement not covered" >t</span>his.element.style.width="100%";<span class="cstat-no" title="statement not covered" >t</span>his.element.style.height="100%";<span class="cstat-no" title="statement not covered" >t</span>his.svg=createElement("svg");<span class="cstat-no" title="statement not covered" >t</span>his.svg.setAttribute("width","100%");<span class="cstat-no" title="statement not covered" >t</span>his.svg.setAttribute("height","100%");<span class="cstat-no" title="statement not covered" >t</span>his.element.appendChild(this.svg);<span class="cstat-no" title="statement not covered" >v</span>ar p=this.polyline=createElement("polyline");<span class="cstat-no" title="statement not covered" >p</span>.setAttribute("stroke",opts.stroke||"cyan");<span class="cstat-no" title="statement not covered" >p</span>.setAttribute("stroke-width",opts.strokeWidth||"4px");<span class="cstat-no" title="statement not covered" >p</span>.setAttribute("fill","transparent");<span class="cstat-no" title="statement not covered" >t</span>his.svg.appendChild(this.polyline);<span class="cstat-no" title="statement not covered" >v</span>ar shield=this.element.querySelector(".shield");<span class="cstat-no" title="statement not covered" >s</span>hield.style.position="absolute";<span class="cstat-no" title="statement not covered" >s</span>hield.style.top="0px";<span class="cstat-no" title="statement not covered" >s</span>hield.style.bottom="0px";<span class="cstat-no" title="statement not covered" >s</span>hield.style.left="0px";<span class="cstat-no" title="statement not covered" >s</span>hield.style.right="0px";<span class="cstat-no" title="statement not covered" >s</span>hield.style.zIndex=5;<span class="cstat-no" title="statement not covered" >s</span>hield.style.backgroundColor="transparent";<span class="cstat-no" title="statement not covered" >s</span>hield.addEventListener("click",<span class="fstat-no" title="function not covered" >function(ev){<span class="cstat-no" title="statement not covered" ></span>self.emit("click",ev)}</span>);<span class="cstat-no" title="statement not covered" >t</span>his.duration=opts.duration||1/50;<span class="cstat-no" title="statement not covered" >t</span>his.time=0;<span class="cstat-no" title="statement not covered" >t</span>his.offset=0;<span class="cstat-no" title="statement not covered" >v</span>ar sopts=opts.slider||{min:-1,max:3,init:Math.log(50)/Math.log(10)};<span class="cstat-no" title="statement not covered" >t</span>his.createSlider(sopts,<span class="fstat-no" title="function not covered" >function(x){<span class="cstat-no" title="statement not covered" ></span>self.setDuration(Math.pow(10,-x))}</span>);<span class="cstat-no" title="statement not covered" >v</span>ar oopts=opts.offset||{min:-10,max:10,init:0};<span class="cstat-no" title="statement not covered" >t</span>his.createSlider(oopts,<span class="fstat-no" title="function not covered" >function(x){<span class="cstat-no" title="statement not covered" ></span>self.setOffset(x/Math.log(self.duration)/Math.log(10))}</span>)}<span class="cstat-no" title="statement not covered" ></span>Scope.prototype.appendTo=<span class="fstat-no" title="function not covered" >function(target){<span class="cstat-no" title="statement not covered" ></span>if(typeof target==="string")<span class="cstat-no" title="statement not covered" >target=document.querySelector(target);<span class="cstat-no" title="statement not covered" >t</span></span>arget.appendChild(this.element);<span class="cstat-no" title="statement not covered" >t</span>his._target=target;<span class="cstat-no" title="statement not covered" >t</span>his.resize()}</span>;<span class="cstat-no" title="statement not covered" >S</span>cope.prototype.setDuration=<span class="fstat-no" title="function not covered" >function(d){<span class="cstat-no" title="statement not covered" ></span>this.duration=d;<span class="cstat-no" title="statement not covered" >i</span>f(this._lastFn)<span class="cstat-no" title="statement not covered" >this.draw(this._lastFn)}</span></span>;<span class="cstat-no" title="statement not covered" >S</span>cope.prototype.setTime=<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>this.time=t}</span>;<span class="cstat-no" title="statement not covered" >S</span>cope.prototype.setOffset=<span class="fstat-no" title="function not covered" >function(x){<span class="cstat-no" title="statement not covered" ></span>this.offset=x*this.duration;<span class="cstat-no" title="statement not covered" >i</span>f(this._lastFn)<span class="cstat-no" title="statement not covered" >this.draw(this._lastFn)}</span></span>;<span class="cstat-no" title="statement not covered" >S</span>cope.prototype.resize=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(!this._target)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >v</span></span>ar style=window.getComputedStyle(this.svg);<span class="cstat-no" title="statement not covered" >t</span>his.width=parseInt(style.width);<span class="cstat-no" title="statement not covered" >t</span>his.height=parseInt(style.height)}</span>;<span class="cstat-no" title="statement not covered" >S</span>cope.prototype.draw=<span class="fstat-no" title="function not covered" >function(fn){<span class="cstat-no" title="statement not covered" ></span>var samples=500;<span class="cstat-no" title="statement not covered" >t</span>his._lastFn=fn;<span class="cstat-no" title="statement not covered" >v</span>ar points=[];<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;samples;i++){<span class="cstat-no" title="statement not covered" >var t=this.offset+this.time+i/samples*this.duration;<span class="cstat-no" title="statement not covered" >v</span>ar res=Math.max(-1,Math.min(1,fn(t)));<span class="cstat-no" title="statement not covered" >i</span>f(isNaN(res))<span class="cstat-no" title="statement not covered" >res=0;<span class="cstat-no" title="statement not covered" >v</span></span>ar x=this.width*(i/samples);<span class="cstat-no" title="statement not covered" >v</span>ar y=(res+1)/2*(this.height-25*2)+10;<span class="cstat-no" title="statement not covered" >p</span>oints.push(x+","+y)}<span class="cstat-no" title="statement not covered" ></span>t</span>his.polyline.setAttribute("points",points.join(" "))}</span>;<span class="cstat-no" title="statement not covered" >S</span>cope.prototype.createSlider=<span class="fstat-no" title="function not covered" >function(opts,f){<span class="cstat-no" title="statement not covered" ></span>if(!opts)<span class="cstat-no" title="statement not covered" >opts={};<span class="cstat-no" title="statement not covered" >v</span></span>ar a=slideways(opts);<span class="cstat-no" title="statement not covered" >i</span>f(f)<span class="cstat-no" title="statement not covered" >a.on("value",f);<span class="cstat-no" title="statement not covered" >a</span></span>.appendTo(this.element.querySelector(".sliders"));<span class="cstat-no" title="statement not covered" >a</span>.element.style.zIndex=10;<span class="cstat-no" title="statement not covered" >r</span>eturn a}</span>;<span class="fstat-no" title="function not covered" >f</span>unction createElement(name){<span class="cstat-no" title="statement not covered" ></span>return document.createElementNS("http://www.w3.org/2000/svg",name)}</span>},{domify:14,events:18,fs:6,inherits:28,slideways:52}],5:[<span class="fstat-no" title="function not covered" >function(require,module,exports){</span>"use strict";<span class="cstat-no" title="statement not covered" >"use restrict";<span class="cstat-no" title="statement not covered" >v</span>ar INT_BITS=32;<span class="cstat-no" title="statement not covered" >e</span>xports.INT_BITS=INT_BITS;<span class="cstat-no" title="statement not covered" >e</span>xports.INT_MAX=2147483647;<span class="cstat-no" title="statement not covered" >e</span>xports.INT_MIN=-1&lt;&lt;INT_BITS-1;<span class="cstat-no" title="statement not covered" >e</span>xports.sign=<span class="fstat-no" title="function not covered" >function(v){<span class="cstat-no" title="statement not covered" ></span>return(v&gt;0)-(v&lt;0)}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.abs=<span class="fstat-no" title="function not covered" >function(v){<span class="cstat-no" title="statement not covered" ></span>var mask=v&gt;&gt;INT_BITS-1;<span class="cstat-no" title="statement not covered" >r</span>eturn(v^mask)-mask}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.min=<span class="fstat-no" title="function not covered" >function(x,y){<span class="cstat-no" title="statement not covered" ></span>return y^(x^y)&amp;-(x&lt;y)}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.max=<span class="fstat-no" title="function not covered" >function(x,y){<span class="cstat-no" title="statement not covered" ></span>return x^(x^y)&amp;-(x&lt;y)}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.isPow2=<span class="fstat-no" title="function not covered" >function(v){<span class="cstat-no" title="statement not covered" ></span>return!(v&amp;v-1)&amp;&amp;!!v}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.log2=<span class="fstat-no" title="function not covered" >function(v){<span class="cstat-no" title="statement not covered" ></span>var r,shift;<span class="cstat-no" title="statement not covered" >r</span>=(v&gt;65535)&lt;&lt;4;<span class="cstat-no" title="statement not covered" >v</span>&gt;&gt;&gt;=r;<span class="cstat-no" title="statement not covered" >s</span>hift=(v&gt;255)&lt;&lt;3;<span class="cstat-no" title="statement not covered" >v</span>&gt;&gt;&gt;=shift;<span class="cstat-no" title="statement not covered" >r</span>|=shift;<span class="cstat-no" title="statement not covered" >s</span>hift=(v&gt;15)&lt;&lt;2;<span class="cstat-no" title="statement not covered" >v</span>&gt;&gt;&gt;=shift;<span class="cstat-no" title="statement not covered" >r</span>|=shift;<span class="cstat-no" title="statement not covered" >s</span>hift=(v&gt;3)&lt;&lt;1;<span class="cstat-no" title="statement not covered" >v</span>&gt;&gt;&gt;=shift;<span class="cstat-no" title="statement not covered" >r</span>|=shift;<span class="cstat-no" title="statement not covered" >r</span>eturn r|v&gt;&gt;1}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.log10=<span class="fstat-no" title="function not covered" >function(v){<span class="cstat-no" title="statement not covered" ></span>return v&gt;=1e9?9:v&gt;=1e8?8:v&gt;=1e7?7:v&gt;=1e6?6:v&gt;=1e5?5:v&gt;=1e4?4:v&gt;=1e3?3:v&gt;=100?2:v&gt;=10?1:0}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.popCount=<span class="fstat-no" title="function not covered" >function(v){<span class="cstat-no" title="statement not covered" ></span>v=v-(v&gt;&gt;&gt;1&amp;1431655765);<span class="cstat-no" title="statement not covered" >v</span>=(v&amp;858993459)+(v&gt;&gt;&gt;2&amp;858993459);<span class="cstat-no" title="statement not covered" >r</span>eturn(v+(v&gt;&gt;&gt;4)&amp;252645135)*16843009&gt;&gt;&gt;24}</span>;<span class="fstat-no" title="function not covered" >f</span>unction countTrailingZeros(v){<span class="cstat-no" title="statement not covered" ></span>var c=32;<span class="cstat-no" title="statement not covered" >v</span>&amp;=-v;<span class="cstat-no" title="statement not covered" >i</span>f(v)<span class="cstat-no" title="statement not covered" >c--;<span class="cstat-no" title="statement not covered" >i</span></span>f(v&amp;65535)<span class="cstat-no" title="statement not covered" >c-=16;<span class="cstat-no" title="statement not covered" >i</span></span>f(v&amp;16711935)<span class="cstat-no" title="statement not covered" >c-=8;<span class="cstat-no" title="statement not covered" >i</span></span>f(v&amp;252645135)<span class="cstat-no" title="statement not covered" >c-=4;<span class="cstat-no" title="statement not covered" >i</span></span>f(v&amp;858993459)<span class="cstat-no" title="statement not covered" >c-=2;<span class="cstat-no" title="statement not covered" >i</span></span>f(v&amp;1431655765)<span class="cstat-no" title="statement not covered" >c-=1;<span class="cstat-no" title="statement not covered" >r</span></span>eturn c}<span class="cstat-no" title="statement not covered" ></span>exports.countTrailingZeros=countTrailingZeros;<span class="cstat-no" title="statement not covered" >e</span>xports.nextPow2=<span class="fstat-no" title="function not covered" >function(v){<span class="cstat-no" title="statement not covered" ></span>v+=v===0;<span class="cstat-no" title="statement not covered" >-</span>-v;<span class="cstat-no" title="statement not covered" >v</span>|=v&gt;&gt;&gt;1;<span class="cstat-no" title="statement not covered" >v</span>|=v&gt;&gt;&gt;2;<span class="cstat-no" title="statement not covered" >v</span>|=v&gt;&gt;&gt;4;<span class="cstat-no" title="statement not covered" >v</span>|=v&gt;&gt;&gt;8;<span class="cstat-no" title="statement not covered" >v</span>|=v&gt;&gt;&gt;16;<span class="cstat-no" title="statement not covered" >r</span>eturn v+1}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.prevPow2=<span class="fstat-no" title="function not covered" >function(v){<span class="cstat-no" title="statement not covered" ></span>v|=v&gt;&gt;&gt;1;<span class="cstat-no" title="statement not covered" >v</span>|=v&gt;&gt;&gt;2;<span class="cstat-no" title="statement not covered" >v</span>|=v&gt;&gt;&gt;4;<span class="cstat-no" title="statement not covered" >v</span>|=v&gt;&gt;&gt;8;<span class="cstat-no" title="statement not covered" >v</span>|=v&gt;&gt;&gt;16;<span class="cstat-no" title="statement not covered" >r</span>eturn v-(v&gt;&gt;&gt;1)}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.parity=<span class="fstat-no" title="function not covered" >function(v){<span class="cstat-no" title="statement not covered" ></span>v^=v&gt;&gt;&gt;16;<span class="cstat-no" title="statement not covered" >v</span>^=v&gt;&gt;&gt;8;<span class="cstat-no" title="statement not covered" >v</span>^=v&gt;&gt;&gt;4;<span class="cstat-no" title="statement not covered" >v</span>&amp;=15;<span class="cstat-no" title="statement not covered" >r</span>eturn 27030&gt;&gt;&gt;v&amp;1}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar REVERSE_TABLE=new Array(256);<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" ></span>function(tab){<span class="cstat-no" title="statement not covered" ></span>for(var i=0;i&lt;256;++i){<span class="cstat-no" title="statement not covered" >var v=i,r=i,s=7;<span class="cstat-no" title="statement not covered" >f</span>or(v&gt;&gt;&gt;=1;v;v&gt;&gt;&gt;=1){<span class="cstat-no" title="statement not covered" >r&lt;&lt;=1;<span class="cstat-no" title="statement not covered" >r</span>|=v&amp;1;<span class="cstat-no" title="statement not covered" >-</span>-s}<span class="cstat-no" title="statement not covered" ></span>t</span>ab[i]=r&lt;&lt;s&amp;255}</span>}</span>)(REVERSE_TABLE);<span class="cstat-no" title="statement not covered" >e</span>xports.reverse=<span class="fstat-no" title="function not covered" >function(v){<span class="cstat-no" title="statement not covered" ></span>return REVERSE_TABLE[v&amp;255]&lt;&lt;24|REVERSE_TABLE[v&gt;&gt;&gt;8&amp;255]&lt;&lt;16|REVERSE_TABLE[v&gt;&gt;&gt;16&amp;255]&lt;&lt;8|REVERSE_TABLE[v&gt;&gt;&gt;24&amp;255]}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.interleave2=<span class="fstat-no" title="function not covered" >function(x,y){<span class="cstat-no" title="statement not covered" ></span>x&amp;=65535;<span class="cstat-no" title="statement not covered" >x</span>=(x|x&lt;&lt;8)&amp;16711935;<span class="cstat-no" title="statement not covered" >x</span>=(x|x&lt;&lt;4)&amp;252645135;<span class="cstat-no" title="statement not covered" >x</span>=(x|x&lt;&lt;2)&amp;858993459;<span class="cstat-no" title="statement not covered" >x</span>=(x|x&lt;&lt;1)&amp;1431655765;<span class="cstat-no" title="statement not covered" >y</span>&amp;=65535;<span class="cstat-no" title="statement not covered" >y</span>=(y|y&lt;&lt;8)&amp;16711935;<span class="cstat-no" title="statement not covered" >y</span>=(y|y&lt;&lt;4)&amp;252645135;<span class="cstat-no" title="statement not covered" >y</span>=(y|y&lt;&lt;2)&amp;858993459;<span class="cstat-no" title="statement not covered" >y</span>=(y|y&lt;&lt;1)&amp;1431655765;<span class="cstat-no" title="statement not covered" >r</span>eturn x|y&lt;&lt;1}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.deinterleave2=<span class="fstat-no" title="function not covered" >function(v,n){<span class="cstat-no" title="statement not covered" ></span>v=v&gt;&gt;&gt;n&amp;1431655765;<span class="cstat-no" title="statement not covered" >v</span>=(v|v&gt;&gt;&gt;1)&amp;858993459;<span class="cstat-no" title="statement not covered" >v</span>=(v|v&gt;&gt;&gt;2)&amp;252645135;<span class="cstat-no" title="statement not covered" >v</span>=(v|v&gt;&gt;&gt;4)&amp;16711935;<span class="cstat-no" title="statement not covered" >v</span>=(v|v&gt;&gt;&gt;16)&amp;65535;<span class="cstat-no" title="statement not covered" >r</span>eturn v&lt;&lt;16&gt;&gt;16}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.interleave3=<span class="fstat-no" title="function not covered" >function(x,y,z){<span class="cstat-no" title="statement not covered" ></span>x&amp;=1023;<span class="cstat-no" title="statement not covered" >x</span>=(x|x&lt;&lt;16)&amp;4278190335;<span class="cstat-no" title="statement not covered" >x</span>=(x|x&lt;&lt;8)&amp;251719695;<span class="cstat-no" title="statement not covered" >x</span>=(x|x&lt;&lt;4)&amp;3272356035;<span class="cstat-no" title="statement not covered" >x</span>=(x|x&lt;&lt;2)&amp;1227133513;<span class="cstat-no" title="statement not covered" >y</span>&amp;=1023;<span class="cstat-no" title="statement not covered" >y</span>=(y|y&lt;&lt;16)&amp;4278190335;<span class="cstat-no" title="statement not covered" >y</span>=(y|y&lt;&lt;8)&amp;251719695;<span class="cstat-no" title="statement not covered" >y</span>=(y|y&lt;&lt;4)&amp;3272356035;<span class="cstat-no" title="statement not covered" >y</span>=(y|y&lt;&lt;2)&amp;1227133513;<span class="cstat-no" title="statement not covered" >x</span>|=y&lt;&lt;1;<span class="cstat-no" title="statement not covered" >z</span>&amp;=1023;<span class="cstat-no" title="statement not covered" >z</span>=(z|z&lt;&lt;16)&amp;4278190335;<span class="cstat-no" title="statement not covered" >z</span>=(z|z&lt;&lt;8)&amp;251719695;<span class="cstat-no" title="statement not covered" >z</span>=(z|z&lt;&lt;4)&amp;3272356035;<span class="cstat-no" title="statement not covered" >z</span>=(z|z&lt;&lt;2)&amp;1227133513;<span class="cstat-no" title="statement not covered" >r</span>eturn x|z&lt;&lt;2}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.deinterleave3=<span class="fstat-no" title="function not covered" >function(v,n){<span class="cstat-no" title="statement not covered" ></span>v=v&gt;&gt;&gt;n&amp;1227133513;<span class="cstat-no" title="statement not covered" >v</span>=(v|v&gt;&gt;&gt;2)&amp;3272356035;<span class="cstat-no" title="statement not covered" >v</span>=(v|v&gt;&gt;&gt;4)&amp;251719695;<span class="cstat-no" title="statement not covered" >v</span>=(v|v&gt;&gt;&gt;8)&amp;4278190335;<span class="cstat-no" title="statement not covered" >v</span>=(v|v&gt;&gt;&gt;16)&amp;1023;<span class="cstat-no" title="statement not covered" >r</span>eturn v&lt;&lt;22&gt;&gt;22}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.nextCombination=<span class="fstat-no" title="function not covered" >function(v){<span class="cstat-no" title="statement not covered" ></span>var t=v|v-1;<span class="cstat-no" title="statement not covered" >r</span>eturn t+1|(~t&amp;-~t)-1&gt;&gt;&gt;countTrailingZeros(v)+1}</span>}</span>,{}],6:[<span class="fstat-no" title="function not covered" >function(require,module,exports){</span>},{}],7:[<span class="fstat-no" title="function not covered" >function(require,module,exports){<span class="cstat-no" title="statement not covered" ></span>var Buffer=require("buffer").Buffer;<span class="fstat-no" title="function not covered" >f</span>unction assertEncoding(encoding){<span class="cstat-no" title="statement not covered" ></span>if(encoding&amp;&amp;!Buffer.isEncoding(encoding)){<span class="cstat-no" title="statement not covered" >throw new Error("Unknown encoding: "+encoding)}</span>}<span class="cstat-no" title="statement not covered" ></span>var StringDecoder=exports.StringDecoder=<span class="fstat-no" title="function not covered" >function(encoding){<span class="cstat-no" title="statement not covered" ></span>this.encoding=(encoding||"utf8").toLowerCase().replace(/[-_]/,"");<span class="cstat-no" title="statement not covered" >a</span>ssertEncoding(encoding);<span class="cstat-no" title="statement not covered" >s</span>witch(this.encoding){case"utf8":<span class="cstat-no" title="statement not covered" >this.surrogateSize=3;<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"ucs2":case"utf16le":<span class="cstat-no" title="statement not covered" >this.surrogateSize=2;<span class="cstat-no" title="statement not covered" >t</span>his.detectIncompleteChar=utf16DetectIncompleteChar;<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"base64":<span class="cstat-no" title="statement not covered" >this.surrogateSize=3;<span class="cstat-no" title="statement not covered" >t</span>his.detectIncompleteChar=base64DetectIncompleteChar;<span class="cstat-no" title="statement not covered" >b</span>reak;d</span>efault:<span class="cstat-no" title="statement not covered" >this.write=passThroughWrite;<span class="cstat-no" title="statement not covered" >r</span>eturn}<span class="cstat-no" title="statement not covered" ></span>t</span>his.charBuffer=new Buffer(6);<span class="cstat-no" title="statement not covered" >t</span>his.charReceived=0;<span class="cstat-no" title="statement not covered" >t</span>his.charLength=0}</span>;<span class="cstat-no" title="statement not covered" >S</span>tringDecoder.prototype.write=<span class="fstat-no" title="function not covered" >function(buffer){<span class="cstat-no" title="statement not covered" ></span>var charStr="";<span class="cstat-no" title="statement not covered" >v</span>ar offset=0;<span class="cstat-no" title="statement not covered" >w</span>hile(this.charLength){<span class="cstat-no" title="statement not covered" >var i=buffer.length&gt;=this.charLength-this.charReceived?this.charLength-this.charReceived:buffer.length;<span class="cstat-no" title="statement not covered" >b</span>uffer.copy(this.charBuffer,this.charReceived,offset,i);<span class="cstat-no" title="statement not covered" >t</span>his.charReceived+=i-offset;<span class="cstat-no" title="statement not covered" >o</span>ffset=i;<span class="cstat-no" title="statement not covered" >i</span>f(this.charReceived&lt;this.charLength){<span class="cstat-no" title="statement not covered" >return""}<span class="cstat-no" title="statement not covered" ></span>c</span>harStr=this.charBuffer.slice(0,this.charLength).toString(this.encoding);<span class="cstat-no" title="statement not covered" >v</span>ar charCode=charStr.charCodeAt(charStr.length-1);<span class="cstat-no" title="statement not covered" >i</span>f(charCode&gt;=55296&amp;&amp;charCode&lt;=56319){<span class="cstat-no" title="statement not covered" >this.charLength+=this.surrogateSize;<span class="cstat-no" title="statement not covered" >c</span>harStr="";<span class="cstat-no" title="statement not covered" >c</span>ontinue}<span class="cstat-no" title="statement not covered" ></span>t</span>his.charReceived=this.charLength=0;<span class="cstat-no" title="statement not covered" >i</span>f(i==buffer.length)<span class="cstat-no" title="statement not covered" >return charStr;<span class="cstat-no" title="statement not covered" >b</span></span>uffer=buffer.slice(i,buffer.length);<span class="cstat-no" title="statement not covered" >b</span>reak}<span class="cstat-no" title="statement not covered" ></span>v</span>ar lenIncomplete=this.detectIncompleteChar(buffer);<span class="cstat-no" title="statement not covered" >v</span>ar end=buffer.length;<span class="cstat-no" title="statement not covered" >i</span>f(this.charLength){<span class="cstat-no" title="statement not covered" >buffer.copy(this.charBuffer,0,buffer.length-lenIncomplete,end);<span class="cstat-no" title="statement not covered" >t</span>his.charReceived=lenIncomplete;<span class="cstat-no" title="statement not covered" >e</span>nd-=lenIncomplete}<span class="cstat-no" title="statement not covered" ></span>c</span>harStr+=buffer.toString(this.encoding,0,end);<span class="cstat-no" title="statement not covered" >v</span>ar end=charStr.length-1;<span class="cstat-no" title="statement not covered" >v</span>ar charCode=charStr.charCodeAt(end);<span class="cstat-no" title="statement not covered" >i</span>f(charCode&gt;=55296&amp;&amp;charCode&lt;=56319){<span class="cstat-no" title="statement not covered" >var size=this.surrogateSize;<span class="cstat-no" title="statement not covered" >t</span>his.charLength+=size;<span class="cstat-no" title="statement not covered" >t</span>his.charReceived+=size;<span class="cstat-no" title="statement not covered" >t</span>his.charBuffer.copy(this.charBuffer,size,0,size);<span class="cstat-no" title="statement not covered" >t</span>his.charBuffer.write(charStr.charAt(charStr.length-1),this.encoding);<span class="cstat-no" title="statement not covered" >r</span>eturn charStr.substring(0,end)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn charStr}</span>;<span class="cstat-no" title="statement not covered" >S</span>tringDecoder.prototype.detectIncompleteChar=<span class="fstat-no" title="function not covered" >function(buffer){<span class="cstat-no" title="statement not covered" ></span>var i=buffer.length&gt;=3?3:buffer.length;<span class="cstat-no" title="statement not covered" >f</span>or(;i&gt;0;i--){<span class="cstat-no" title="statement not covered" >var c=buffer[buffer.length-i];<span class="cstat-no" title="statement not covered" >i</span>f(i==1&amp;&amp;c&gt;&gt;5==6){<span class="cstat-no" title="statement not covered" >this.charLength=2;<span class="cstat-no" title="statement not covered" >b</span>reak}<span class="cstat-no" title="statement not covered" ></span>i</span>f(i&lt;=2&amp;&amp;c&gt;&gt;4==14){<span class="cstat-no" title="statement not covered" >this.charLength=3;<span class="cstat-no" title="statement not covered" >b</span>reak}<span class="cstat-no" title="statement not covered" ></span>i</span>f(i&lt;=3&amp;&amp;c&gt;&gt;3==30){<span class="cstat-no" title="statement not covered" >this.charLength=4;<span class="cstat-no" title="statement not covered" >b</span>reak}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn i}</span>;<span class="cstat-no" title="statement not covered" >S</span>tringDecoder.prototype.end=<span class="fstat-no" title="function not covered" >function(buffer){<span class="cstat-no" title="statement not covered" ></span>var res="";<span class="cstat-no" title="statement not covered" >i</span>f(buffer&amp;&amp;buffer.length)<span class="cstat-no" title="statement not covered" >res=this.write(buffer);<span class="cstat-no" title="statement not covered" >i</span></span>f(this.charReceived){<span class="cstat-no" title="statement not covered" >var cr=this.charReceived;<span class="cstat-no" title="statement not covered" >v</span>ar buf=this.charBuffer;<span class="cstat-no" title="statement not covered" >v</span>ar enc=this.encoding;<span class="cstat-no" title="statement not covered" >r</span>es+=buf.slice(0,cr).toString(enc)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn res}</span>;<span class="fstat-no" title="function not covered" >f</span>unction passThroughWrite(buffer){<span class="cstat-no" title="statement not covered" ></span>return buffer.toString(this.encoding)}<span class="fstat-no" title="function not covered" ></span>function utf16DetectIncompleteChar(buffer){<span class="cstat-no" title="statement not covered" ></span>var incomplete=this.charReceived=buffer.length%2;<span class="cstat-no" title="statement not covered" >t</span>his.charLength=incomplete?2:0;<span class="cstat-no" title="statement not covered" >r</span>eturn incomplete}<span class="fstat-no" title="function not covered" ></span>function base64DetectIncompleteChar(buffer){<span class="cstat-no" title="statement not covered" ></span>var incomplete=this.charReceived=buffer.length%3;<span class="cstat-no" title="statement not covered" >t</span>his.charLength=incomplete?3:0;<span class="cstat-no" title="statement not covered" >r</span>eturn incomplete}</span>},{buffer:8}],8:[function(require,module,exports){var base64=require("base64-js");var ieee754=require("ieee754");exports.Buffer=Buffer;exports.SlowBuffer=Buffer;exports.INSPECT_MAX_BYTES=50;Buffer.poolSize=8192;Buffer._useTypedArrays=function(){try{var buf=new ArrayBuffer(0);var arr=new Uint8Array(buf);arr.foo=function(){return 42};return 42===arr.foo()&amp;&amp;typeof arr.subarray==="function"}catch(e){<span class="cstat-no" title="statement not covered" >return false}</span>}();<span class="fstat-no" title="function not covered" >function Buffer(subject,encoding,noZero){<span class="cstat-no" title="statement not covered" ></span>if(!(this instanceof Buffer))<span class="cstat-no" title="statement not covered" >return new Buffer(subject,encoding,noZero);<span class="cstat-no" title="statement not covered" >v</span></span>ar type=typeof subject;<span class="cstat-no" title="statement not covered" >i</span>f(encoding==="base64"&amp;&amp;type==="string"){<span class="cstat-no" title="statement not covered" >subject=stringtrim(subject);<span class="cstat-no" title="statement not covered" >w</span>hile(subject.length%4!==0){<span class="cstat-no" title="statement not covered" >subject=subject+"="}</span>}<span class="cstat-no" title="statement not covered" ></span>v</span>ar length;<span class="cstat-no" title="statement not covered" >i</span>f(type==="number")<span class="cstat-no" title="statement not covered" >length=coerce(subject);e</span>lse <span class="cstat-no" title="statement not covered" >if(type==="string")<span class="cstat-no" title="statement not covered" >length=Buffer.byteLength(subject,encoding);e</span>lse <span class="cstat-no" title="statement not covered" >if(type==="object")<span class="cstat-no" title="statement not covered" >length=coerce(subject.length);e</span>lse <span class="cstat-no" title="statement not covered" >throw new Error("First argument needs to be a number, array or string.");<span class="cstat-no" title="statement not covered" >v</span></span></span></span>ar buf;<span class="cstat-no" title="statement not covered" >i</span>f(Buffer._useTypedArrays){<span class="cstat-no" title="statement not covered" >buf=Buffer._augment(new Uint8Array(length))}</span>else{<span class="cstat-no" title="statement not covered" >buf=this;<span class="cstat-no" title="statement not covered" >b</span>uf.length=length;<span class="cstat-no" title="statement not covered" >b</span>uf._isBuffer=true}<span class="cstat-no" title="statement not covered" ></span>v</span>ar i;<span class="cstat-no" title="statement not covered" >i</span>f(Buffer._useTypedArrays&amp;&amp;typeof subject.byteLength==="number"){<span class="cstat-no" title="statement not covered" >buf._set(subject)}</span>else <span class="cstat-no" title="statement not covered" >if(isArrayish(subject)){<span class="cstat-no" title="statement not covered" >for(i=0;i&lt;length;i++){<span class="cstat-no" title="statement not covered" >if(Buffer.isBuffer(subject))<span class="cstat-no" title="statement not covered" >buf[i]=subject.readUInt8(i);e</span>lse <span class="cstat-no" title="statement not covered" >buf[i]=subject[i]}</span></span>}</span>else <span class="cstat-no" title="statement not covered" >if(type==="string"){<span class="cstat-no" title="statement not covered" >buf.write(subject,0,encoding)}</span>else <span class="cstat-no" title="statement not covered" >if(type==="number"&amp;&amp;!Buffer._useTypedArrays&amp;&amp;!noZero){<span class="cstat-no" title="statement not covered" >for(i=0;i&lt;length;i++){<span class="cstat-no" title="statement not covered" >buf[i]=0}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span></span></span></span>eturn buf}</span>Buffer.isEncoding=<span class="fstat-no" title="function not covered" >function(encoding){<span class="cstat-no" title="statement not covered" ></span>switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":<span class="cstat-no" title="statement not covered" >return true;d</span>efault:<span class="cstat-no" title="statement not covered" >return false}</span>}</span>;Buffer.isBuffer=<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>return!!(b!==null&amp;&amp;b!==undefined&amp;&amp;b._isBuffer)}</span>;Buffer.byteLength=<span class="fstat-no" title="function not covered" >function(str,encoding){<span class="cstat-no" title="statement not covered" ></span>var ret;<span class="cstat-no" title="statement not covered" >s</span>tr=str+"";<span class="cstat-no" title="statement not covered" >s</span>witch(encoding||"utf8"){case"hex":<span class="cstat-no" title="statement not covered" >ret=str.length/2;<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"utf8":case"utf-8":<span class="cstat-no" title="statement not covered" >ret=utf8ToBytes(str).length;<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"ascii":case"binary":case"raw":<span class="cstat-no" title="statement not covered" >ret=str.length;<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"base64":<span class="cstat-no" title="statement not covered" >ret=base64ToBytes(str).length;<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"ucs2":case"ucs-2":case"utf16le":case"utf-16le":<span class="cstat-no" title="statement not covered" >ret=str.length*2;<span class="cstat-no" title="statement not covered" >b</span>reak;d</span>efault:<span class="cstat-no" title="statement not covered" >throw new Error("Unknown encoding")}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn ret}</span>;Buffer.concat=<span class="fstat-no" title="function not covered" >function(list,totalLength){<span class="cstat-no" title="statement not covered" ></span>assert(isArray(list),"Usage: Buffer.concat(list, [totalLength])\n"+"list should be an Array.");<span class="cstat-no" title="statement not covered" >i</span>f(list.length===0){<span class="cstat-no" title="statement not covered" >return new Buffer(0)}</span>else <span class="cstat-no" title="statement not covered" >if(list.length===1){<span class="cstat-no" title="statement not covered" >return list[0]}<span class="cstat-no" title="statement not covered" ></span>v</span></span>ar i;<span class="cstat-no" title="statement not covered" >i</span>f(typeof totalLength!=="number"){<span class="cstat-no" title="statement not covered" >totalLength=0;<span class="cstat-no" title="statement not covered" >f</span>or(i=0;i&lt;list.length;i++){<span class="cstat-no" title="statement not covered" >totalLength+=list[i].length}</span>}<span class="cstat-no" title="statement not covered" ></span>v</span>ar buf=new Buffer(totalLength);<span class="cstat-no" title="statement not covered" >v</span>ar pos=0;<span class="cstat-no" title="statement not covered" >f</span>or(i=0;i&lt;list.length;i++){<span class="cstat-no" title="statement not covered" >var item=list[i];<span class="cstat-no" title="statement not covered" >i</span>tem.copy(buf,pos);<span class="cstat-no" title="statement not covered" >p</span>os+=item.length}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn buf}</span>;<span class="fstat-no" title="function not covered" >function _hexWrite(buf,string,offset,length){<span class="cstat-no" title="statement not covered" ></span>offset=Number(offset)||0;<span class="cstat-no" title="statement not covered" >v</span>ar remaining=buf.length-offset;<span class="cstat-no" title="statement not covered" >i</span>f(!length){<span class="cstat-no" title="statement not covered" >length=remaining}</span>else{<span class="cstat-no" title="statement not covered" >length=Number(length);<span class="cstat-no" title="statement not covered" >i</span>f(length&gt;remaining){<span class="cstat-no" title="statement not covered" >length=remaining}</span>}<span class="cstat-no" title="statement not covered" ></span>v</span>ar strLen=string.length;<span class="cstat-no" title="statement not covered" >a</span>ssert(strLen%2===0,"Invalid hex string");<span class="cstat-no" title="statement not covered" >i</span>f(length&gt;strLen/2){<span class="cstat-no" title="statement not covered" >length=strLen/2}<span class="cstat-no" title="statement not covered" ></span>f</span>or(var i=0;i&lt;length;i++){<span class="cstat-no" title="statement not covered" >var byte=parseInt(string.substr(i*2,2),16);<span class="cstat-no" title="statement not covered" >a</span>ssert(!isNaN(byte),"Invalid hex string");<span class="cstat-no" title="statement not covered" >b</span>uf[offset+i]=byte}<span class="cstat-no" title="statement not covered" ></span>B</span>uffer._charsWritten=i*2;<span class="cstat-no" title="statement not covered" >r</span>eturn i}<span class="fstat-no" title="function not covered" ></span>function _utf8Write(buf,string,offset,length){<span class="cstat-no" title="statement not covered" ></span>var charsWritten=Buffer._charsWritten=blitBuffer(utf8ToBytes(string),buf,offset,length);<span class="cstat-no" title="statement not covered" >r</span>eturn charsWritten}<span class="fstat-no" title="function not covered" ></span>function _asciiWrite(buf,string,offset,length){<span class="cstat-no" title="statement not covered" ></span>var charsWritten=Buffer._charsWritten=blitBuffer(asciiToBytes(string),buf,offset,length);<span class="cstat-no" title="statement not covered" >r</span>eturn charsWritten}<span class="fstat-no" title="function not covered" ></span>function _binaryWrite(buf,string,offset,length){<span class="cstat-no" title="statement not covered" ></span>return _asciiWrite(buf,string,offset,length)}<span class="fstat-no" title="function not covered" ></span>function _base64Write(buf,string,offset,length){<span class="cstat-no" title="statement not covered" ></span>var charsWritten=Buffer._charsWritten=blitBuffer(base64ToBytes(string),buf,offset,length);<span class="cstat-no" title="statement not covered" >r</span>eturn charsWritten}<span class="fstat-no" title="function not covered" ></span>function _utf16leWrite(buf,string,offset,length){<span class="cstat-no" title="statement not covered" ></span>var charsWritten=Buffer._charsWritten=blitBuffer(utf16leToBytes(string),buf,offset,length);<span class="cstat-no" title="statement not covered" >r</span>eturn charsWritten}</span>Buffer.prototype.write=<span class="fstat-no" title="function not covered" >function(string,offset,length,encoding){<span class="cstat-no" title="statement not covered" ></span>if(isFinite(offset)){<span class="cstat-no" title="statement not covered" >if(!isFinite(length)){<span class="cstat-no" title="statement not covered" >encoding=length;<span class="cstat-no" title="statement not covered" >l</span>ength=undefined}</span>}</span>else{<span class="cstat-no" title="statement not covered" >var swap=encoding;<span class="cstat-no" title="statement not covered" >e</span>ncoding=offset;<span class="cstat-no" title="statement not covered" >o</span>ffset=length;<span class="cstat-no" title="statement not covered" >l</span>ength=swap}<span class="cstat-no" title="statement not covered" ></span>o</span>ffset=Number(offset)||0;<span class="cstat-no" title="statement not covered" >v</span>ar remaining=this.length-offset;<span class="cstat-no" title="statement not covered" >i</span>f(!length){<span class="cstat-no" title="statement not covered" >length=remaining}</span>else{<span class="cstat-no" title="statement not covered" >length=Number(length);<span class="cstat-no" title="statement not covered" >i</span>f(length&gt;remaining){<span class="cstat-no" title="statement not covered" >length=remaining}</span>}<span class="cstat-no" title="statement not covered" ></span>e</span>ncoding=String(encoding||"utf8").toLowerCase();<span class="cstat-no" title="statement not covered" >v</span>ar ret;<span class="cstat-no" title="statement not covered" >s</span>witch(encoding){case"hex":<span class="cstat-no" title="statement not covered" >ret=_hexWrite(this,string,offset,length);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"utf8":case"utf-8":<span class="cstat-no" title="statement not covered" >ret=_utf8Write(this,string,offset,length);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"ascii":<span class="cstat-no" title="statement not covered" >ret=_asciiWrite(this,string,offset,length);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"binary":<span class="cstat-no" title="statement not covered" >ret=_binaryWrite(this,string,offset,length);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"base64":<span class="cstat-no" title="statement not covered" >ret=_base64Write(this,string,offset,length);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"ucs2":case"ucs-2":case"utf16le":case"utf-16le":<span class="cstat-no" title="statement not covered" >ret=_utf16leWrite(this,string,offset,length);<span class="cstat-no" title="statement not covered" >b</span>reak;d</span>efault:<span class="cstat-no" title="statement not covered" >throw new Error("Unknown encoding")}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn ret}</span>;Buffer.prototype.toString=<span class="fstat-no" title="function not covered" >function(encoding,start,end){<span class="cstat-no" title="statement not covered" ></span>var self=this;<span class="cstat-no" title="statement not covered" >e</span>ncoding=String(encoding||"utf8").toLowerCase();<span class="cstat-no" title="statement not covered" >s</span>tart=Number(start)||0;<span class="cstat-no" title="statement not covered" >e</span>nd=end!==undefined?Number(end):end=self.length;<span class="cstat-no" title="statement not covered" >i</span>f(end===start)<span class="cstat-no" title="statement not covered" >return"";<span class="cstat-no" title="statement not covered" >v</span></span>ar ret;<span class="cstat-no" title="statement not covered" >s</span>witch(encoding){case"hex":<span class="cstat-no" title="statement not covered" >ret=_hexSlice(self,start,end);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"utf8":case"utf-8":<span class="cstat-no" title="statement not covered" >ret=_utf8Slice(self,start,end);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"ascii":<span class="cstat-no" title="statement not covered" >ret=_asciiSlice(self,start,end);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"binary":<span class="cstat-no" title="statement not covered" >ret=_binarySlice(self,start,end);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"base64":<span class="cstat-no" title="statement not covered" >ret=_base64Slice(self,start,end);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"ucs2":case"ucs-2":case"utf16le":case"utf-16le":<span class="cstat-no" title="statement not covered" >ret=_utf16leSlice(self,start,end);<span class="cstat-no" title="statement not covered" >b</span>reak;d</span>efault:<span class="cstat-no" title="statement not covered" >throw new Error("Unknown encoding")}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn ret}</span>;Buffer.prototype.toJSON=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}}</span>;Buffer.prototype.copy=<span class="fstat-no" title="function not covered" >function(target,target_start,start,end){<span class="cstat-no" title="statement not covered" ></span>var source=this;<span class="cstat-no" title="statement not covered" >i</span>f(!start)<span class="cstat-no" title="statement not covered" >start=0;<span class="cstat-no" title="statement not covered" >i</span></span>f(!end&amp;&amp;end!==0)<span class="cstat-no" title="statement not covered" >end=this.length;<span class="cstat-no" title="statement not covered" >i</span></span>f(!target_start)<span class="cstat-no" title="statement not covered" >target_start=0;<span class="cstat-no" title="statement not covered" >i</span></span>f(end===start)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >i</span></span>f(target.length===0||source.length===0)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >a</span></span>ssert(end&gt;=start,"sourceEnd &lt; sourceStart");<span class="cstat-no" title="statement not covered" >a</span>ssert(target_start&gt;=0&amp;&amp;target_start&lt;target.length,"targetStart out of bounds");<span class="cstat-no" title="statement not covered" >a</span>ssert(start&gt;=0&amp;&amp;start&lt;source.length,"sourceStart out of bounds");<span class="cstat-no" title="statement not covered" >a</span>ssert(end&gt;=0&amp;&amp;end&lt;=source.length,"sourceEnd out of bounds");<span class="cstat-no" title="statement not covered" >i</span>f(end&gt;this.length)<span class="cstat-no" title="statement not covered" >end=this.length;<span class="cstat-no" title="statement not covered" >i</span></span>f(target.length-target_start&lt;end-start)<span class="cstat-no" title="statement not covered" >end=target.length-target_start+start;<span class="cstat-no" title="statement not covered" >v</span></span>ar len=end-start;<span class="cstat-no" title="statement not covered" >i</span>f(len&lt;100||!Buffer._useTypedArrays){<span class="cstat-no" title="statement not covered" >for(var i=0;i&lt;len;i++)<span class="cstat-no" title="statement not covered" >target[i+target_start]=this[i+start]}</span></span>else{<span class="cstat-no" title="statement not covered" >target._set(this.subarray(start,start+len),target_start)}</span>}</span>;<span class="fstat-no" title="function not covered" >function _base64Slice(buf,start,end){<span class="cstat-no" title="statement not covered" ></span>if(start===0&amp;&amp;end===buf.length){<span class="cstat-no" title="statement not covered" >return base64.fromByteArray(buf)}</span>else{<span class="cstat-no" title="statement not covered" >return base64.fromByteArray(buf.slice(start,end))}</span>}<span class="fstat-no" title="function not covered" ></span>function _utf8Slice(buf,start,end){<span class="cstat-no" title="statement not covered" ></span>var res="";<span class="cstat-no" title="statement not covered" >v</span>ar tmp="";<span class="cstat-no" title="statement not covered" >e</span>nd=Math.min(buf.length,end);<span class="cstat-no" title="statement not covered" >f</span>or(var i=start;i&lt;end;i++){<span class="cstat-no" title="statement not covered" >if(buf[i]&lt;=127){<span class="cstat-no" title="statement not covered" >res+=decodeUtf8Char(tmp)+String.fromCharCode(buf[i]);<span class="cstat-no" title="statement not covered" >t</span>mp=""}</span>else{<span class="cstat-no" title="statement not covered" >tmp+="%"+buf[i].toString(16)}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn res+decodeUtf8Char(tmp)}<span class="fstat-no" title="function not covered" ></span>function _asciiSlice(buf,start,end){<span class="cstat-no" title="statement not covered" ></span>var ret="";<span class="cstat-no" title="statement not covered" >e</span>nd=Math.min(buf.length,end);<span class="cstat-no" title="statement not covered" >f</span>or(var i=start;i&lt;end;i++)<span class="cstat-no" title="statement not covered" >ret+=String.fromCharCode(buf[i]);<span class="cstat-no" title="statement not covered" >r</span></span>eturn ret}<span class="fstat-no" title="function not covered" ></span>function _binarySlice(buf,start,end){<span class="cstat-no" title="statement not covered" ></span>return _asciiSlice(buf,start,end)}<span class="fstat-no" title="function not covered" ></span>function _hexSlice(buf,start,end){<span class="cstat-no" title="statement not covered" ></span>var len=buf.length;<span class="cstat-no" title="statement not covered" >i</span>f(!start||start&lt;0)<span class="cstat-no" title="statement not covered" >start=0;<span class="cstat-no" title="statement not covered" >i</span></span>f(!end||end&lt;0||end&gt;len)<span class="cstat-no" title="statement not covered" >end=len;<span class="cstat-no" title="statement not covered" >v</span></span>ar out="";<span class="cstat-no" title="statement not covered" >f</span>or(var i=start;i&lt;end;i++){<span class="cstat-no" title="statement not covered" >out+=toHex(buf[i])}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn out}<span class="fstat-no" title="function not covered" ></span>function _utf16leSlice(buf,start,end){<span class="cstat-no" title="statement not covered" ></span>var bytes=buf.slice(start,end);<span class="cstat-no" title="statement not covered" >v</span>ar res="";<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;bytes.length;i+=2){<span class="cstat-no" title="statement not covered" >res+=String.fromCharCode(bytes[i]+bytes[i+1]*256)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn res}</span>Buffer.prototype.slice=<span class="fstat-no" title="function not covered" >function(start,end){<span class="cstat-no" title="statement not covered" ></span>var len=this.length;<span class="cstat-no" title="statement not covered" >s</span>tart=clamp(start,len,0);<span class="cstat-no" title="statement not covered" >e</span>nd=clamp(end,len,len);<span class="cstat-no" title="statement not covered" >i</span>f(Buffer._useTypedArrays){<span class="cstat-no" title="statement not covered" >return Buffer._augment(this.subarray(start,end))}</span>else{<span class="cstat-no" title="statement not covered" >var sliceLen=end-start;<span class="cstat-no" title="statement not covered" >v</span>ar newBuf=new Buffer(sliceLen,undefined,true);<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;sliceLen;i++){<span class="cstat-no" title="statement not covered" >newBuf[i]=this[i+start]}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn newBuf}</span>}</span>;Buffer.prototype.get=<span class="fstat-no" title="function not covered" >function(offset){<span class="cstat-no" title="statement not covered" ></span>console.log(".get() is deprecated. Access using array indexes instead.");<span class="cstat-no" title="statement not covered" >r</span>eturn this.readUInt8(offset)}</span>;Buffer.prototype.set=<span class="fstat-no" title="function not covered" >function(v,offset){<span class="cstat-no" title="statement not covered" ></span>console.log(".set() is deprecated. Access using array indexes instead.");<span class="cstat-no" title="statement not covered" >r</span>eturn this.writeUInt8(v,offset)}</span>;Buffer.prototype.readUInt8=<span class="fstat-no" title="function not covered" >function(offset,noAssert){<span class="cstat-no" title="statement not covered" ></span>if(!noAssert){<span class="cstat-no" title="statement not covered" >assert(offset!==undefined&amp;&amp;offset!==null,"missing offset");<span class="cstat-no" title="statement not covered" >a</span>ssert(offset&lt;this.length,"Trying to read beyond buffer length")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(offset&gt;=this.length)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >r</span></span>eturn this[offset]}</span>;<span class="fstat-no" title="function not covered" >function _readUInt16(buf,offset,littleEndian,noAssert){<span class="cstat-no" title="statement not covered" ></span>if(!noAssert){<span class="cstat-no" title="statement not covered" >assert(typeof littleEndian==="boolean","missing or invalid endian");<span class="cstat-no" title="statement not covered" >a</span>ssert(offset!==undefined&amp;&amp;offset!==null,"missing offset");<span class="cstat-no" title="statement not covered" >a</span>ssert(offset+1&lt;buf.length,"Trying to read beyond buffer length")}<span class="cstat-no" title="statement not covered" ></span>v</span>ar len=buf.length;<span class="cstat-no" title="statement not covered" >i</span>f(offset&gt;=len)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >v</span></span>ar val;<span class="cstat-no" title="statement not covered" >i</span>f(littleEndian){<span class="cstat-no" title="statement not covered" >val=buf[offset];<span class="cstat-no" title="statement not covered" >i</span>f(offset+1&lt;len)<span class="cstat-no" title="statement not covered" >val|=buf[offset+1]&lt;&lt;8}</span></span>else{<span class="cstat-no" title="statement not covered" >val=buf[offset]&lt;&lt;8;<span class="cstat-no" title="statement not covered" >i</span>f(offset+1&lt;len)<span class="cstat-no" title="statement not covered" >val|=buf[offset+1]}<span class="cstat-no" title="statement not covered" ></span></span>r</span>eturn val}</span>Buffer.prototype.readUInt16LE=<span class="fstat-no" title="function not covered" >function(offset,noAssert){<span class="cstat-no" title="statement not covered" ></span>return _readUInt16(this,offset,true,noAssert)}</span>;Buffer.prototype.readUInt16BE=<span class="fstat-no" title="function not covered" >function(offset,noAssert){<span class="cstat-no" title="statement not covered" ></span>return _readUInt16(this,offset,false,noAssert)}</span>;<span class="fstat-no" title="function not covered" >function _readUInt32(buf,offset,littleEndian,noAssert){<span class="cstat-no" title="statement not covered" ></span>if(!noAssert){<span class="cstat-no" title="statement not covered" >assert(typeof littleEndian==="boolean","missing or invalid endian");<span class="cstat-no" title="statement not covered" >a</span>ssert(offset!==undefined&amp;&amp;offset!==null,"missing offset");<span class="cstat-no" title="statement not covered" >a</span>ssert(offset+3&lt;buf.length,"Trying to read beyond buffer length")}<span class="cstat-no" title="statement not covered" ></span>v</span>ar len=buf.length;<span class="cstat-no" title="statement not covered" >i</span>f(offset&gt;=len)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >v</span></span>ar val;<span class="cstat-no" title="statement not covered" >i</span>f(littleEndian){<span class="cstat-no" title="statement not covered" >if(offset+2&lt;len)<span class="cstat-no" title="statement not covered" >val=buf[offset+2]&lt;&lt;16;<span class="cstat-no" title="statement not covered" >i</span></span>f(offset+1&lt;len)<span class="cstat-no" title="statement not covered" >val|=buf[offset+1]&lt;&lt;8;<span class="cstat-no" title="statement not covered" >v</span></span>al|=buf[offset];<span class="cstat-no" title="statement not covered" >i</span>f(offset+3&lt;len)<span class="cstat-no" title="statement not covered" >val=val+(buf[offset+3]&lt;&lt;24&gt;&gt;&gt;0)}</span></span>else{<span class="cstat-no" title="statement not covered" >if(offset+1&lt;len)<span class="cstat-no" title="statement not covered" >val=buf[offset+1]&lt;&lt;16;<span class="cstat-no" title="statement not covered" >i</span></span>f(offset+2&lt;len)<span class="cstat-no" title="statement not covered" >val|=buf[offset+2]&lt;&lt;8;<span class="cstat-no" title="statement not covered" >i</span></span>f(offset+3&lt;len)<span class="cstat-no" title="statement not covered" >val|=buf[offset+3];<span class="cstat-no" title="statement not covered" >v</span></span>al=val+(buf[offset]&lt;&lt;24&gt;&gt;&gt;0)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn val}</span>Buffer.prototype.readUInt32LE=<span class="fstat-no" title="function not covered" >function(offset,noAssert){<span class="cstat-no" title="statement not covered" ></span>return _readUInt32(this,offset,true,noAssert)}</span>;Buffer.prototype.readUInt32BE=<span class="fstat-no" title="function not covered" >function(offset,noAssert){<span class="cstat-no" title="statement not covered" ></span>return _readUInt32(this,offset,false,noAssert)}</span>;Buffer.prototype.readInt8=<span class="fstat-no" title="function not covered" >function(offset,noAssert){<span class="cstat-no" title="statement not covered" ></span>if(!noAssert){<span class="cstat-no" title="statement not covered" >assert(offset!==undefined&amp;&amp;offset!==null,"missing offset");<span class="cstat-no" title="statement not covered" >a</span>ssert(offset&lt;this.length,"Trying to read beyond buffer length")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(offset&gt;=this.length)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >v</span></span>ar neg=this[offset]&amp;128;<span class="cstat-no" title="statement not covered" >i</span>f(neg)<span class="cstat-no" title="statement not covered" >return(255-this[offset]+1)*-1;e</span>lse <span class="cstat-no" title="statement not covered" >return this[offset]}</span></span>;<span class="fstat-no" title="function not covered" >function _readInt16(buf,offset,littleEndian,noAssert){<span class="cstat-no" title="statement not covered" ></span>if(!noAssert){<span class="cstat-no" title="statement not covered" >assert(typeof littleEndian==="boolean","missing or invalid endian");<span class="cstat-no" title="statement not covered" >a</span>ssert(offset!==undefined&amp;&amp;offset!==null,"missing offset");<span class="cstat-no" title="statement not covered" >a</span>ssert(offset+1&lt;buf.length,"Trying to read beyond buffer length")}<span class="cstat-no" title="statement not covered" ></span>v</span>ar len=buf.length;<span class="cstat-no" title="statement not covered" >i</span>f(offset&gt;=len)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >v</span></span>ar val=_readUInt16(buf,offset,littleEndian,true);<span class="cstat-no" title="statement not covered" >v</span>ar neg=val&amp;32768;<span class="cstat-no" title="statement not covered" >i</span>f(neg)<span class="cstat-no" title="statement not covered" >return(65535-val+1)*-1;e</span>lse <span class="cstat-no" title="statement not covered" >return val}</span></span>Buffer.prototype.readInt16LE=<span class="fstat-no" title="function not covered" >function(offset,noAssert){<span class="cstat-no" title="statement not covered" ></span>return _readInt16(this,offset,true,noAssert)}</span>;Buffer.prototype.readInt16BE=<span class="fstat-no" title="function not covered" >function(offset,noAssert){<span class="cstat-no" title="statement not covered" ></span>return _readInt16(this,offset,false,noAssert)}</span>;<span class="fstat-no" title="function not covered" >function _readInt32(buf,offset,littleEndian,noAssert){<span class="cstat-no" title="statement not covered" ></span>if(!noAssert){<span class="cstat-no" title="statement not covered" >assert(typeof littleEndian==="boolean","missing or invalid endian");<span class="cstat-no" title="statement not covered" >a</span>ssert(offset!==undefined&amp;&amp;offset!==null,"missing offset");<span class="cstat-no" title="statement not covered" >a</span>ssert(offset+3&lt;buf.length,"Trying to read beyond buffer length")}<span class="cstat-no" title="statement not covered" ></span>v</span>ar len=buf.length;<span class="cstat-no" title="statement not covered" >i</span>f(offset&gt;=len)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >v</span></span>ar val=_readUInt32(buf,offset,littleEndian,true);<span class="cstat-no" title="statement not covered" >v</span>ar neg=val&amp;2147483648;<span class="cstat-no" title="statement not covered" >i</span>f(neg)<span class="cstat-no" title="statement not covered" >return(4294967295-val+1)*-1;e</span>lse <span class="cstat-no" title="statement not covered" >return val}</span></span>Buffer.prototype.readInt32LE=<span class="fstat-no" title="function not covered" >function(offset,noAssert){<span class="cstat-no" title="statement not covered" ></span>return _readInt32(this,offset,true,noAssert)}</span>;Buffer.prototype.readInt32BE=<span class="fstat-no" title="function not covered" >function(offset,noAssert){<span class="cstat-no" title="statement not covered" ></span>return _readInt32(this,offset,false,noAssert)}</span>;<span class="fstat-no" title="function not covered" >function _readFloat(buf,offset,littleEndian,noAssert){<span class="cstat-no" title="statement not covered" ></span>if(!noAssert){<span class="cstat-no" title="statement not covered" >assert(typeof littleEndian==="boolean","missing or invalid endian");<span class="cstat-no" title="statement not covered" >a</span>ssert(offset+3&lt;buf.length,"Trying to read beyond buffer length")}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn ieee754.read(buf,offset,littleEndian,23,4)}</span>Buffer.prototype.readFloatLE=<span class="fstat-no" title="function not covered" >function(offset,noAssert){<span class="cstat-no" title="statement not covered" ></span>return _readFloat(this,offset,true,noAssert)}</span>;Buffer.prototype.readFloatBE=<span class="fstat-no" title="function not covered" >function(offset,noAssert){<span class="cstat-no" title="statement not covered" ></span>return _readFloat(this,offset,false,noAssert)}</span>;<span class="fstat-no" title="function not covered" >function _readDouble(buf,offset,littleEndian,noAssert){<span class="cstat-no" title="statement not covered" ></span>if(!noAssert){<span class="cstat-no" title="statement not covered" >assert(typeof littleEndian==="boolean","missing or invalid endian");<span class="cstat-no" title="statement not covered" >a</span>ssert(offset+7&lt;buf.length,"Trying to read beyond buffer length")}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn ieee754.read(buf,offset,littleEndian,52,8)}</span>Buffer.prototype.readDoubleLE=<span class="fstat-no" title="function not covered" >function(offset,noAssert){<span class="cstat-no" title="statement not covered" ></span>return _readDouble(this,offset,true,noAssert)}</span>;Buffer.prototype.readDoubleBE=<span class="fstat-no" title="function not covered" >function(offset,noAssert){<span class="cstat-no" title="statement not covered" ></span>return _readDouble(this,offset,false,noAssert)}</span>;Buffer.prototype.writeUInt8=<span class="fstat-no" title="function not covered" >function(value,offset,noAssert){<span class="cstat-no" title="statement not covered" ></span>if(!noAssert){<span class="cstat-no" title="statement not covered" >assert(value!==undefined&amp;&amp;value!==null,"missing value");<span class="cstat-no" title="statement not covered" >a</span>ssert(offset!==undefined&amp;&amp;offset!==null,"missing offset");<span class="cstat-no" title="statement not covered" >a</span>ssert(offset&lt;this.length,"trying to write beyond buffer length");<span class="cstat-no" title="statement not covered" >v</span>erifuint(value,255)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(offset&gt;=this.length)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >t</span></span>his[offset]=value}</span>;<span class="fstat-no" title="function not covered" >function _writeUInt16(buf,value,offset,littleEndian,noAssert){<span class="cstat-no" title="statement not covered" ></span>if(!noAssert){<span class="cstat-no" title="statement not covered" >assert(value!==undefined&amp;&amp;value!==null,"missing value");<span class="cstat-no" title="statement not covered" >a</span>ssert(typeof littleEndian==="boolean","missing or invalid endian");<span class="cstat-no" title="statement not covered" >a</span>ssert(offset!==undefined&amp;&amp;offset!==null,"missing offset");<span class="cstat-no" title="statement not covered" >a</span>ssert(offset+1&lt;buf.length,"trying to write beyond buffer length");<span class="cstat-no" title="statement not covered" >v</span>erifuint(value,65535)}<span class="cstat-no" title="statement not covered" ></span>v</span>ar len=buf.length;<span class="cstat-no" title="statement not covered" >i</span>f(offset&gt;=len)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >f</span></span>or(var i=0,j=Math.min(len-offset,2);i&lt;j;i++){<span class="cstat-no" title="statement not covered" >buf[offset+i]=(value&amp;255&lt;&lt;8*(littleEndian?i:1-i))&gt;&gt;&gt;(littleEndian?i:1-i)*8}</span>}</span>Buffer.prototype.writeUInt16LE=<span class="fstat-no" title="function not covered" >function(value,offset,noAssert){<span class="cstat-no" title="statement not covered" ></span>_writeUInt16(this,value,offset,true,noAssert)}</span>;Buffer.prototype.writeUInt16BE=<span class="fstat-no" title="function not covered" >function(value,offset,noAssert){<span class="cstat-no" title="statement not covered" ></span>_writeUInt16(this,value,offset,false,noAssert)}</span>;<span class="fstat-no" title="function not covered" >function _writeUInt32(buf,value,offset,littleEndian,noAssert){<span class="cstat-no" title="statement not covered" ></span>if(!noAssert){<span class="cstat-no" title="statement not covered" >assert(value!==undefined&amp;&amp;value!==null,"missing value");<span class="cstat-no" title="statement not covered" >a</span>ssert(typeof littleEndian==="boolean","missing or invalid endian");<span class="cstat-no" title="statement not covered" >a</span>ssert(offset!==undefined&amp;&amp;offset!==null,"missing offset");<span class="cstat-no" title="statement not covered" >a</span>ssert(offset+3&lt;buf.length,"trying to write beyond buffer length");<span class="cstat-no" title="statement not covered" >v</span>erifuint(value,4294967295)}<span class="cstat-no" title="statement not covered" ></span>v</span>ar len=buf.length;<span class="cstat-no" title="statement not covered" >i</span>f(offset&gt;=len)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >f</span></span>or(var i=0,j=Math.min(len-offset,4);i&lt;j;i++){<span class="cstat-no" title="statement not covered" >buf[offset+i]=value&gt;&gt;&gt;(littleEndian?i:3-i)*8&amp;255}</span>}</span>Buffer.prototype.writeUInt32LE=<span class="fstat-no" title="function not covered" >function(value,offset,noAssert){<span class="cstat-no" title="statement not covered" ></span>_writeUInt32(this,value,offset,true,noAssert)}</span>;Buffer.prototype.writeUInt32BE=<span class="fstat-no" title="function not covered" >function(value,offset,noAssert){<span class="cstat-no" title="statement not covered" ></span>_writeUInt32(this,value,offset,false,noAssert)}</span>;Buffer.prototype.writeInt8=<span class="fstat-no" title="function not covered" >function(value,offset,noAssert){<span class="cstat-no" title="statement not covered" ></span>if(!noAssert){<span class="cstat-no" title="statement not covered" >assert(value!==undefined&amp;&amp;value!==null,"missing value");<span class="cstat-no" title="statement not covered" >a</span>ssert(offset!==undefined&amp;&amp;offset!==null,"missing offset");<span class="cstat-no" title="statement not covered" >a</span>ssert(offset&lt;this.length,"Trying to write beyond buffer length");<span class="cstat-no" title="statement not covered" >v</span>erifsint(value,127,-128)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(offset&gt;=this.length)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >i</span></span>f(value&gt;=0)<span class="cstat-no" title="statement not covered" >this.writeUInt8(value,offset,noAssert);e</span>lse <span class="cstat-no" title="statement not covered" >this.writeUInt8(255+value+1,offset,noAssert)}</span></span>;<span class="fstat-no" title="function not covered" >function _writeInt16(buf,value,offset,littleEndian,noAssert){<span class="cstat-no" title="statement not covered" ></span>if(!noAssert){<span class="cstat-no" title="statement not covered" >assert(value!==undefined&amp;&amp;value!==null,"missing value");<span class="cstat-no" title="statement not covered" >a</span>ssert(typeof littleEndian==="boolean","missing or invalid endian");<span class="cstat-no" title="statement not covered" >a</span>ssert(offset!==undefined&amp;&amp;offset!==null,"missing offset");<span class="cstat-no" title="statement not covered" >a</span>ssert(offset+1&lt;buf.length,"Trying to write beyond buffer length");<span class="cstat-no" title="statement not covered" >v</span>erifsint(value,32767,-32768)}<span class="cstat-no" title="statement not covered" ></span>v</span>ar len=buf.length;<span class="cstat-no" title="statement not covered" >i</span>f(offset&gt;=len)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >i</span></span>f(value&gt;=0)<span class="cstat-no" title="statement not covered" >_writeUInt16(buf,value,offset,littleEndian,noAssert);e</span>lse <span class="cstat-no" title="statement not covered" >_writeUInt16(buf,65535+value+1,offset,littleEndian,noAssert)}</span></span>Buffer.prototype.writeInt16LE=<span class="fstat-no" title="function not covered" >function(value,offset,noAssert){<span class="cstat-no" title="statement not covered" ></span>_writeInt16(this,value,offset,true,noAssert)}</span>;Buffer.prototype.writeInt16BE=<span class="fstat-no" title="function not covered" >function(value,offset,noAssert){<span class="cstat-no" title="statement not covered" ></span>_writeInt16(this,value,offset,false,noAssert)}</span>;<span class="fstat-no" title="function not covered" >function _writeInt32(buf,value,offset,littleEndian,noAssert){<span class="cstat-no" title="statement not covered" ></span>if(!noAssert){<span class="cstat-no" title="statement not covered" >assert(value!==undefined&amp;&amp;value!==null,"missing value");<span class="cstat-no" title="statement not covered" >a</span>ssert(typeof littleEndian==="boolean","missing or invalid endian");<span class="cstat-no" title="statement not covered" >a</span>ssert(offset!==undefined&amp;&amp;offset!==null,"missing offset");<span class="cstat-no" title="statement not covered" >a</span>ssert(offset+3&lt;buf.length,"Trying to write beyond buffer length");<span class="cstat-no" title="statement not covered" >v</span>erifsint(value,2147483647,-2147483648)}<span class="cstat-no" title="statement not covered" ></span>v</span>ar len=buf.length;<span class="cstat-no" title="statement not covered" >i</span>f(offset&gt;=len)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >i</span></span>f(value&gt;=0)<span class="cstat-no" title="statement not covered" >_writeUInt32(buf,value,offset,littleEndian,noAssert);e</span>lse <span class="cstat-no" title="statement not covered" >_writeUInt32(buf,4294967295+value+1,offset,littleEndian,noAssert)}</span></span>Buffer.prototype.writeInt32LE=<span class="fstat-no" title="function not covered" >function(value,offset,noAssert){<span class="cstat-no" title="statement not covered" ></span>_writeInt32(this,value,offset,true,noAssert)}</span>;Buffer.prototype.writeInt32BE=<span class="fstat-no" title="function not covered" >function(value,offset,noAssert){<span class="cstat-no" title="statement not covered" ></span>_writeInt32(this,value,offset,false,noAssert)}</span>;<span class="fstat-no" title="function not covered" >function _writeFloat(buf,value,offset,littleEndian,noAssert){<span class="cstat-no" title="statement not covered" ></span>if(!noAssert){<span class="cstat-no" title="statement not covered" >assert(value!==undefined&amp;&amp;value!==null,"missing value");<span class="cstat-no" title="statement not covered" >a</span>ssert(typeof littleEndian==="boolean","missing or invalid endian");<span class="cstat-no" title="statement not covered" >a</span>ssert(offset!==undefined&amp;&amp;offset!==null,"missing offset");<span class="cstat-no" title="statement not covered" >a</span>ssert(offset+3&lt;buf.length,"Trying to write beyond buffer length");<span class="cstat-no" title="statement not covered" >v</span>erifIEEE754(value,3.4028234663852886e38,-3.4028234663852886e38)}<span class="cstat-no" title="statement not covered" ></span>v</span>ar len=buf.length;<span class="cstat-no" title="statement not covered" >i</span>f(offset&gt;=len)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >i</span></span>eee754.write(buf,value,offset,littleEndian,23,4)}</span>Buffer.prototype.writeFloatLE=<span class="fstat-no" title="function not covered" >function(value,offset,noAssert){<span class="cstat-no" title="statement not covered" ></span>_writeFloat(this,value,offset,true,noAssert)}</span>;Buffer.prototype.writeFloatBE=<span class="fstat-no" title="function not covered" >function(value,offset,noAssert){<span class="cstat-no" title="statement not covered" ></span>_writeFloat(this,value,offset,false,noAssert)}</span>;<span class="fstat-no" title="function not covered" >function _writeDouble(buf,value,offset,littleEndian,noAssert){<span class="cstat-no" title="statement not covered" ></span>if(!noAssert){<span class="cstat-no" title="statement not covered" >assert(value!==undefined&amp;&amp;value!==null,"missing value");<span class="cstat-no" title="statement not covered" >a</span>ssert(typeof littleEndian==="boolean","missing or invalid endian");<span class="cstat-no" title="statement not covered" >a</span>ssert(offset!==undefined&amp;&amp;offset!==null,"missing offset");<span class="cstat-no" title="statement not covered" >a</span>ssert(offset+7&lt;buf.length,"Trying to write beyond buffer length");<span class="cstat-no" title="statement not covered" >v</span>erifIEEE754(value,1.7976931348623157e308,-1.7976931348623157e308)}<span class="cstat-no" title="statement not covered" ></span>v</span>ar len=buf.length;<span class="cstat-no" title="statement not covered" >i</span>f(offset&gt;=len)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >i</span></span>eee754.write(buf,value,offset,littleEndian,52,8)}</span>Buffer.prototype.writeDoubleLE=<span class="fstat-no" title="function not covered" >function(value,offset,noAssert){<span class="cstat-no" title="statement not covered" ></span>_writeDouble(this,value,offset,true,noAssert)}</span>;Buffer.prototype.writeDoubleBE=<span class="fstat-no" title="function not covered" >function(value,offset,noAssert){<span class="cstat-no" title="statement not covered" ></span>_writeDouble(this,value,offset,false,noAssert)}</span>;Buffer.prototype.fill=<span class="fstat-no" title="function not covered" >function(value,start,end){<span class="cstat-no" title="statement not covered" ></span>if(!value)<span class="cstat-no" title="statement not covered" >value=0;<span class="cstat-no" title="statement not covered" >i</span></span>f(!start)<span class="cstat-no" title="statement not covered" >start=0;<span class="cstat-no" title="statement not covered" >i</span></span>f(!end)<span class="cstat-no" title="statement not covered" >end=this.length;<span class="cstat-no" title="statement not covered" >i</span></span>f(typeof value==="string"){<span class="cstat-no" title="statement not covered" >value=value.charCodeAt(0)}<span class="cstat-no" title="statement not covered" ></span>a</span>ssert(typeof value==="number"&amp;&amp;!isNaN(value),"value is not a number");<span class="cstat-no" title="statement not covered" >a</span>ssert(end&gt;=start,"end &lt; start");<span class="cstat-no" title="statement not covered" >i</span>f(end===start)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >i</span></span>f(this.length===0)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >a</span></span>ssert(start&gt;=0&amp;&amp;start&lt;this.length,"start out of bounds");<span class="cstat-no" title="statement not covered" >a</span>ssert(end&gt;=0&amp;&amp;end&lt;=this.length,"end out of bounds");<span class="cstat-no" title="statement not covered" >f</span>or(var i=start;i&lt;end;i++){<span class="cstat-no" title="statement not covered" >this[i]=value}</span>}</span>;Buffer.prototype.inspect=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var out=[];<span class="cstat-no" title="statement not covered" >v</span>ar len=this.length;<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;len;i++){<span class="cstat-no" title="statement not covered" >out[i]=toHex(this[i]);<span class="cstat-no" title="statement not covered" >i</span>f(i===exports.INSPECT_MAX_BYTES){<span class="cstat-no" title="statement not covered" >out[i+1]="...";<span class="cstat-no" title="statement not covered" >b</span>reak}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn"&lt;Buffer "+out.join(" ")+"&gt;"}</span>;Buffer.prototype.toArrayBuffer=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(typeof Uint8Array!=="undefined"){<span class="cstat-no" title="statement not covered" >if(Buffer._useTypedArrays){<span class="cstat-no" title="statement not covered" >return new Buffer(this).buffer}</span>else{<span class="cstat-no" title="statement not covered" >var buf=new Uint8Array(this.length);<span class="cstat-no" title="statement not covered" >f</span>or(var i=0,len=buf.length;i&lt;len;i+=1)<span class="cstat-no" title="statement not covered" >buf[i]=this[i];<span class="cstat-no" title="statement not covered" >r</span></span>eturn buf.buffer}</span>}</span>else{<span class="cstat-no" title="statement not covered" >throw new Error("Buffer.toArrayBuffer not supported in this browser")}</span>}</span>;<span class="fstat-no" title="function not covered" >function stringtrim(str){<span class="cstat-no" title="statement not covered" ></span>if(str.trim)<span class="cstat-no" title="statement not covered" >return str.trim();<span class="cstat-no" title="statement not covered" >r</span></span>eturn str.replace(/^\s+|\s+$/g,"")}</span>var BP=Buffer.prototype;Buffer._augment=<span class="fstat-no" title="function not covered" >function(arr){<span class="cstat-no" title="statement not covered" ></span>arr._isBuffer=true;<span class="cstat-no" title="statement not covered" >a</span>rr._get=arr.get;<span class="cstat-no" title="statement not covered" >a</span>rr._set=arr.set;<span class="cstat-no" title="statement not covered" >a</span>rr.get=BP.get;<span class="cstat-no" title="statement not covered" >a</span>rr.set=BP.set;<span class="cstat-no" title="statement not covered" >a</span>rr.write=BP.write;<span class="cstat-no" title="statement not covered" >a</span>rr.toString=BP.toString;<span class="cstat-no" title="statement not covered" >a</span>rr.toLocaleString=BP.toString;<span class="cstat-no" title="statement not covered" >a</span>rr.toJSON=BP.toJSON;<span class="cstat-no" title="statement not covered" >a</span>rr.copy=BP.copy;<span class="cstat-no" title="statement not covered" >a</span>rr.slice=BP.slice;<span class="cstat-no" title="statement not covered" >a</span>rr.readUInt8=BP.readUInt8;<span class="cstat-no" title="statement not covered" >a</span>rr.readUInt16LE=BP.readUInt16LE;<span class="cstat-no" title="statement not covered" >a</span>rr.readUInt16BE=BP.readUInt16BE;<span class="cstat-no" title="statement not covered" >a</span>rr.readUInt32LE=BP.readUInt32LE;<span class="cstat-no" title="statement not covered" >a</span>rr.readUInt32BE=BP.readUInt32BE;<span class="cstat-no" title="statement not covered" >a</span>rr.readInt8=BP.readInt8;<span class="cstat-no" title="statement not covered" >a</span>rr.readInt16LE=BP.readInt16LE;<span class="cstat-no" title="statement not covered" >a</span>rr.readInt16BE=BP.readInt16BE;<span class="cstat-no" title="statement not covered" >a</span>rr.readInt32LE=BP.readInt32LE;<span class="cstat-no" title="statement not covered" >a</span>rr.readInt32BE=BP.readInt32BE;<span class="cstat-no" title="statement not covered" >a</span>rr.readFloatLE=BP.readFloatLE;<span class="cstat-no" title="statement not covered" >a</span>rr.readFloatBE=BP.readFloatBE;<span class="cstat-no" title="statement not covered" >a</span>rr.readDoubleLE=BP.readDoubleLE;<span class="cstat-no" title="statement not covered" >a</span>rr.readDoubleBE=BP.readDoubleBE;<span class="cstat-no" title="statement not covered" >a</span>rr.writeUInt8=BP.writeUInt8;<span class="cstat-no" title="statement not covered" >a</span>rr.writeUInt16LE=BP.writeUInt16LE;<span class="cstat-no" title="statement not covered" >a</span>rr.writeUInt16BE=BP.writeUInt16BE;<span class="cstat-no" title="statement not covered" >a</span>rr.writeUInt32LE=BP.writeUInt32LE;</span>
<span class="cstat-no" title="statement not covered" >arr.writeUInt32BE=BP.writeUInt32BE;<span class="cstat-no" title="statement not covered" >a</span>rr.writeInt8=BP.writeInt8;<span class="cstat-no" title="statement not covered" >a</span>rr.writeInt16LE=BP.writeInt16LE;<span class="cstat-no" title="statement not covered" >a</span>rr.writeInt16BE=BP.writeInt16BE;<span class="cstat-no" title="statement not covered" >a</span>rr.writeInt32LE=BP.writeInt32LE;<span class="cstat-no" title="statement not covered" >a</span>rr.writeInt32BE=BP.writeInt32BE;<span class="cstat-no" title="statement not covered" >a</span>rr.writeFloatLE=BP.writeFloatLE;<span class="cstat-no" title="statement not covered" >a</span>rr.writeFloatBE=BP.writeFloatBE;<span class="cstat-no" title="statement not covered" >a</span>rr.writeDoubleLE=BP.writeDoubleLE;<span class="cstat-no" title="statement not covered" >a</span>rr.writeDoubleBE=BP.writeDoubleBE;<span class="cstat-no" title="statement not covered" >a</span>rr.fill=BP.fill;<span class="cstat-no" title="statement not covered" >a</span>rr.inspect=BP.inspect;<span class="cstat-no" title="statement not covered" >a</span>rr.toArrayBuffer=BP.toArrayBuffer;<span class="cstat-no" title="statement not covered" >r</span>eturn arr}</span>;<span class="fstat-no" title="function not covered" >function clamp(index,len,defaultValue){<span class="cstat-no" title="statement not covered" ></span>if(typeof index!=="number")<span class="cstat-no" title="statement not covered" >return defaultValue;<span class="cstat-no" title="statement not covered" >i</span></span>ndex=~~index;<span class="cstat-no" title="statement not covered" >i</span>f(index&gt;=len)<span class="cstat-no" title="statement not covered" >return len;<span class="cstat-no" title="statement not covered" >i</span></span>f(index&gt;=0)<span class="cstat-no" title="statement not covered" >return index;<span class="cstat-no" title="statement not covered" >i</span></span>ndex+=len;<span class="cstat-no" title="statement not covered" >i</span>f(index&gt;=0)<span class="cstat-no" title="statement not covered" >return index;<span class="cstat-no" title="statement not covered" >r</span></span>eturn 0}<span class="fstat-no" title="function not covered" ></span>function coerce(length){<span class="cstat-no" title="statement not covered" ></span>length=~~Math.ceil(+length);<span class="cstat-no" title="statement not covered" >r</span>eturn length&lt;0?0:length}<span class="fstat-no" title="function not covered" ></span>function isArray(subject){<span class="cstat-no" title="statement not covered" ></span>return(Array.isArray||<span class="fstat-no" title="function not covered" >function(subject){<span class="cstat-no" title="statement not covered" ></span>return Object.prototype.toString.call(subject)==="[object Array]"}</span>)(subject)}<span class="fstat-no" title="function not covered" ></span>function isArrayish(subject){<span class="cstat-no" title="statement not covered" ></span>return isArray(subject)||Buffer.isBuffer(subject)||subject&amp;&amp;typeof subject==="object"&amp;&amp;typeof subject.length==="number"}<span class="fstat-no" title="function not covered" ></span>function toHex(n){<span class="cstat-no" title="statement not covered" ></span>if(n&lt;16)<span class="cstat-no" title="statement not covered" >return"0"+n.toString(16);<span class="cstat-no" title="statement not covered" >r</span></span>eturn n.toString(16)}<span class="fstat-no" title="function not covered" ></span>function utf8ToBytes(str){<span class="cstat-no" title="statement not covered" ></span>var byteArray=[];<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;str.length;i++){<span class="cstat-no" title="statement not covered" >var b=str.charCodeAt(i);<span class="cstat-no" title="statement not covered" >i</span>f(b&lt;=127)<span class="cstat-no" title="statement not covered" >byteArray.push(str.charCodeAt(i));e</span>lse{<span class="cstat-no" title="statement not covered" >var start=i;<span class="cstat-no" title="statement not covered" >i</span>f(b&gt;=55296&amp;&amp;b&lt;=57343)<span class="cstat-no" title="statement not covered" >i++;<span class="cstat-no" title="statement not covered" >v</span></span>ar h=encodeURIComponent(str.slice(start,i+1)).substr(1).split("%");<span class="cstat-no" title="statement not covered" >f</span>or(var j=0;j&lt;h.length;j++)<span class="cstat-no" title="statement not covered" >byteArray.push(parseInt(h[j],16))}</span></span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn byteArray}<span class="fstat-no" title="function not covered" ></span>function asciiToBytes(str){<span class="cstat-no" title="statement not covered" ></span>var byteArray=[];<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;str.length;i++){<span class="cstat-no" title="statement not covered" >byteArray.push(str.charCodeAt(i)&amp;255)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn byteArray}<span class="fstat-no" title="function not covered" ></span>function utf16leToBytes(str){<span class="cstat-no" title="statement not covered" ></span>var c,hi,lo;<span class="cstat-no" title="statement not covered" >v</span>ar byteArray=[];<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;str.length;i++){<span class="cstat-no" title="statement not covered" >c=str.charCodeAt(i);<span class="cstat-no" title="statement not covered" >h</span>i=c&gt;&gt;8;<span class="cstat-no" title="statement not covered" >l</span>o=c%256;<span class="cstat-no" title="statement not covered" >b</span>yteArray.push(lo);<span class="cstat-no" title="statement not covered" >b</span>yteArray.push(hi)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn byteArray}<span class="fstat-no" title="function not covered" ></span>function base64ToBytes(str){<span class="cstat-no" title="statement not covered" ></span>return base64.toByteArray(str)}<span class="fstat-no" title="function not covered" ></span>function blitBuffer(src,dst,offset,length){<span class="cstat-no" title="statement not covered" ></span>var pos;<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;length;i++){<span class="cstat-no" title="statement not covered" >if(i+offset&gt;=dst.length||i&gt;=src.length)<span class="cstat-no" title="statement not covered" >break;<span class="cstat-no" title="statement not covered" >d</span></span>st[i+offset]=src[i]}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn i}<span class="fstat-no" title="function not covered" ></span>function decodeUtf8Char(str){<span class="cstat-no" title="statement not covered" ></span>try{<span class="cstat-no" title="statement not covered" >return decodeURIComponent(str)}</span>catch(err){<span class="cstat-no" title="statement not covered" >return String.fromCharCode(65533)}</span>}<span class="fstat-no" title="function not covered" ></span>function verifuint(value,max){<span class="cstat-no" title="statement not covered" ></span>assert(typeof value==="number","cannot write a non-number as a number");<span class="cstat-no" title="statement not covered" >a</span>ssert(value&gt;=0,"specified a negative value for writing an unsigned value");<span class="cstat-no" title="statement not covered" >a</span>ssert(value&lt;=max,"value is larger than maximum value for type");<span class="cstat-no" title="statement not covered" >a</span>ssert(Math.floor(value)===value,"value has a fractional component")}<span class="fstat-no" title="function not covered" ></span>function verifsint(value,max,min){<span class="cstat-no" title="statement not covered" ></span>assert(typeof value==="number","cannot write a non-number as a number");<span class="cstat-no" title="statement not covered" >a</span>ssert(value&lt;=max,"value larger than maximum allowed value");<span class="cstat-no" title="statement not covered" >a</span>ssert(value&gt;=min,"value smaller than minimum allowed value");<span class="cstat-no" title="statement not covered" >a</span>ssert(Math.floor(value)===value,"value has a fractional component")}<span class="fstat-no" title="function not covered" ></span>function verifIEEE754(value,max,min){<span class="cstat-no" title="statement not covered" ></span>assert(typeof value==="number","cannot write a non-number as a number");<span class="cstat-no" title="statement not covered" >a</span>ssert(value&lt;=max,"value larger than maximum allowed value");<span class="cstat-no" title="statement not covered" >a</span>ssert(value&gt;=min,"value smaller than minimum allowed value")}<span class="fstat-no" title="function not covered" ></span>function assert(test,message){<span class="cstat-no" title="statement not covered" ></span>if(!test)<span class="cstat-no" title="statement not covered" >throw new Error(message||"Failed assertion")}</span></span>},{"base64-js":9,ieee754:27}],9:[function(require,module,exports){var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";(function(exports){"use strict";var Arr=typeof Uint8Array!=="undefined"?Uint8Array:<span class="branch-1 cbranch-no" title="branch not covered" >Array;</span>var PLUS="+".charCodeAt(0);var SLASH="/".charCodeAt(0);var NUMBER="0".charCodeAt(0);var LOWER="a".charCodeAt(0);var UPPER="A".charCodeAt(0);var PLUS_URL_SAFE="-".charCodeAt(0);var SLASH_URL_SAFE="_".charCodeAt(0);<span class="fstat-no" title="function not covered" >function decode(elt){<span class="cstat-no" title="statement not covered" ></span>var code=elt.charCodeAt(0);<span class="cstat-no" title="statement not covered" >i</span>f(code===PLUS||code===PLUS_URL_SAFE)<span class="cstat-no" title="statement not covered" >return 62;<span class="cstat-no" title="statement not covered" >i</span></span>f(code===SLASH||code===SLASH_URL_SAFE)<span class="cstat-no" title="statement not covered" >return 63;<span class="cstat-no" title="statement not covered" >i</span></span>f(code&lt;NUMBER)<span class="cstat-no" title="statement not covered" >return-1;<span class="cstat-no" title="statement not covered" >i</span></span>f(code&lt;NUMBER+10)<span class="cstat-no" title="statement not covered" >return code-NUMBER+26+26;<span class="cstat-no" title="statement not covered" >i</span></span>f(code&lt;UPPER+26)<span class="cstat-no" title="statement not covered" >return code-UPPER;<span class="cstat-no" title="statement not covered" >i</span></span>f(code&lt;LOWER+26)<span class="cstat-no" title="statement not covered" >return code-LOWER+26}<span class="fstat-no" title="function not covered" ></span></span>function b64ToByteArray(b64){<span class="cstat-no" title="statement not covered" ></span>var i,j,l,tmp,placeHolders,arr;<span class="cstat-no" title="statement not covered" >i</span>f(b64.length%4&gt;0){<span class="cstat-no" title="statement not covered" >throw new Error("Invalid string. Length must be a multiple of 4")}<span class="cstat-no" title="statement not covered" ></span>v</span>ar len=b64.length;<span class="cstat-no" title="statement not covered" >p</span>laceHolders="="===b64.charAt(len-2)?2:"="===b64.charAt(len-1)?1:0;<span class="cstat-no" title="statement not covered" >a</span>rr=new Arr(b64.length*3/4-placeHolders);<span class="cstat-no" title="statement not covered" >l</span>=placeHolders&gt;0?b64.length-4:b64.length;<span class="cstat-no" title="statement not covered" >v</span>ar L=0;<span class="fstat-no" title="function not covered" >f</span>unction push(v){<span class="cstat-no" title="statement not covered" ></span>arr[L++]=v}<span class="cstat-no" title="statement not covered" ></span>for(i=0,j=0;i&lt;l;i+=4,j+=3){<span class="cstat-no" title="statement not covered" >tmp=decode(b64.charAt(i))&lt;&lt;18|decode(b64.charAt(i+1))&lt;&lt;12|decode(b64.charAt(i+2))&lt;&lt;6|decode(b64.charAt(i+3));<span class="cstat-no" title="statement not covered" >p</span>ush((tmp&amp;16711680)&gt;&gt;16);<span class="cstat-no" title="statement not covered" >p</span>ush((tmp&amp;65280)&gt;&gt;8);<span class="cstat-no" title="statement not covered" >p</span>ush(tmp&amp;255)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(placeHolders===2){<span class="cstat-no" title="statement not covered" >tmp=decode(b64.charAt(i))&lt;&lt;2|decode(b64.charAt(i+1))&gt;&gt;4;<span class="cstat-no" title="statement not covered" >p</span>ush(tmp&amp;255)}</span>else <span class="cstat-no" title="statement not covered" >if(placeHolders===1){<span class="cstat-no" title="statement not covered" >tmp=decode(b64.charAt(i))&lt;&lt;10|decode(b64.charAt(i+1))&lt;&lt;4|decode(b64.charAt(i+2))&gt;&gt;2;<span class="cstat-no" title="statement not covered" >p</span>ush(tmp&gt;&gt;8&amp;255);<span class="cstat-no" title="statement not covered" >p</span>ush(tmp&amp;255)}<span class="cstat-no" title="statement not covered" ></span>r</span></span>eturn arr}<span class="fstat-no" title="function not covered" ></span>function uint8ToBase64(uint8){<span class="cstat-no" title="statement not covered" ></span>var i,extraBytes=uint8.length%3,output="",temp,length;<span class="fstat-no" title="function not covered" >f</span>unction encode(num){<span class="cstat-no" title="statement not covered" ></span>return lookup.charAt(num)}<span class="fstat-no" title="function not covered" ></span>function tripletToBase64(num){<span class="cstat-no" title="statement not covered" ></span>return encode(num&gt;&gt;18&amp;63)+encode(num&gt;&gt;12&amp;63)+encode(num&gt;&gt;6&amp;63)+encode(num&amp;63)}<span class="cstat-no" title="statement not covered" ></span>for(i=0,length=uint8.length-extraBytes;i&lt;length;i+=3){<span class="cstat-no" title="statement not covered" >temp=(uint8[i]&lt;&lt;16)+(uint8[i+1]&lt;&lt;8)+uint8[i+2];<span class="cstat-no" title="statement not covered" >o</span>utput+=tripletToBase64(temp)}<span class="cstat-no" title="statement not covered" ></span>s</span>witch(extraBytes){case 1:<span class="cstat-no" title="statement not covered" >temp=uint8[uint8.length-1];<span class="cstat-no" title="statement not covered" >o</span>utput+=encode(temp&gt;&gt;2);<span class="cstat-no" title="statement not covered" >o</span>utput+=encode(temp&lt;&lt;4&amp;63);<span class="cstat-no" title="statement not covered" >o</span>utput+="==";<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase 2:<span class="cstat-no" title="statement not covered" >temp=(uint8[uint8.length-2]&lt;&lt;8)+uint8[uint8.length-1];<span class="cstat-no" title="statement not covered" >o</span>utput+=encode(temp&gt;&gt;10);<span class="cstat-no" title="statement not covered" >o</span>utput+=encode(temp&gt;&gt;4&amp;63);<span class="cstat-no" title="statement not covered" >o</span>utput+=encode(temp&lt;&lt;2&amp;63);<span class="cstat-no" title="statement not covered" >o</span>utput+="=";<span class="cstat-no" title="statement not covered" >b</span>reak}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn output}</span>exports.toByteArray=b64ToByteArray;exports.fromByteArray=uint8ToBase64})(typeof exports==="undefined"?<span class="branch-0 cbranch-no" title="branch not covered" >this.base64js={}:</span>exports)},{}],10:[<span class="fstat-no" title="function not covered" >function(require,module,exports){</span>"use strict";<span class="cstat-no" title="statement not covered" >var createThunk=require("./lib/thunk.js");<span class="fstat-no" title="function not covered" >f</span>unction Procedure(){<span class="cstat-no" title="statement not covered" ></span>this.argTypes=[];<span class="cstat-no" title="statement not covered" >t</span>his.shimArgs=[];<span class="cstat-no" title="statement not covered" >t</span>his.arrayArgs=[];<span class="cstat-no" title="statement not covered" >t</span>his.arrayBlockIndices=[];<span class="cstat-no" title="statement not covered" >t</span>his.scalarArgs=[];<span class="cstat-no" title="statement not covered" >t</span>his.offsetArgs=[];<span class="cstat-no" title="statement not covered" >t</span>his.offsetArgIndex=[];<span class="cstat-no" title="statement not covered" >t</span>his.indexArgs=[];<span class="cstat-no" title="statement not covered" >t</span>his.shapeArgs=[];<span class="cstat-no" title="statement not covered" >t</span>his.funcName="";<span class="cstat-no" title="statement not covered" >t</span>his.pre=null;<span class="cstat-no" title="statement not covered" >t</span>his.body=null;<span class="cstat-no" title="statement not covered" >t</span>his.post=null;<span class="cstat-no" title="statement not covered" >t</span>his.debug=false}<span class="fstat-no" title="function not covered" ></span>function compileCwise(user_args){<span class="cstat-no" title="statement not covered" ></span>var proc=new Procedure;<span class="cstat-no" title="statement not covered" >p</span>roc.pre=user_args.pre;<span class="cstat-no" title="statement not covered" >p</span>roc.body=user_args.body;<span class="cstat-no" title="statement not covered" >p</span>roc.post=user_args.post;<span class="cstat-no" title="statement not covered" >v</span>ar proc_args=user_args.args.slice(0);<span class="cstat-no" title="statement not covered" >p</span>roc.argTypes=proc_args;<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;proc_args.length;++i){<span class="cstat-no" title="statement not covered" >var arg_type=proc_args[i];<span class="cstat-no" title="statement not covered" >i</span>f(arg_type==="array"||typeof arg_type==="object"&amp;&amp;arg_type.blockIndices){<span class="cstat-no" title="statement not covered" >proc.argTypes[i]="array";<span class="cstat-no" title="statement not covered" >p</span>roc.arrayArgs.push(i);<span class="cstat-no" title="statement not covered" >p</span>roc.arrayBlockIndices.push(arg_type.blockIndices?arg_type.blockIndices:0);<span class="cstat-no" title="statement not covered" >p</span>roc.shimArgs.push("array"+i);<span class="cstat-no" title="statement not covered" >i</span>f(i&lt;proc.pre.args.length&amp;&amp;proc.pre.args[i].count&gt;0){<span class="cstat-no" title="statement not covered" >throw new Error("cwise: pre() block may not reference array args")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(i&lt;proc.post.args.length&amp;&amp;proc.post.args[i].count&gt;0){<span class="cstat-no" title="statement not covered" >throw new Error("cwise: post() block may not reference array args")}</span>}</span>else <span class="cstat-no" title="statement not covered" >if(arg_type==="scalar"){<span class="cstat-no" title="statement not covered" >proc.scalarArgs.push(i);<span class="cstat-no" title="statement not covered" >p</span>roc.shimArgs.push("scalar"+i)}</span>else <span class="cstat-no" title="statement not covered" >if(arg_type==="index"){<span class="cstat-no" title="statement not covered" >proc.indexArgs.push(i);<span class="cstat-no" title="statement not covered" >i</span>f(i&lt;proc.pre.args.length&amp;&amp;proc.pre.args[i].count&gt;0){<span class="cstat-no" title="statement not covered" >throw new Error("cwise: pre() block may not reference array index")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(i&lt;proc.body.args.length&amp;&amp;proc.body.args[i].lvalue){<span class="cstat-no" title="statement not covered" >throw new Error("cwise: body() block may not write to array index")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(i&lt;proc.post.args.length&amp;&amp;proc.post.args[i].count&gt;0){<span class="cstat-no" title="statement not covered" >throw new Error("cwise: post() block may not reference array index")}</span>}</span>else <span class="cstat-no" title="statement not covered" >if(arg_type==="shape"){<span class="cstat-no" title="statement not covered" >proc.shapeArgs.push(i);<span class="cstat-no" title="statement not covered" >i</span>f(i&lt;proc.pre.args.length&amp;&amp;proc.pre.args[i].lvalue){<span class="cstat-no" title="statement not covered" >throw new Error("cwise: pre() block may not write to array shape")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(i&lt;proc.body.args.length&amp;&amp;proc.body.args[i].lvalue){<span class="cstat-no" title="statement not covered" >throw new Error("cwise: body() block may not write to array shape")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(i&lt;proc.post.args.length&amp;&amp;proc.post.args[i].lvalue){<span class="cstat-no" title="statement not covered" >throw new Error("cwise: post() block may not write to array shape")}</span>}</span>else <span class="cstat-no" title="statement not covered" >if(typeof arg_type==="object"&amp;&amp;arg_type.offset){<span class="cstat-no" title="statement not covered" >proc.argTypes[i]="offset";<span class="cstat-no" title="statement not covered" >p</span>roc.offsetArgs.push({array:arg_type.array,offset:arg_type.offset});<span class="cstat-no" title="statement not covered" >p</span>roc.offsetArgIndex.push(i)}</span>else{<span class="cstat-no" title="statement not covered" >throw new Error("cwise: Unknown argument type "+proc_args[i])}</span>}<span class="cstat-no" title="statement not covered" ></span></span></span></span></span>i</span>f(proc.arrayArgs.length&lt;=0){<span class="cstat-no" title="statement not covered" >throw new Error("cwise: No array arguments specified")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(proc.pre.args.length&gt;proc_args.length){<span class="cstat-no" title="statement not covered" >throw new Error("cwise: Too many arguments in pre() block")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(proc.body.args.length&gt;proc_args.length){<span class="cstat-no" title="statement not covered" >throw new Error("cwise: Too many arguments in body() block")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(proc.post.args.length&gt;proc_args.length){<span class="cstat-no" title="statement not covered" >throw new Error("cwise: Too many arguments in post() block")}<span class="cstat-no" title="statement not covered" ></span>p</span>roc.debug=!!user_args.printCode||!!user_args.debug;<span class="cstat-no" title="statement not covered" >p</span>roc.funcName=user_args.funcName||"cwise";<span class="cstat-no" title="statement not covered" >p</span>roc.blockSize=user_args.blockSize||64;<span class="cstat-no" title="statement not covered" >r</span>eturn createThunk(proc)}<span class="cstat-no" title="statement not covered" ></span>module.exports=compileCwise}</span>,{"./lib/thunk.js":12}],11:[<span class="fstat-no" title="function not covered" >function(require,module,exports){</span>"use strict";<span class="cstat-no" title="statement not covered" >var uniq=require("uniq");<span class="fstat-no" title="function not covered" >f</span>unction innerFill(order,proc,body){<span class="cstat-no" title="statement not covered" ></span>var dimension=order.length,nargs=proc.arrayArgs.length,has_index=proc.indexArgs.length&gt;0,code=[],vars=[],idx=0,pidx=0,i,j;<span class="cstat-no" title="statement not covered" >f</span>or(i=0;i&lt;dimension;++i){<span class="cstat-no" title="statement not covered" >vars.push(["i",i,"=0"].join(""))}<span class="cstat-no" title="statement not covered" ></span>f</span>or(j=0;j&lt;nargs;++j){<span class="cstat-no" title="statement not covered" >for(i=0;i&lt;dimension;++i){<span class="cstat-no" title="statement not covered" >pidx=idx;<span class="cstat-no" title="statement not covered" >i</span>dx=order[i];<span class="cstat-no" title="statement not covered" >i</span>f(i===0){<span class="cstat-no" title="statement not covered" >vars.push(["d",j,"s",i,"=t",j,"p",idx].join(""))}</span>else{<span class="cstat-no" title="statement not covered" >vars.push(["d",j,"s",i,"=(t",j,"p",idx,"-s",pidx,"*t",j,"p",pidx,")"].join(""))}</span>}</span>}<span class="cstat-no" title="statement not covered" ></span>c</span>ode.push("var "+vars.join(","));<span class="cstat-no" title="statement not covered" >f</span>or(i=dimension-1;i&gt;=0;--i){<span class="cstat-no" title="statement not covered" >idx=order[i];<span class="cstat-no" title="statement not covered" >c</span>ode.push(["for(i",i,"=0;i",i,"&lt;s",idx,";++i",i,"){"].join(""))}<span class="cstat-no" title="statement not covered" ></span>c</span>ode.push(body);<span class="cstat-no" title="statement not covered" >f</span>or(i=0;i&lt;dimension;++i){<span class="cstat-no" title="statement not covered" >pidx=idx;<span class="cstat-no" title="statement not covered" >i</span>dx=order[i];<span class="cstat-no" title="statement not covered" >f</span>or(j=0;j&lt;nargs;++j){<span class="cstat-no" title="statement not covered" >code.push(["p",j,"+=d",j,"s",i].join(""))}<span class="cstat-no" title="statement not covered" ></span>i</span>f(has_index){<span class="cstat-no" title="statement not covered" >if(i&gt;0){<span class="cstat-no" title="statement not covered" >code.push(["index[",pidx,"]-=s",pidx].join(""))}<span class="cstat-no" title="statement not covered" ></span>c</span>ode.push(["++index[",idx,"]"].join(""))}<span class="cstat-no" title="statement not covered" ></span>c</span>ode.push("}")}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn code.join("\n")}<span class="fstat-no" title="function not covered" ></span>function outerFill(matched,order,proc,body){<span class="cstat-no" title="statement not covered" ></span>var dimension=order.length,nargs=proc.arrayArgs.length,blockSize=proc.blockSize,has_index=proc.indexArgs.length&gt;0,code=[];<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;nargs;++i){<span class="cstat-no" title="statement not covered" >code.push(["var offset",i,"=p",i].join(""))}<span class="cstat-no" title="statement not covered" ></span>f</span>or(var i=matched;i&lt;dimension;++i){<span class="cstat-no" title="statement not covered" >code.push(["for(var j"+i+"=SS[",order[i],"]|0;j",i,"&gt;0;){"].join(""));<span class="cstat-no" title="statement not covered" >c</span>ode.push(["if(j",i,"&lt;",blockSize,"){"].join(""));<span class="cstat-no" title="statement not covered" >c</span>ode.push(["s",order[i],"=j",i].join(""));<span class="cstat-no" title="statement not covered" >c</span>ode.push(["j",i,"=0"].join(""));<span class="cstat-no" title="statement not covered" >c</span>ode.push(["}else{s",order[i],"=",blockSize].join(""));<span class="cstat-no" title="statement not covered" >c</span>ode.push(["j",i,"-=",blockSize,"}"].join(""));<span class="cstat-no" title="statement not covered" >i</span>f(has_index){<span class="cstat-no" title="statement not covered" >code.push(["index[",order[i],"]=j",i].join(""))}</span>}<span class="cstat-no" title="statement not covered" ></span>f</span>or(var i=0;i&lt;nargs;++i){<span class="cstat-no" title="statement not covered" >var indexStr=["offset"+i];<span class="cstat-no" title="statement not covered" >f</span>or(var j=matched;j&lt;dimension;++j){<span class="cstat-no" title="statement not covered" >indexStr.push(["j",j,"*t",i,"p",order[j]].join(""))}<span class="cstat-no" title="statement not covered" ></span>c</span>ode.push(["p",i,"=(",indexStr.join("+"),")"].join(""))}<span class="cstat-no" title="statement not covered" ></span>c</span>ode.push(innerFill(order,proc,body));<span class="cstat-no" title="statement not covered" >f</span>or(var i=matched;i&lt;dimension;++i){<span class="cstat-no" title="statement not covered" >code.push("}")}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn code.join("\n")}<span class="fstat-no" title="function not covered" ></span>function countMatches(orders){<span class="cstat-no" title="statement not covered" ></span>var matched=0,dimension=orders[0].length;<span class="cstat-no" title="statement not covered" >w</span>hile(matched&lt;dimension){<span class="cstat-no" title="statement not covered" >for(var j=1;j&lt;orders.length;++j){<span class="cstat-no" title="statement not covered" >if(orders[j][matched]!==orders[0][matched]){<span class="cstat-no" title="statement not covered" >return matched}</span>}<span class="cstat-no" title="statement not covered" ></span>+</span>+matched}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn matched}<span class="fstat-no" title="function not covered" ></span>function processBlock(block,proc,dtypes){<span class="cstat-no" title="statement not covered" ></span>var code=block.body;<span class="cstat-no" title="statement not covered" >v</span>ar pre=[];<span class="cstat-no" title="statement not covered" >v</span>ar post=[];<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;block.args.length;++i){<span class="cstat-no" title="statement not covered" >var carg=block.args[i];<span class="cstat-no" title="statement not covered" >i</span>f(carg.count&lt;=0){<span class="cstat-no" title="statement not covered" >continue}<span class="cstat-no" title="statement not covered" ></span>v</span>ar re=new RegExp(carg.name,"g");<span class="cstat-no" title="statement not covered" >v</span>ar ptrStr="";<span class="cstat-no" title="statement not covered" >v</span>ar arrNum=proc.arrayArgs.indexOf(i);<span class="cstat-no" title="statement not covered" >s</span>witch(proc.argTypes[i]){case"offset":<span class="cstat-no" title="statement not covered" >var offArgIndex=proc.offsetArgIndex.indexOf(i);<span class="cstat-no" title="statement not covered" >v</span>ar offArg=proc.offsetArgs[offArgIndex];<span class="cstat-no" title="statement not covered" >a</span>rrNum=offArg.array;<span class="cstat-no" title="statement not covered" >p</span>trStr="+q"+offArgIndex;c</span>ase"array":<span class="cstat-no" title="statement not covered" >ptrStr="p"+arrNum+ptrStr;<span class="cstat-no" title="statement not covered" >v</span>ar localStr="l"+i;<span class="cstat-no" title="statement not covered" >v</span>ar arrStr="a"+arrNum;<span class="cstat-no" title="statement not covered" >i</span>f(proc.arrayBlockIndices[arrNum]===0){<span class="cstat-no" title="statement not covered" >if(carg.count===1){<span class="cstat-no" title="statement not covered" >if(dtypes[arrNum]==="generic"){<span class="cstat-no" title="statement not covered" >if(carg.lvalue){<span class="cstat-no" title="statement not covered" >pre.push(["var ",localStr,"=",arrStr,".get(",ptrStr,")"].join(""));<span class="cstat-no" title="statement not covered" >c</span>ode=code.replace(re,localStr);<span class="cstat-no" title="statement not covered" >p</span>ost.push([arrStr,".set(",ptrStr,",",localStr,")"].join(""))}</span>else{<span class="cstat-no" title="statement not covered" >code=code.replace(re,[arrStr,".get(",ptrStr,")"].join(""))}</span>}</span>else{<span class="cstat-no" title="statement not covered" >code=code.replace(re,[arrStr,"[",ptrStr,"]"].join(""))}</span>}</span>else <span class="cstat-no" title="statement not covered" >if(dtypes[arrNum]==="generic"){<span class="cstat-no" title="statement not covered" >pre.push(["var ",localStr,"=",arrStr,".get(",ptrStr,")"].join(""));<span class="cstat-no" title="statement not covered" >c</span>ode=code.replace(re,localStr);<span class="cstat-no" title="statement not covered" >i</span>f(carg.lvalue){<span class="cstat-no" title="statement not covered" >post.push([arrStr,".set(",ptrStr,",",localStr,")"].join(""))}</span>}</span>else{<span class="cstat-no" title="statement not covered" >pre.push(["var ",localStr,"=",arrStr,"[",ptrStr,"]"].join(""));<span class="cstat-no" title="statement not covered" >c</span>ode=code.replace(re,localStr);<span class="cstat-no" title="statement not covered" >i</span>f(carg.lvalue){<span class="cstat-no" title="statement not covered" >post.push([arrStr,"[",ptrStr,"]=",localStr].join(""))}</span>}</span>}</span></span>else{<span class="cstat-no" title="statement not covered" >var reStrArr=[carg.name],ptrStrArr=[ptrStr];<span class="cstat-no" title="statement not covered" >f</span>or(var j=0;j&lt;Math.abs(proc.arrayBlockIndices[arrNum]);j++){<span class="cstat-no" title="statement not covered" >reStrArr.push("\\s*\\[([^\\]]+)\\]");<span class="cstat-no" title="statement not covered" >p</span>trStrArr.push("$"+(j+1)+"*t"+arrNum+"b"+j)}<span class="cstat-no" title="statement not covered" ></span>r</span>e=new RegExp(reStrArr.join(""),"g");<span class="cstat-no" title="statement not covered" >p</span>trStr=ptrStrArr.join("+");<span class="cstat-no" title="statement not covered" >i</span>f(dtypes[arrNum]==="generic"){<span class="cstat-no" title="statement not covered" >throw new Error("cwise: Generic arrays not supported in combination with blocks!")}</span>else{<span class="cstat-no" title="statement not covered" >code=code.replace(re,[arrStr,"[",ptrStr,"]"].join(""))}</span>}<span class="cstat-no" title="statement not covered" ></span>b</span>reak;c</span>ase"scalar":<span class="cstat-no" title="statement not covered" >code=code.replace(re,"Y"+proc.scalarArgs.indexOf(i));<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"index":<span class="cstat-no" title="statement not covered" >code=code.replace(re,"index");<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"shape":<span class="cstat-no" title="statement not covered" >code=code.replace(re,"shape");<span class="cstat-no" title="statement not covered" >b</span>reak}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn[pre.join("\n"),code,post.join("\n")].join("\n").trim()}<span class="fstat-no" title="function not covered" ></span>function typeSummary(dtypes){<span class="cstat-no" title="statement not covered" ></span>var summary=new Array(dtypes.length);<span class="cstat-no" title="statement not covered" >v</span>ar allEqual=true;<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;dtypes.length;++i){<span class="cstat-no" title="statement not covered" >var t=dtypes[i];<span class="cstat-no" title="statement not covered" >v</span>ar digits=t.match(/\d+/);<span class="cstat-no" title="statement not covered" >i</span>f(!digits){<span class="cstat-no" title="statement not covered" >digits=""}</span>else{<span class="cstat-no" title="statement not covered" >digits=digits[0]}<span class="cstat-no" title="statement not covered" ></span>i</span>f(t.charAt(0)===0){<span class="cstat-no" title="statement not covered" >summary[i]="u"+t.charAt(1)+digits}</span>else{<span class="cstat-no" title="statement not covered" >summary[i]=t.charAt(0)+digits}<span class="cstat-no" title="statement not covered" ></span>i</span>f(i&gt;0){<span class="cstat-no" title="statement not covered" >allEqual=allEqual&amp;&amp;summary[i]===summary[i-1]}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(allEqual){<span class="cstat-no" title="statement not covered" >return summary[0]}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn summary.join("")}<span class="fstat-no" title="function not covered" ></span>function generateCWiseOp(proc,typesig){<span class="cstat-no" title="statement not covered" ></span>var dimension=typesig[1].length-Math.abs(proc.arrayBlockIndices[0])|0;<span class="cstat-no" title="statement not covered" >v</span>ar orders=new Array(proc.arrayArgs.length);<span class="cstat-no" title="statement not covered" >v</span>ar dtypes=new Array(proc.arrayArgs.length);<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;proc.arrayArgs.length;++i){<span class="cstat-no" title="statement not covered" >dtypes[i]=typesig[2*i];<span class="cstat-no" title="statement not covered" >o</span>rders[i]=typesig[2*i+1]}<span class="cstat-no" title="statement not covered" ></span>v</span>ar blockBegin=[],blockEnd=[];<span class="cstat-no" title="statement not covered" >v</span>ar loopBegin=[],loopEnd=[];<span class="cstat-no" title="statement not covered" >v</span>ar loopOrders=[];<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;proc.arrayArgs.length;++i){<span class="cstat-no" title="statement not covered" >if(proc.arrayBlockIndices[i]&lt;0){<span class="cstat-no" title="statement not covered" >loopBegin.push(0);<span class="cstat-no" title="statement not covered" >l</span>oopEnd.push(dimension);<span class="cstat-no" title="statement not covered" >b</span>lockBegin.push(dimension);<span class="cstat-no" title="statement not covered" >b</span>lockEnd.push(dimension+proc.arrayBlockIndices[i])}</span>else{<span class="cstat-no" title="statement not covered" >loopBegin.push(proc.arrayBlockIndices[i]);<span class="cstat-no" title="statement not covered" >l</span>oopEnd.push(proc.arrayBlockIndices[i]+dimension);<span class="cstat-no" title="statement not covered" >b</span>lockBegin.push(0);<span class="cstat-no" title="statement not covered" >b</span>lockEnd.push(proc.arrayBlockIndices[i])}<span class="cstat-no" title="statement not covered" ></span>v</span>ar newOrder=[];<span class="cstat-no" title="statement not covered" >f</span>or(var j=0;j&lt;orders[i].length;j++){<span class="cstat-no" title="statement not covered" >if(loopBegin[i]&lt;=orders[i][j]&amp;&amp;orders[i][j]&lt;loopEnd[i]){<span class="cstat-no" title="statement not covered" >newOrder.push(orders[i][j]-loopBegin[i])}</span>}<span class="cstat-no" title="statement not covered" ></span>l</span>oopOrders.push(newOrder)}<span class="cstat-no" title="statement not covered" ></span>v</span>ar arglist=["SS"];<span class="cstat-no" title="statement not covered" >v</span>ar code=["'use strict'"];<span class="cstat-no" title="statement not covered" >v</span>ar vars=[];<span class="cstat-no" title="statement not covered" >f</span>or(var j=0;j&lt;dimension;++j){<span class="cstat-no" title="statement not covered" >vars.push(["s",j,"=SS[",j,"]"].join(""))}<span class="cstat-no" title="statement not covered" ></span>f</span>or(var i=0;i&lt;proc.arrayArgs.length;++i){<span class="cstat-no" title="statement not covered" >arglist.push("a"+i);<span class="cstat-no" title="statement not covered" >a</span>rglist.push("t"+i);<span class="cstat-no" title="statement not covered" >a</span>rglist.push("p"+i);<span class="cstat-no" title="statement not covered" >f</span>or(var j=0;j&lt;dimension;++j){<span class="cstat-no" title="statement not covered" >vars.push(["t",i,"p",j,"=t",i,"[",loopBegin[i]+j,"]"].join(""))}<span class="cstat-no" title="statement not covered" ></span>f</span>or(var j=0;j&lt;Math.abs(proc.arrayBlockIndices[i]);++j){<span class="cstat-no" title="statement not covered" >vars.push(["t",i,"b",j,"=t",i,"[",blockBegin[i]+j,"]"].join(""))}</span>}<span class="cstat-no" title="statement not covered" ></span>f</span>or(var i=0;i&lt;proc.scalarArgs.length;++i){<span class="cstat-no" title="statement not covered" >arglist.push("Y"+i)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(proc.shapeArgs.length&gt;0){<span class="cstat-no" title="statement not covered" >vars.push("shape=SS.slice(0)")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(proc.indexArgs.length&gt;0){<span class="cstat-no" title="statement not covered" >var zeros=new Array(dimension);<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;dimension;++i){<span class="cstat-no" title="statement not covered" >zeros[i]="0"}<span class="cstat-no" title="statement not covered" ></span>v</span>ars.push(["index=[",zeros.join(","),"]"].join(""))}<span class="cstat-no" title="statement not covered" ></span>f</span>or(var i=0;i&lt;proc.offsetArgs.length;++i){<span class="cstat-no" title="statement not covered" >var off_arg=proc.offsetArgs[i];<span class="cstat-no" title="statement not covered" >v</span>ar init_string=[];<span class="cstat-no" title="statement not covered" >f</span>or(var j=0;j&lt;off_arg.offset.length;++j){<span class="cstat-no" title="statement not covered" >if(off_arg.offset[j]===0){<span class="cstat-no" title="statement not covered" >continue}</span>else <span class="cstat-no" title="statement not covered" >if(off_arg.offset[j]===1){<span class="cstat-no" title="statement not covered" >init_string.push(["t",off_arg.array,"p",j].join(""))}</span>else{<span class="cstat-no" title="statement not covered" >init_string.push([off_arg.offset[j],"*t",off_arg.array,"p",j].join(""))}</span>}<span class="cstat-no" title="statement not covered" ></span></span>i</span>f(init_string.length===0){<span class="cstat-no" title="statement not covered" >vars.push("q"+i+"=0")}</span>else{<span class="cstat-no" title="statement not covered" >vars.push(["q",i,"=",init_string.join("+")].join(""))}</span>}<span class="cstat-no" title="statement not covered" ></span>v</span>ar thisVars=uniq([].concat(proc.pre.thisVars).concat(proc.body.thisVars).concat(proc.post.thisVars));<span class="cstat-no" title="statement not covered" >v</span>ars=vars.concat(thisVars);<span class="cstat-no" title="statement not covered" >c</span>ode.push("var "+vars.join(","));<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;proc.arrayArgs.length;++i){<span class="cstat-no" title="statement not covered" >code.push("p"+i+"|=0")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(proc.pre.body.length&gt;3){<span class="cstat-no" title="statement not covered" >code.push(processBlock(proc.pre,proc,dtypes))}<span class="cstat-no" title="statement not covered" ></span>v</span>ar body=processBlock(proc.body,proc,dtypes);<span class="cstat-no" title="statement not covered" >v</span>ar matched=countMatches(loopOrders);<span class="cstat-no" title="statement not covered" >i</span>f(matched&lt;dimension){<span class="cstat-no" title="statement not covered" >code.push(outerFill(matched,loopOrders[0],proc,body))}</span>else{<span class="cstat-no" title="statement not covered" >code.push(innerFill(loopOrders[0],proc,body))}<span class="cstat-no" title="statement not covered" ></span>i</span>f(proc.post.body.length&gt;3){<span class="cstat-no" title="statement not covered" >code.push(processBlock(proc.post,proc,dtypes))}<span class="cstat-no" title="statement not covered" ></span>i</span>f(proc.debug){<span class="cstat-no" title="statement not covered" >console.log("-----Generated cwise routine for ",typesig,":\n"+code.join("\n")+"\n----------")}<span class="cstat-no" title="statement not covered" ></span>v</span>ar loopName=[proc.funcName||"unnamed","_cwise_loop_",orders[0].join("s"),"m",matched,typeSummary(dtypes)].join("");<span class="cstat-no" title="statement not covered" >v</span>ar f=new Function(["function ",loopName,"(",arglist.join(","),"){",code.join("\n"),"} return ",loopName].join(""));<span class="cstat-no" title="statement not covered" >r</span>eturn f()}<span class="cstat-no" title="statement not covered" ></span>module.exports=generateCWiseOp}</span>,{uniq:66}],12:[<span class="fstat-no" title="function not covered" >function(require,module,exports){</span>"use strict";<span class="cstat-no" title="statement not covered" >var compile=require("./compile.js");<span class="fstat-no" title="function not covered" >f</span>unction createThunk(proc){<span class="cstat-no" title="statement not covered" ></span>var code=["'use strict'","var CACHED={}"];<span class="cstat-no" title="statement not covered" >v</span>ar vars=[];<span class="cstat-no" title="statement not covered" >v</span>ar thunkName=proc.funcName+"_cwise_thunk";<span class="cstat-no" title="statement not covered" >c</span>ode.push(["return function ",thunkName,"(",proc.shimArgs.join(","),"){"].join(""));<span class="cstat-no" title="statement not covered" >v</span>ar typesig=[];<span class="cstat-no" title="statement not covered" >v</span>ar string_typesig=[];<span class="cstat-no" title="statement not covered" >v</span>ar proc_args=[["array",proc.arrayArgs[0],".shape.slice(",Math.max(0,proc.arrayBlockIndices[0]),proc.arrayBlockIndices[0]&lt;0?","+proc.arrayBlockIndices[0]+")":")"].join("")];<span class="cstat-no" title="statement not covered" >v</span>ar shapeLengthConditions=[],shapeConditions=[];<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;proc.arrayArgs.length;++i){<span class="cstat-no" title="statement not covered" >var j=proc.arrayArgs[i];<span class="cstat-no" title="statement not covered" >v</span>ars.push(["t",j,"=array",j,".dtype,","r",j,"=array",j,".order"].join(""));<span class="cstat-no" title="statement not covered" >t</span>ypesig.push("t"+j);<span class="cstat-no" title="statement not covered" >t</span>ypesig.push("r"+j);<span class="cstat-no" title="statement not covered" >s</span>tring_typesig.push("t"+j);<span class="cstat-no" title="statement not covered" >s</span>tring_typesig.push("r"+j+".join()");<span class="cstat-no" title="statement not covered" >p</span>roc_args.push("array"+j+".data");<span class="cstat-no" title="statement not covered" >p</span>roc_args.push("array"+j+".stride");<span class="cstat-no" title="statement not covered" >p</span>roc_args.push("array"+j+".offset|0");<span class="cstat-no" title="statement not covered" >i</span>f(i&gt;0){<span class="cstat-no" title="statement not covered" >shapeLengthConditions.push("array"+proc.arrayArgs[0]+".shape.length===array"+j+".shape.length+"+(Math.abs(proc.arrayBlockIndices[0])-Math.abs(proc.arrayBlockIndices[i])));<span class="cstat-no" title="statement not covered" >s</span>hapeConditions.push("array"+proc.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,proc.arrayBlockIndices[0])+"]===array"+j+".shape[shapeIndex+"+Math.max(0,proc.arrayBlockIndices[i])+"]")}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(proc.arrayArgs.length&gt;1){<span class="cstat-no" title="statement not covered" >code.push("if (!("+shapeLengthConditions.join(" &amp;&amp; ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')");<span class="cstat-no" title="statement not covered" >c</span>ode.push("for(var shapeIndex=array"+proc.arrayArgs[0]+".shape.length-"+Math.abs(proc.arrayBlockIndices[0])+"; shapeIndex--&gt;0;) {");<span class="cstat-no" title="statement not covered" >c</span>ode.push("if (!("+shapeConditions.join(" &amp;&amp; ")+")) throw new Error('cwise: Arrays do not all have the same shape!')");<span class="cstat-no" title="statement not covered" >c</span>ode.push("}")}<span class="cstat-no" title="statement not covered" ></span>f</span>or(var i=0;i&lt;proc.scalarArgs.length;++i){<span class="cstat-no" title="statement not covered" >proc_args.push("scalar"+proc.scalarArgs[i])}<span class="cstat-no" title="statement not covered" ></span>v</span>ars.push(["type=[",string_typesig.join(","),"].join()"].join(""));<span class="cstat-no" title="statement not covered" >v</span>ars.push("proc=CACHED[type]");<span class="cstat-no" title="statement not covered" >c</span>ode.push("var "+vars.join(","));<span class="cstat-no" title="statement not covered" >c</span>ode.push(["if(!proc){","CACHED[type]=proc=compile([",typesig.join(","),"])}","return proc(",proc_args.join(","),")}"].join(""));<span class="cstat-no" title="statement not covered" >i</span>f(proc.debug){<span class="cstat-no" title="statement not covered" >console.log("-----Generated thunk:\n"+code.join("\n")+"\n----------")}<span class="cstat-no" title="statement not covered" ></span>v</span>ar thunk=new Function("compile",code.join("\n"));<span class="cstat-no" title="statement not covered" >r</span>eturn thunk(compile.bind(undefined,proc))}<span class="cstat-no" title="statement not covered" ></span>module.exports=createThunk}</span>,{"./compile.js":11}],13:[<span class="fstat-no" title="function not covered" >function(require,module,exports){<span class="cstat-no" title="statement not covered" ></span>module.exports=require("cwise-compiler")}</span>,{"cwise-compiler":10}],14:[<span class="fstat-no" title="function not covered" >function(require,module,exports){<span class="cstat-no" title="statement not covered" ></span>module.exports=parse;<span class="cstat-no" title="statement not covered" >v</span>ar map={option:[1,'&lt;select multiple="multiple"&gt;',"&lt;/select&gt;"],optgroup:[1,'&lt;select multiple="multiple"&gt;',"&lt;/select&gt;"],legend:[1,"&lt;fieldset&gt;","&lt;/fieldset&gt;"],thead:[1,"&lt;table&gt;","&lt;/table&gt;"],tbody:[1,"&lt;table&gt;","&lt;/table&gt;"],tfoot:[1,"&lt;table&gt;","&lt;/table&gt;"],colgroup:[1,"&lt;table&gt;","&lt;/table&gt;"],caption:[1,"&lt;table&gt;","&lt;/table&gt;"],tr:[2,"&lt;table&gt;&lt;tbody&gt;","&lt;/tbody&gt;&lt;/table&gt;"],td:[3,"&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;","&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;"],th:[3,"&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;","&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;"],col:[2,"&lt;table&gt;&lt;tbody&gt;&lt;/tbody&gt;&lt;colgroup&gt;","&lt;/colgroup&gt;&lt;/table&gt;"],_default:[0,"",""]};<span class="fstat-no" title="function not covered" >f</span>unction parse(html){<span class="cstat-no" title="statement not covered" ></span>if("string"!=typeof html)<span class="cstat-no" title="statement not covered" >throw new TypeError("String expected");<span class="cstat-no" title="statement not covered" >v</span></span>ar m=/&lt;([\w:]+)/.exec(html);<span class="cstat-no" title="statement not covered" >i</span>f(!m)<span class="cstat-no" title="statement not covered" >throw new Error("No elements were generated.");<span class="cstat-no" title="statement not covered" >v</span></span>ar tag=m[1];<span class="cstat-no" title="statement not covered" >i</span>f(tag=="body"){<span class="cstat-no" title="statement not covered" >var el=document.createElement("html");<span class="cstat-no" title="statement not covered" >e</span>l.innerHTML=html;<span class="cstat-no" title="statement not covered" >r</span>eturn[el.removeChild(el.lastChild)]}<span class="cstat-no" title="statement not covered" ></span>v</span>ar wrap=map[tag]||map._default;<span class="cstat-no" title="statement not covered" >v</span>ar depth=wrap[0];<span class="cstat-no" title="statement not covered" >v</span>ar prefix=wrap[1];<span class="cstat-no" title="statement not covered" >v</span>ar suffix=wrap[2];<span class="cstat-no" title="statement not covered" >v</span>ar el=document.createElement("div");<span class="cstat-no" title="statement not covered" >e</span>l.innerHTML=prefix+html+suffix;<span class="cstat-no" title="statement not covered" >w</span>hile(depth--)<span class="cstat-no" title="statement not covered" >el=el.lastChild;<span class="cstat-no" title="statement not covered" >r</span></span>eturn orphan(el.children)}<span class="fstat-no" title="function not covered" ></span>function orphan(els){<span class="cstat-no" title="statement not covered" ></span>var ret=[];<span class="cstat-no" title="statement not covered" >w</span>hile(els.length){<span class="cstat-no" title="statement not covered" >ret.push(els[0].parentNode.removeChild(els[0]))}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn ret}</span>},{}],15:[<span class="fstat-no" title="function not covered" >function(require,module,exports){</span>"use strict";<span class="fstat-no" title="function not covered" >function dupe_array(count,value,i){<span class="cstat-no" title="statement not covered" ></span>var c=count[i]|0;<span class="cstat-no" title="statement not covered" >i</span>f(c&lt;=0){<span class="cstat-no" title="statement not covered" >return[]}<span class="cstat-no" title="statement not covered" ></span>v</span>ar result=new Array(c),j;<span class="cstat-no" title="statement not covered" >i</span>f(i===count.length-1){<span class="cstat-no" title="statement not covered" >for(j=0;j&lt;c;++j){<span class="cstat-no" title="statement not covered" >result[j]=value}</span>}</span>else{<span class="cstat-no" title="statement not covered" >for(j=0;j&lt;c;++j){<span class="cstat-no" title="statement not covered" >result[j]=dupe_array(count,value,i+1)}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn result}<span class="fstat-no" title="function not covered" ></span>function dupe_number(count,value){<span class="cstat-no" title="statement not covered" ></span>var result,i;<span class="cstat-no" title="statement not covered" >r</span>esult=new Array(count);<span class="cstat-no" title="statement not covered" >f</span>or(i=0;i&lt;count;++i){<span class="cstat-no" title="statement not covered" >result[i]=value}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn result}<span class="fstat-no" title="function not covered" ></span>function dupe(count,value){<span class="cstat-no" title="statement not covered" ></span>if(typeof value==="undefined"){<span class="cstat-no" title="statement not covered" >value=0}<span class="cstat-no" title="statement not covered" ></span>s</span>witch(typeof count){case"number":<span class="cstat-no" title="statement not covered" >if(count&gt;0){<span class="cstat-no" title="statement not covered" >return dupe_number(count|0,value)}<span class="cstat-no" title="statement not covered" ></span>b</span>reak;c</span>ase"object":<span class="cstat-no" title="statement not covered" >if(typeof count.length==="number"){<span class="cstat-no" title="statement not covered" >return dupe_array(count,value,0)}<span class="cstat-no" title="statement not covered" ></span>b</span>reak}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn[]}<span class="cstat-no" title="statement not covered" ></span>module.exports=dupe}</span>,{}],16:[<span class="fstat-no" title="function not covered" >function(require,module,exports){<span class="cstat-no" title="statement not covered" ></span>var Stream=require("stream");<span class="cstat-no" title="statement not covered" >v</span>ar writeMethods=["write","end","destroy"];<span class="cstat-no" title="statement not covered" >v</span>ar readMethods=["resume","pause"];<span class="cstat-no" title="statement not covered" >v</span>ar readEvents=["data","close"];<span class="cstat-no" title="statement not covered" >v</span>ar slice=Array.prototype.slice;<span class="cstat-no" title="statement not covered" >m</span>odule.exports=duplex;<span class="fstat-no" title="function not covered" >f</span>unction forEach(arr,fn){<span class="cstat-no" title="statement not covered" ></span>if(arr.forEach){<span class="cstat-no" title="statement not covered" >return arr.forEach(fn)}<span class="cstat-no" title="statement not covered" ></span>f</span>or(var i=0;i&lt;arr.length;i++){<span class="cstat-no" title="statement not covered" >fn(arr[i],i)}</span>}<span class="fstat-no" title="function not covered" ></span>function duplex(writer,reader){<span class="cstat-no" title="statement not covered" ></span>var stream=new Stream;<span class="cstat-no" title="statement not covered" >v</span>ar ended=false;<span class="cstat-no" title="statement not covered" >f</span>orEach(writeMethods,proxyWriter);<span class="cstat-no" title="statement not covered" >f</span>orEach(readMethods,proxyReader);<span class="cstat-no" title="statement not covered" >f</span>orEach(readEvents,proxyStream);<span class="cstat-no" title="statement not covered" >r</span>eader.on("end",handleEnd);<span class="cstat-no" title="statement not covered" >w</span>riter.on("drain",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>stream.emit("drain")}</span>);<span class="cstat-no" title="statement not covered" >w</span>riter.on("error",reemit);<span class="cstat-no" title="statement not covered" >r</span>eader.on("error",reemit);<span class="cstat-no" title="statement not covered" >s</span>tream.writable=writer.writable;<span class="cstat-no" title="statement not covered" >s</span>tream.readable=reader.readable;<span class="cstat-no" title="statement not covered" >r</span>eturn stream;<span class="fstat-no" title="function not covered" >f</span>unction proxyWriter(methodName){<span class="cstat-no" title="statement not covered" ></span>stream[methodName]=method;<span class="fstat-no" title="function not covered" >f</span>unction method(){<span class="cstat-no" title="statement not covered" ></span>return writer[methodName].apply(writer,arguments)}</span>}<span class="fstat-no" title="function not covered" >function proxyReader(methodName){<span class="cstat-no" title="statement not covered" ></span>stream[methodName]=method;<span class="fstat-no" title="function not covered" >f</span>unction method(){<span class="cstat-no" title="statement not covered" ></span>stream.emit(methodName);<span class="cstat-no" title="statement not covered" >v</span>ar func=reader[methodName];<span class="cstat-no" title="statement not covered" >i</span>f(func){<span class="cstat-no" title="statement not covered" >return func.apply(reader,arguments)}<span class="cstat-no" title="statement not covered" ></span>r</span>eader.emit(methodName)}</span>}<span class="fstat-no" title="function not covered" >function proxyStream(methodName){<span class="cstat-no" title="statement not covered" ></span>reader.on(methodName,reemit);<span class="fstat-no" title="function not covered" >f</span>unction reemit(){<span class="cstat-no" title="statement not covered" ></span>var args=slice.call(arguments);<span class="cstat-no" title="statement not covered" >a</span>rgs.unshift(methodName);<span class="cstat-no" title="statement not covered" >s</span>tream.emit.apply(stream,args)}</span>}<span class="fstat-no" title="function not covered" >function handleEnd(){<span class="cstat-no" title="statement not covered" ></span>if(ended){<span class="cstat-no" title="statement not covered" >return}<span class="cstat-no" title="statement not covered" ></span>e</span>nded=true;<span class="cstat-no" title="statement not covered" >v</span>ar args=slice.call(arguments);<span class="cstat-no" title="statement not covered" >a</span>rgs.unshift("end");<span class="cstat-no" title="statement not covered" >s</span>tream.emit.apply(stream,args)}<span class="fstat-no" title="function not covered" ></span>function reemit(err){<span class="cstat-no" title="statement not covered" ></span>stream.emit("error",err)}</span>}},{stream:58}],17:[<span class="fstat-no" title="function not covered" >function(require,module,exports){<span class="cstat-no" title="statement not covered" ></span>(<span class="fstat-no" title="function not covered" >function(root,factory){</span>"use strict";<span class="cstat-no" title="statement not covered" >if(typeof define==="function"&amp;&amp;define.amd){<span class="cstat-no" title="statement not covered" >define(["exports"],factory)}</span>else <span class="cstat-no" title="statement not covered" >if(typeof exports!=="undefined"){<span class="cstat-no" title="statement not covered" >factory(exports)}</span>else{<span class="cstat-no" title="statement not covered" >factory(root.esprima={})}</span>}</span></span>)(this,<span class="fstat-no" title="function not covered" >function(exports){</span>"use strict";<span class="cstat-no" title="statement not covered" >var Token,TokenName,Syntax,PropertyKind,Messages,Regex,source,strict,index,lineNumber,lineStart,length,buffer,state,extra;<span class="cstat-no" title="statement not covered" >T</span>oken={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8};<span class="cstat-no" title="statement not covered" >T</span>okenName={};<span class="cstat-no" title="statement not covered" >T</span>okenName[Token.BooleanLiteral]="Boolean";<span class="cstat-no" title="statement not covered" >T</span>okenName[Token.EOF]="&lt;end&gt;";<span class="cstat-no" title="statement not covered" >T</span>okenName[Token.Identifier]="Identifier";<span class="cstat-no" title="statement not covered" >T</span>okenName[Token.Keyword]="Keyword";<span class="cstat-no" title="statement not covered" >T</span>okenName[Token.NullLiteral]="Null";<span class="cstat-no" title="statement not covered" >T</span>okenName[Token.NumericLiteral]="Numeric";<span class="cstat-no" title="statement not covered" >T</span>okenName[Token.Punctuator]="Punctuator";<span class="cstat-no" title="statement not covered" >T</span>okenName[Token.StringLiteral]="String";<span class="cstat-no" title="statement not covered" >S</span>yntax={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"};<span class="cstat-no" title="statement not covered" >P</span>ropertyKind={Data:1,Get:2,Set:4};<span class="cstat-no" title="statement not covered" >M</span>essages={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};<span class="cstat-no" title="statement not covered" >R</span>egex={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")};<span class="fstat-no" title="function not covered" >f</span>unction assert(condition,message){<span class="cstat-no" title="statement not covered" ></span>if(!condition){<span class="cstat-no" title="statement not covered" >throw new Error("ASSERT: "+message)}</span>}<span class="fstat-no" title="function not covered" ></span>function sliceSource(from,to){<span class="cstat-no" title="statement not covered" ></span>return source.slice(from,to)}<span class="cstat-no" title="statement not covered" ></span>if(typeof"esprima"[0]==="undefined"){<span class="cstat-no" title="statement not covered" >sliceSource=<span class="fstat-no" title="function not covered" >function sliceArraySource(from,to){<span class="cstat-no" title="statement not covered" ></span>return source.slice(from,to).join("")}</span>}<span class="fstat-no" title="function not covered" ></span>f</span>unction isDecimalDigit(ch){<span class="cstat-no" title="statement not covered" ></span>return"0123456789".indexOf(ch)&gt;=0}<span class="fstat-no" title="function not covered" ></span>function isHexDigit(ch){<span class="cstat-no" title="statement not covered" ></span>return"0123456789abcdefABCDEF".indexOf(ch)&gt;=0}<span class="fstat-no" title="function not covered" ></span>function isOctalDigit(ch){<span class="cstat-no" title="statement not covered" ></span>return"01234567".indexOf(ch)&gt;=0}<span class="fstat-no" title="function not covered" ></span>function isWhiteSpace(ch){<span class="cstat-no" title="statement not covered" ></span>return ch===" "||ch==="	"||ch===""||ch==="\f"||ch===" "||ch.charCodeAt(0)&gt;=5760&amp;&amp;" ᠎             　﻿".indexOf(ch)&gt;=0}<span class="fstat-no" title="function not covered" ></span>function isLineTerminator(ch){<span class="cstat-no" title="statement not covered" ></span>return ch==="\n"||ch==="\r"||ch==="\u2028"||ch==="\u2029"}<span class="fstat-no" title="function not covered" ></span>function isIdentifierStart(ch){<span class="cstat-no" title="statement not covered" ></span>return ch==="$"||ch==="_"||ch==="\\"||ch&gt;="a"&amp;&amp;ch&lt;="z"||ch&gt;="A"&amp;&amp;ch&lt;="Z"||ch.charCodeAt(0)&gt;=128&amp;&amp;Regex.NonAsciiIdentifierStart.test(ch)}<span class="fstat-no" title="function not covered" ></span>function isIdentifierPart(ch){<span class="cstat-no" title="statement not covered" ></span>return ch==="$"||ch==="_"||ch==="\\"||ch&gt;="a"&amp;&amp;ch&lt;="z"||ch&gt;="A"&amp;&amp;ch&lt;="Z"||ch&gt;="0"&amp;&amp;ch&lt;="9"||ch.charCodeAt(0)&gt;=128&amp;&amp;Regex.NonAsciiIdentifierPart.test(ch)}<span class="fstat-no" title="function not covered" ></span>function isFutureReservedWord(id){<span class="cstat-no" title="statement not covered" ></span>switch(id){case"class":case"enum":case"export":case"extends":case"import":case"super":<span class="cstat-no" title="statement not covered" >return true}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn false}<span class="fstat-no" title="function not covered" ></span>function isStrictModeReservedWord(id){<span class="cstat-no" title="statement not covered" ></span>switch(id){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":<span class="cstat-no" title="statement not covered" >return true}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn false}<span class="fstat-no" title="function not covered" ></span>function isRestrictedWord(id){<span class="cstat-no" title="statement not covered" ></span>return id==="eval"||id==="arguments"}<span class="fstat-no" title="function not covered" ></span>function isKeyword(id){<span class="cstat-no" title="statement not covered" ></span>var keyword=false;<span class="cstat-no" title="statement not covered" >s</span>witch(id.length){case 2:<span class="cstat-no" title="statement not covered" >keyword=id==="if"||id==="in"||id==="do";<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase 3:<span class="cstat-no" title="statement not covered" >keyword=id==="var"||id==="for"||id==="new"||id==="try";<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase 4:<span class="cstat-no" title="statement not covered" >keyword=id==="this"||id==="else"||id==="case"||id==="void"||id==="with";<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase 5:<span class="cstat-no" title="statement not covered" >keyword=id==="while"||id==="break"||id==="catch"||id==="throw";<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase 6:<span class="cstat-no" title="statement not covered" >keyword=id==="return"||id==="typeof"||id==="delete"||id==="switch";<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase 7:<span class="cstat-no" title="statement not covered" >keyword=id==="default"||id==="finally";<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase 8:<span class="cstat-no" title="statement not covered" >keyword=id==="function"||id==="continue"||id==="debugger";<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase 10:<span class="cstat-no" title="statement not covered" >keyword=id==="instanceof";<span class="cstat-no" title="statement not covered" >b</span>reak}<span class="cstat-no" title="statement not covered" ></span>i</span>f(keyword){<span class="cstat-no" title="statement not covered" >return true}<span class="cstat-no" title="statement not covered" ></span>s</span>witch(id){case"const":<span class="cstat-no" title="statement not covered" >return true;c</span>ase"yield":case"let":<span class="cstat-no" title="statement not covered" >return true}<span class="cstat-no" title="statement not covered" ></span>i</span>f(strict&amp;&amp;isStrictModeReservedWord(id)){<span class="cstat-no" title="statement not covered" >return true}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn isFutureReservedWord(id)}<span class="fstat-no" title="function not covered" ></span>function skipComment(){<span class="cstat-no" title="statement not covered" ></span>var ch,blockComment,lineComment;<span class="cstat-no" title="statement not covered" >b</span>lockComment=false;<span class="cstat-no" title="statement not covered" >l</span>ineComment=false;<span class="cstat-no" title="statement not covered" >w</span>hile(index&lt;length){<span class="cstat-no" title="statement not covered" >ch=source[index];<span class="cstat-no" title="statement not covered" >i</span>f(lineComment){<span class="cstat-no" title="statement not covered" >ch=source[index++];<span class="cstat-no" title="statement not covered" >i</span>f(isLineTerminator(ch)){<span class="cstat-no" title="statement not covered" >lineComment=false;<span class="cstat-no" title="statement not covered" >i</span>f(ch==="\r"&amp;&amp;source[index]==="\n"){<span class="cstat-no" title="statement not covered" >++index}<span class="cstat-no" title="statement not covered" ></span>+</span>+lineNumber;<span class="cstat-no" title="statement not covered" >l</span>ineStart=index}</span>}</span>else <span class="cstat-no" title="statement not covered" >if(blockComment){<span class="cstat-no" title="statement not covered" >if(isLineTerminator(ch)){<span class="cstat-no" title="statement not covered" >if(ch==="\r"&amp;&amp;source[index+1]==="\n"){<span class="cstat-no" title="statement not covered" >++index}<span class="cstat-no" title="statement not covered" ></span>+</span>+lineNumber;<span class="cstat-no" title="statement not covered" >+</span>+index;<span class="cstat-no" title="statement not covered" >l</span>ineStart=index;<span class="cstat-no" title="statement not covered" >i</span>f(index&gt;=length){<span class="cstat-no" title="statement not covered" >throwError({},Messages.UnexpectedToken,"ILLEGAL")}</span>}</span>else{<span class="cstat-no" title="statement not covered" >ch=source[index++];<span class="cstat-no" title="statement not covered" >i</span>f(index&gt;=length){<span class="cstat-no" title="statement not covered" >throwError({},Messages.UnexpectedToken,"ILLEGAL")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(ch==="*"){<span class="cstat-no" title="statement not covered" >ch=source[index];<span class="cstat-no" title="statement not covered" >i</span>f(ch==="/"){<span class="cstat-no" title="statement not covered" >++index;<span class="cstat-no" title="statement not covered" >b</span>lockComment=false}</span>}</span>}</span>}</span>else <span class="cstat-no" title="statement not covered" >if(ch==="/"){<span class="cstat-no" title="statement not covered" >ch=source[index+1];<span class="cstat-no" title="statement not covered" >i</span>f(ch==="/"){<span class="cstat-no" title="statement not covered" >index+=2;<span class="cstat-no" title="statement not covered" >l</span>ineComment=true}</span>else <span class="cstat-no" title="statement not covered" >if(ch==="*"){<span class="cstat-no" title="statement not covered" >index+=2;<span class="cstat-no" title="statement not covered" >b</span>lockComment=true;<span class="cstat-no" title="statement not covered" >i</span>f(index&gt;=length){<span class="cstat-no" title="statement not covered" >throwError({},Messages.UnexpectedToken,"ILLEGAL")}</span>}</span>else{<span class="cstat-no" title="statement not covered" >break}</span>}</span></span>else <span class="cstat-no" title="statement not covered" >if(isWhiteSpace(ch)){<span class="cstat-no" title="statement not covered" >++index}</span>else <span class="cstat-no" title="statement not covered" >if(isLineTerminator(ch)){<span class="cstat-no" title="statement not covered" >++index;<span class="cstat-no" title="statement not covered" >i</span>f(ch==="\r"&amp;&amp;source[index]==="\n"){<span class="cstat-no" title="statement not covered" >++index}<span class="cstat-no" title="statement not covered" ></span>+</span>+lineNumber;<span class="cstat-no" title="statement not covered" >l</span>ineStart=index}</span>else{<span class="cstat-no" title="statement not covered" >break}</span>}</span></span></span></span></span>}<span class="fstat-no" title="function not covered" ></span>function scanHexEscape(prefix){<span class="cstat-no" title="statement not covered" ></span>var i,len,ch,code=0;<span class="cstat-no" title="statement not covered" >l</span>en=prefix==="u"?4:2;<span class="cstat-no" title="statement not covered" >f</span>or(i=0;i&lt;len;++i){<span class="cstat-no" title="statement not covered" >if(index&lt;length&amp;&amp;isHexDigit(source[index])){<span class="cstat-no" title="statement not covered" >ch=source[index++];<span class="cstat-no" title="statement not covered" >c</span>ode=code*16+"0123456789abcdef".indexOf(ch.toLowerCase())}</span>else{<span class="cstat-no" title="statement not covered" >return""}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn String.fromCharCode(code)}<span class="fstat-no" title="function not covered" ></span>function scanIdentifier(){<span class="cstat-no" title="statement not covered" ></span>var ch,start,id,restore;<span class="cstat-no" title="statement not covered" >c</span>h=source[index];<span class="cstat-no" title="statement not covered" >i</span>f(!isIdentifierStart(ch)){<span class="cstat-no" title="statement not covered" >return}<span class="cstat-no" title="statement not covered" ></span>s</span>tart=index;<span class="cstat-no" title="statement not covered" >i</span>f(ch==="\\"){<span class="cstat-no" title="statement not covered" >++index;<span class="cstat-no" title="statement not covered" >i</span>f(source[index]!=="u"){<span class="cstat-no" title="statement not covered" >return}<span class="cstat-no" title="statement not covered" ></span>+</span>+index;<span class="cstat-no" title="statement not covered" >r</span>estore=index;<span class="cstat-no" title="statement not covered" >c</span>h=scanHexEscape("u");<span class="cstat-no" title="statement not covered" >i</span>f(ch){<span class="cstat-no" title="statement not covered" >if(ch==="\\"||!isIdentifierStart(ch)){<span class="cstat-no" title="statement not covered" >return}<span class="cstat-no" title="statement not covered" ></span>i</span>d=ch}</span>else{<span class="cstat-no" title="statement not covered" >index=restore;<span class="cstat-no" title="statement not covered" >i</span>d="u"}</span>}</span>else{<span class="cstat-no" title="statement not covered" >id=source[index++]}<span class="cstat-no" title="statement not covered" ></span>w</span>hile(index&lt;length){<span class="cstat-no" title="statement not covered" >ch=source[index];<span class="cstat-no" title="statement not covered" >i</span>f(!isIdentifierPart(ch)){<span class="cstat-no" title="statement not covered" >break}<span class="cstat-no" title="statement not covered" ></span>i</span>f(ch==="\\"){<span class="cstat-no" title="statement not covered" >++index;<span class="cstat-no" title="statement not covered" >i</span>f(source[index]!=="u"){<span class="cstat-no" title="statement not covered" >return}<span class="cstat-no" title="statement not covered" ></span>+</span>+index;<span class="cstat-no" title="statement not covered" >r</span>estore=index;<span class="cstat-no" title="statement not covered" >c</span>h=scanHexEscape("u");<span class="cstat-no" title="statement not covered" >i</span>f(ch){<span class="cstat-no" title="statement not covered" >if(ch==="\\"||!isIdentifierPart(ch)){<span class="cstat-no" title="statement not covered" >return}<span class="cstat-no" title="statement not covered" ></span>i</span>d+=ch}</span>else{<span class="cstat-no" title="statement not covered" >index=restore;<span class="cstat-no" title="statement not covered" >i</span>d+="u"}</span>}</span>else{<span class="cstat-no" title="statement not covered" >id+=source[index++]}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(id.length===1){<span class="cstat-no" title="statement not covered" >return{type:Token.Identifier,value:id,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}<span class="cstat-no" title="statement not covered" ></span>i</span>f(isKeyword(id)){<span class="cstat-no" title="statement not covered" >return{type:Token.Keyword,value:id,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}<span class="cstat-no" title="statement not covered" ></span>i</span>f(id==="null"){<span class="cstat-no" title="statement not covered" >return{type:Token.NullLiteral,value:id,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}</span></span></span>
}<span class="cstat-no" title="statement not covered" >if(id==="true"||id==="false"){<span class="cstat-no" title="statement not covered" >return{type:Token.BooleanLiteral,value:id,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn{type:Token.Identifier,value:id,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}<span class="fstat-no" title="function not covered" ></span>function scanPunctuator(){<span class="cstat-no" title="statement not covered" ></span>var start=index,ch1=source[index],ch2,ch3,ch4;<span class="cstat-no" title="statement not covered" >i</span>f(ch1===";"||ch1==="{"||ch1==="}"){<span class="cstat-no" title="statement not covered" >++index;<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Token.Punctuator,value:ch1,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}<span class="cstat-no" title="statement not covered" ></span>i</span>f(ch1===","||ch1==="("||ch1===")"){<span class="cstat-no" title="statement not covered" >++index;<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Token.Punctuator,value:ch1,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}<span class="cstat-no" title="statement not covered" ></span>c</span>h2=source[index+1];<span class="cstat-no" title="statement not covered" >i</span>f(ch1==="."&amp;&amp;!isDecimalDigit(ch2)){<span class="cstat-no" title="statement not covered" >return{type:Token.Punctuator,value:source[index++],lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}<span class="cstat-no" title="statement not covered" ></span>c</span>h3=source[index+2];<span class="cstat-no" title="statement not covered" >c</span>h4=source[index+3];<span class="cstat-no" title="statement not covered" >i</span>f(ch1==="&gt;"&amp;&amp;ch2==="&gt;"&amp;&amp;ch3==="&gt;"){<span class="cstat-no" title="statement not covered" >if(ch4==="="){<span class="cstat-no" title="statement not covered" >index+=4;<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Token.Punctuator,value:"&gt;&gt;&gt;=",lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(ch1==="="&amp;&amp;ch2==="="&amp;&amp;ch3==="="){<span class="cstat-no" title="statement not covered" >index+=3;<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Token.Punctuator,value:"===",lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}<span class="cstat-no" title="statement not covered" ></span>i</span>f(ch1==="!"&amp;&amp;ch2==="="&amp;&amp;ch3==="="){<span class="cstat-no" title="statement not covered" >index+=3;<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Token.Punctuator,value:"!==",lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}<span class="cstat-no" title="statement not covered" ></span>i</span>f(ch1==="&gt;"&amp;&amp;ch2==="&gt;"&amp;&amp;ch3==="&gt;"){<span class="cstat-no" title="statement not covered" >index+=3;<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Token.Punctuator,value:"&gt;&gt;&gt;",lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}<span class="cstat-no" title="statement not covered" ></span>i</span>f(ch1==="&lt;"&amp;&amp;ch2==="&lt;"&amp;&amp;ch3==="="){<span class="cstat-no" title="statement not covered" >index+=3;<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Token.Punctuator,value:"&lt;&lt;=",lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}<span class="cstat-no" title="statement not covered" ></span>i</span>f(ch1==="&gt;"&amp;&amp;ch2==="&gt;"&amp;&amp;ch3==="="){<span class="cstat-no" title="statement not covered" >index+=3;<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Token.Punctuator,value:"&gt;&gt;=",lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}<span class="cstat-no" title="statement not covered" ></span>i</span>f(ch2==="="){<span class="cstat-no" title="statement not covered" >if("&lt;&gt;=!+-*%&amp;|^/".indexOf(ch1)&gt;=0){<span class="cstat-no" title="statement not covered" >index+=2;<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Token.Punctuator,value:ch1+ch2,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(ch1===ch2&amp;&amp;"+-&lt;&gt;&amp;|".indexOf(ch1)&gt;=0){<span class="cstat-no" title="statement not covered" >if("+-&lt;&gt;&amp;|".indexOf(ch2)&gt;=0){<span class="cstat-no" title="statement not covered" >index+=2;<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Token.Punctuator,value:ch1+ch2,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f("[]&lt;&gt;+-*%&amp;|^!~?:=/".indexOf(ch1)&gt;=0){<span class="cstat-no" title="statement not covered" >return{type:Token.Punctuator,value:source[index++],lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}</span>}<span class="fstat-no" title="function not covered" ></span>function scanNumericLiteral(){<span class="cstat-no" title="statement not covered" ></span>var number,start,ch;<span class="cstat-no" title="statement not covered" >c</span>h=source[index];<span class="cstat-no" title="statement not covered" >a</span>ssert(isDecimalDigit(ch)||ch===".","Numeric literal must start with a decimal digit or a decimal point");<span class="cstat-no" title="statement not covered" >s</span>tart=index;<span class="cstat-no" title="statement not covered" >n</span>umber="";<span class="cstat-no" title="statement not covered" >i</span>f(ch!=="."){<span class="cstat-no" title="statement not covered" >number=source[index++];<span class="cstat-no" title="statement not covered" >c</span>h=source[index];<span class="cstat-no" title="statement not covered" >i</span>f(number==="0"){<span class="cstat-no" title="statement not covered" >if(ch==="x"||ch==="X"){<span class="cstat-no" title="statement not covered" >number+=source[index++];<span class="cstat-no" title="statement not covered" >w</span>hile(index&lt;length){<span class="cstat-no" title="statement not covered" >ch=source[index];<span class="cstat-no" title="statement not covered" >i</span>f(!isHexDigit(ch)){<span class="cstat-no" title="statement not covered" >break}<span class="cstat-no" title="statement not covered" ></span>n</span>umber+=source[index++]}<span class="cstat-no" title="statement not covered" ></span>i</span>f(number.length&lt;=2){<span class="cstat-no" title="statement not covered" >throwError({},Messages.UnexpectedToken,"ILLEGAL")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(index&lt;length){<span class="cstat-no" title="statement not covered" >ch=source[index];<span class="cstat-no" title="statement not covered" >i</span>f(isIdentifierStart(ch)){<span class="cstat-no" title="statement not covered" >throwError({},Messages.UnexpectedToken,"ILLEGAL")}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn{type:Token.NumericLiteral,value:parseInt(number,16),lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}</span>else <span class="cstat-no" title="statement not covered" >if(isOctalDigit(ch)){<span class="cstat-no" title="statement not covered" >number+=source[index++];<span class="cstat-no" title="statement not covered" >w</span>hile(index&lt;length){<span class="cstat-no" title="statement not covered" >ch=source[index];<span class="cstat-no" title="statement not covered" >i</span>f(!isOctalDigit(ch)){<span class="cstat-no" title="statement not covered" >break}<span class="cstat-no" title="statement not covered" ></span>n</span>umber+=source[index++]}<span class="cstat-no" title="statement not covered" ></span>i</span>f(index&lt;length){<span class="cstat-no" title="statement not covered" >ch=source[index];<span class="cstat-no" title="statement not covered" >i</span>f(isIdentifierStart(ch)||isDecimalDigit(ch)){<span class="cstat-no" title="statement not covered" >throwError({},Messages.UnexpectedToken,"ILLEGAL")}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn{type:Token.NumericLiteral,value:parseInt(number,8),octal:true,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}<span class="cstat-no" title="statement not covered" ></span>i</span></span>f(isDecimalDigit(ch)){<span class="cstat-no" title="statement not covered" >throwError({},Messages.UnexpectedToken,"ILLEGAL")}</span>}<span class="cstat-no" title="statement not covered" ></span>w</span>hile(index&lt;length){<span class="cstat-no" title="statement not covered" >ch=source[index];<span class="cstat-no" title="statement not covered" >i</span>f(!isDecimalDigit(ch)){<span class="cstat-no" title="statement not covered" >break}<span class="cstat-no" title="statement not covered" ></span>n</span>umber+=source[index++]}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(ch==="."){<span class="cstat-no" title="statement not covered" >number+=source[index++];<span class="cstat-no" title="statement not covered" >w</span>hile(index&lt;length){<span class="cstat-no" title="statement not covered" >ch=source[index];<span class="cstat-no" title="statement not covered" >i</span>f(!isDecimalDigit(ch)){<span class="cstat-no" title="statement not covered" >break}<span class="cstat-no" title="statement not covered" ></span>n</span>umber+=source[index++]}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(ch==="e"||ch==="E"){<span class="cstat-no" title="statement not covered" >number+=source[index++];<span class="cstat-no" title="statement not covered" >c</span>h=source[index];<span class="cstat-no" title="statement not covered" >i</span>f(ch==="+"||ch==="-"){<span class="cstat-no" title="statement not covered" >number+=source[index++]}<span class="cstat-no" title="statement not covered" ></span>c</span>h=source[index];<span class="cstat-no" title="statement not covered" >i</span>f(isDecimalDigit(ch)){<span class="cstat-no" title="statement not covered" >number+=source[index++];<span class="cstat-no" title="statement not covered" >w</span>hile(index&lt;length){<span class="cstat-no" title="statement not covered" >ch=source[index];<span class="cstat-no" title="statement not covered" >i</span>f(!isDecimalDigit(ch)){<span class="cstat-no" title="statement not covered" >break}<span class="cstat-no" title="statement not covered" ></span>n</span>umber+=source[index++]}</span>}</span>else{<span class="cstat-no" title="statement not covered" >ch="character "+ch;<span class="cstat-no" title="statement not covered" >i</span>f(index&gt;=length){<span class="cstat-no" title="statement not covered" >ch="&lt;end&gt;"}<span class="cstat-no" title="statement not covered" ></span>t</span>hrowError({},Messages.UnexpectedToken,"ILLEGAL")}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(index&lt;length){<span class="cstat-no" title="statement not covered" >ch=source[index];<span class="cstat-no" title="statement not covered" >i</span>f(isIdentifierStart(ch)){<span class="cstat-no" title="statement not covered" >throwError({},Messages.UnexpectedToken,"ILLEGAL")}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn{type:Token.NumericLiteral,value:parseFloat(number),lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}<span class="fstat-no" title="function not covered" ></span>function scanStringLiteral(){<span class="cstat-no" title="statement not covered" ></span>var str="",quote,start,ch,code,unescaped,restore,octal=false;<span class="cstat-no" title="statement not covered" >q</span>uote=source[index];<span class="cstat-no" title="statement not covered" >a</span>ssert(quote==="'"||quote==='"',"String literal must starts with a quote");<span class="cstat-no" title="statement not covered" >s</span>tart=index;<span class="cstat-no" title="statement not covered" >+</span>+index;<span class="cstat-no" title="statement not covered" >w</span>hile(index&lt;length){<span class="cstat-no" title="statement not covered" >ch=source[index++];<span class="cstat-no" title="statement not covered" >i</span>f(ch===quote){<span class="cstat-no" title="statement not covered" >quote="";<span class="cstat-no" title="statement not covered" >b</span>reak}</span>else <span class="cstat-no" title="statement not covered" >if(ch==="\\"){<span class="cstat-no" title="statement not covered" >ch=source[index++];<span class="cstat-no" title="statement not covered" >i</span>f(!isLineTerminator(ch)){<span class="cstat-no" title="statement not covered" >switch(ch){case"n":<span class="cstat-no" title="statement not covered" >str+="\n";<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"r":<span class="cstat-no" title="statement not covered" >str+="\r";<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"t":<span class="cstat-no" title="statement not covered" >str+="	";<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"u":case"x":<span class="cstat-no" title="statement not covered" >restore=index;<span class="cstat-no" title="statement not covered" >u</span>nescaped=scanHexEscape(ch);<span class="cstat-no" title="statement not covered" >i</span>f(unescaped){<span class="cstat-no" title="statement not covered" >str+=unescaped}</span>else{<span class="cstat-no" title="statement not covered" >index=restore;<span class="cstat-no" title="statement not covered" >s</span>tr+=ch}<span class="cstat-no" title="statement not covered" ></span>b</span>reak;c</span>ase"b":<span class="cstat-no" title="statement not covered" >str+="\b";<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"f":<span class="cstat-no" title="statement not covered" >str+="\f";<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"v":<span class="cstat-no" title="statement not covered" >str+="";<span class="cstat-no" title="statement not covered" >b</span>reak;d</span>efault:<span class="cstat-no" title="statement not covered" >if(isOctalDigit(ch)){<span class="cstat-no" title="statement not covered" >code="01234567".indexOf(ch);<span class="cstat-no" title="statement not covered" >i</span>f(code!==0){<span class="cstat-no" title="statement not covered" >octal=true}<span class="cstat-no" title="statement not covered" ></span>i</span>f(index&lt;length&amp;&amp;isOctalDigit(source[index])){<span class="cstat-no" title="statement not covered" >octal=true;<span class="cstat-no" title="statement not covered" >c</span>ode=code*8+"01234567".indexOf(source[index++]);<span class="cstat-no" title="statement not covered" >i</span>f("0123".indexOf(ch)&gt;=0&amp;&amp;index&lt;length&amp;&amp;isOctalDigit(source[index])){<span class="cstat-no" title="statement not covered" >code=code*8+"01234567".indexOf(source[index++])}</span>}<span class="cstat-no" title="statement not covered" ></span>s</span>tr+=String.fromCharCode(code)}</span>else{<span class="cstat-no" title="statement not covered" >str+=ch}<span class="cstat-no" title="statement not covered" ></span>b</span>reak}</span>}</span>else{<span class="cstat-no" title="statement not covered" >++lineNumber;<span class="cstat-no" title="statement not covered" >i</span>f(ch==="\r"&amp;&amp;source[index]==="\n"){<span class="cstat-no" title="statement not covered" >++index}</span>}</span>}</span>else <span class="cstat-no" title="statement not covered" >if(isLineTerminator(ch)){<span class="cstat-no" title="statement not covered" >break}</span>else{<span class="cstat-no" title="statement not covered" >str+=ch}</span>}<span class="cstat-no" title="statement not covered" ></span></span></span>i</span>f(quote!==""){<span class="cstat-no" title="statement not covered" >throwError({},Messages.UnexpectedToken,"ILLEGAL")}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn{type:Token.StringLiteral,value:str,octal:octal,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}<span class="fstat-no" title="function not covered" ></span>function scanRegExp(){<span class="cstat-no" title="statement not covered" ></span>var str,ch,start,pattern,flags,value,classMarker=false,restore,terminated=false;<span class="cstat-no" title="statement not covered" >b</span>uffer=null;<span class="cstat-no" title="statement not covered" >s</span>kipComment();<span class="cstat-no" title="statement not covered" >s</span>tart=index;<span class="cstat-no" title="statement not covered" >c</span>h=source[index];<span class="cstat-no" title="statement not covered" >a</span>ssert(ch==="/","Regular expression literal must start with a slash");<span class="cstat-no" title="statement not covered" >s</span>tr=source[index++];<span class="cstat-no" title="statement not covered" >w</span>hile(index&lt;length){<span class="cstat-no" title="statement not covered" >ch=source[index++];<span class="cstat-no" title="statement not covered" >s</span>tr+=ch;<span class="cstat-no" title="statement not covered" >i</span>f(ch==="\\"){<span class="cstat-no" title="statement not covered" >ch=source[index++];<span class="cstat-no" title="statement not covered" >i</span>f(isLineTerminator(ch)){<span class="cstat-no" title="statement not covered" >throwError({},Messages.UnterminatedRegExp)}<span class="cstat-no" title="statement not covered" ></span>s</span>tr+=ch}</span>else <span class="cstat-no" title="statement not covered" >if(classMarker){<span class="cstat-no" title="statement not covered" >if(ch==="]"){<span class="cstat-no" title="statement not covered" >classMarker=false}</span>}</span>else{<span class="cstat-no" title="statement not covered" >if(ch==="/"){<span class="cstat-no" title="statement not covered" >terminated=true;<span class="cstat-no" title="statement not covered" >b</span>reak}</span>else <span class="cstat-no" title="statement not covered" >if(ch==="["){<span class="cstat-no" title="statement not covered" >classMarker=true}</span>else <span class="cstat-no" title="statement not covered" >if(isLineTerminator(ch)){<span class="cstat-no" title="statement not covered" >throwError({},Messages.UnterminatedRegExp)}</span>}</span></span></span>}<span class="cstat-no" title="statement not covered" ></span></span>i</span>f(!terminated){<span class="cstat-no" title="statement not covered" >throwError({},Messages.UnterminatedRegExp)}<span class="cstat-no" title="statement not covered" ></span>p</span>attern=str.substr(1,str.length-2);<span class="cstat-no" title="statement not covered" >f</span>lags="";<span class="cstat-no" title="statement not covered" >w</span>hile(index&lt;length){<span class="cstat-no" title="statement not covered" >ch=source[index];<span class="cstat-no" title="statement not covered" >i</span>f(!isIdentifierPart(ch)){<span class="cstat-no" title="statement not covered" >break}<span class="cstat-no" title="statement not covered" ></span>+</span>+index;<span class="cstat-no" title="statement not covered" >i</span>f(ch==="\\"&amp;&amp;index&lt;length){<span class="cstat-no" title="statement not covered" >ch=source[index];<span class="cstat-no" title="statement not covered" >i</span>f(ch==="u"){<span class="cstat-no" title="statement not covered" >++index;<span class="cstat-no" title="statement not covered" >r</span>estore=index;<span class="cstat-no" title="statement not covered" >c</span>h=scanHexEscape("u");<span class="cstat-no" title="statement not covered" >i</span>f(ch){<span class="cstat-no" title="statement not covered" >flags+=ch;<span class="cstat-no" title="statement not covered" >s</span>tr+="\\u";<span class="cstat-no" title="statement not covered" >f</span>or(;restore&lt;index;++restore){<span class="cstat-no" title="statement not covered" >str+=source[restore]}</span>}</span>else{<span class="cstat-no" title="statement not covered" >index=restore;<span class="cstat-no" title="statement not covered" >f</span>lags+="u";<span class="cstat-no" title="statement not covered" >s</span>tr+="\\u"}</span>}</span>else{<span class="cstat-no" title="statement not covered" >str+="\\"}</span>}</span>else{<span class="cstat-no" title="statement not covered" >flags+=ch;<span class="cstat-no" title="statement not covered" >s</span>tr+=ch}</span>}<span class="cstat-no" title="statement not covered" ></span>t</span>ry{<span class="cstat-no" title="statement not covered" >value=new RegExp(pattern,flags)}</span>catch(e){<span class="cstat-no" title="statement not covered" >throwError({},Messages.InvalidRegExp)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn{literal:str,value:value,range:[start,index]}}<span class="fstat-no" title="function not covered" ></span>function isIdentifierName(token){<span class="cstat-no" title="statement not covered" ></span>return token.type===Token.Identifier||token.type===Token.Keyword||token.type===Token.BooleanLiteral||token.type===Token.NullLiteral}<span class="fstat-no" title="function not covered" ></span>function advance(){<span class="cstat-no" title="statement not covered" ></span>var ch,token;<span class="cstat-no" title="statement not covered" >s</span>kipComment();<span class="cstat-no" title="statement not covered" >i</span>f(index&gt;=length){<span class="cstat-no" title="statement not covered" >return{type:Token.EOF,lineNumber:lineNumber,lineStart:lineStart,range:[index,index]}}<span class="cstat-no" title="statement not covered" ></span>t</span>oken=scanPunctuator();<span class="cstat-no" title="statement not covered" >i</span>f(typeof token!=="undefined"){<span class="cstat-no" title="statement not covered" >return token}<span class="cstat-no" title="statement not covered" ></span>c</span>h=source[index];<span class="cstat-no" title="statement not covered" >i</span>f(ch==="'"||ch==='"'){<span class="cstat-no" title="statement not covered" >return scanStringLiteral()}<span class="cstat-no" title="statement not covered" ></span>i</span>f(ch==="."||isDecimalDigit(ch)){<span class="cstat-no" title="statement not covered" >return scanNumericLiteral()}<span class="cstat-no" title="statement not covered" ></span>t</span>oken=scanIdentifier();<span class="cstat-no" title="statement not covered" >i</span>f(typeof token!=="undefined"){<span class="cstat-no" title="statement not covered" >return token}<span class="cstat-no" title="statement not covered" ></span>t</span>hrowError({},Messages.UnexpectedToken,"ILLEGAL")}<span class="fstat-no" title="function not covered" ></span>function lex(){<span class="cstat-no" title="statement not covered" ></span>var token;<span class="cstat-no" title="statement not covered" >i</span>f(buffer){<span class="cstat-no" title="statement not covered" >index=buffer.range[1];<span class="cstat-no" title="statement not covered" >l</span>ineNumber=buffer.lineNumber;<span class="cstat-no" title="statement not covered" >l</span>ineStart=buffer.lineStart;<span class="cstat-no" title="statement not covered" >t</span>oken=buffer;<span class="cstat-no" title="statement not covered" >b</span>uffer=null;<span class="cstat-no" title="statement not covered" >r</span>eturn token}<span class="cstat-no" title="statement not covered" ></span>b</span>uffer=null;<span class="cstat-no" title="statement not covered" >r</span>eturn advance()}<span class="fstat-no" title="function not covered" ></span>function lookahead(){<span class="cstat-no" title="statement not covered" ></span>var pos,line,start;<span class="cstat-no" title="statement not covered" >i</span>f(buffer!==null){<span class="cstat-no" title="statement not covered" >return buffer}<span class="cstat-no" title="statement not covered" ></span>p</span>os=index;<span class="cstat-no" title="statement not covered" >l</span>ine=lineNumber;<span class="cstat-no" title="statement not covered" >s</span>tart=lineStart;<span class="cstat-no" title="statement not covered" >b</span>uffer=advance();<span class="cstat-no" title="statement not covered" >i</span>ndex=pos;<span class="cstat-no" title="statement not covered" >l</span>ineNumber=line;<span class="cstat-no" title="statement not covered" >l</span>ineStart=start;<span class="cstat-no" title="statement not covered" >r</span>eturn buffer}<span class="fstat-no" title="function not covered" ></span>function peekLineTerminator(){<span class="cstat-no" title="statement not covered" ></span>var pos,line,start,found;<span class="cstat-no" title="statement not covered" >p</span>os=index;<span class="cstat-no" title="statement not covered" >l</span>ine=lineNumber;<span class="cstat-no" title="statement not covered" >s</span>tart=lineStart;<span class="cstat-no" title="statement not covered" >s</span>kipComment();<span class="cstat-no" title="statement not covered" >f</span>ound=lineNumber!==line;<span class="cstat-no" title="statement not covered" >i</span>ndex=pos;<span class="cstat-no" title="statement not covered" >l</span>ineNumber=line;<span class="cstat-no" title="statement not covered" >l</span>ineStart=start;<span class="cstat-no" title="statement not covered" >r</span>eturn found}<span class="fstat-no" title="function not covered" ></span>function throwError(token,messageFormat){<span class="cstat-no" title="statement not covered" ></span>var error,args=Array.prototype.slice.call(arguments,2),msg=messageFormat.replace(/%(\d)/g,<span class="fstat-no" title="function not covered" >function(whole,index){<span class="cstat-no" title="statement not covered" ></span>return args[index]||""}</span>);<span class="cstat-no" title="statement not covered" >i</span>f(typeof token.lineNumber==="number"){<span class="cstat-no" title="statement not covered" >error=new Error("Line "+token.lineNumber+": "+msg);<span class="cstat-no" title="statement not covered" >e</span>rror.index=token.range[0];<span class="cstat-no" title="statement not covered" >e</span>rror.lineNumber=token.lineNumber;<span class="cstat-no" title="statement not covered" >e</span>rror.column=token.range[0]-lineStart+1}</span>else{<span class="cstat-no" title="statement not covered" >error=new Error("Line "+lineNumber+": "+msg);<span class="cstat-no" title="statement not covered" >e</span>rror.index=index;<span class="cstat-no" title="statement not covered" >e</span>rror.lineNumber=lineNumber;<span class="cstat-no" title="statement not covered" >e</span>rror.column=index-lineStart+1}<span class="cstat-no" title="statement not covered" ></span>t</span>hrow error}<span class="fstat-no" title="function not covered" ></span>function throwErrorTolerant(){<span class="cstat-no" title="statement not covered" ></span>try{<span class="cstat-no" title="statement not covered" >throwError.apply(null,arguments)}</span>catch(e){<span class="cstat-no" title="statement not covered" >if(extra.errors){<span class="cstat-no" title="statement not covered" >extra.errors.push(e)}</span>else{<span class="cstat-no" title="statement not covered" >throw e}</span>}</span>}<span class="fstat-no" title="function not covered" ></span>function throwUnexpected(token){<span class="cstat-no" title="statement not covered" ></span>if(token.type===Token.EOF){<span class="cstat-no" title="statement not covered" >throwError(token,Messages.UnexpectedEOS)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(token.type===Token.NumericLiteral){<span class="cstat-no" title="statement not covered" >throwError(token,Messages.UnexpectedNumber)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(token.type===Token.StringLiteral){<span class="cstat-no" title="statement not covered" >throwError(token,Messages.UnexpectedString)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(token.type===Token.Identifier){<span class="cstat-no" title="statement not covered" >throwError(token,Messages.UnexpectedIdentifier)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(token.type===Token.Keyword){<span class="cstat-no" title="statement not covered" >if(isFutureReservedWord(token.value)){<span class="cstat-no" title="statement not covered" >throwError(token,Messages.UnexpectedReserved)}</span>else <span class="cstat-no" title="statement not covered" >if(strict&amp;&amp;isStrictModeReservedWord(token.value)){<span class="cstat-no" title="statement not covered" >throwErrorTolerant(token,Messages.StrictReservedWord);<span class="cstat-no" title="statement not covered" >r</span>eturn}<span class="cstat-no" title="statement not covered" ></span>t</span></span>hrowError(token,Messages.UnexpectedToken,token.value)}<span class="cstat-no" title="statement not covered" ></span>t</span>hrowError(token,Messages.UnexpectedToken,token.value)}<span class="fstat-no" title="function not covered" ></span>function expect(value){<span class="cstat-no" title="statement not covered" ></span>var token=lex();<span class="cstat-no" title="statement not covered" >i</span>f(token.type!==Token.Punctuator||token.value!==value){<span class="cstat-no" title="statement not covered" >throwUnexpected(token)}</span>}<span class="fstat-no" title="function not covered" ></span>function expectKeyword(keyword){<span class="cstat-no" title="statement not covered" ></span>var token=lex();<span class="cstat-no" title="statement not covered" >i</span>f(token.type!==Token.Keyword||token.value!==keyword){<span class="cstat-no" title="statement not covered" >throwUnexpected(token)}</span>}<span class="fstat-no" title="function not covered" ></span>function match(value){<span class="cstat-no" title="statement not covered" ></span>var token=lookahead();<span class="cstat-no" title="statement not covered" >r</span>eturn token.type===Token.Punctuator&amp;&amp;token.value===value}<span class="fstat-no" title="function not covered" ></span>function matchKeyword(keyword){<span class="cstat-no" title="statement not covered" ></span>var token=lookahead();<span class="cstat-no" title="statement not covered" >r</span>eturn token.type===Token.Keyword&amp;&amp;token.value===keyword}<span class="fstat-no" title="function not covered" ></span>function matchAssign(){<span class="cstat-no" title="statement not covered" ></span>var token=lookahead(),op=token.value;<span class="cstat-no" title="statement not covered" >i</span>f(token.type!==Token.Punctuator){<span class="cstat-no" title="statement not covered" >return false}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn op==="="||op==="*="||op==="/="||op==="%="||op==="+="||op==="-="||op==="&lt;&lt;="||op==="&gt;&gt;="||op==="&gt;&gt;&gt;="||op==="&amp;="||op==="^="||op==="|="}<span class="fstat-no" title="function not covered" ></span>function consumeSemicolon(){<span class="cstat-no" title="statement not covered" ></span>var token,line;<span class="cstat-no" title="statement not covered" >i</span>f(source[index]===";"){<span class="cstat-no" title="statement not covered" >lex();<span class="cstat-no" title="statement not covered" >r</span>eturn}<span class="cstat-no" title="statement not covered" ></span>l</span>ine=lineNumber;<span class="cstat-no" title="statement not covered" >s</span>kipComment();<span class="cstat-no" title="statement not covered" >i</span>f(lineNumber!==line){<span class="cstat-no" title="statement not covered" >return}<span class="cstat-no" title="statement not covered" ></span>i</span>f(match(";")){<span class="cstat-no" title="statement not covered" >lex();<span class="cstat-no" title="statement not covered" >r</span>eturn}<span class="cstat-no" title="statement not covered" ></span>t</span>oken=lookahead();<span class="cstat-no" title="statement not covered" >i</span>f(token.type!==Token.EOF&amp;&amp;!match("}")){<span class="cstat-no" title="statement not covered" >throwUnexpected(token)}</span>}<span class="fstat-no" title="function not covered" ></span>function isLeftHandSide(expr){<span class="cstat-no" title="statement not covered" ></span>return expr.type===Syntax.Identifier||expr.type===Syntax.MemberExpression}<span class="fstat-no" title="function not covered" ></span>function parseArrayInitialiser(){<span class="cstat-no" title="statement not covered" ></span>var elements=[];<span class="cstat-no" title="statement not covered" >e</span>xpect("[");<span class="cstat-no" title="statement not covered" >w</span>hile(!match("]")){<span class="cstat-no" title="statement not covered" >if(match(",")){<span class="cstat-no" title="statement not covered" >lex();<span class="cstat-no" title="statement not covered" >e</span>lements.push(null)}</span>else{<span class="cstat-no" title="statement not covered" >elements.push(parseAssignmentExpression());<span class="cstat-no" title="statement not covered" >i</span>f(!match("]")){<span class="cstat-no" title="statement not covered" >expect(",")}</span>}</span>}<span class="cstat-no" title="statement not covered" ></span>e</span>xpect("]");<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Syntax.ArrayExpression,elements:elements}}<span class="fstat-no" title="function not covered" ></span>function parsePropertyFunction(param,first){<span class="cstat-no" title="statement not covered" ></span>var previousStrict,body;<span class="cstat-no" title="statement not covered" >p</span>reviousStrict=strict;<span class="cstat-no" title="statement not covered" >b</span>ody=parseFunctionSourceElements();<span class="cstat-no" title="statement not covered" >i</span>f(first&amp;&amp;strict&amp;&amp;isRestrictedWord(param[0].name)){<span class="cstat-no" title="statement not covered" >throwErrorTolerant(first,Messages.StrictParamName)}<span class="cstat-no" title="statement not covered" ></span>s</span>trict=previousStrict;<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Syntax.FunctionExpression,id:null,params:param,defaults:[],body:body,rest:null,generator:false,expression:false}}<span class="fstat-no" title="function not covered" ></span>function parseObjectPropertyKey(){<span class="cstat-no" title="statement not covered" ></span>var token=lex();<span class="cstat-no" title="statement not covered" >i</span>f(token.type===Token.StringLiteral||token.type===Token.NumericLiteral){<span class="cstat-no" title="statement not covered" >if(strict&amp;&amp;token.octal){<span class="cstat-no" title="statement not covered" >throwErrorTolerant(token,Messages.StrictOctalLiteral)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn createLiteral(token)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn{type:Syntax.Identifier,name:token.value}}<span class="fstat-no" title="function not covered" ></span>function parseObjectProperty(){<span class="cstat-no" title="statement not covered" ></span>var token,key,id,param;<span class="cstat-no" title="statement not covered" >t</span>oken=lookahead();<span class="cstat-no" title="statement not covered" >i</span>f(token.type===Token.Identifier){<span class="cstat-no" title="statement not covered" >id=parseObjectPropertyKey();<span class="cstat-no" title="statement not covered" >i</span>f(token.value==="get"&amp;&amp;!match(":")){<span class="cstat-no" title="statement not covered" >key=parseObjectPropertyKey();<span class="cstat-no" title="statement not covered" >e</span>xpect("(");<span class="cstat-no" title="statement not covered" >e</span>xpect(")");<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Syntax.Property,key:key,value:parsePropertyFunction([]),kind:"get"}}</span>else <span class="cstat-no" title="statement not covered" >if(token.value==="set"&amp;&amp;!match(":")){<span class="cstat-no" title="statement not covered" >key=parseObjectPropertyKey();<span class="cstat-no" title="statement not covered" >e</span>xpect("(");<span class="cstat-no" title="statement not covered" >t</span>oken=lookahead();<span class="cstat-no" title="statement not covered" >i</span>f(token.type!==Token.Identifier){<span class="cstat-no" title="statement not covered" >expect(")");<span class="cstat-no" title="statement not covered" >t</span>hrowErrorTolerant(token,Messages.UnexpectedToken,token.value);<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Syntax.Property,key:key,value:parsePropertyFunction([]),kind:"set"}}</span>else{<span class="cstat-no" title="statement not covered" >param=[parseVariableIdentifier()];<span class="cstat-no" title="statement not covered" >e</span>xpect(")");<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Syntax.Property,key:key,value:parsePropertyFunction(param,token),kind:"set"}}</span>}</span>else{<span class="cstat-no" title="statement not covered" >expect(":");<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Syntax.Property,key:id,value:parseAssignmentExpression(),kind:"init"}}</span>}</span></span>else <span class="cstat-no" title="statement not covered" >if(token.type===Token.EOF||token.type===Token.Punctuator){<span class="cstat-no" title="statement not covered" >throwUnexpected(token)}</span>else{<span class="cstat-no" title="statement not covered" >key=parseObjectPropertyKey();<span class="cstat-no" title="statement not covered" >e</span>xpect(":");<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Syntax.Property,key:key,value:parseAssignmentExpression(),kind:"init"}}</span>}<span class="fstat-no" title="function not covered" ></span></span>function parseObjectInitialiser(){<span class="cstat-no" title="statement not covered" ></span>var properties=[],property,name,kind,map={},toString=String;<span class="cstat-no" title="statement not covered" >e</span>xpect("{");<span class="cstat-no" title="statement not covered" >w</span>hile(!match("}")){<span class="cstat-no" title="statement not covered" >property=parseObjectProperty();<span class="cstat-no" title="statement not covered" >i</span>f(property.key.type===Syntax.Identifier){<span class="cstat-no" title="statement not covered" >name=property.key.name}</span>else{<span class="cstat-no" title="statement not covered" >name=toString(property.key.value)}<span class="cstat-no" title="statement not covered" ></span>k</span>ind=property.kind==="init"?PropertyKind.Data:property.kind==="get"?PropertyKind.Get:PropertyKind.Set;<span class="cstat-no" title="statement not covered" >i</span>f(Object.prototype.hasOwnProperty.call(map,name)){<span class="cstat-no" title="statement not covered" >if(map[name]===PropertyKind.Data){<span class="cstat-no" title="statement not covered" >if(strict&amp;&amp;kind===PropertyKind.Data){<span class="cstat-no" title="statement not covered" >throwErrorTolerant({},Messages.StrictDuplicateProperty)}</span>else <span class="cstat-no" title="statement not covered" >if(kind!==PropertyKind.Data){<span class="cstat-no" title="statement not covered" >throwErrorTolerant({},Messages.AccessorDataProperty)}</span>}</span></span>else{<span class="cstat-no" title="statement not covered" >if(kind===PropertyKind.Data){<span class="cstat-no" title="statement not covered" >throwErrorTolerant({},Messages.AccessorDataProperty)}</span>else <span class="cstat-no" title="statement not covered" >if(map[name]&amp;kind){<span class="cstat-no" title="statement not covered" >throwErrorTolerant({},Messages.AccessorGetSet)}</span>}<span class="cstat-no" title="statement not covered" ></span></span>m</span>ap[name]|=kind}</span>else{<span class="cstat-no" title="statement not covered" >map[name]=kind}<span class="cstat-no" title="statement not covered" ></span>p</span>roperties.push(property);<span class="cstat-no" title="statement not covered" >i</span>f(!match("}")){<span class="cstat-no" title="statement not covered" >expect(",")}</span>}<span class="cstat-no" title="statement not covered" ></span>e</span>xpect("}");<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Syntax.ObjectExpression,properties:properties}}<span class="fstat-no" title="function not covered" ></span>function parseGroupExpression(){<span class="cstat-no" title="statement not covered" ></span>var expr;<span class="cstat-no" title="statement not covered" >e</span>xpect("(");<span class="cstat-no" title="statement not covered" >e</span>xpr=parseExpression();<span class="cstat-no" title="statement not covered" >e</span>xpect(")");<span class="cstat-no" title="statement not covered" >r</span>eturn expr}<span class="fstat-no" title="function not covered" ></span>function parsePrimaryExpression(){<span class="cstat-no" title="statement not covered" ></span>var token=lookahead(),type=token.type;<span class="cstat-no" title="statement not covered" >i</span>f(type===Token.Identifier){<span class="cstat-no" title="statement not covered" >return{type:Syntax.Identifier,name:lex().value}}<span class="cstat-no" title="statement not covered" ></span>i</span>f(type===Token.StringLiteral||type===Token.NumericLiteral){<span class="cstat-no" title="statement not covered" >if(strict&amp;&amp;token.octal){<span class="cstat-no" title="statement not covered" >throwErrorTolerant(token,Messages.StrictOctalLiteral)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn createLiteral(lex())}<span class="cstat-no" title="statement not covered" ></span>i</span>f(type===Token.Keyword){<span class="cstat-no" title="statement not covered" >if(matchKeyword("this")){<span class="cstat-no" title="statement not covered" >lex();<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Syntax.ThisExpression}}<span class="cstat-no" title="statement not covered" ></span>i</span>f(matchKeyword("function")){<span class="cstat-no" title="statement not covered" >return parseFunctionExpression()}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(type===Token.BooleanLiteral){<span class="cstat-no" title="statement not covered" >lex();<span class="cstat-no" title="statement not covered" >t</span>oken.value=token.value==="true";<span class="cstat-no" title="statement not covered" >r</span>eturn createLiteral(token)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(type===Token.NullLiteral){<span class="cstat-no" title="statement not covered" >lex();<span class="cstat-no" title="statement not covered" >t</span>oken.value=null;<span class="cstat-no" title="statement not covered" >r</span>eturn createLiteral(token)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(match("[")){<span class="cstat-no" title="statement not covered" >return parseArrayInitialiser()}<span class="cstat-no" title="statement not covered" ></span>i</span>f(match("{")){<span class="cstat-no" title="statement not covered" >return parseObjectInitialiser()}<span class="cstat-no" title="statement not covered" ></span>i</span>f(match("(")){<span class="cstat-no" title="statement not covered" >return parseGroupExpression()}<span class="cstat-no" title="statement not covered" ></span>i</span>f(match("/")||match("/=")){<span class="cstat-no" title="statement not covered" >return createLiteral(scanRegExp())}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn throwUnexpected(lex())}<span class="fstat-no" title="function not covered" ></span>function parseArguments(){<span class="cstat-no" title="statement not covered" ></span>var args=[];<span class="cstat-no" title="statement not covered" >e</span>xpect("(");<span class="cstat-no" title="statement not covered" >i</span>f(!match(")")){<span class="cstat-no" title="statement not covered" >while(index&lt;length){<span class="cstat-no" title="statement not covered" >args.push(parseAssignmentExpression());<span class="cstat-no" title="statement not covered" >i</span>f(match(")")){<span class="cstat-no" title="statement not covered" >break}<span class="cstat-no" title="statement not covered" ></span>e</span>xpect(",")}</span>}<span class="cstat-no" title="statement not covered" ></span>e</span>xpect(")");<span class="cstat-no" title="statement not covered" >r</span>eturn args}<span class="fstat-no" title="function not covered" ></span>function parseNonComputedProperty(){<span class="cstat-no" title="statement not covered" ></span>var token=lex();<span class="cstat-no" title="statement not covered" >i</span>f(!isIdentifierName(token)){<span class="cstat-no" title="statement not covered" >throwUnexpected(token)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn{type:Syntax.Identifier,name:token.value}}<span class="fstat-no" title="function not covered" ></span>function parseNonComputedMember(){<span class="cstat-no" title="statement not covered" ></span>expect(".");<span class="cstat-no" title="statement not covered" >r</span>eturn parseNonComputedProperty()}<span class="fstat-no" title="function not covered" ></span>function parseComputedMember(){<span class="cstat-no" title="statement not covered" ></span>var expr;<span class="cstat-no" title="statement not covered" >e</span>xpect("[");<span class="cstat-no" title="statement not covered" >e</span>xpr=parseExpression();<span class="cstat-no" title="statement not covered" >e</span>xpect("]");<span class="cstat-no" title="statement not covered" >r</span>eturn expr}<span class="fstat-no" title="function not covered" ></span>function parseNewExpression(){<span class="cstat-no" title="statement not covered" ></span>var expr;<span class="cstat-no" title="statement not covered" >e</span>xpectKeyword("new");<span class="cstat-no" title="statement not covered" >e</span>xpr={type:Syntax.NewExpression,callee:parseLeftHandSideExpression(),arguments:[]};<span class="cstat-no" title="statement not covered" >i</span>f(match("(")){<span class="cstat-no" title="statement not covered" >expr["arguments"]=parseArguments()}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn expr}<span class="fstat-no" title="function not covered" ></span>function parseLeftHandSideExpressionAllowCall(){<span class="cstat-no" title="statement not covered" ></span>var expr;<span class="cstat-no" title="statement not covered" >e</span>xpr=matchKeyword("new")?parseNewExpression():parsePrimaryExpression();<span class="cstat-no" title="statement not covered" >w</span>hile(match(".")||match("[")||match("(")){<span class="cstat-no" title="statement not covered" >if(match("(")){<span class="cstat-no" title="statement not covered" >expr={type:Syntax.CallExpression,callee:expr,arguments:parseArguments()}}</span>else <span class="cstat-no" title="statement not covered" >if(match("[")){<span class="cstat-no" title="statement not covered" >expr={type:Syntax.MemberExpression,computed:true,object:expr,property:parseComputedMember()}}</span>else{<span class="cstat-no" title="statement not covered" >expr={type:Syntax.MemberExpression,computed:false,object:expr,property:parseNonComputedMember()}}</span>}<span class="cstat-no" title="statement not covered" ></span></span>r</span>eturn expr}<span class="fstat-no" title="function not covered" ></span>function parseLeftHandSideExpression(){<span class="cstat-no" title="statement not covered" ></span>var expr;<span class="cstat-no" title="statement not covered" >e</span>xpr=matchKeyword("new")?parseNewExpression():parsePrimaryExpression();<span class="cstat-no" title="statement not covered" >w</span>hile(match(".")||match("[")){<span class="cstat-no" title="statement not covered" >if(match("[")){<span class="cstat-no" title="statement not covered" >expr={type:Syntax.MemberExpression,computed:true,object:expr,property:parseComputedMember()}}</span>else{<span class="cstat-no" title="statement not covered" >expr={type:Syntax.MemberExpression,computed:false,object:expr,property:parseNonComputedMember()}}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn expr}<span class="fstat-no" title="function not covered" ></span>function parsePostfixExpression(){<span class="cstat-no" title="statement not covered" ></span>var expr=parseLeftHandSideExpressionAllowCall(),token;<span class="cstat-no" title="statement not covered" >t</span>oken=lookahead();<span class="cstat-no" title="statement not covered" >i</span>f(token.type!==Token.Punctuator){<span class="cstat-no" title="statement not covered" >return expr}<span class="cstat-no" title="statement not covered" ></span>i</span>f((match("++")||match("--"))&amp;&amp;!peekLineTerminator()){<span class="cstat-no" title="statement not covered" >if(strict&amp;&amp;expr.type===Syntax.Identifier&amp;&amp;isRestrictedWord(expr.name)){<span class="cstat-no" title="statement not covered" >throwErrorTolerant({},Messages.StrictLHSPostfix)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!isLeftHandSide(expr)){<span class="cstat-no" title="statement not covered" >throwErrorTolerant({},Messages.InvalidLHSInAssignment)}<span class="cstat-no" title="statement not covered" ></span>e</span>xpr={type:Syntax.UpdateExpression,operator:lex().value,argument:expr,prefix:false}}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn expr}<span class="fstat-no" title="function not covered" ></span>function parseUnaryExpression(){<span class="cstat-no" title="statement not covered" ></span>var token,expr;<span class="cstat-no" title="statement not covered" >t</span>oken=lookahead();<span class="cstat-no" title="statement not covered" >i</span>f(token.type!==Token.Punctuator&amp;&amp;token.type!==Token.Keyword){<span class="cstat-no" title="statement not covered" >return parsePostfixExpression()}<span class="cstat-no" title="statement not covered" ></span>i</span>f(match("++")||match("--")){<span class="cstat-no" title="statement not covered" >token=lex();<span class="cstat-no" title="statement not covered" >e</span>xpr=parseUnaryExpression();<span class="cstat-no" title="statement not covered" >i</span>f(strict&amp;&amp;expr.type===Syntax.Identifier&amp;&amp;isRestrictedWord(expr.name)){<span class="cstat-no" title="statement not covered" >throwErrorTolerant({},Messages.StrictLHSPrefix)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!isLeftHandSide(expr)){<span class="cstat-no" title="statement not covered" >throwErrorTolerant({},Messages.InvalidLHSInAssignment)}<span class="cstat-no" title="statement not covered" ></span>e</span>xpr={type:Syntax.UpdateExpression,operator:token.value,argument:expr,prefix:true};<span class="cstat-no" title="statement not covered" >r</span>eturn expr}<span class="cstat-no" title="statement not covered" ></span>i</span>f(match("+")||match("-")||match("~")||match("!")){<span class="cstat-no" title="statement not covered" >expr={type:Syntax.UnaryExpression,operator:lex().value,argument:parseUnaryExpression(),prefix:true};<span class="cstat-no" title="statement not covered" >r</span>eturn expr}<span class="cstat-no" title="statement not covered" ></span>i</span>f(matchKeyword("delete")||matchKeyword("void")||matchKeyword("typeof")){<span class="cstat-no" title="statement not covered" >expr={type:Syntax.UnaryExpression,operator:lex().value,argument:parseUnaryExpression(),prefix:true};<span class="cstat-no" title="statement not covered" >i</span>f(strict&amp;&amp;expr.operator==="delete"&amp;&amp;expr.argument.type===Syntax.Identifier){<span class="cstat-no" title="statement not covered" >throwErrorTolerant({},Messages.StrictDelete)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn expr}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn parsePostfixExpression()}<span class="fstat-no" title="function not covered" ></span>function parseMultiplicativeExpression(){<span class="cstat-no" title="statement not covered" ></span>var expr=parseUnaryExpression();<span class="cstat-no" title="statement not covered" >w</span>hile(match("*")||match("/")||match("%")){<span class="cstat-no" title="statement not covered" >expr={type:Syntax.BinaryExpression,operator:lex().value,left:expr,right:parseUnaryExpression()}}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn expr}<span class="fstat-no" title="function not covered" ></span>function parseAdditiveExpression(){<span class="cstat-no" title="statement not covered" ></span>var expr=parseMultiplicativeExpression();<span class="cstat-no" title="statement not covered" >w</span>hile(match("+")||match("-")){<span class="cstat-no" title="statement not covered" >expr={type:Syntax.BinaryExpression,operator:lex().value,left:expr,right:parseMultiplicativeExpression()}}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn expr}<span class="fstat-no" title="function not covered" ></span>function parseShiftExpression(){<span class="cstat-no" title="statement not covered" ></span>var expr=parseAdditiveExpression();<span class="cstat-no" title="statement not covered" >w</span>hile(match("&lt;&lt;")||match("&gt;&gt;")||match("&gt;&gt;&gt;")){<span class="cstat-no" title="statement not covered" >expr={type:Syntax.BinaryExpression,operator:lex().value,left:expr,right:parseAdditiveExpression()}}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn expr}<span class="fstat-no" title="function not covered" ></span>function parseRelationalExpression(){<span class="cstat-no" title="statement not covered" ></span>var expr,previousAllowIn;<span class="cstat-no" title="statement not covered" >p</span>reviousAllowIn=state.allowIn;<span class="cstat-no" title="statement not covered" >s</span>tate.allowIn=true;<span class="cstat-no" title="statement not covered" >e</span>xpr=parseShiftExpression();<span class="cstat-no" title="statement not covered" >w</span>hile(match("&lt;")||match("&gt;")||match("&lt;=")||match("&gt;=")||previousAllowIn&amp;&amp;matchKeyword("in")||matchKeyword("instanceof")){<span class="cstat-no" title="statement not covered" >expr={type:Syntax.BinaryExpression,operator:lex().value,left:expr,right:parseShiftExpression()}}<span class="cstat-no" title="statement not covered" ></span>s</span>tate.allowIn=previousAllowIn;<span class="cstat-no" title="statement not covered" >r</span>eturn expr}<span class="fstat-no" title="function not covered" ></span>function parseEqualityExpression(){<span class="cstat-no" title="statement not covered" ></span>var expr=parseRelationalExpression();<span class="cstat-no" title="statement not covered" >w</span>hile(match("==")||match("!=")||match("===")||match("!==")){<span class="cstat-no" title="statement not covered" >expr={type:Syntax.BinaryExpression,operator:lex().value,left:expr,right:parseRelationalExpression()}}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn expr}<span class="fstat-no" title="function not covered" ></span>function parseBitwiseANDExpression(){<span class="cstat-no" title="statement not covered" ></span>var expr=parseEqualityExpression();<span class="cstat-no" title="statement not covered" >w</span>hile(match("&amp;")){<span class="cstat-no" title="statement not covered" >lex();<span class="cstat-no" title="statement not covered" >e</span>xpr={type:Syntax.BinaryExpression,operator:"&amp;",left:expr,right:parseEqualityExpression()}}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn expr}<span class="fstat-no" title="function not covered" ></span>function parseBitwiseXORExpression(){<span class="cstat-no" title="statement not covered" ></span>var expr=parseBitwiseANDExpression();<span class="cstat-no" title="statement not covered" >w</span>hile(match("^")){<span class="cstat-no" title="statement not covered" >lex();<span class="cstat-no" title="statement not covered" >e</span>xpr={type:Syntax.BinaryExpression,operator:"^",left:expr,right:parseBitwiseANDExpression()}}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn expr}<span class="fstat-no" title="function not covered" ></span>function parseBitwiseORExpression(){<span class="cstat-no" title="statement not covered" ></span>var expr=parseBitwiseXORExpression();<span class="cstat-no" title="statement not covered" >w</span>hile(match("|")){<span class="cstat-no" title="statement not covered" >lex();<span class="cstat-no" title="statement not covered" >e</span>xpr={type:Syntax.BinaryExpression,operator:"|",left:expr,right:parseBitwiseXORExpression()}}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn expr}<span class="fstat-no" title="function not covered" ></span>function parseLogicalANDExpression(){<span class="cstat-no" title="statement not covered" ></span>var expr=parseBitwiseORExpression();<span class="cstat-no" title="statement not covered" >w</span>hile(match("&amp;&amp;")){<span class="cstat-no" title="statement not covered" >lex();<span class="cstat-no" title="statement not covered" >e</span>xpr={type:Syntax.LogicalExpression,operator:"&amp;&amp;",left:expr,right:parseBitwiseORExpression()}}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn expr}<span class="fstat-no" title="function not covered" ></span>function parseLogicalORExpression(){<span class="cstat-no" title="statement not covered" ></span>var expr=parseLogicalANDExpression();<span class="cstat-no" title="statement not covered" >w</span>hile(match("||")){<span class="cstat-no" title="statement not covered" >lex();<span class="cstat-no" title="statement not covered" >e</span>xpr={type:Syntax.LogicalExpression,operator:"||",left:expr,right:parseLogicalANDExpression()}}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn expr}<span class="fstat-no" title="function not covered" ></span>function parseConditionalExpression(){<span class="cstat-no" title="statement not covered" ></span>var expr,previousAllowIn,consequent;<span class="cstat-no" title="statement not covered" >e</span>xpr=parseLogicalORExpression();<span class="cstat-no" title="statement not covered" >i</span>f(match("?")){<span class="cstat-no" title="statement not covered" >lex();<span class="cstat-no" title="statement not covered" >p</span>reviousAllowIn=state.allowIn;<span class="cstat-no" title="statement not covered" >s</span>tate.allowIn=true;<span class="cstat-no" title="statement not covered" >c</span>onsequent=parseAssignmentExpression();<span class="cstat-no" title="statement not covered" >s</span>tate.allowIn=previousAllowIn;<span class="cstat-no" title="statement not covered" >e</span>xpect(":");<span class="cstat-no" title="statement not covered" >e</span>xpr={type:Syntax.ConditionalExpression,test:expr,consequent:consequent,alternate:parseAssignmentExpression()}}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn expr}<span class="fstat-no" title="function not covered" ></span>function parseAssignmentExpression(){<span class="cstat-no" title="statement not covered" ></span>var token,expr;<span class="cstat-no" title="statement not covered" >t</span>oken=lookahead();<span class="cstat-no" title="statement not covered" >e</span>xpr=parseConditionalExpression();<span class="cstat-no" title="statement not covered" >i</span>f(matchAssign()){<span class="cstat-no" title="statement not covered" >if(!isLeftHandSide(expr)){<span class="cstat-no" title="statement not covered" >throwErrorTolerant({},Messages.InvalidLHSInAssignment)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(strict&amp;&amp;expr.type===Syntax.Identifier&amp;&amp;isRestrictedWord(expr.name)){<span class="cstat-no" title="statement not covered" >throwErrorTolerant(token,Messages.StrictLHSAssignment)}<span class="cstat-no" title="statement not covered" ></span>e</span>xpr={type:Syntax.AssignmentExpression,operator:lex().value,left:expr,right:parseAssignmentExpression()}}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn expr}<span class="fstat-no" title="function not covered" ></span>function parseExpression(){<span class="cstat-no" title="statement not covered" ></span>var expr=parseAssignmentExpression();<span class="cstat-no" title="statement not covered" >i</span>f(match(",")){<span class="cstat-no" title="statement not covered" >expr={type:Syntax.SequenceExpression,expressions:[expr]};<span class="cstat-no" title="statement not covered" >w</span>hile(index&lt;length){<span class="cstat-no" title="statement not covered" >if(!match(",")){<span class="cstat-no" title="statement not covered" >break}<span class="cstat-no" title="statement not covered" ></span>l</span>ex();<span class="cstat-no" title="statement not covered" >e</span>xpr.expressions.push(parseAssignmentExpression())}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn expr}<span class="fstat-no" title="function not covered" ></span>function parseStatementList(){<span class="cstat-no" title="statement not covered" ></span>var list=[],statement;<span class="cstat-no" title="statement not covered" >w</span>hile(index&lt;length){<span class="cstat-no" title="statement not covered" >if(match("}")){<span class="cstat-no" title="statement not covered" >break}<span class="cstat-no" title="statement not covered" ></span>s</span>tatement=parseSourceElement();<span class="cstat-no" title="statement not covered" >i</span>f(typeof statement==="undefined"){<span class="cstat-no" title="statement not covered" >break}<span class="cstat-no" title="statement not covered" ></span>l</span>ist.push(statement)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn list}<span class="fstat-no" title="function not covered" ></span>function parseBlock(){<span class="cstat-no" title="statement not covered" ></span>var block;<span class="cstat-no" title="statement not covered" >e</span>xpect("{");<span class="cstat-no" title="statement not covered" >b</span>lock=parseStatementList();<span class="cstat-no" title="statement not covered" >e</span>xpect("}");<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Syntax.BlockStatement,body:block}}<span class="fstat-no" title="function not covered" ></span>function parseVariableIdentifier(){<span class="cstat-no" title="statement not covered" ></span>var token=lex();<span class="cstat-no" title="statement not covered" >i</span>f(token.type!==Token.Identifier){<span class="cstat-no" title="statement not covered" >throwUnexpected(token)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn{type:Syntax.Identifier,name:token.value}}<span class="fstat-no" title="function not covered" ></span>function parseVariableDeclaration(kind){<span class="cstat-no" title="statement not covered" ></span>var id=parseVariableIdentifier(),init=null;<span class="cstat-no" title="statement not covered" >i</span>f(strict&amp;&amp;isRestrictedWord(id.name)){<span class="cstat-no" title="statement not covered" >throwErrorTolerant({},Messages.StrictVarName)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(kind==="const"){<span class="cstat-no" title="statement not covered" >expect("=");<span class="cstat-no" title="statement not covered" >i</span>nit=parseAssignmentExpression()}</span>else <span class="cstat-no" title="statement not covered" >if(match("=")){<span class="cstat-no" title="statement not covered" >lex();<span class="cstat-no" title="statement not covered" >i</span>nit=parseAssignmentExpression()}<span class="cstat-no" title="statement not covered" ></span>r</span></span>eturn{type:Syntax.VariableDeclarator,id:id,init:init}}<span class="fstat-no" title="function not covered" ></span>function parseVariableDeclarationList(kind){<span class="cstat-no" title="statement not covered" ></span>var list=[];<span class="cstat-no" title="statement not covered" >d</span>o{<span class="cstat-no" title="statement not covered" >list.push(parseVariableDeclaration(kind));<span class="cstat-no" title="statement not covered" >i</span>f(!match(",")){<span class="cstat-no" title="statement not covered" >break}<span class="cstat-no" title="statement not covered" ></span>l</span>ex()}</span>while(index&lt;length);<span class="cstat-no" title="statement not covered" >r</span>eturn list}<span class="fstat-no" title="function not covered" ></span>function parseVariableStatement(){<span class="cstat-no" title="statement not covered" ></span>var declarations;<span class="cstat-no" title="statement not covered" >e</span>xpectKeyword("var");<span class="cstat-no" title="statement not covered" >d</span>eclarations=parseVariableDeclarationList();<span class="cstat-no" title="statement not covered" >c</span>onsumeSemicolon();<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Syntax.VariableDeclaration,declarations:declarations,kind:"var"}}<span class="fstat-no" title="function not covered" ></span>function parseConstLetDeclaration(kind){<span class="cstat-no" title="statement not covered" ></span>var declarations;<span class="cstat-no" title="statement not covered" >e</span>xpectKeyword(kind);<span class="cstat-no" title="statement not covered" >d</span>eclarations=parseVariableDeclarationList(kind);<span class="cstat-no" title="statement not covered" >c</span>onsumeSemicolon();<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Syntax.VariableDeclaration,declarations:declarations,kind:kind}}<span class="fstat-no" title="function not covered" ></span>function parseEmptyStatement(){<span class="cstat-no" title="statement not covered" ></span>expect(";");<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Syntax.EmptyStatement}}<span class="fstat-no" title="function not covered" ></span>function parseExpressionStatement(){<span class="cstat-no" title="statement not covered" ></span>var expr=parseExpression();<span class="cstat-no" title="statement not covered" >c</span>onsumeSemicolon();<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Syntax.ExpressionStatement,expression:expr}}<span class="fstat-no" title="function not covered" ></span>function parseIfStatement(){<span class="cstat-no" title="statement not covered" ></span>var test,consequent,alternate;<span class="cstat-no" title="statement not covered" >e</span>xpectKeyword("if");<span class="cstat-no" title="statement not covered" >e</span>xpect("(");<span class="cstat-no" title="statement not covered" >t</span>est=parseExpression();<span class="cstat-no" title="statement not covered" >e</span>xpect(")");<span class="cstat-no" title="statement not covered" >c</span>onsequent=parseStatement();<span class="cstat-no" title="statement not covered" >i</span>f(matchKeyword("else")){<span class="cstat-no" title="statement not covered" >lex();<span class="cstat-no" title="statement not covered" >a</span>lternate=parseStatement()}</span>else{<span class="cstat-no" title="statement not covered" >alternate=null}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn{type:Syntax.IfStatement,test:test,consequent:consequent,alternate:alternate}}<span class="fstat-no" title="function not covered" ></span>function parseDoWhileStatement(){<span class="cstat-no" title="statement not covered" ></span>var body,test,oldInIteration;<span class="cstat-no" title="statement not covered" >e</span>xpectKeyword("do");<span class="cstat-no" title="statement not covered" >o</span>ldInIteration=state.inIteration;<span class="cstat-no" title="statement not covered" >s</span>tate.inIteration=true;<span class="cstat-no" title="statement not covered" >b</span>ody=parseStatement();<span class="cstat-no" title="statement not covered" >s</span>tate.inIteration=oldInIteration;<span class="cstat-no" title="statement not covered" >e</span>xpectKeyword("while");<span class="cstat-no" title="statement not covered" >e</span>xpect("(");<span class="cstat-no" title="statement not covered" >t</span>est=parseExpression();<span class="cstat-no" title="statement not covered" >e</span>xpect(")");<span class="cstat-no" title="statement not covered" >i</span>f(match(";")){<span class="cstat-no" title="statement not covered" >lex()}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn{type:Syntax.DoWhileStatement,body:body,test:test}}<span class="fstat-no" title="function not covered" ></span>function parseWhileStatement(){<span class="cstat-no" title="statement not covered" ></span>var test,body,oldInIteration;<span class="cstat-no" title="statement not covered" >e</span>xpectKeyword("while");<span class="cstat-no" title="statement not covered" >e</span>xpect("(");<span class="cstat-no" title="statement not covered" >t</span>est=parseExpression();<span class="cstat-no" title="statement not covered" >e</span>xpect(")");<span class="cstat-no" title="statement not covered" >o</span>ldInIteration=state.inIteration;<span class="cstat-no" title="statement not covered" >s</span>tate.inIteration=true;<span class="cstat-no" title="statement not covered" >b</span>ody=parseStatement();<span class="cstat-no" title="statement not covered" >s</span>tate.inIteration=oldInIteration;<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Syntax.WhileStatement,test:test,body:body}}<span class="fstat-no" title="function not covered" ></span>function parseForVariableDeclaration(){<span class="cstat-no" title="statement not covered" ></span>var token=lex();<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Syntax.VariableDeclaration,declarations:parseVariableDeclarationList(),kind:token.value}}<span class="fstat-no" title="function not covered" ></span>function parseForStatement(){<span class="cstat-no" title="statement not covered" ></span>var init,test,update,left,right,body,oldInIteration;<span class="cstat-no" title="statement not covered" >i</span>nit=test=update=null;<span class="cstat-no" title="statement not covered" >e</span>xpectKeyword("for");<span class="cstat-no" title="statement not covered" >e</span>xpect("(");<span class="cstat-no" title="statement not covered" >i</span>f(match(";")){<span class="cstat-no" title="statement not covered" >lex()}</span>else{<span class="cstat-no" title="statement not covered" >if(matchKeyword("var")||matchKeyword("let")){<span class="cstat-no" title="statement not covered" >state.allowIn=false;<span class="cstat-no" title="statement not covered" >i</span>nit=parseForVariableDeclaration();<span class="cstat-no" title="statement not covered" >s</span>tate.allowIn=true;<span class="cstat-no" title="statement not covered" >i</span>f(init.declarations.length===1&amp;&amp;matchKeyword("in")){<span class="cstat-no" title="statement not covered" >lex();<span class="cstat-no" title="statement not covered" >l</span>eft=init;<span class="cstat-no" title="statement not covered" >r</span>ight=parseExpression();<span class="cstat-no" title="statement not covered" >i</span>nit=null}</span>}</span>else{<span class="cstat-no" title="statement not covered" >state.allowIn=false;<span class="cstat-no" title="statement not covered" >i</span>nit=parseExpression();<span class="cstat-no" title="statement not covered" >s</span>tate.allowIn=true;<span class="cstat-no" title="statement not covered" >i</span>f(matchKeyword("in")){<span class="cstat-no" title="statement not covered" >if(!isLeftHandSide(init)){<span class="cstat-no" title="statement not covered" >throwErrorTolerant({},Messages.InvalidLHSInForIn)}<span class="cstat-no" title="statement not covered" ></span>l</span>ex();<span class="cstat-no" title="statement not covered" >l</span>eft=init;<span class="cstat-no" title="statement not covered" >r</span>ight=parseExpression();<span class="cstat-no" title="statement not covered" >i</span>nit=null}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(typeof left==="undefined"){<span class="cstat-no" title="statement not covered" >expect(";")}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(typeof left==="undefined"){<span class="cstat-no" title="statement not covered" >if(!match(";")){<span class="cstat-no" title="statement not covered" >test=parseExpression()}<span class="cstat-no" title="statement not covered" ></span>e</span>xpect(";");<span class="cstat-no" title="statement not covered" >i</span>f(!match(")")){<span class="cstat-no" title="statement not covered" >update=parseExpression()}</span>}<span class="cstat-no" title="statement not covered" ></span>e</span>xpect(")");<span class="cstat-no" title="statement not covered" >o</span>ldInIteration=state.inIteration;<span class="cstat-no" title="statement not covered" >s</span>tate.inIteration=true;<span class="cstat-no" title="statement not covered" >b</span>ody=parseStatement();<span class="cstat-no" title="statement not covered" >s</span>tate.inIteration=oldInIteration;<span class="cstat-no" title="statement not covered" >i</span>f(typeof left==="undefined"){<span class="cstat-no" title="statement not covered" >return{type:Syntax.ForStatement,init:init,test:test,update:update,body:body}}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn{type:Syntax.ForInStatement,left:left,right:right,body:body,each:false}}<span class="fstat-no" title="function not covered" ></span>function parseContinueStatement(){<span class="cstat-no" title="statement not covered" ></span>var token,label=null;<span class="cstat-no" title="statement not covered" >e</span>xpectKeyword("continue");<span class="cstat-no" title="statement not covered" >i</span>f(source[index]===";"){<span class="cstat-no" title="statement not covered" >lex();<span class="cstat-no" title="statement not covered" >i</span>f(!state.inIteration){<span class="cstat-no" title="statement not covered" >throwError({},Messages.IllegalContinue)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn{type:Syntax.ContinueStatement,label:null}}<span class="cstat-no" title="statement not covered" ></span>i</span>f(peekLineTerminator()){<span class="cstat-no" title="statement not covered" >if(!state.inIteration){<span class="cstat-no" title="statement not covered" >throwError({},Messages.IllegalContinue)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn{type:Syntax.ContinueStatement,label:null}}<span class="cstat-no" title="statement not covered" ></span>t</span>oken=lookahead();<span class="cstat-no" title="statement not covered" >i</span>f(token.type===Token.Identifier){<span class="cstat-no" title="statement not covered" >label=parseVariableIdentifier();<span class="cstat-no" title="statement not covered" >i</span>f(!Object.prototype.hasOwnProperty.call(state.labelSet,label.name)){<span class="cstat-no" title="statement not covered" >throwError({},Messages.UnknownLabel,label.name)}</span>}<span class="cstat-no" title="statement not covered" ></span>c</span>onsumeSemicolon();<span class="cstat-no" title="statement not covered" >i</span>f(label===null&amp;&amp;!state.inIteration){<span class="cstat-no" title="statement not covered" >throwError({},Messages.IllegalContinue)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn{type:Syntax.ContinueStatement,label:label}}<span class="fstat-no" title="function not covered" ></span>function parseBreakStatement(){<span class="cstat-no" title="statement not covered" ></span>var token,label=null;<span class="cstat-no" title="statement not covered" >e</span>xpectKeyword("break");<span class="cstat-no" title="statement not covered" >i</span>f(source[index]===";"){<span class="cstat-no" title="statement not covered" >lex();<span class="cstat-no" title="statement not covered" >i</span>f(!(state.inIteration||state.inSwitch)){<span class="cstat-no" title="statement not covered" >throwError({},Messages.IllegalBreak)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn{type:Syntax.BreakStatement,label:null}}<span class="cstat-no" title="statement not covered" ></span>i</span>f(peekLineTerminator()){<span class="cstat-no" title="statement not covered" >if(!(state.inIteration||state.inSwitch)){<span class="cstat-no" title="statement not covered" >throwError({},Messages.IllegalBreak)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn{type:Syntax.BreakStatement,label:null}}<span class="cstat-no" title="statement not covered" ></span>t</span>oken=lookahead();<span class="cstat-no" title="statement not covered" >i</span>f(token.type===Token.Identifier){<span class="cstat-no" title="statement not covered" >label=parseVariableIdentifier();<span class="cstat-no" title="statement not covered" >i</span>f(!Object.prototype.hasOwnProperty.call(state.labelSet,label.name)){<span class="cstat-no" title="statement not covered" >throwError({},Messages.UnknownLabel,label.name)}</span>}<span class="cstat-no" title="statement not covered" ></span>c</span>onsumeSemicolon();<span class="cstat-no" title="statement not covered" >i</span>f(label===null&amp;&amp;!(state.inIteration||state.inSwitch)){<span class="cstat-no" title="statement not covered" >throwError({},Messages.IllegalBreak)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn{type:Syntax.BreakStatement,label:label}}<span class="fstat-no" title="function not covered" ></span>function parseReturnStatement(){<span class="cstat-no" title="statement not covered" ></span>var token,argument=null;<span class="cstat-no" title="statement not covered" >e</span>xpectKeyword("return");<span class="cstat-no" title="statement not covered" >i</span>f(!state.inFunctionBody){<span class="cstat-no" title="statement not covered" >throwErrorTolerant({},Messages.IllegalReturn)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(source[index]===" "){<span class="cstat-no" title="statement not covered" >if(isIdentifierStart(source[index+1])){<span class="cstat-no" title="statement not covered" >argument=parseExpression();<span class="cstat-no" title="statement not covered" >c</span>onsumeSemicolon();<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Syntax.ReturnStatement,argument:argument}}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(peekLineTerminator()){<span class="cstat-no" title="statement not covered" >return{type:Syntax.ReturnStatement,argument:null}}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!match(";")){<span class="cstat-no" title="statement not covered" >token=lookahead();<span class="cstat-no" title="statement not covered" >i</span>f(!match("}")&amp;&amp;token.type!==Token.EOF){<span class="cstat-no" title="statement not covered" >argument=parseExpression()}</span>}<span class="cstat-no" title="statement not covered" ></span>c</span>onsumeSemicolon();<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Syntax.ReturnStatement,argument:argument}}<span class="fstat-no" title="function not covered" ></span>function parseWithStatement(){<span class="cstat-no" title="statement not covered" ></span>var object,body;<span class="cstat-no" title="statement not covered" >i</span>f(strict){<span class="cstat-no" title="statement not covered" >throwErrorTolerant({},Messages.StrictModeWith)}<span class="cstat-no" title="statement not covered" ></span>e</span>xpectKeyword("with");<span class="cstat-no" title="statement not covered" >e</span>xpect("(");<span class="cstat-no" title="statement not covered" >o</span>bject=parseExpression();<span class="cstat-no" title="statement not covered" >e</span>xpect(")");<span class="cstat-no" title="statement not covered" >b</span>ody=parseStatement();<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Syntax.WithStatement,object:object,body:body}}<span class="fstat-no" title="function not covered" ></span>function parseSwitchCase(){<span class="cstat-no" title="statement not covered" ></span>var test,consequent=[],statement;<span class="cstat-no" title="statement not covered" >i</span>f(matchKeyword("default")){<span class="cstat-no" title="statement not covered" >lex();<span class="cstat-no" title="statement not covered" >t</span>est=null}</span>else{<span class="cstat-no" title="statement not covered" >expectKeyword("case");<span class="cstat-no" title="statement not covered" >t</span>est=parseExpression()}<span class="cstat-no" title="statement not covered" ></span>e</span>xpect(":");<span class="cstat-no" title="statement not covered" >w</span>hile(index&lt;length){<span class="cstat-no" title="statement not covered" >if(match("}")||matchKeyword("default")||matchKeyword("case")){<span class="cstat-no" title="statement not covered" >break}<span class="cstat-no" title="statement not covered" ></span>s</span>tatement=parseStatement();<span class="cstat-no" title="statement not covered" >i</span>f(typeof statement==="undefined"){<span class="cstat-no" title="statement not covered" >break}<span class="cstat-no" title="statement not covered" ></span>c</span>onsequent.push(statement)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn{type:Syntax.SwitchCase,test:test,consequent:consequent}}<span class="fstat-no" title="function not covered" ></span>function parseSwitchStatement(){<span class="cstat-no" title="statement not covered" ></span>var discriminant,cases,clause,oldInSwitch,defaultFound;<span class="cstat-no" title="statement not covered" >e</span>xpectKeyword("switch");<span class="cstat-no" title="statement not covered" >e</span>xpect("(");<span class="cstat-no" title="statement not covered" >d</span>iscriminant=parseExpression();<span class="cstat-no" title="statement not covered" >e</span>xpect(")");<span class="cstat-no" title="statement not covered" >e</span>xpect("{");<span class="cstat-no" title="statement not covered" >c</span>ases=[];<span class="cstat-no" title="statement not covered" >i</span>f(match("}")){<span class="cstat-no" title="statement not covered" >lex();<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Syntax.SwitchStatement,discriminant:discriminant,cases:cases}}<span class="cstat-no" title="statement not covered" ></span>o</span>ldInSwitch=state.inSwitch;<span class="cstat-no" title="statement not covered" >s</span>tate.inSwitch=true;<span class="cstat-no" title="statement not covered" >d</span>efaultFound=false;<span class="cstat-no" title="statement not covered" >w</span>hile(index&lt;length){<span class="cstat-no" title="statement not covered" >if(match("}")){<span class="cstat-no" title="statement not covered" >break}<span class="cstat-no" title="statement not covered" ></span>c</span>lause=parseSwitchCase();<span class="cstat-no" title="statement not covered" >i</span>f(clause.test===null){<span class="cstat-no" title="statement not covered" >if(defaultFound){<span class="cstat-no" title="statement not covered" >throwError({},Messages.MultipleDefaultsInSwitch)}<span class="cstat-no" title="statement not covered" ></span>d</span>efaultFound=true}<span class="cstat-no" title="statement not covered" ></span>c</span>ases.push(clause)}<span class="cstat-no" title="statement not covered" ></span>s</span>tate.inSwitch=oldInSwitch;<span class="cstat-no" title="statement not covered" >e</span>xpect("}");<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Syntax.SwitchStatement,discriminant:discriminant,cases:cases}}<span class="fstat-no" title="function not covered" ></span>function parseThrowStatement(){<span class="cstat-no" title="statement not covered" ></span>var argument;<span class="cstat-no" title="statement not covered" >e</span>xpectKeyword("throw");<span class="cstat-no" title="statement not covered" >i</span>f(peekLineTerminator()){<span class="cstat-no" title="statement not covered" >throwError({},Messages.NewlineAfterThrow)}<span class="cstat-no" title="statement not covered" ></span>a</span>rgument=parseExpression();<span class="cstat-no" title="statement not covered" >c</span>onsumeSemicolon();<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Syntax.ThrowStatement,argument:argument}}<span class="fstat-no" title="function not covered" ></span>function parseCatchClause(){<span class="cstat-no" title="statement not covered" ></span>var param;<span class="cstat-no" title="statement not covered" >e</span>xpectKeyword("catch");<span class="cstat-no" title="statement not covered" >e</span>xpect("(");<span class="cstat-no" title="statement not covered" >i</span>f(match(")")){<span class="cstat-no" title="statement not covered" >throwUnexpected(lookahead())}<span class="cstat-no" title="statement not covered" ></span>p</span>aram=parseVariableIdentifier();<span class="cstat-no" title="statement not covered" >i</span>f(strict&amp;&amp;isRestrictedWord(param.name)){<span class="cstat-no" title="statement not covered" >throwErrorTolerant({},Messages.StrictCatchVariable)}<span class="cstat-no" title="statement not covered" ></span>e</span>xpect(")");<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Syntax.CatchClause,param:param,body:parseBlock()}}<span class="fstat-no" title="function not covered" ></span>function parseTryStatement(){<span class="cstat-no" title="statement not covered" ></span>var block,handlers=[],finalizer=null;<span class="cstat-no" title="statement not covered" >e</span>xpectKeyword("try");<span class="cstat-no" title="statement not covered" >b</span>lock=parseBlock();<span class="cstat-no" title="statement not covered" >i</span>f(matchKeyword("catch")){<span class="cstat-no" title="statement not covered" >handlers.push(parseCatchClause())}<span class="cstat-no" title="statement not covered" ></span>i</span>f(matchKeyword("finally")){<span class="cstat-no" title="statement not covered" >lex();<span class="cstat-no" title="statement not covered" >f</span>inalizer=parseBlock()}<span class="cstat-no" title="statement not covered" ></span>i</span>f(handlers.length===0&amp;&amp;!finalizer){<span class="cstat-no" title="statement not covered" >throwError({},Messages.NoCatchOrFinally)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn{type:Syntax.TryStatement,block:block,guardedHandlers:[],handlers:handlers,finalizer:finalizer}}<span class="fstat-no" title="function not covered" ></span>function parseDebuggerStatement(){<span class="cstat-no" title="statement not covered" ></span>expectKeyword("debugger");<span class="cstat-no" title="statement not covered" >c</span>onsumeSemicolon();<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Syntax.DebuggerStatement}}<span class="fstat-no" title="function not covered" ></span>function parseStatement(){<span class="cstat-no" title="statement not covered" ></span>var token=lookahead(),expr,labeledBody;<span class="cstat-no" title="statement not covered" >i</span>f(token.type===Token.EOF){<span class="cstat-no" title="statement not covered" >throwUnexpected(token)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(token.type===Token.Punctuator){<span class="cstat-no" title="statement not covered" >switch(token.value){case";":<span class="cstat-no" title="statement not covered" >return parseEmptyStatement();c</span>ase"{":<span class="cstat-no" title="statement not covered" >return parseBlock();c</span>ase"(":<span class="cstat-no" title="statement not covered" >return parseExpressionStatement();d</span>efault:<span class="cstat-no" title="statement not covered" >break}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(token.type===Token.Keyword){<span class="cstat-no" title="statement not covered" >switch(token.value){case"break":<span class="cstat-no" title="statement not covered" >return parseBreakStatement();c</span>ase"continue":<span class="cstat-no" title="statement not covered" >return parseContinueStatement();c</span>ase"debugger":<span class="cstat-no" title="statement not covered" >return parseDebuggerStatement();c</span>ase"do":<span class="cstat-no" title="statement not covered" >return parseDoWhileStatement();c</span>ase"for":<span class="cstat-no" title="statement not covered" >return parseForStatement();c</span>ase"function":<span class="cstat-no" title="statement not covered" >return parseFunctionDeclaration();c</span>ase"if":<span class="cstat-no" title="statement not covered" >return parseIfStatement();c</span>ase"return":<span class="cstat-no" title="statement not covered" >return parseReturnStatement();c</span>ase"switch":<span class="cstat-no" title="statement not covered" >return parseSwitchStatement();c</span>ase"throw":<span class="cstat-no" title="statement not covered" >return parseThrowStatement();c</span>ase"try":<span class="cstat-no" title="statement not covered" >return parseTryStatement();c</span>ase"var":<span class="cstat-no" title="statement not covered" >return parseVariableStatement();c</span>ase"while":<span class="cstat-no" title="statement not covered" >return parseWhileStatement();c</span>ase"with":<span class="cstat-no" title="statement not covered" >return parseWithStatement();d</span>efault:<span class="cstat-no" title="statement not covered" >break}</span>}<span class="cstat-no" title="statement not covered" ></span>e</span>xpr=parseExpression();<span class="cstat-no" title="statement not covered" >i</span>f(expr.type===Syntax.Identifier&amp;&amp;match(":")){<span class="cstat-no" title="statement not covered" >lex();<span class="cstat-no" title="statement not covered" >i</span>f(Object.prototype.hasOwnProperty.call(state.labelSet,expr.name)){<span class="cstat-no" title="statement not covered" >throwError({},Messages.Redeclaration,"Label",expr.name)}<span class="cstat-no" title="statement not covered" ></span>s</span>tate.labelSet[expr.name]=true;<span class="cstat-no" title="statement not covered" >l</span>abeledBody=parseStatement();<span class="cstat-no" title="statement not covered" >d</span>elete state.labelSet[expr.name];<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Syntax.LabeledStatement,label:expr,body:labeledBody}}<span class="cstat-no" title="statement not covered" ></span>c</span>onsumeSemicolon();<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Syntax.ExpressionStatement,expression:expr}}<span class="fstat-no" title="function not covered" ></span>function parseFunctionSourceElements(){<span class="cstat-no" title="statement not covered" ></span>var sourceElement,sourceElements=[],token,directive,firstRestricted,oldLabelSet,oldInIteration,oldInSwitch,oldInFunctionBody;<span class="cstat-no" title="statement not covered" >e</span>xpect("{");<span class="cstat-no" title="statement not covered" >w</span>hile(index&lt;length){<span class="cstat-no" title="statement not covered" >token=lookahead();<span class="cstat-no" title="statement not covered" >i</span>f(token.type!==Token.StringLiteral){<span class="cstat-no" title="statement not covered" >break}<span class="cstat-no" title="statement not covered" ></span>s</span>ourceElement=parseSourceElement();<span class="cstat-no" title="statement not covered" >s</span>ourceElements.push(sourceElement);<span class="cstat-no" title="statement not covered" >i</span>f(sourceElement.expression.type!==Syntax.Literal){<span class="cstat-no" title="statement not covered" >break}<span class="cstat-no" title="statement not covered" ></span>d</span>irective=sliceSource(token.range[0]+1,token.range[1]-1);<span class="cstat-no" title="statement not covered" >i</span>f(directive==="use strict"){<span class="cstat-no" title="statement not covered" >strict=true;<span class="cstat-no" title="statement not covered" >i</span>f(firstRestricted){<span class="cstat-no" title="statement not covered" >throwErrorTolerant(firstRestricted,Messages.StrictOctalLiteral)}</span>}</span>else{<span class="cstat-no" title="statement not covered" >if(!firstRestricted&amp;&amp;token.octal){<span class="cstat-no" title="statement not covered" >firstRestricted=token}</span>}</span>}<span class="cstat-no" title="statement not covered" ></span>o</span>ldLabelSet=state.labelSet;<span class="cstat-no" title="statement not covered" >o</span>ldInIteration=state.inIteration;<span class="cstat-no" title="statement not covered" >o</span>ldInSwitch=state.inSwitch;<span class="cstat-no" title="statement not covered" >o</span>ldInFunctionBody=state.inFunctionBody;<span class="cstat-no" title="statement not covered" >s</span>tate.labelSet={};<span class="cstat-no" title="statement not covered" >s</span>tate.inIteration=false;<span class="cstat-no" title="statement not covered" >s</span>tate.inSwitch=false;<span class="cstat-no" title="statement not covered" >s</span>tate.inFunctionBody=true;<span class="cstat-no" title="statement not covered" >w</span>hile(index&lt;length){<span class="cstat-no" title="statement not covered" >if(match("}")){<span class="cstat-no" title="statement not covered" >break}<span class="cstat-no" title="statement not covered" ></span>s</span>ourceElement=parseSourceElement();<span class="cstat-no" title="statement not covered" >i</span>f(typeof sourceElement==="undefined"){<span class="cstat-no" title="statement not covered" >break}<span class="cstat-no" title="statement not covered" ></span>s</span>ourceElements.push(sourceElement)}<span class="cstat-no" title="statement not covered" ></span>e</span>xpect("}");<span class="cstat-no" title="statement not covered" >s</span>tate.labelSet=oldLabelSet;<span class="cstat-no" title="statement not covered" >s</span>tate.inIteration=oldInIteration;<span class="cstat-no" title="statement not covered" >s</span>tate.inSwitch=oldInSwitch;<span class="cstat-no" title="statement not covered" >s</span>tate.inFunctionBody=oldInFunctionBody;<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Syntax.BlockStatement,body:sourceElements}}<span class="fstat-no" title="function not covered" ></span>function parseFunctionDeclaration(){<span class="cstat-no" title="statement not covered" ></span>var id,param,params=[],body,token,stricted,firstRestricted,message,previousStrict,paramSet;<span class="cstat-no" title="statement not covered" >e</span>xpectKeyword("function");<span class="cstat-no" title="statement not covered" >t</span>oken=lookahead();<span class="cstat-no" title="statement not covered" >i</span>d=parseVariableIdentifier();<span class="cstat-no" title="statement not covered" >i</span>f(strict){<span class="cstat-no" title="statement not covered" >if(isRestrictedWord(token.value)){<span class="cstat-no" title="statement not covered" >throwErrorTolerant(token,Messages.StrictFunctionName)}</span>}</span>else{<span class="cstat-no" title="statement not covered" >if(isRestrictedWord(token.value)){<span class="cstat-no" title="statement not covered" >firstRestricted=token;<span class="cstat-no" title="statement not covered" >m</span>essage=Messages.StrictFunctionName}</span>else <span class="cstat-no" title="statement not covered" >if(isStrictModeReservedWord(token.value)){<span class="cstat-no" title="statement not covered" >firstRestricted=token;<span class="cstat-no" title="statement not covered" >m</span>essage=Messages.StrictReservedWord}</span>}<span class="cstat-no" title="statement not covered" ></span></span>e</span>xpect("(");<span class="cstat-no" title="statement not covered" >i</span>f(!match(")")){<span class="cstat-no" title="statement not covered" >paramSet={};<span class="cstat-no" title="statement not covered" >w</span>hile(index&lt;length){<span class="cstat-no" title="statement not covered" >token=lookahead();</span></span></span>
<span class="cstat-no" title="statement not covered" >param=parseVariableIdentifier();<span class="cstat-no" title="statement not covered" >i</span>f(strict){<span class="cstat-no" title="statement not covered" >if(isRestrictedWord(token.value)){<span class="cstat-no" title="statement not covered" >stricted=token;<span class="cstat-no" title="statement not covered" >m</span>essage=Messages.StrictParamName}<span class="cstat-no" title="statement not covered" ></span>i</span>f(Object.prototype.hasOwnProperty.call(paramSet,token.value)){<span class="cstat-no" title="statement not covered" >stricted=token;<span class="cstat-no" title="statement not covered" >m</span>essage=Messages.StrictParamDupe}</span>}</span>else <span class="cstat-no" title="statement not covered" >if(!firstRestricted){<span class="cstat-no" title="statement not covered" >if(isRestrictedWord(token.value)){<span class="cstat-no" title="statement not covered" >firstRestricted=token;<span class="cstat-no" title="statement not covered" >m</span>essage=Messages.StrictParamName}</span>else <span class="cstat-no" title="statement not covered" >if(isStrictModeReservedWord(token.value)){<span class="cstat-no" title="statement not covered" >firstRestricted=token;<span class="cstat-no" title="statement not covered" >m</span>essage=Messages.StrictReservedWord}</span>else <span class="cstat-no" title="statement not covered" >if(Object.prototype.hasOwnProperty.call(paramSet,token.value)){<span class="cstat-no" title="statement not covered" >firstRestricted=token;<span class="cstat-no" title="statement not covered" >m</span>essage=Messages.StrictParamDupe}</span>}<span class="cstat-no" title="statement not covered" ></span></span></span>p</span></span>arams.push(param);<span class="cstat-no" title="statement not covered" >p</span>aramSet[param.name]=true;<span class="cstat-no" title="statement not covered" >i</span>f(match(")")){<span class="cstat-no" title="statement not covered" >break}<span class="cstat-no" title="statement not covered" ></span>e</span>xpect(",")}</span>}<span class="cstat-no" title="statement not covered" >expect(")");<span class="cstat-no" title="statement not covered" >p</span>reviousStrict=strict;<span class="cstat-no" title="statement not covered" >b</span>ody=parseFunctionSourceElements();<span class="cstat-no" title="statement not covered" >i</span>f(strict&amp;&amp;firstRestricted){<span class="cstat-no" title="statement not covered" >throwError(firstRestricted,message)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(strict&amp;&amp;stricted){<span class="cstat-no" title="statement not covered" >throwErrorTolerant(stricted,message)}<span class="cstat-no" title="statement not covered" ></span>s</span>trict=previousStrict;<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Syntax.FunctionDeclaration,id:id,params:params,defaults:[],body:body,rest:null,generator:false,expression:false}}<span class="fstat-no" title="function not covered" ></span>function parseFunctionExpression(){<span class="cstat-no" title="statement not covered" ></span>var token,id=null,stricted,firstRestricted,message,param,params=[],body,previousStrict,paramSet;<span class="cstat-no" title="statement not covered" >e</span>xpectKeyword("function");<span class="cstat-no" title="statement not covered" >i</span>f(!match("(")){<span class="cstat-no" title="statement not covered" >token=lookahead();<span class="cstat-no" title="statement not covered" >i</span>d=parseVariableIdentifier();<span class="cstat-no" title="statement not covered" >i</span>f(strict){<span class="cstat-no" title="statement not covered" >if(isRestrictedWord(token.value)){<span class="cstat-no" title="statement not covered" >throwErrorTolerant(token,Messages.StrictFunctionName)}</span>}</span>else{<span class="cstat-no" title="statement not covered" >if(isRestrictedWord(token.value)){<span class="cstat-no" title="statement not covered" >firstRestricted=token;<span class="cstat-no" title="statement not covered" >m</span>essage=Messages.StrictFunctionName}</span>else <span class="cstat-no" title="statement not covered" >if(isStrictModeReservedWord(token.value)){<span class="cstat-no" title="statement not covered" >firstRestricted=token;<span class="cstat-no" title="statement not covered" >m</span>essage=Messages.StrictReservedWord}</span>}</span></span>}<span class="cstat-no" title="statement not covered" ></span>e</span>xpect("(");<span class="cstat-no" title="statement not covered" >i</span>f(!match(")")){<span class="cstat-no" title="statement not covered" >paramSet={};<span class="cstat-no" title="statement not covered" >w</span>hile(index&lt;length){<span class="cstat-no" title="statement not covered" >token=lookahead();<span class="cstat-no" title="statement not covered" >p</span>aram=parseVariableIdentifier();<span class="cstat-no" title="statement not covered" >i</span>f(strict){<span class="cstat-no" title="statement not covered" >if(isRestrictedWord(token.value)){<span class="cstat-no" title="statement not covered" >stricted=token;<span class="cstat-no" title="statement not covered" >m</span>essage=Messages.StrictParamName}<span class="cstat-no" title="statement not covered" ></span>i</span>f(Object.prototype.hasOwnProperty.call(paramSet,token.value)){<span class="cstat-no" title="statement not covered" >stricted=token;<span class="cstat-no" title="statement not covered" >m</span>essage=Messages.StrictParamDupe}</span>}</span>else <span class="cstat-no" title="statement not covered" >if(!firstRestricted){<span class="cstat-no" title="statement not covered" >if(isRestrictedWord(token.value)){<span class="cstat-no" title="statement not covered" >firstRestricted=token;<span class="cstat-no" title="statement not covered" >m</span>essage=Messages.StrictParamName}</span>else <span class="cstat-no" title="statement not covered" >if(isStrictModeReservedWord(token.value)){<span class="cstat-no" title="statement not covered" >firstRestricted=token;<span class="cstat-no" title="statement not covered" >m</span>essage=Messages.StrictReservedWord}</span>else <span class="cstat-no" title="statement not covered" >if(Object.prototype.hasOwnProperty.call(paramSet,token.value)){<span class="cstat-no" title="statement not covered" >firstRestricted=token;<span class="cstat-no" title="statement not covered" >m</span>essage=Messages.StrictParamDupe}</span>}<span class="cstat-no" title="statement not covered" ></span></span></span>p</span></span>arams.push(param);<span class="cstat-no" title="statement not covered" >p</span>aramSet[param.name]=true;<span class="cstat-no" title="statement not covered" >i</span>f(match(")")){<span class="cstat-no" title="statement not covered" >break}<span class="cstat-no" title="statement not covered" ></span>e</span>xpect(",")}</span>}<span class="cstat-no" title="statement not covered" ></span>e</span>xpect(")");<span class="cstat-no" title="statement not covered" >p</span>reviousStrict=strict;<span class="cstat-no" title="statement not covered" >b</span>ody=parseFunctionSourceElements();<span class="cstat-no" title="statement not covered" >i</span>f(strict&amp;&amp;firstRestricted){<span class="cstat-no" title="statement not covered" >throwError(firstRestricted,message)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(strict&amp;&amp;stricted){<span class="cstat-no" title="statement not covered" >throwErrorTolerant(stricted,message)}<span class="cstat-no" title="statement not covered" ></span>s</span>trict=previousStrict;<span class="cstat-no" title="statement not covered" >r</span>eturn{type:Syntax.FunctionExpression,id:id,params:params,defaults:[],body:body,rest:null,generator:false,expression:false}}<span class="fstat-no" title="function not covered" ></span>function parseSourceElement(){<span class="cstat-no" title="statement not covered" ></span>var token=lookahead();<span class="cstat-no" title="statement not covered" >i</span>f(token.type===Token.Keyword){<span class="cstat-no" title="statement not covered" >switch(token.value){case"const":case"let":<span class="cstat-no" title="statement not covered" >return parseConstLetDeclaration(token.value);c</span>ase"function":<span class="cstat-no" title="statement not covered" >return parseFunctionDeclaration();d</span>efault:<span class="cstat-no" title="statement not covered" >return parseStatement()}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(token.type!==Token.EOF){<span class="cstat-no" title="statement not covered" >return parseStatement()}</span>}<span class="fstat-no" title="function not covered" ></span>function parseSourceElements(){<span class="cstat-no" title="statement not covered" ></span>var sourceElement,sourceElements=[],token,directive,firstRestricted;<span class="cstat-no" title="statement not covered" >w</span>hile(index&lt;length){<span class="cstat-no" title="statement not covered" >token=lookahead();<span class="cstat-no" title="statement not covered" >i</span>f(token.type!==Token.StringLiteral){<span class="cstat-no" title="statement not covered" >break}<span class="cstat-no" title="statement not covered" ></span>s</span>ourceElement=parseSourceElement();<span class="cstat-no" title="statement not covered" >s</span>ourceElements.push(sourceElement);<span class="cstat-no" title="statement not covered" >i</span>f(sourceElement.expression.type!==Syntax.Literal){<span class="cstat-no" title="statement not covered" >break}<span class="cstat-no" title="statement not covered" ></span>d</span>irective=sliceSource(token.range[0]+1,token.range[1]-1);<span class="cstat-no" title="statement not covered" >i</span>f(directive==="use strict"){<span class="cstat-no" title="statement not covered" >strict=true;<span class="cstat-no" title="statement not covered" >i</span>f(firstRestricted){<span class="cstat-no" title="statement not covered" >throwErrorTolerant(firstRestricted,Messages.StrictOctalLiteral)}</span>}</span>else{<span class="cstat-no" title="statement not covered" >if(!firstRestricted&amp;&amp;token.octal){<span class="cstat-no" title="statement not covered" >firstRestricted=token}</span>}</span>}<span class="cstat-no" title="statement not covered" ></span>w</span>hile(index&lt;length){<span class="cstat-no" title="statement not covered" >sourceElement=parseSourceElement();<span class="cstat-no" title="statement not covered" >i</span>f(typeof sourceElement==="undefined"){<span class="cstat-no" title="statement not covered" >break}<span class="cstat-no" title="statement not covered" ></span>s</span>ourceElements.push(sourceElement)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn sourceElements}<span class="fstat-no" title="function not covered" ></span>function parseProgram(){<span class="cstat-no" title="statement not covered" ></span>var program;<span class="cstat-no" title="statement not covered" >s</span>trict=false;<span class="cstat-no" title="statement not covered" >p</span>rogram={type:Syntax.Program,body:parseSourceElements()};<span class="cstat-no" title="statement not covered" >r</span>eturn program}<span class="fstat-no" title="function not covered" ></span>function addComment(type,value,start,end,loc){<span class="cstat-no" title="statement not covered" ></span>assert(typeof start==="number","Comment must have valid position");<span class="cstat-no" title="statement not covered" >i</span>f(extra.comments.length&gt;0){<span class="cstat-no" title="statement not covered" >if(extra.comments[extra.comments.length-1].range[1]&gt;start){<span class="cstat-no" title="statement not covered" >return}</span>}<span class="cstat-no" title="statement not covered" ></span>e</span>xtra.comments.push({type:type,value:value,range:[start,end],loc:loc})}<span class="fstat-no" title="function not covered" ></span>function scanComment(){<span class="cstat-no" title="statement not covered" ></span>var comment,ch,loc,start,blockComment,lineComment;<span class="cstat-no" title="statement not covered" >c</span>omment="";<span class="cstat-no" title="statement not covered" >b</span>lockComment=false;<span class="cstat-no" title="statement not covered" >l</span>ineComment=false;<span class="cstat-no" title="statement not covered" >w</span>hile(index&lt;length){<span class="cstat-no" title="statement not covered" >ch=source[index];<span class="cstat-no" title="statement not covered" >i</span>f(lineComment){<span class="cstat-no" title="statement not covered" >ch=source[index++];<span class="cstat-no" title="statement not covered" >i</span>f(isLineTerminator(ch)){<span class="cstat-no" title="statement not covered" >loc.end={line:lineNumber,column:index-lineStart-1};<span class="cstat-no" title="statement not covered" >l</span>ineComment=false;<span class="cstat-no" title="statement not covered" >a</span>ddComment("Line",comment,start,index-1,loc);<span class="cstat-no" title="statement not covered" >i</span>f(ch==="\r"&amp;&amp;source[index]==="\n"){<span class="cstat-no" title="statement not covered" >++index}<span class="cstat-no" title="statement not covered" ></span>+</span>+lineNumber;<span class="cstat-no" title="statement not covered" >l</span>ineStart=index;<span class="cstat-no" title="statement not covered" >c</span>omment=""}</span>else <span class="cstat-no" title="statement not covered" >if(index&gt;=length){<span class="cstat-no" title="statement not covered" >lineComment=false;<span class="cstat-no" title="statement not covered" >c</span>omment+=ch;<span class="cstat-no" title="statement not covered" >l</span>oc.end={line:lineNumber,column:length-lineStart};<span class="cstat-no" title="statement not covered" >a</span>ddComment("Line",comment,start,length,loc)}</span>else{<span class="cstat-no" title="statement not covered" >comment+=ch}</span>}</span></span>else <span class="cstat-no" title="statement not covered" >if(blockComment){<span class="cstat-no" title="statement not covered" >if(isLineTerminator(ch)){<span class="cstat-no" title="statement not covered" >if(ch==="\r"&amp;&amp;source[index+1]==="\n"){<span class="cstat-no" title="statement not covered" >++index;<span class="cstat-no" title="statement not covered" >c</span>omment+="\r\n"}</span>else{<span class="cstat-no" title="statement not covered" >comment+=ch}<span class="cstat-no" title="statement not covered" ></span>+</span>+lineNumber;<span class="cstat-no" title="statement not covered" >+</span>+index;<span class="cstat-no" title="statement not covered" >l</span>ineStart=index;<span class="cstat-no" title="statement not covered" >i</span>f(index&gt;=length){<span class="cstat-no" title="statement not covered" >throwError({},Messages.UnexpectedToken,"ILLEGAL")}</span>}</span>else{<span class="cstat-no" title="statement not covered" >ch=source[index++];<span class="cstat-no" title="statement not covered" >i</span>f(index&gt;=length){<span class="cstat-no" title="statement not covered" >throwError({},Messages.UnexpectedToken,"ILLEGAL")}<span class="cstat-no" title="statement not covered" ></span>c</span>omment+=ch;<span class="cstat-no" title="statement not covered" >i</span>f(ch==="*"){<span class="cstat-no" title="statement not covered" >ch=source[index];<span class="cstat-no" title="statement not covered" >i</span>f(ch==="/"){<span class="cstat-no" title="statement not covered" >comment=comment.substr(0,comment.length-1);<span class="cstat-no" title="statement not covered" >b</span>lockComment=false;<span class="cstat-no" title="statement not covered" >+</span>+index;<span class="cstat-no" title="statement not covered" >l</span>oc.end={line:lineNumber,column:index-lineStart};<span class="cstat-no" title="statement not covered" >a</span>ddComment("Block",comment,start,index,loc);<span class="cstat-no" title="statement not covered" >c</span>omment=""}</span>}</span>}</span>}</span>else <span class="cstat-no" title="statement not covered" >if(ch==="/"){<span class="cstat-no" title="statement not covered" >ch=source[index+1];<span class="cstat-no" title="statement not covered" >i</span>f(ch==="/"){<span class="cstat-no" title="statement not covered" >loc={start:{line:lineNumber,column:index-lineStart}};<span class="cstat-no" title="statement not covered" >s</span>tart=index;<span class="cstat-no" title="statement not covered" >i</span>ndex+=2;<span class="cstat-no" title="statement not covered" >l</span>ineComment=true;<span class="cstat-no" title="statement not covered" >i</span>f(index&gt;=length){<span class="cstat-no" title="statement not covered" >loc.end={line:lineNumber,column:index-lineStart};<span class="cstat-no" title="statement not covered" >l</span>ineComment=false;<span class="cstat-no" title="statement not covered" >a</span>ddComment("Line",comment,start,index,loc)}</span>}</span>else <span class="cstat-no" title="statement not covered" >if(ch==="*"){<span class="cstat-no" title="statement not covered" >start=index;<span class="cstat-no" title="statement not covered" >i</span>ndex+=2;<span class="cstat-no" title="statement not covered" >b</span>lockComment=true;<span class="cstat-no" title="statement not covered" >l</span>oc={start:{line:lineNumber,column:index-lineStart-2}};<span class="cstat-no" title="statement not covered" >i</span>f(index&gt;=length){<span class="cstat-no" title="statement not covered" >throwError({},Messages.UnexpectedToken,"ILLEGAL")}</span>}</span>else{<span class="cstat-no" title="statement not covered" >break}</span>}</span></span>else <span class="cstat-no" title="statement not covered" >if(isWhiteSpace(ch)){<span class="cstat-no" title="statement not covered" >++index}</span>else <span class="cstat-no" title="statement not covered" >if(isLineTerminator(ch)){<span class="cstat-no" title="statement not covered" >++index;<span class="cstat-no" title="statement not covered" >i</span>f(ch==="\r"&amp;&amp;source[index]==="\n"){<span class="cstat-no" title="statement not covered" >++index}<span class="cstat-no" title="statement not covered" ></span>+</span>+lineNumber;<span class="cstat-no" title="statement not covered" >l</span>ineStart=index}</span>else{<span class="cstat-no" title="statement not covered" >break}</span>}</span></span></span></span></span>}<span class="fstat-no" title="function not covered" ></span>function filterCommentLocation(){<span class="cstat-no" title="statement not covered" ></span>var i,entry,comment,comments=[];<span class="cstat-no" title="statement not covered" >f</span>or(i=0;i&lt;extra.comments.length;++i){<span class="cstat-no" title="statement not covered" >entry=extra.comments[i];<span class="cstat-no" title="statement not covered" >c</span>omment={type:entry.type,value:entry.value};<span class="cstat-no" title="statement not covered" >i</span>f(extra.range){<span class="cstat-no" title="statement not covered" >comment.range=entry.range}<span class="cstat-no" title="statement not covered" ></span>i</span>f(extra.loc){<span class="cstat-no" title="statement not covered" >comment.loc=entry.loc}<span class="cstat-no" title="statement not covered" ></span>c</span>omments.push(comment)}<span class="cstat-no" title="statement not covered" ></span>e</span>xtra.comments=comments}<span class="fstat-no" title="function not covered" ></span>function collectToken(){<span class="cstat-no" title="statement not covered" ></span>var start,loc,token,range,value;<span class="cstat-no" title="statement not covered" >s</span>kipComment();<span class="cstat-no" title="statement not covered" >s</span>tart=index;<span class="cstat-no" title="statement not covered" >l</span>oc={start:{line:lineNumber,column:index-lineStart}};<span class="cstat-no" title="statement not covered" >t</span>oken=extra.advance();<span class="cstat-no" title="statement not covered" >l</span>oc.end={line:lineNumber,column:index-lineStart};<span class="cstat-no" title="statement not covered" >i</span>f(token.type!==Token.EOF){<span class="cstat-no" title="statement not covered" >range=[token.range[0],token.range[1]];<span class="cstat-no" title="statement not covered" >v</span>alue=sliceSource(token.range[0],token.range[1]);<span class="cstat-no" title="statement not covered" >e</span>xtra.tokens.push({type:TokenName[token.type],value:value,range:range,loc:loc})}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn token}<span class="fstat-no" title="function not covered" ></span>function collectRegex(){<span class="cstat-no" title="statement not covered" ></span>var pos,loc,regex,token;<span class="cstat-no" title="statement not covered" >s</span>kipComment();<span class="cstat-no" title="statement not covered" >p</span>os=index;<span class="cstat-no" title="statement not covered" >l</span>oc={start:{line:lineNumber,column:index-lineStart}};<span class="cstat-no" title="statement not covered" >r</span>egex=extra.scanRegExp();<span class="cstat-no" title="statement not covered" >l</span>oc.end={line:lineNumber,column:index-lineStart};<span class="cstat-no" title="statement not covered" >i</span>f(extra.tokens.length&gt;0){<span class="cstat-no" title="statement not covered" >token=extra.tokens[extra.tokens.length-1];<span class="cstat-no" title="statement not covered" >i</span>f(token.range[0]===pos&amp;&amp;token.type==="Punctuator"){<span class="cstat-no" title="statement not covered" >if(token.value==="/"||token.value==="/="){<span class="cstat-no" title="statement not covered" >extra.tokens.pop()}</span>}</span>}<span class="cstat-no" title="statement not covered" ></span>e</span>xtra.tokens.push({type:"RegularExpression",value:regex.literal,range:[pos,index],loc:loc});<span class="cstat-no" title="statement not covered" >r</span>eturn regex}<span class="fstat-no" title="function not covered" ></span>function filterTokenLocation(){<span class="cstat-no" title="statement not covered" ></span>var i,entry,token,tokens=[];<span class="cstat-no" title="statement not covered" >f</span>or(i=0;i&lt;extra.tokens.length;++i){<span class="cstat-no" title="statement not covered" >entry=extra.tokens[i];<span class="cstat-no" title="statement not covered" >t</span>oken={type:entry.type,value:entry.value};<span class="cstat-no" title="statement not covered" >i</span>f(extra.range){<span class="cstat-no" title="statement not covered" >token.range=entry.range}<span class="cstat-no" title="statement not covered" ></span>i</span>f(extra.loc){<span class="cstat-no" title="statement not covered" >token.loc=entry.loc}<span class="cstat-no" title="statement not covered" ></span>t</span>okens.push(token)}<span class="cstat-no" title="statement not covered" ></span>e</span>xtra.tokens=tokens}<span class="fstat-no" title="function not covered" ></span>function createLiteral(token){<span class="cstat-no" title="statement not covered" ></span>return{type:Syntax.Literal,value:token.value}}<span class="fstat-no" title="function not covered" ></span>function createRawLiteral(token){<span class="cstat-no" title="statement not covered" ></span>return{type:Syntax.Literal,value:token.value,raw:sliceSource(token.range[0],token.range[1])}}<span class="fstat-no" title="function not covered" ></span>function createLocationMarker(){<span class="cstat-no" title="statement not covered" ></span>var marker={};<span class="cstat-no" title="statement not covered" >m</span>arker.range=[index,index];<span class="cstat-no" title="statement not covered" >m</span>arker.loc={start:{line:lineNumber,column:index-lineStart},end:{line:lineNumber,column:index-lineStart}};<span class="cstat-no" title="statement not covered" >m</span>arker.end=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this.range[1]=index;<span class="cstat-no" title="statement not covered" >t</span>his.loc.end.line=lineNumber;<span class="cstat-no" title="statement not covered" >t</span>his.loc.end.column=index-lineStart}</span>;<span class="cstat-no" title="statement not covered" >m</span>arker.applyGroup=<span class="fstat-no" title="function not covered" >function(node){<span class="cstat-no" title="statement not covered" ></span>if(extra.range){<span class="cstat-no" title="statement not covered" >node.groupRange=[this.range[0],this.range[1]]}<span class="cstat-no" title="statement not covered" ></span>i</span>f(extra.loc){<span class="cstat-no" title="statement not covered" >node.groupLoc={start:{line:this.loc.start.line,column:this.loc.start.column},end:{line:this.loc.end.line,column:this.loc.end.column}}}</span>}</span>;<span class="cstat-no" title="statement not covered" >m</span>arker.apply=<span class="fstat-no" title="function not covered" >function(node){<span class="cstat-no" title="statement not covered" ></span>if(extra.range){<span class="cstat-no" title="statement not covered" >node.range=[this.range[0],this.range[1]]}<span class="cstat-no" title="statement not covered" ></span>i</span>f(extra.loc){<span class="cstat-no" title="statement not covered" >node.loc={start:{line:this.loc.start.line,column:this.loc.start.column},end:{line:this.loc.end.line,column:this.loc.end.column}}}</span>}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn marker}<span class="fstat-no" title="function not covered" ></span>function trackGroupExpression(){<span class="cstat-no" title="statement not covered" ></span>var marker,expr;<span class="cstat-no" title="statement not covered" >s</span>kipComment();<span class="cstat-no" title="statement not covered" >m</span>arker=createLocationMarker();<span class="cstat-no" title="statement not covered" >e</span>xpect("(");<span class="cstat-no" title="statement not covered" >e</span>xpr=parseExpression();<span class="cstat-no" title="statement not covered" >e</span>xpect(")");<span class="cstat-no" title="statement not covered" >m</span>arker.end();<span class="cstat-no" title="statement not covered" >m</span>arker.applyGroup(expr);<span class="cstat-no" title="statement not covered" >r</span>eturn expr}<span class="fstat-no" title="function not covered" ></span>function trackLeftHandSideExpression(){<span class="cstat-no" title="statement not covered" ></span>var marker,expr;<span class="cstat-no" title="statement not covered" >s</span>kipComment();<span class="cstat-no" title="statement not covered" >m</span>arker=createLocationMarker();<span class="cstat-no" title="statement not covered" >e</span>xpr=matchKeyword("new")?parseNewExpression():parsePrimaryExpression();<span class="cstat-no" title="statement not covered" >w</span>hile(match(".")||match("[")){<span class="cstat-no" title="statement not covered" >if(match("[")){<span class="cstat-no" title="statement not covered" >expr={type:Syntax.MemberExpression,computed:true,object:expr,property:parseComputedMember()};<span class="cstat-no" title="statement not covered" >m</span>arker.end();<span class="cstat-no" title="statement not covered" >m</span>arker.apply(expr)}</span>else{<span class="cstat-no" title="statement not covered" >expr={type:Syntax.MemberExpression,computed:false,object:expr,property:parseNonComputedMember()};<span class="cstat-no" title="statement not covered" >m</span>arker.end();<span class="cstat-no" title="statement not covered" >m</span>arker.apply(expr)}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn expr}<span class="fstat-no" title="function not covered" ></span>function trackLeftHandSideExpressionAllowCall(){<span class="cstat-no" title="statement not covered" ></span>var marker,expr;<span class="cstat-no" title="statement not covered" >s</span>kipComment();<span class="cstat-no" title="statement not covered" >m</span>arker=createLocationMarker();<span class="cstat-no" title="statement not covered" >e</span>xpr=matchKeyword("new")?parseNewExpression():parsePrimaryExpression();<span class="cstat-no" title="statement not covered" >w</span>hile(match(".")||match("[")||match("(")){<span class="cstat-no" title="statement not covered" >if(match("(")){<span class="cstat-no" title="statement not covered" >expr={type:Syntax.CallExpression,callee:expr,arguments:parseArguments()};<span class="cstat-no" title="statement not covered" >m</span>arker.end();<span class="cstat-no" title="statement not covered" >m</span>arker.apply(expr)}</span>else <span class="cstat-no" title="statement not covered" >if(match("[")){<span class="cstat-no" title="statement not covered" >expr={type:Syntax.MemberExpression,computed:true,object:expr,property:parseComputedMember()};<span class="cstat-no" title="statement not covered" >m</span>arker.end();<span class="cstat-no" title="statement not covered" >m</span>arker.apply(expr)}</span>else{<span class="cstat-no" title="statement not covered" >expr={type:Syntax.MemberExpression,computed:false,object:expr,property:parseNonComputedMember()};<span class="cstat-no" title="statement not covered" >m</span>arker.end();<span class="cstat-no" title="statement not covered" >m</span>arker.apply(expr)}</span>}<span class="cstat-no" title="statement not covered" ></span></span>r</span>eturn expr}<span class="fstat-no" title="function not covered" ></span>function filterGroup(node){<span class="cstat-no" title="statement not covered" ></span>var n,i,entry;<span class="cstat-no" title="statement not covered" >n</span>=Object.prototype.toString.apply(node)==="[object Array]"?[]:{};<span class="cstat-no" title="statement not covered" >f</span>or(i in node){<span class="cstat-no" title="statement not covered" >if(node.hasOwnProperty(i)&amp;&amp;i!=="groupRange"&amp;&amp;i!=="groupLoc"){<span class="cstat-no" title="statement not covered" >entry=node[i];<span class="cstat-no" title="statement not covered" >i</span>f(entry===null||typeof entry!=="object"||entry instanceof RegExp){<span class="cstat-no" title="statement not covered" >n[i]=entry}</span>else{<span class="cstat-no" title="statement not covered" >n[i]=filterGroup(entry)}</span>}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn n}<span class="fstat-no" title="function not covered" ></span>function wrapTrackingFunction(range,loc){<span class="cstat-no" title="statement not covered" ></span>return <span class="fstat-no" title="function not covered" >function(parseFunction){<span class="fstat-no" title="function not covered" ></span>function isBinary(node){<span class="cstat-no" title="statement not covered" ></span>return node.type===Syntax.LogicalExpression||node.type===Syntax.BinaryExpression}<span class="fstat-no" title="function not covered" ></span>function visit(node){<span class="cstat-no" title="statement not covered" ></span>var start,end;<span class="cstat-no" title="statement not covered" >i</span>f(isBinary(node.left)){<span class="cstat-no" title="statement not covered" >visit(node.left)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(isBinary(node.right)){<span class="cstat-no" title="statement not covered" >visit(node.right)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(range){<span class="cstat-no" title="statement not covered" >if(node.left.groupRange||node.right.groupRange){<span class="cstat-no" title="statement not covered" >start=node.left.groupRange?node.left.groupRange[0]:node.left.range[0];<span class="cstat-no" title="statement not covered" >e</span>nd=node.right.groupRange?node.right.groupRange[1]:node.right.range[1];<span class="cstat-no" title="statement not covered" >n</span>ode.range=[start,end]}</span>else <span class="cstat-no" title="statement not covered" >if(typeof node.range==="undefined"){<span class="cstat-no" title="statement not covered" >start=node.left.range[0];<span class="cstat-no" title="statement not covered" >e</span>nd=node.right.range[1];<span class="cstat-no" title="statement not covered" >n</span>ode.range=[start,end]}</span>}<span class="cstat-no" title="statement not covered" ></span></span>i</span>f(loc){<span class="cstat-no" title="statement not covered" >if(node.left.groupLoc||node.right.groupLoc){<span class="cstat-no" title="statement not covered" >start=node.left.groupLoc?node.left.groupLoc.start:node.left.loc.start;<span class="cstat-no" title="statement not covered" >e</span>nd=node.right.groupLoc?node.right.groupLoc.end:node.right.loc.end;<span class="cstat-no" title="statement not covered" >n</span>ode.loc={start:start,end:end}}</span>else <span class="cstat-no" title="statement not covered" >if(typeof node.loc==="undefined"){<span class="cstat-no" title="statement not covered" >node.loc={start:node.left.loc.start,end:node.right.loc.end}}</span>}</span></span>}<span class="cstat-no" title="statement not covered" ></span>return <span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var marker,node;<span class="cstat-no" title="statement not covered" >s</span>kipComment();<span class="cstat-no" title="statement not covered" >m</span>arker=createLocationMarker();<span class="cstat-no" title="statement not covered" >n</span>ode=parseFunction.apply(null,arguments);<span class="cstat-no" title="statement not covered" >m</span>arker.end();<span class="cstat-no" title="statement not covered" >i</span>f(range&amp;&amp;typeof node.range==="undefined"){<span class="cstat-no" title="statement not covered" >marker.apply(node)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(loc&amp;&amp;typeof node.loc==="undefined"){<span class="cstat-no" title="statement not covered" >marker.apply(node)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(isBinary(node)){<span class="cstat-no" title="statement not covered" >visit(node)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn node}</span>}</span>}<span class="fstat-no" title="function not covered" ></span>function patch(){<span class="cstat-no" title="statement not covered" ></span>var wrapTracking;<span class="cstat-no" title="statement not covered" >i</span>f(extra.comments){<span class="cstat-no" title="statement not covered" >extra.skipComment=skipComment;<span class="cstat-no" title="statement not covered" >s</span>kipComment=scanComment}<span class="cstat-no" title="statement not covered" ></span>i</span>f(extra.raw){<span class="cstat-no" title="statement not covered" >extra.createLiteral=createLiteral;<span class="cstat-no" title="statement not covered" >c</span>reateLiteral=createRawLiteral}<span class="cstat-no" title="statement not covered" ></span>i</span>f(extra.range||extra.loc){<span class="cstat-no" title="statement not covered" >extra.parseGroupExpression=parseGroupExpression;<span class="cstat-no" title="statement not covered" >e</span>xtra.parseLeftHandSideExpression=parseLeftHandSideExpression;<span class="cstat-no" title="statement not covered" >e</span>xtra.parseLeftHandSideExpressionAllowCall=parseLeftHandSideExpressionAllowCall;<span class="cstat-no" title="statement not covered" >p</span>arseGroupExpression=trackGroupExpression;<span class="cstat-no" title="statement not covered" >p</span>arseLeftHandSideExpression=trackLeftHandSideExpression;<span class="cstat-no" title="statement not covered" >p</span>arseLeftHandSideExpressionAllowCall=trackLeftHandSideExpressionAllowCall;<span class="cstat-no" title="statement not covered" >w</span>rapTracking=wrapTrackingFunction(extra.range,extra.loc);<span class="cstat-no" title="statement not covered" >e</span>xtra.parseAdditiveExpression=parseAdditiveExpression;<span class="cstat-no" title="statement not covered" >e</span>xtra.parseAssignmentExpression=parseAssignmentExpression;<span class="cstat-no" title="statement not covered" >e</span>xtra.parseBitwiseANDExpression=parseBitwiseANDExpression;<span class="cstat-no" title="statement not covered" >e</span>xtra.parseBitwiseORExpression=parseBitwiseORExpression;<span class="cstat-no" title="statement not covered" >e</span>xtra.parseBitwiseXORExpression=parseBitwiseXORExpression;<span class="cstat-no" title="statement not covered" >e</span>xtra.parseBlock=parseBlock;<span class="cstat-no" title="statement not covered" >e</span>xtra.parseFunctionSourceElements=parseFunctionSourceElements;<span class="cstat-no" title="statement not covered" >e</span>xtra.parseCatchClause=parseCatchClause;<span class="cstat-no" title="statement not covered" >e</span>xtra.parseComputedMember=parseComputedMember;<span class="cstat-no" title="statement not covered" >e</span>xtra.parseConditionalExpression=parseConditionalExpression;<span class="cstat-no" title="statement not covered" >e</span>xtra.parseConstLetDeclaration=parseConstLetDeclaration;<span class="cstat-no" title="statement not covered" >e</span>xtra.parseEqualityExpression=parseEqualityExpression;<span class="cstat-no" title="statement not covered" >e</span>xtra.parseExpression=parseExpression;<span class="cstat-no" title="statement not covered" >e</span>xtra.parseForVariableDeclaration=parseForVariableDeclaration;<span class="cstat-no" title="statement not covered" >e</span>xtra.parseFunctionDeclaration=parseFunctionDeclaration;<span class="cstat-no" title="statement not covered" >e</span>xtra.parseFunctionExpression=parseFunctionExpression;<span class="cstat-no" title="statement not covered" >e</span>xtra.parseLogicalANDExpression=parseLogicalANDExpression;<span class="cstat-no" title="statement not covered" >e</span>xtra.parseLogicalORExpression=parseLogicalORExpression;<span class="cstat-no" title="statement not covered" >e</span>xtra.parseMultiplicativeExpression=parseMultiplicativeExpression;<span class="cstat-no" title="statement not covered" >e</span>xtra.parseNewExpression=parseNewExpression;<span class="cstat-no" title="statement not covered" >e</span>xtra.parseNonComputedProperty=parseNonComputedProperty;<span class="cstat-no" title="statement not covered" >e</span>xtra.parseObjectProperty=parseObjectProperty;<span class="cstat-no" title="statement not covered" >e</span>xtra.parseObjectPropertyKey=parseObjectPropertyKey;<span class="cstat-no" title="statement not covered" >e</span>xtra.parsePostfixExpression=parsePostfixExpression;<span class="cstat-no" title="statement not covered" >e</span>xtra.parsePrimaryExpression=parsePrimaryExpression;<span class="cstat-no" title="statement not covered" >e</span>xtra.parseProgram=parseProgram;<span class="cstat-no" title="statement not covered" >e</span>xtra.parsePropertyFunction=parsePropertyFunction;<span class="cstat-no" title="statement not covered" >e</span>xtra.parseRelationalExpression=parseRelationalExpression;<span class="cstat-no" title="statement not covered" >e</span>xtra.parseStatement=parseStatement;<span class="cstat-no" title="statement not covered" >e</span>xtra.parseShiftExpression=parseShiftExpression;<span class="cstat-no" title="statement not covered" >e</span>xtra.parseSwitchCase=parseSwitchCase;<span class="cstat-no" title="statement not covered" >e</span>xtra.parseUnaryExpression=parseUnaryExpression;<span class="cstat-no" title="statement not covered" >e</span>xtra.parseVariableDeclaration=parseVariableDeclaration;<span class="cstat-no" title="statement not covered" >e</span>xtra.parseVariableIdentifier=parseVariableIdentifier;<span class="cstat-no" title="statement not covered" >p</span>arseAdditiveExpression=wrapTracking(extra.parseAdditiveExpression);<span class="cstat-no" title="statement not covered" >p</span>arseAssignmentExpression=wrapTracking(extra.parseAssignmentExpression);<span class="cstat-no" title="statement not covered" >p</span>arseBitwiseANDExpression=wrapTracking(extra.parseBitwiseANDExpression);<span class="cstat-no" title="statement not covered" >p</span>arseBitwiseORExpression=wrapTracking(extra.parseBitwiseORExpression);<span class="cstat-no" title="statement not covered" >p</span>arseBitwiseXORExpression=wrapTracking(extra.parseBitwiseXORExpression);<span class="cstat-no" title="statement not covered" >p</span>arseBlock=wrapTracking(extra.parseBlock);<span class="cstat-no" title="statement not covered" >p</span>arseFunctionSourceElements=wrapTracking(extra.parseFunctionSourceElements);<span class="cstat-no" title="statement not covered" >p</span>arseCatchClause=wrapTracking(extra.parseCatchClause);<span class="cstat-no" title="statement not covered" >p</span>arseComputedMember=wrapTracking(extra.parseComputedMember);<span class="cstat-no" title="statement not covered" >p</span>arseConditionalExpression=wrapTracking(extra.parseConditionalExpression);<span class="cstat-no" title="statement not covered" >p</span>arseConstLetDeclaration=wrapTracking(extra.parseConstLetDeclaration);<span class="cstat-no" title="statement not covered" >p</span>arseEqualityExpression=wrapTracking(extra.parseEqualityExpression);<span class="cstat-no" title="statement not covered" >p</span>arseExpression=wrapTracking(extra.parseExpression);<span class="cstat-no" title="statement not covered" >p</span>arseForVariableDeclaration=wrapTracking(extra.parseForVariableDeclaration);<span class="cstat-no" title="statement not covered" >p</span>arseFunctionDeclaration=wrapTracking(extra.parseFunctionDeclaration);<span class="cstat-no" title="statement not covered" >p</span>arseFunctionExpression=wrapTracking(extra.parseFunctionExpression);<span class="cstat-no" title="statement not covered" >p</span>arseLeftHandSideExpression=wrapTracking(parseLeftHandSideExpression);<span class="cstat-no" title="statement not covered" >p</span>arseLogicalANDExpression=wrapTracking(extra.parseLogicalANDExpression);<span class="cstat-no" title="statement not covered" >p</span>arseLogicalORExpression=wrapTracking(extra.parseLogicalORExpression);<span class="cstat-no" title="statement not covered" >p</span>arseMultiplicativeExpression=wrapTracking(extra.parseMultiplicativeExpression);<span class="cstat-no" title="statement not covered" >p</span>arseNewExpression=wrapTracking(extra.parseNewExpression);<span class="cstat-no" title="statement not covered" >p</span>arseNonComputedProperty=wrapTracking(extra.parseNonComputedProperty);<span class="cstat-no" title="statement not covered" >p</span>arseObjectProperty=wrapTracking(extra.parseObjectProperty);<span class="cstat-no" title="statement not covered" >p</span>arseObjectPropertyKey=wrapTracking(extra.parseObjectPropertyKey);<span class="cstat-no" title="statement not covered" >p</span>arsePostfixExpression=wrapTracking(extra.parsePostfixExpression);<span class="cstat-no" title="statement not covered" >p</span>arsePrimaryExpression=wrapTracking(extra.parsePrimaryExpression);<span class="cstat-no" title="statement not covered" >p</span>arseProgram=wrapTracking(extra.parseProgram);<span class="cstat-no" title="statement not covered" >p</span>arsePropertyFunction=wrapTracking(extra.parsePropertyFunction);<span class="cstat-no" title="statement not covered" >p</span>arseRelationalExpression=wrapTracking(extra.parseRelationalExpression);<span class="cstat-no" title="statement not covered" >p</span>arseStatement=wrapTracking(extra.parseStatement);<span class="cstat-no" title="statement not covered" >p</span>arseShiftExpression=wrapTracking(extra.parseShiftExpression);<span class="cstat-no" title="statement not covered" >p</span>arseSwitchCase=wrapTracking(extra.parseSwitchCase);<span class="cstat-no" title="statement not covered" >p</span>arseUnaryExpression=wrapTracking(extra.parseUnaryExpression);<span class="cstat-no" title="statement not covered" >p</span>arseVariableDeclaration=wrapTracking(extra.parseVariableDeclaration);<span class="cstat-no" title="statement not covered" >p</span>arseVariableIdentifier=wrapTracking(extra.parseVariableIdentifier)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(typeof extra.tokens!=="undefined"){<span class="cstat-no" title="statement not covered" >extra.advance=advance;<span class="cstat-no" title="statement not covered" >e</span>xtra.scanRegExp=scanRegExp;<span class="cstat-no" title="statement not covered" >a</span>dvance=collectToken;<span class="cstat-no" title="statement not covered" >s</span>canRegExp=collectRegex}</span>}<span class="fstat-no" title="function not covered" ></span>function unpatch(){<span class="cstat-no" title="statement not covered" ></span>if(typeof extra.skipComment==="function"){<span class="cstat-no" title="statement not covered" >skipComment=extra.skipComment}<span class="cstat-no" title="statement not covered" ></span>i</span>f(extra.raw){<span class="cstat-no" title="statement not covered" >createLiteral=extra.createLiteral}<span class="cstat-no" title="statement not covered" ></span>i</span>f(extra.range||extra.loc){<span class="cstat-no" title="statement not covered" >parseAdditiveExpression=extra.parseAdditiveExpression;<span class="cstat-no" title="statement not covered" >p</span>arseAssignmentExpression=extra.parseAssignmentExpression;<span class="cstat-no" title="statement not covered" >p</span>arseBitwiseANDExpression=extra.parseBitwiseANDExpression;<span class="cstat-no" title="statement not covered" >p</span>arseBitwiseORExpression=extra.parseBitwiseORExpression;<span class="cstat-no" title="statement not covered" >p</span>arseBitwiseXORExpression=extra.parseBitwiseXORExpression;<span class="cstat-no" title="statement not covered" >p</span>arseBlock=extra.parseBlock;<span class="cstat-no" title="statement not covered" >p</span>arseFunctionSourceElements=extra.parseFunctionSourceElements;<span class="cstat-no" title="statement not covered" >p</span>arseCatchClause=extra.parseCatchClause;<span class="cstat-no" title="statement not covered" >p</span>arseComputedMember=extra.parseComputedMember;<span class="cstat-no" title="statement not covered" >p</span>arseConditionalExpression=extra.parseConditionalExpression;<span class="cstat-no" title="statement not covered" >p</span>arseConstLetDeclaration=extra.parseConstLetDeclaration;<span class="cstat-no" title="statement not covered" >p</span>arseEqualityExpression=extra.parseEqualityExpression;<span class="cstat-no" title="statement not covered" >p</span>arseExpression=extra.parseExpression;<span class="cstat-no" title="statement not covered" >p</span>arseForVariableDeclaration=extra.parseForVariableDeclaration;<span class="cstat-no" title="statement not covered" >p</span>arseFunctionDeclaration=extra.parseFunctionDeclaration;<span class="cstat-no" title="statement not covered" >p</span>arseFunctionExpression=extra.parseFunctionExpression;<span class="cstat-no" title="statement not covered" >p</span>arseGroupExpression=extra.parseGroupExpression;<span class="cstat-no" title="statement not covered" >p</span>arseLeftHandSideExpression=extra.parseLeftHandSideExpression;<span class="cstat-no" title="statement not covered" >p</span>arseLeftHandSideExpressionAllowCall=extra.parseLeftHandSideExpressionAllowCall;<span class="cstat-no" title="statement not covered" >p</span>arseLogicalANDExpression=extra.parseLogicalANDExpression;<span class="cstat-no" title="statement not covered" >p</span>arseLogicalORExpression=extra.parseLogicalORExpression;<span class="cstat-no" title="statement not covered" >p</span>arseMultiplicativeExpression=extra.parseMultiplicativeExpression;<span class="cstat-no" title="statement not covered" >p</span>arseNewExpression=extra.parseNewExpression;<span class="cstat-no" title="statement not covered" >p</span>arseNonComputedProperty=extra.parseNonComputedProperty;<span class="cstat-no" title="statement not covered" >p</span>arseObjectProperty=extra.parseObjectProperty;<span class="cstat-no" title="statement not covered" >p</span>arseObjectPropertyKey=extra.parseObjectPropertyKey;<span class="cstat-no" title="statement not covered" >p</span>arsePrimaryExpression=extra.parsePrimaryExpression;<span class="cstat-no" title="statement not covered" >p</span>arsePostfixExpression=extra.parsePostfixExpression;<span class="cstat-no" title="statement not covered" >p</span>arseProgram=extra.parseProgram;<span class="cstat-no" title="statement not covered" >p</span>arsePropertyFunction=extra.parsePropertyFunction;<span class="cstat-no" title="statement not covered" >p</span>arseRelationalExpression=extra.parseRelationalExpression;<span class="cstat-no" title="statement not covered" >p</span>arseStatement=extra.parseStatement;<span class="cstat-no" title="statement not covered" >p</span>arseShiftExpression=extra.parseShiftExpression;<span class="cstat-no" title="statement not covered" >p</span>arseSwitchCase=extra.parseSwitchCase;<span class="cstat-no" title="statement not covered" >p</span>arseUnaryExpression=extra.parseUnaryExpression;<span class="cstat-no" title="statement not covered" >p</span>arseVariableDeclaration=extra.parseVariableDeclaration;<span class="cstat-no" title="statement not covered" >p</span>arseVariableIdentifier=extra.parseVariableIdentifier}<span class="cstat-no" title="statement not covered" ></span>i</span>f(typeof extra.scanRegExp==="function"){<span class="cstat-no" title="statement not covered" >advance=extra.advance;<span class="cstat-no" title="statement not covered" >s</span>canRegExp=extra.scanRegExp}</span>}<span class="fstat-no" title="function not covered" ></span>function stringToArray(str){<span class="cstat-no" title="statement not covered" ></span>var length=str.length,result=[],i;<span class="cstat-no" title="statement not covered" >f</span>or(i=0;i&lt;length;++i){<span class="cstat-no" title="statement not covered" >result[i]=str.charAt(i)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn result}<span class="fstat-no" title="function not covered" ></span>function parse(code,options){<span class="cstat-no" title="statement not covered" ></span>var program,toString;<span class="cstat-no" title="statement not covered" >t</span>oString=String;<span class="cstat-no" title="statement not covered" >i</span>f(typeof code!=="string"&amp;&amp;!(code instanceof String)){<span class="cstat-no" title="statement not covered" >code=toString(code)}<span class="cstat-no" title="statement not covered" ></span>s</span>ource=code;<span class="cstat-no" title="statement not covered" >i</span>ndex=0;<span class="cstat-no" title="statement not covered" >l</span>ineNumber=source.length&gt;0?1:0;<span class="cstat-no" title="statement not covered" >l</span>ineStart=0;<span class="cstat-no" title="statement not covered" >l</span>ength=source.length;<span class="cstat-no" title="statement not covered" >b</span>uffer=null;<span class="cstat-no" title="statement not covered" >s</span>tate={allowIn:true,labelSet:{},inFunctionBody:false,inIteration:false,inSwitch:false};<span class="cstat-no" title="statement not covered" >e</span>xtra={};<span class="cstat-no" title="statement not covered" >i</span>f(typeof options!=="undefined"){<span class="cstat-no" title="statement not covered" >extra.range=typeof options.range==="boolean"&amp;&amp;options.range;<span class="cstat-no" title="statement not covered" >e</span>xtra.loc=typeof options.loc==="boolean"&amp;&amp;options.loc;<span class="cstat-no" title="statement not covered" >e</span>xtra.raw=typeof options.raw==="boolean"&amp;&amp;options.raw;<span class="cstat-no" title="statement not covered" >i</span>f(typeof options.tokens==="boolean"&amp;&amp;options.tokens){<span class="cstat-no" title="statement not covered" >extra.tokens=[]}<span class="cstat-no" title="statement not covered" ></span>i</span>f(typeof options.comment==="boolean"&amp;&amp;options.comment){<span class="cstat-no" title="statement not covered" >extra.comments=[]}<span class="cstat-no" title="statement not covered" ></span>i</span>f(typeof options.tolerant==="boolean"&amp;&amp;options.tolerant){<span class="cstat-no" title="statement not covered" >extra.errors=[]}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(length&gt;0){<span class="cstat-no" title="statement not covered" >if(typeof source[0]==="undefined"){<span class="cstat-no" title="statement not covered" >if(code instanceof String){<span class="cstat-no" title="statement not covered" >source=code.valueOf()}<span class="cstat-no" title="statement not covered" ></span>i</span>f(typeof source[0]==="undefined"){<span class="cstat-no" title="statement not covered" >source=stringToArray(code)}</span>}</span>}<span class="cstat-no" title="statement not covered" ></span>p</span>atch();<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >program=parseProgram();<span class="cstat-no" title="statement not covered" >i</span>f(typeof extra.comments!=="undefined"){<span class="cstat-no" title="statement not covered" >filterCommentLocation();<span class="cstat-no" title="statement not covered" >p</span>rogram.comments=extra.comments}<span class="cstat-no" title="statement not covered" ></span>i</span>f(typeof extra.tokens!=="undefined"){<span class="cstat-no" title="statement not covered" >filterTokenLocation();<span class="cstat-no" title="statement not covered" >p</span>rogram.tokens=extra.tokens}<span class="cstat-no" title="statement not covered" ></span>i</span>f(typeof extra.errors!=="undefined"){<span class="cstat-no" title="statement not covered" >program.errors=extra.errors}<span class="cstat-no" title="statement not covered" ></span>i</span>f(extra.range||extra.loc){<span class="cstat-no" title="statement not covered" >program.body=filterGroup(program.body)}</span>}</span>catch(e){<span class="cstat-no" title="statement not covered" >throw e}</span>finally{<span class="cstat-no" title="statement not covered" >unpatch();<span class="cstat-no" title="statement not covered" >e</span>xtra={}}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn program}<span class="cstat-no" title="statement not covered" ></span>exports.version="1.0.4";<span class="cstat-no" title="statement not covered" >e</span>xports.parse=parse;<span class="cstat-no" title="statement not covered" >e</span>xports.Syntax=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var name,types={};<span class="cstat-no" title="statement not covered" >i</span>f(typeof Object.create==="function"){<span class="cstat-no" title="statement not covered" >types=Object.create(null)}<span class="cstat-no" title="statement not covered" ></span>f</span>or(name in Syntax){<span class="cstat-no" title="statement not covered" >if(Syntax.hasOwnProperty(name)){<span class="cstat-no" title="statement not covered" >types[name]=Syntax[name]}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(typeof Object.freeze==="function"){<span class="cstat-no" title="statement not covered" >Object.freeze(types)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn types}</span>()}</span>)},{}],18:[function(require,module,exports){<span class="fstat-no" title="function not covered" >function EventEmitter(){<span class="cstat-no" title="statement not covered" ></span>this._events=this._events||{};<span class="cstat-no" title="statement not covered" >t</span>his._maxListeners=this._maxListeners||undefined}</span>module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._maxListeners=undefined;EventEmitter.defaultMaxListeners=10;EventEmitter.prototype.setMaxListeners=<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>if(!isNumber(n)||n&lt;0||isNaN(n))<span class="cstat-no" title="statement not covered" >throw TypeError("n must be a positive number");<span class="cstat-no" title="statement not covered" >t</span></span>his._maxListeners=n;<span class="cstat-no" title="statement not covered" >r</span>eturn this}</span>;EventEmitter.prototype.emit=<span class="fstat-no" title="function not covered" >function(type){<span class="cstat-no" title="statement not covered" ></span>var er,handler,len,args,i,listeners;<span class="cstat-no" title="statement not covered" >i</span>f(!this._events)<span class="cstat-no" title="statement not covered" >this._events={};<span class="cstat-no" title="statement not covered" >i</span></span>f(type==="error"){<span class="cstat-no" title="statement not covered" >if(!this._events.error||isObject(this._events.error)&amp;&amp;!this._events.error.length){<span class="cstat-no" title="statement not covered" >er=arguments[1];<span class="cstat-no" title="statement not covered" >i</span>f(er instanceof Error){<span class="cstat-no" title="statement not covered" >throw er}<span class="cstat-no" title="statement not covered" ></span>t</span>hrow TypeError('Uncaught, unspecified "error" event.')}</span>}<span class="cstat-no" title="statement not covered" ></span>h</span>andler=this._events[type];<span class="cstat-no" title="statement not covered" >i</span>f(isUndefined(handler))<span class="cstat-no" title="statement not covered" >return false;<span class="cstat-no" title="statement not covered" >i</span></span>f(isFunction(handler)){<span class="cstat-no" title="statement not covered" >switch(arguments.length){case 1:<span class="cstat-no" title="statement not covered" >handler.call(this);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase 2:<span class="cstat-no" title="statement not covered" >handler.call(this,arguments[1]);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase 3:<span class="cstat-no" title="statement not covered" >handler.call(this,arguments[1],arguments[2]);<span class="cstat-no" title="statement not covered" >b</span>reak;d</span>efault:<span class="cstat-no" title="statement not covered" >len=arguments.length;<span class="cstat-no" title="statement not covered" >a</span>rgs=new Array(len-1);<span class="cstat-no" title="statement not covered" >f</span>or(i=1;i&lt;len;i++)<span class="cstat-no" title="statement not covered" >args[i-1]=arguments[i];<span class="cstat-no" title="statement not covered" >h</span></span>andler.apply(this,args)}</span>}</span>else <span class="cstat-no" title="statement not covered" >if(isObject(handler)){<span class="cstat-no" title="statement not covered" >len=arguments.length;<span class="cstat-no" title="statement not covered" >a</span>rgs=new Array(len-1);<span class="cstat-no" title="statement not covered" >f</span>or(i=1;i&lt;len;i++)<span class="cstat-no" title="statement not covered" >args[i-1]=arguments[i];<span class="cstat-no" title="statement not covered" >l</span></span>isteners=handler.slice();<span class="cstat-no" title="statement not covered" >l</span>en=listeners.length;<span class="cstat-no" title="statement not covered" >f</span>or(i=0;i&lt;len;i++)<span class="cstat-no" title="statement not covered" >listeners[i].apply(this,args)}<span class="cstat-no" title="statement not covered" ></span></span>r</span></span>eturn true}</span>;EventEmitter.prototype.addListener=<span class="fstat-no" title="function not covered" >function(type,listener){<span class="cstat-no" title="statement not covered" ></span>var m;<span class="cstat-no" title="statement not covered" >i</span>f(!isFunction(listener))<span class="cstat-no" title="statement not covered" >throw TypeError("listener must be a function");<span class="cstat-no" title="statement not covered" >i</span></span>f(!this._events)<span class="cstat-no" title="statement not covered" >this._events={};<span class="cstat-no" title="statement not covered" >i</span></span>f(this._events.newListener)<span class="cstat-no" title="statement not covered" >this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener);<span class="cstat-no" title="statement not covered" >i</span></span>f(!this._events[type])<span class="cstat-no" title="statement not covered" >this._events[type]=listener;e</span>lse <span class="cstat-no" title="statement not covered" >if(isObject(this._events[type]))<span class="cstat-no" title="statement not covered" >this._events[type].push(listener);e</span>lse <span class="cstat-no" title="statement not covered" >this._events[type]=[this._events[type],listener];<span class="cstat-no" title="statement not covered" >i</span></span></span>f(isObject(this._events[type])&amp;&amp;!this._events[type].warned){<span class="cstat-no" title="statement not covered" >var m;<span class="cstat-no" title="statement not covered" >i</span>f(!isUndefined(this._maxListeners)){<span class="cstat-no" title="statement not covered" >m=this._maxListeners}</span>else{<span class="cstat-no" title="statement not covered" >m=EventEmitter.defaultMaxListeners}<span class="cstat-no" title="statement not covered" ></span>i</span>f(m&amp;&amp;m&gt;0&amp;&amp;this._events[type].length&gt;m){<span class="cstat-no" title="statement not covered" >this._events[type].warned=true;<span class="cstat-no" title="statement not covered" >c</span>onsole.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[type].length);<span class="cstat-no" title="statement not covered" >i</span>f(typeof console.trace==="function"){<span class="cstat-no" title="statement not covered" >console.trace()}</span>}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn this}</span>;EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=<span class="fstat-no" title="function not covered" >function(type,listener){<span class="cstat-no" title="statement not covered" ></span>if(!isFunction(listener))<span class="cstat-no" title="statement not covered" >throw TypeError("listener must be a function");<span class="cstat-no" title="statement not covered" >v</span></span>ar fired=false;<span class="fstat-no" title="function not covered" >f</span>unction g(){<span class="cstat-no" title="statement not covered" ></span>this.removeListener(type,g);<span class="cstat-no" title="statement not covered" >i</span>f(!fired){<span class="cstat-no" title="statement not covered" >fired=true;<span class="cstat-no" title="statement not covered" >l</span>istener.apply(this,arguments)}</span>}<span class="cstat-no" title="statement not covered" ></span>g.listener=listener;<span class="cstat-no" title="statement not covered" >t</span>his.on(type,g);<span class="cstat-no" title="statement not covered" >r</span>eturn this}</span>;EventEmitter.prototype.removeListener=<span class="fstat-no" title="function not covered" >function(type,listener){<span class="cstat-no" title="statement not covered" ></span>var list,position,length,i;<span class="cstat-no" title="statement not covered" >i</span>f(!isFunction(listener))<span class="cstat-no" title="statement not covered" >throw TypeError("listener must be a function");<span class="cstat-no" title="statement not covered" >i</span></span>f(!this._events||!this._events[type])<span class="cstat-no" title="statement not covered" >return this;<span class="cstat-no" title="statement not covered" >l</span></span>ist=this._events[type];<span class="cstat-no" title="statement not covered" >l</span>ength=list.length;<span class="cstat-no" title="statement not covered" >p</span>osition=-1;<span class="cstat-no" title="statement not covered" >i</span>f(list===listener||isFunction(list.listener)&amp;&amp;list.listener===listener){<span class="cstat-no" title="statement not covered" >delete this._events[type];<span class="cstat-no" title="statement not covered" >i</span>f(this._events.removeListener)<span class="cstat-no" title="statement not covered" >this.emit("removeListener",type,listener)}</span></span>else <span class="cstat-no" title="statement not covered" >if(isObject(list)){<span class="cstat-no" title="statement not covered" >for(i=length;i--&gt;0;){<span class="cstat-no" title="statement not covered" >if(list[i]===listener||list[i].listener&amp;&amp;list[i].listener===listener){<span class="cstat-no" title="statement not covered" >position=i;<span class="cstat-no" title="statement not covered" >b</span>reak}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(position&lt;0)<span class="cstat-no" title="statement not covered" >return this;<span class="cstat-no" title="statement not covered" >i</span></span>f(list.length===1){<span class="cstat-no" title="statement not covered" >list.length=0;<span class="cstat-no" title="statement not covered" >d</span>elete this._events[type]}</span>else{<span class="cstat-no" title="statement not covered" >list.splice(position,1)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(this._events.removeListener)<span class="cstat-no" title="statement not covered" >this.emit("removeListener",type,listener)}<span class="cstat-no" title="statement not covered" ></span></span>r</span></span>eturn this}</span>;EventEmitter.prototype.removeAllListeners=<span class="fstat-no" title="function not covered" >function(type){<span class="cstat-no" title="statement not covered" ></span>var key,listeners;<span class="cstat-no" title="statement not covered" >i</span>f(!this._events)<span class="cstat-no" title="statement not covered" >return this;<span class="cstat-no" title="statement not covered" >i</span></span>f(!this._events.removeListener){<span class="cstat-no" title="statement not covered" >if(arguments.length===0)<span class="cstat-no" title="statement not covered" >this._events={};e</span>lse <span class="cstat-no" title="statement not covered" >if(this._events[type])<span class="cstat-no" title="statement not covered" >delete this._events[type];<span class="cstat-no" title="statement not covered" >r</span></span></span>eturn this}<span class="cstat-no" title="statement not covered" ></span>i</span>f(arguments.length===0){<span class="cstat-no" title="statement not covered" >for(key in this._events){<span class="cstat-no" title="statement not covered" >if(key==="removeListener")<span class="cstat-no" title="statement not covered" >continue;<span class="cstat-no" title="statement not covered" >t</span></span>his.removeAllListeners(key)}<span class="cstat-no" title="statement not covered" ></span>t</span>his.removeAllListeners("removeListener");<span class="cstat-no" title="statement not covered" >t</span>his._events={};<span class="cstat-no" title="statement not covered" >r</span>eturn this}<span class="cstat-no" title="statement not covered" ></span>l</span>isteners=this._events[type];<span class="cstat-no" title="statement not covered" >i</span>f(isFunction(listeners)){<span class="cstat-no" title="statement not covered" >this.removeListener(type,listeners)}</span>else{<span class="cstat-no" title="statement not covered" >while(listeners.length)<span class="cstat-no" title="statement not covered" >this.removeListener(type,listeners[listeners.length-1])}<span class="cstat-no" title="statement not covered" ></span></span>d</span>elete this._events[type];<span class="cstat-no" title="statement not covered" >r</span>eturn this}</span>;EventEmitter.prototype.listeners=<span class="fstat-no" title="function not covered" >function(type){<span class="cstat-no" title="statement not covered" ></span>var ret;<span class="cstat-no" title="statement not covered" >i</span>f(!this._events||!this._events[type])<span class="cstat-no" title="statement not covered" >ret=[];e</span>lse <span class="cstat-no" title="statement not covered" >if(isFunction(this._events[type]))<span class="cstat-no" title="statement not covered" >ret=[this._events[type]];e</span>lse <span class="cstat-no" title="statement not covered" >ret=this._events[type].slice();<span class="cstat-no" title="statement not covered" >r</span></span></span>eturn ret}</span>;EventEmitter.listenerCount=<span class="fstat-no" title="function not covered" >function(emitter,type){<span class="cstat-no" title="statement not covered" ></span>var ret;<span class="cstat-no" title="statement not covered" >i</span>f(!emitter._events||!emitter._events[type])<span class="cstat-no" title="statement not covered" >ret=0;e</span>lse <span class="cstat-no" title="statement not covered" >if(isFunction(emitter._events[type]))<span class="cstat-no" title="statement not covered" >ret=1;e</span>lse <span class="cstat-no" title="statement not covered" >ret=emitter._events[type].length;<span class="cstat-no" title="statement not covered" >r</span></span></span>eturn ret}</span>;<span class="fstat-no" title="function not covered" >function isFunction(arg){<span class="cstat-no" title="statement not covered" ></span>return typeof arg==="function"}<span class="fstat-no" title="function not covered" ></span>function isNumber(arg){<span class="cstat-no" title="statement not covered" ></span>return typeof arg==="number"}<span class="fstat-no" title="function not covered" ></span>function isObject(arg){<span class="cstat-no" title="statement not covered" ></span>return typeof arg==="object"&amp;&amp;arg!==null}<span class="fstat-no" title="function not covered" ></span>function isUndefined(arg){<span class="cstat-no" title="statement not covered" ></span>return arg===void 0}</span>},{}],19:[<span class="fstat-no" title="function not covered" >function(require,module,exports){<span class="cstat-no" title="statement not covered" ></span>var ndarray=require("ndarray");<span class="cstat-no" title="statement not covered" >v</span>ar fft=require("ndarray-fft");<span class="cstat-no" title="statement not covered" >v</span>ar mag=require("ndarray-complex").mag;<span class="cstat-no" title="statement not covered" >v</span>ar inherits=require("inherits");<span class="cstat-no" title="statement not covered" >v</span>ar EventEmitter=require("events").EventEmitter;<span class="cstat-no" title="statement not covered" >v</span>ar fs=require("fs");<span class="cstat-no" title="statement not covered" >v</span>ar html='&lt;div id="scope"&gt;\n  &lt;div id="sliders"&gt;&lt;/div&gt;\n&lt;/div&gt;\n';<span class="cstat-no" title="statement not covered" >v</span>ar domify=require("domify");<span class="cstat-no" title="statement not covered" >v</span>ar slideways=require("slideways");<span class="cstat-no" title="statement not covered" >m</span>odule.exports=Scope;<span class="cstat-no" title="statement not covered" >i</span>nherits(Scope,EventEmitter);<span class="fstat-no" title="function not covered" >f</span>unction Scope(opts){<span class="cstat-no" title="statement not covered" ></span>var self=this;<span class="cstat-no" title="statement not covered" >i</span>f(!(this instanceof Scope))<span class="cstat-no" title="statement not covered" >return new Scope(opts);<span class="cstat-no" title="statement not covered" >i</span></span>f(!opts)<span class="cstat-no" title="statement not covered" >opts={};<span class="cstat-no" title="statement not covered" >t</span></span>his.rate=opts.rate||44e3;<span class="cstat-no" title="statement not covered" >t</span>his._worker=opts.worker||<span class="fstat-no" title="function not covered" >function(data,cb){<span class="cstat-no" title="statement not covered" ></span>cb(worker(data))}</span>;<span class="cstat-no" title="statement not covered" >t</span>his.element=domify(html)[0];<span class="cstat-no" title="statement not covered" >t</span>his.element.style.width="100%";<span class="cstat-no" title="statement not covered" >t</span>his.element.style.height="100%";<span class="cstat-no" title="statement not covered" >t</span>his.element.addEventListener("click",<span class="fstat-no" title="function not covered" >function(ev){<span class="cstat-no" title="statement not covered" ></span>if(ev.target===self.svg||ev.target===sliders||ev.target===self.polyline){<span class="cstat-no" title="statement not covered" >self.emit("click",ev)}</span>}</span>);<span class="cstat-no" title="statement not covered" >t</span>his.svg=createElement("svg");<span class="cstat-no" title="statement not covered" >t</span>his.svg.setAttribute("width","100%");<span class="cstat-no" title="statement not covered" >t</span>his.svg.setAttribute("height","100%");<span class="cstat-no" title="statement not covered" >t</span>his.element.appendChild(this.svg);<span class="cstat-no" title="statement not covered" >v</span>ar p=this.polyline=createElement("polyline");<span class="cstat-no" title="statement not covered" >p</span>.setAttribute("fill",opts.fill||"cyan");<span class="cstat-no" title="statement not covered" >p</span>.setAttribute("stroke",opts.stroke||"cyan");<span class="cstat-no" title="statement not covered" >p</span>.setAttribute("strokeWidth",opts.strokeWidth||"2px");<span class="cstat-no" title="statement not covered" >t</span>his.svg.appendChild(this.polyline);<span class="cstat-no" title="statement not covered" >t</span>his.scale=0;<span class="cstat-no" title="statement not covered" >t</span>his.createSlider({min:-1,max:5,init:0},<span class="fstat-no" title="function not covered" >function(x){<span class="cstat-no" title="statement not covered" ></span>self.scale=Math.pow(2,x)}</span>)}<span class="cstat-no" title="statement not covered" ></span>Scope.prototype.createSlider=<span class="fstat-no" title="function not covered" >function(opts,f){<span class="cstat-no" title="statement not covered" ></span>if(!opts)<span class="cstat-no" title="statement not covered" >opts={};<span class="cstat-no" title="statement not covered" >v</span></span>ar a=slideways(opts);<span class="cstat-no" title="statement not covered" >i</span>f(f)<span class="cstat-no" title="statement not covered" >a.on("value",f);<span class="cstat-no" title="statement not covered" >a</span></span>.appendTo(this.element.querySelector("#sliders"));<span class="cstat-no" title="statement not covered" >r</span>eturn a}</span>;<span class="cstat-no" title="statement not covered" >S</span>cope.prototype.appendTo=<span class="fstat-no" title="function not covered" >function(target){<span class="cstat-no" title="statement not covered" ></span>if(typeof target==="string")<span class="cstat-no" title="statement not covered" >target=document.querySelector(target);<span class="cstat-no" title="statement not covered" >t</span></span>arget.appendChild(this.element);<span class="cstat-no" title="statement not covered" >t</span>his._target=target;<span class="cstat-no" title="statement not covered" >t</span>his.resize()}</span>;<span class="cstat-no" title="statement not covered" >S</span>cope.prototype.resize=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(!this._target)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >v</span></span>ar style=window.getComputedStyle(this._target);<span class="cstat-no" title="statement not covered" >t</span>his.width=parseInt(style.width);<span class="cstat-no" title="statement not covered" >t</span>his.height=parseInt(style.height)}</span>;<span class="cstat-no" title="statement not covered" >m</span>odule.exports.worker=worker;<span class="fstat-no" title="function not covered" >f</span>unction worker(input){<span class="cstat-no" title="statement not covered" ></span>var data=new Float32Array(input.length);<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;input.length;i++){<span class="cstat-no" title="statement not covered" >data[i]=Math.min(1,Math.max(-1,input[i]))}<span class="cstat-no" title="statement not covered" ></span>v</span>ar reals=ndarray(data,[data.length,1]);<span class="cstat-no" title="statement not covered" >v</span>ar imags=ndarray(new Float32Array(data.length),[data.length,1]);<span class="cstat-no" title="statement not covered" >f</span>ft(1,reals,imags);<span class="cstat-no" title="statement not covered" >m</span>ag(reals,reals,imags);<span class="cstat-no" title="statement not covered" >r</span>eturn reals}<span class="cstat-no" title="statement not covered" ></span>Scope.prototype.draw=<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>var self=this;<span class="cstat-no" title="statement not covered" >s</span>elf._worker(data,<span class="fstat-no" title="function not covered" >function(reals){<span class="cstat-no" title="statement not covered" ></span>self._draw(reals)}</span>)}</span>;<span class="cstat-no" title="statement not covered" >S</span>cope.prototype._draw=<span class="fstat-no" title="function not covered" >function(reals){<span class="cstat-no" title="statement not covered" ></span>var self=this;<span class="cstat-no" title="statement not covered" >v</span>ar points=["0,"+this.height];<span class="cstat-no" title="statement not covered" >v</span>ar pfreq,pd;<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;reals.data.length;i++){<span class="cstat-no" title="statement not covered" >var freq=i*this.rate/reals.data.length;<span class="cstat-no" title="statement not covered" >v</span>ar d=reals.data[i];<span class="cstat-no" title="statement not covered" >i</span>f(d&gt;1e5){<span class="cstat-no" title="statement not covered" >if(pd&lt;1e5){<span class="cstat-no" title="statement not covered" >plot(pfreq,pd)}<span class="cstat-no" title="statement not covered" ></span>p</span>lot(freq,d)}</span>else <span class="cstat-no" title="statement not covered" >if(pd&gt;1e5)<span class="cstat-no" title="statement not covered" >plot(freq,d);<span class="cstat-no" title="statement not covered" >p</span></span></span>d=d;<span class="cstat-no" title="statement not covered" >p</span>freq=freq}<span class="fstat-no" title="function not covered" ></span>f</span>unction plot(freq,d){<span class="cstat-no" title="statement not covered" ></span>var x=(Math.log(1+freq)-3)/7*self.width;<span class="cstat-no" title="statement not covered" >v</span>ar y=Math.max(0,self.height-d/1e4*self.scale);<span class="cstat-no" title="statement not covered" >p</span>oints.push(x+","+y)}<span class="cstat-no" title="statement not covered" ></span>points.push(this.width+","+this.height);<span class="cstat-no" title="statement not covered" >t</span>his.polyline.setAttribute("points",points.join(" "))}</span>;<span class="fstat-no" title="function not covered" >f</span>unction createElement(name){<span class="cstat-no" title="statement not covered" ></span>return document.createElementNS("http://www.w3.org/2000/svg",name)}</span>},{domify:14,events:18,fs:6,inherits:28,ndarray:43,"ndarray-complex":32,"ndarray-fft":33,slideways:52}],20:[function(require,module,exports){var http=module.exports;var EventEmitter=require("events").EventEmitter;var Request=require("./lib/request");var url=require("url");http.request=<span class="fstat-no" title="function not covered" >function(params,cb){<span class="cstat-no" title="statement not covered" ></span>if(typeof params==="string"){<span class="cstat-no" title="statement not covered" >params=url.parse(params)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!params)<span class="cstat-no" title="statement not covered" >params={};<span class="cstat-no" title="statement not covered" >i</span></span>f(!params.host&amp;&amp;!params.port){<span class="cstat-no" title="statement not covered" >params.port=parseInt(window.location.port,10)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!params.host&amp;&amp;params.hostname){<span class="cstat-no" title="statement not covered" >params.host=params.hostname}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!params.scheme)<span class="cstat-no" title="statement not covered" >params.scheme=window.location.protocol.split(":")[0];<span class="cstat-no" title="statement not covered" >i</span></span>f(!params.host){<span class="cstat-no" title="statement not covered" >params.host=window.location.hostname||window.location.host}<span class="cstat-no" title="statement not covered" ></span>i</span>f(/:/.test(params.host)){<span class="cstat-no" title="statement not covered" >if(!params.port){<span class="cstat-no" title="statement not covered" >params.port=params.host.split(":")[1]}<span class="cstat-no" title="statement not covered" ></span>p</span>arams.host=params.host.split(":")[0]}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!params.port)<span class="cstat-no" title="statement not covered" >params.port=params.scheme=="https"?443:80;<span class="cstat-no" title="statement not covered" >v</span></span>ar req=new Request(new xhrHttp,params);<span class="cstat-no" title="statement not covered" >i</span>f(cb)<span class="cstat-no" title="statement not covered" >req.on("response",cb);<span class="cstat-no" title="statement not covered" >r</span></span>eturn req}</span>;http.get=<span class="fstat-no" title="function not covered" >function(params,cb){<span class="cstat-no" title="statement not covered" ></span>params.method="GET";<span class="cstat-no" title="statement not covered" >v</span>ar req=http.request(params,cb);<span class="cstat-no" title="statement not covered" >r</span>eq.end();<span class="cstat-no" title="statement not covered" >r</span>eturn req}</span>;http.Agent=<span class="fstat-no" title="function not covered" >function(){</span>};http.Agent.defaultMaxSockets=4;var xhrHttp=function(){<span class="missing-if-branch" title="else path not taken" >E</span>if(typeof window==="undefined"){throw new Error("no window object present")}else <span class="cstat-no" title="statement not covered" >if(window.XMLHttpRequest){<span class="cstat-no" title="statement not covered" >return window.XMLHttpRequest}</span>else <span class="cstat-no" title="statement not covered" >if(window.ActiveXObject){<span class="cstat-no" title="statement not covered" >var axs=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"];<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;axs.length;i++){<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >var ax=new window.ActiveXObject(axs[i]);<span class="cstat-no" title="statement not covered" >r</span>eturn <span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(ax){<span class="cstat-no" title="statement not covered" >var ax_=ax;<span class="cstat-no" title="statement not covered" >a</span>x=null;<span class="cstat-no" title="statement not covered" >r</span>eturn ax_}</span>else{<span class="cstat-no" title="statement not covered" >return new window.ActiveXObject(axs[i])}</span>}</span>}</span>catch(e){}}<span class="cstat-no" title="statement not covered" ></span>t</span>hrow new Error("ajax not supported in this browser")}</span>else{<span class="cstat-no" title="statement not covered" >throw new Error("ajax not supported in this browser")}</span>}</span></span>();<span class="cstat-no" title="statement not covered" >http.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}}</span>,{"./lib/request":21,events:18,url:67}],21:[function(require,module,exports){var Stream=require("stream");var Response=require("./response");var Base64=require("Base64");var inherits=require("inherits");var Request=module.exports=<span class="fstat-no" title="function not covered" >function(xhr,params){<span class="cstat-no" title="statement not covered" ></span>var self=this;<span class="cstat-no" title="statement not covered" >s</span>elf.writable=true;<span class="cstat-no" title="statement not covered" >s</span>elf.xhr=xhr;<span class="cstat-no" title="statement not covered" >s</span>elf.body=[];<span class="cstat-no" title="statement not covered" >s</span>elf.uri=(params.scheme||"http")+"://"+params.host+(params.port?":"+params.port:"")+(params.path||"/");<span class="cstat-no" title="statement not covered" >i</span>f(typeof params.withCredentials==="undefined"){<span class="cstat-no" title="statement not covered" >params.withCredentials=true}<span class="cstat-no" title="statement not covered" ></span>t</span>ry{<span class="cstat-no" title="statement not covered" >xhr.withCredentials=params.withCredentials}</span>catch(e){}<span class="cstat-no" title="statement not covered" >x</span>hr.open(params.method||"GET",self.uri,true);<span class="cstat-no" title="statement not covered" >s</span>elf._headers={};<span class="cstat-no" title="statement not covered" >i</span>f(params.headers){<span class="cstat-no" title="statement not covered" >var keys=objectKeys(params.headers);<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;keys.length;i++){<span class="cstat-no" title="statement not covered" >var key=keys[i];<span class="cstat-no" title="statement not covered" >i</span>f(!self.isSafeRequestHeader(key))<span class="cstat-no" title="statement not covered" >continue;<span class="cstat-no" title="statement not covered" >v</span></span>ar value=params.headers[key];<span class="cstat-no" title="statement not covered" >s</span>elf.setHeader(key,value)}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(params.auth){<span class="cstat-no" title="statement not covered" >this.setHeader("Authorization","Basic "+Base64.btoa(params.auth))}<span class="cstat-no" title="statement not covered" ></span>v</span>ar res=new Response;<span class="cstat-no" title="statement not covered" >r</span>es.on("close",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>self.emit("close")}</span>);<span class="cstat-no" title="statement not covered" >r</span>es.on("ready",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>self.emit("response",res)}</span>);<span class="cstat-no" title="statement not covered" >x</span>hr.onreadystatechange=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(xhr.__aborted)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >r</span></span>es.handle(xhr)}</span>}</span>;inherits(Request,Stream);Request.prototype.setHeader=<span class="fstat-no" title="function not covered" >function(key,value){<span class="cstat-no" title="statement not covered" ></span>this._headers[key.toLowerCase()]=value}</span>;Request.prototype.getHeader=<span class="fstat-no" title="function not covered" >function(key){<span class="cstat-no" title="statement not covered" ></span>return this._headers[key.toLowerCase()]}</span>;Request.prototype.removeHeader=<span class="fstat-no" title="function not covered" >function(key){<span class="cstat-no" title="statement not covered" ></span>delete this._headers[key.toLowerCase()]}</span>;Request.prototype.write=<span class="fstat-no" title="function not covered" >function(s){<span class="cstat-no" title="statement not covered" ></span>this.body.push(s)}</span>;Request.prototype.destroy=<span class="fstat-no" title="function not covered" >function(s){<span class="cstat-no" title="statement not covered" ></span>this.xhr.__aborted=true;<span class="cstat-no" title="statement not covered" >t</span>his.xhr.abort();<span class="cstat-no" title="statement not covered" >t</span>his.emit("close")}</span>;Request.prototype.end=<span class="fstat-no" title="function not covered" >function(s){<span class="cstat-no" title="statement not covered" ></span>if(s!==undefined)<span class="cstat-no" title="statement not covered" >this.body.push(s);<span class="cstat-no" title="statement not covered" >v</span></span>ar keys=objectKeys(this._headers);</span>
<span class="cstat-no" title="statement not covered" >for(var i=0;i&lt;keys.length;i++){<span class="cstat-no" title="statement not covered" >var key=keys[i];<span class="cstat-no" title="statement not covered" >v</span>ar value=this._headers[key];<span class="cstat-no" title="statement not covered" >i</span>f(isArray(value)){<span class="cstat-no" title="statement not covered" >for(var j=0;j&lt;value.length;j++){<span class="cstat-no" title="statement not covered" >this.xhr.setRequestHeader(key,value[j])}</span>}</span>else <span class="cstat-no" title="statement not covered" >this.xhr.setRequestHeader(key,value)}<span class="cstat-no" title="statement not covered" ></span></span>i</span>f(this.body.length===0){<span class="cstat-no" title="statement not covered" >this.xhr.send("")}</span>else <span class="cstat-no" title="statement not covered" >if(typeof this.body[0]==="string"){<span class="cstat-no" title="statement not covered" >this.xhr.send(this.body.join(""))}</span>else <span class="cstat-no" title="statement not covered" >if(isArray(this.body[0])){<span class="cstat-no" title="statement not covered" >var body=[];<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;this.body.length;i++){<span class="cstat-no" title="statement not covered" >body.push.apply(body,this.body[i])}<span class="cstat-no" title="statement not covered" ></span>t</span>his.xhr.send(body)}</span>else <span class="cstat-no" title="statement not covered" >if(/Array/.test(Object.prototype.toString.call(this.body[0]))){<span class="cstat-no" title="statement not covered" >var len=0;<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;this.body.length;i++){<span class="cstat-no" title="statement not covered" >len+=this.body[i].length}<span class="cstat-no" title="statement not covered" ></span>v</span>ar body=new this.body[0].constructor(len);<span class="cstat-no" title="statement not covered" >v</span>ar k=0;<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;this.body.length;i++){<span class="cstat-no" title="statement not covered" >var b=this.body[i];<span class="cstat-no" title="statement not covered" >f</span>or(var j=0;j&lt;b.length;j++){<span class="cstat-no" title="statement not covered" >body[k++]=b[j]}</span>}<span class="cstat-no" title="statement not covered" ></span>t</span>his.xhr.send(body)}</span>else{<span class="cstat-no" title="statement not covered" >var body="";<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;this.body.length;i++){<span class="cstat-no" title="statement not covered" >body+=this.body[i].toString()}<span class="cstat-no" title="statement not covered" ></span>t</span>his.xhr.send(body)}</span>}</span></span></span></span>;Request.unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];Request.prototype.isSafeRequestHeader=<span class="fstat-no" title="function not covered" >function(headerName){<span class="cstat-no" title="statement not covered" ></span>if(!headerName)<span class="cstat-no" title="statement not covered" >return false;<span class="cstat-no" title="statement not covered" >r</span></span>eturn indexOf(Request.unsafeHeaders,headerName.toLowerCase())===-1}</span>;var objectKeys=Object.keys||<span class="fstat-no" title="function not covered" ><span class="branch-1 cbranch-no" title="branch not covered" >function(obj){<span class="cstat-no" title="statement not covered" ></span>var keys=[];<span class="cstat-no" title="statement not covered" >f</span>or(var key in obj)<span class="cstat-no" title="statement not covered" >keys.push(key);<span class="cstat-no" title="statement not covered" >r</span></span>eturn keys}</span>;</span>var isArray=Array.isArray||<span class="fstat-no" title="function not covered" ><span class="branch-1 cbranch-no" title="branch not covered" >function(xs){<span class="cstat-no" title="statement not covered" ></span>return Object.prototype.toString.call(xs)==="[object Array]"}</span>;</span>var indexOf=<span class="fstat-no" title="function not covered" >function(xs,x){<span class="cstat-no" title="statement not covered" ></span>if(xs.indexOf)<span class="cstat-no" title="statement not covered" >return xs.indexOf(x);<span class="cstat-no" title="statement not covered" >f</span></span>or(var i=0;i&lt;xs.length;i++){<span class="cstat-no" title="statement not covered" >if(xs[i]===x)<span class="cstat-no" title="statement not covered" >return i}<span class="cstat-no" title="statement not covered" ></span></span>r</span>eturn-1}</span>},{"./response":22,Base64:3,inherits:28,stream:58}],22:[function(require,module,exports){var Stream=require("stream");var util=require("util");var Response=module.exports=<span class="fstat-no" title="function not covered" >function(res){<span class="cstat-no" title="statement not covered" ></span>this.offset=0;<span class="cstat-no" title="statement not covered" >t</span>his.readable=true}</span>;util.inherits(Response,Stream);var capable={streaming:true,status2:true};<span class="fstat-no" title="function not covered" >function parseHeaders(res){<span class="cstat-no" title="statement not covered" ></span>var lines=res.getAllResponseHeaders().split(/\r?\n/);<span class="cstat-no" title="statement not covered" >v</span>ar headers={};<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;lines.length;i++){<span class="cstat-no" title="statement not covered" >var line=lines[i];<span class="cstat-no" title="statement not covered" >i</span>f(line==="")<span class="cstat-no" title="statement not covered" >continue;<span class="cstat-no" title="statement not covered" >v</span></span>ar m=line.match(/^([^:]+):\s*(.*)/);<span class="cstat-no" title="statement not covered" >i</span>f(m){<span class="cstat-no" title="statement not covered" >var key=m[1].toLowerCase(),value=m[2];<span class="cstat-no" title="statement not covered" >i</span>f(headers[key]!==undefined){<span class="cstat-no" title="statement not covered" >if(isArray(headers[key])){<span class="cstat-no" title="statement not covered" >headers[key].push(value)}</span>else{<span class="cstat-no" title="statement not covered" >headers[key]=[headers[key],value]}</span>}</span>else{<span class="cstat-no" title="statement not covered" >headers[key]=value}</span>}</span>else{<span class="cstat-no" title="statement not covered" >headers[line]=true}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn headers}</span>Response.prototype.getResponse=<span class="fstat-no" title="function not covered" >function(xhr){<span class="cstat-no" title="statement not covered" ></span>var respType=String(xhr.responseType).toLowerCase();<span class="cstat-no" title="statement not covered" >i</span>f(respType==="blob")<span class="cstat-no" title="statement not covered" >return xhr.responseBlob||xhr.response;<span class="cstat-no" title="statement not covered" >i</span></span>f(respType==="arraybuffer")<span class="cstat-no" title="statement not covered" >return xhr.response;<span class="cstat-no" title="statement not covered" >r</span></span>eturn xhr.responseText}</span>;Response.prototype.getHeader=<span class="fstat-no" title="function not covered" >function(key){<span class="cstat-no" title="statement not covered" ></span>return this.headers[key.toLowerCase()]}</span>;Response.prototype.handle=<span class="fstat-no" title="function not covered" >function(res){<span class="cstat-no" title="statement not covered" ></span>if(res.readyState===2&amp;&amp;capable.status2){<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >this.statusCode=res.status;<span class="cstat-no" title="statement not covered" >t</span>his.headers=parseHeaders(res)}</span>catch(err){<span class="cstat-no" title="statement not covered" >capable.status2=false}<span class="cstat-no" title="statement not covered" ></span>i</span>f(capable.status2){<span class="cstat-no" title="statement not covered" >this.emit("ready")}</span>}</span>else <span class="cstat-no" title="statement not covered" >if(capable.streaming&amp;&amp;res.readyState===3){<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >if(!this.statusCode){<span class="cstat-no" title="statement not covered" >this.statusCode=res.status;<span class="cstat-no" title="statement not covered" >t</span>his.headers=parseHeaders(res);<span class="cstat-no" title="statement not covered" >t</span>his.emit("ready")}</span>}</span>catch(err){}<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >this._emitData(res)}</span>catch(err){<span class="cstat-no" title="statement not covered" >capable.streaming=false}</span>}</span>else <span class="cstat-no" title="statement not covered" >if(res.readyState===4){<span class="cstat-no" title="statement not covered" >if(!this.statusCode){<span class="cstat-no" title="statement not covered" >this.statusCode=res.status;<span class="cstat-no" title="statement not covered" >t</span>his.emit("ready")}<span class="cstat-no" title="statement not covered" ></span>t</span>his._emitData(res);<span class="cstat-no" title="statement not covered" >i</span>f(res.error){<span class="cstat-no" title="statement not covered" >this.emit("error",this.getResponse(res))}</span>else <span class="cstat-no" title="statement not covered" >this.emit("end");<span class="cstat-no" title="statement not covered" >t</span></span>his.emit("close")}</span>}</span></span></span>;Response.prototype._emitData=<span class="fstat-no" title="function not covered" >function(res){<span class="cstat-no" title="statement not covered" ></span>var respBody=this.getResponse(res);<span class="cstat-no" title="statement not covered" >i</span>f(respBody.toString().match(/ArrayBuffer/)){<span class="cstat-no" title="statement not covered" >this.emit("data",new Uint8Array(respBody,this.offset));<span class="cstat-no" title="statement not covered" >t</span>his.offset=respBody.byteLength;<span class="cstat-no" title="statement not covered" >r</span>eturn}<span class="cstat-no" title="statement not covered" ></span>i</span>f(respBody.length&gt;this.offset){<span class="cstat-no" title="statement not covered" >this.emit("data",respBody.slice(this.offset));<span class="cstat-no" title="statement not covered" >t</span>his.offset=respBody.length}</span>}</span>;var isArray=Array.isArray||<span class="fstat-no" title="function not covered" ><span class="branch-1 cbranch-no" title="branch not covered" >function(xs){<span class="cstat-no" title="statement not covered" ></span>return Object.prototype.toString.call(xs)==="[object Array]"}</span>}</span>,{stream:58,util:69}],23:[<span class="fstat-no" title="function not covered" >function(require,module,exports){<span class="cstat-no" title="statement not covered" ></span>var http=require("http");<span class="cstat-no" title="statement not covered" >v</span>ar https=module.exports;<span class="cstat-no" title="statement not covered" >f</span>or(var key in http){<span class="cstat-no" title="statement not covered" >if(http.hasOwnProperty(key))<span class="cstat-no" title="statement not covered" >https[key]=http[key]}<span class="cstat-no" title="statement not covered" ></span></span>h</span>ttps.request=<span class="fstat-no" title="function not covered" >function(params,cb){<span class="cstat-no" title="statement not covered" ></span>if(!params)<span class="cstat-no" title="statement not covered" >params={};<span class="cstat-no" title="statement not covered" >p</span></span>arams.scheme="https";<span class="cstat-no" title="statement not covered" >p</span>arams.protocol="https:";<span class="cstat-no" title="statement not covered" >r</span>eturn http.request.call(this,params,cb)}</span>}</span>,{http:20}],24:[<span class="fstat-no" title="function not covered" >function(require,module,exports){<span class="cstat-no" title="statement not covered" ></span>module.exports=<span class="fstat-no" title="function not covered" >function(src,updates){<span class="cstat-no" title="statement not covered" ></span>if(!updates)<span class="cstat-no" title="statement not covered" >updates={};<span class="cstat-no" title="statement not covered" >v</span></span>ar div=src;<span class="cstat-no" title="statement not covered" >i</span>f(typeof div!=="object"){<span class="cstat-no" title="statement not covered" >div=document.createElement("div");<span class="cstat-no" title="statement not covered" >d</span>iv.innerHTML=src.replace(/^\s+|\s+$/g,"");<span class="cstat-no" title="statement not covered" >i</span>f(div.childNodes.length===1&amp;&amp;div.childNodes[0]&amp;&amp;div.childNodes[0].constructor&amp;&amp;div.childNodes[0].constructor.name!=="Text"){<span class="cstat-no" title="statement not covered" >div=div.childNodes[0]}</span>}<span class="cstat-no" title="statement not covered" ></span>f</span>orEach(objectKeys(updates),<span class="fstat-no" title="function not covered" >function(selector){<span class="cstat-no" title="statement not covered" ></span>var value=updates[selector];<span class="cstat-no" title="statement not covered" >v</span>ar nodes=div.querySelectorAll(selector);<span class="cstat-no" title="statement not covered" >i</span>f(nodes.length===0)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >f</span></span>or(var i=0;i&lt;nodes.length;i++){<span class="cstat-no" title="statement not covered" >bind(nodes[i],value)}</span>}</span>);<span class="cstat-no" title="statement not covered" >r</span>eturn div}</span>;<span class="fstat-no" title="function not covered" >f</span>unction bind(node,value){<span class="cstat-no" title="statement not covered" ></span>if(isElement(value)){<span class="cstat-no" title="statement not covered" >node.innerHTML="";<span class="cstat-no" title="statement not covered" >n</span>ode.appendChild(value)}</span>else <span class="cstat-no" title="statement not covered" >if(value&amp;&amp;typeof value==="object"){<span class="cstat-no" title="statement not covered" >forEach(objectKeys(value),<span class="fstat-no" title="function not covered" >function(key){<span class="cstat-no" title="statement not covered" ></span>if(key==="_text"){<span class="cstat-no" title="statement not covered" >setText(node,value[key])}</span>else <span class="cstat-no" title="statement not covered" >if(key==="_html"&amp;&amp;isElement(value[key])){<span class="cstat-no" title="statement not covered" >node.innerHTML="";<span class="cstat-no" title="statement not covered" >n</span>ode.appendChild(value[key])}</span>else <span class="cstat-no" title="statement not covered" >if(key==="_html"){<span class="cstat-no" title="statement not covered" >node.innerHTML=value[key]}</span>else <span class="cstat-no" title="statement not covered" >node.setAttribute(key,value[key])}</span></span></span></span>)}</span>else <span class="cstat-no" title="statement not covered" >setText(node,value)}<span class="fstat-no" title="function not covered" ></span></span></span>function forEach(xs,f){<span class="cstat-no" title="statement not covered" ></span>if(xs.forEach)<span class="cstat-no" title="statement not covered" >return xs.forEach(f);<span class="cstat-no" title="statement not covered" >f</span></span>or(var i=0;i&lt;xs.length;i++)<span class="cstat-no" title="statement not covered" >f(xs[i],i)}<span class="cstat-no" title="statement not covered" ></span></span>var objectKeys=Object.keys||<span class="fstat-no" title="function not covered" >function(obj){<span class="cstat-no" title="statement not covered" ></span>var res=[];<span class="cstat-no" title="statement not covered" >f</span>or(var key in obj)<span class="cstat-no" title="statement not covered" >res.push(key);<span class="cstat-no" title="statement not covered" >r</span></span>eturn res}</span>;<span class="fstat-no" title="function not covered" >f</span>unction isElement(e){<span class="cstat-no" title="statement not covered" ></span>return e&amp;&amp;typeof e==="object"&amp;&amp;e.childNodes&amp;&amp;typeof e.appendChild==="function"}<span class="fstat-no" title="function not covered" ></span>function setText(e,s){<span class="cstat-no" title="statement not covered" ></span>e.innerHTML="";<span class="cstat-no" title="statement not covered" >v</span>ar txt=document.createTextNode(s);<span class="cstat-no" title="statement not covered" >e</span>.appendChild(txt)}</span>},{}],25:[function(require,module,exports){(function(process,Buffer){var url=require("url");var http=require("http");<span class="cstat-no" title="statement not covered" >var https=require("https");<span class="cstat-no" title="statement not covered" >v</span>ar through=require("through");<span class="cstat-no" title="statement not covered" >v</span>ar duplexer=require("duplexer");<span class="cstat-no" title="statement not covered" >m</span>odule.exports=hyperquest;<span class="fstat-no" title="function not covered" >f</span>unction bind(obj,fn){<span class="cstat-no" title="statement not covered" ></span>var args=Array.prototype.slice.call(arguments,2);<span class="cstat-no" title="statement not covered" >r</span>eturn <span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var argv=args.concat(Array.prototype.slice.call(arguments));<span class="cstat-no" title="statement not covered" >r</span>eturn fn.apply(obj,argv)}</span>}<span class="fstat-no" title="function not covered" ></span>function hyperquest(uri,opts,cb,extra){<span class="cstat-no" title="statement not covered" ></span>if(typeof uri==="object"){<span class="cstat-no" title="statement not covered" >cb=opts;<span class="cstat-no" title="statement not covered" >o</span>pts=uri;<span class="cstat-no" title="statement not covered" >u</span>ri=undefined}<span class="cstat-no" title="statement not covered" ></span>i</span>f(typeof opts==="function"){<span class="cstat-no" title="statement not covered" >cb=opts;<span class="cstat-no" title="statement not covered" >o</span>pts=undefined}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!opts)<span class="cstat-no" title="statement not covered" >opts={};<span class="cstat-no" title="statement not covered" >i</span></span>f(uri!==undefined)<span class="cstat-no" title="statement not covered" >opts.uri=uri;<span class="cstat-no" title="statement not covered" >i</span></span>f(extra)<span class="cstat-no" title="statement not covered" >opts.method=extra.method;<span class="cstat-no" title="statement not covered" >v</span></span>ar req=new Req(opts);<span class="cstat-no" title="statement not covered" >v</span>ar ws=req.duplex&amp;&amp;through();<span class="cstat-no" title="statement not covered" >i</span>f(ws)<span class="cstat-no" title="statement not covered" >ws.pause();<span class="cstat-no" title="statement not covered" >v</span></span>ar rs=through();<span class="cstat-no" title="statement not covered" >v</span>ar dup=req.duplex?duplexer(ws,rs):rs;<span class="cstat-no" title="statement not covered" >i</span>f(!req.duplex){<span class="cstat-no" title="statement not covered" >rs.writable=false}<span class="cstat-no" title="statement not covered" ></span>d</span>up.request=req;<span class="cstat-no" title="statement not covered" >d</span>up.setHeader=bind(req,req.setHeader);<span class="cstat-no" title="statement not covered" >d</span>up.setLocation=bind(req,req.setLocation);<span class="cstat-no" title="statement not covered" >v</span>ar closed=false;<span class="cstat-no" title="statement not covered" >d</span>up.on("close",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>closed=true}</span>);<span class="cstat-no" title="statement not covered" >p</span>rocess.nextTick(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(closed)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >d</span></span>up.on("close",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>r.destroy()}</span>);<span class="cstat-no" title="statement not covered" >v</span>ar r=req._send();<span class="cstat-no" title="statement not covered" >r</span>.on("error",bind(dup,dup.emit,"error"));<span class="cstat-no" title="statement not covered" >r</span>.on("response",<span class="fstat-no" title="function not covered" >function(res){<span class="cstat-no" title="statement not covered" ></span>dup.response=res;<span class="cstat-no" title="statement not covered" >d</span>up.emit("response",res);<span class="cstat-no" title="statement not covered" >i</span>f(req.duplex)<span class="cstat-no" title="statement not covered" >res.pipe(rs);e</span>lse{<span class="cstat-no" title="statement not covered" >res.on("data",<span class="fstat-no" title="function not covered" >function(buf){<span class="cstat-no" title="statement not covered" ></span>rs.queue(buf)}</span>);<span class="cstat-no" title="statement not covered" >r</span>es.on("end",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>rs.queue(null)}</span>)}</span>}</span>);<span class="cstat-no" title="statement not covered" >i</span>f(req.duplex){<span class="cstat-no" title="statement not covered" >ws.pipe(r);<span class="cstat-no" title="statement not covered" >w</span>s.resume()}</span>else <span class="cstat-no" title="statement not covered" >r.end()}</span></span>);<span class="cstat-no" title="statement not covered" >i</span>f(cb){<span class="cstat-no" title="statement not covered" >dup.on("error",cb);<span class="cstat-no" title="statement not covered" >d</span>up.on("response",bind(dup,cb,null))}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn dup}<span class="cstat-no" title="statement not covered" ></span>hyperquest.get=hyperquest;<span class="cstat-no" title="statement not covered" >h</span>yperquest.post=<span class="fstat-no" title="function not covered" >function(uri,opts,cb){<span class="cstat-no" title="statement not covered" ></span>return hyperquest(uri,opts,cb,{method:"POST"})}</span>;<span class="cstat-no" title="statement not covered" >h</span>yperquest.put=<span class="fstat-no" title="function not covered" >function(uri,opts,cb){<span class="cstat-no" title="statement not covered" ></span>return hyperquest(uri,opts,cb,{method:"PUT"})}</span>;<span class="cstat-no" title="statement not covered" >h</span>yperquest["delete"]=<span class="fstat-no" title="function not covered" >function(uri,opts,cb){<span class="cstat-no" title="statement not covered" ></span>return hyperquest(uri,opts,cb,{method:"DELETE"})}</span>;<span class="fstat-no" title="function not covered" >f</span>unction Req(opts){<span class="cstat-no" title="statement not covered" ></span>this.headers=opts.headers||{};<span class="cstat-no" title="statement not covered" >v</span>ar method=(opts.method||"GET").toUpperCase();<span class="cstat-no" title="statement not covered" >t</span>his.method=method;<span class="cstat-no" title="statement not covered" >t</span>his.duplex=!(method==="GET"||method==="DELETE"||method==="HEAD");<span class="cstat-no" title="statement not covered" >t</span>his.auth=opts.auth;<span class="cstat-no" title="statement not covered" >t</span>his.options=opts;<span class="cstat-no" title="statement not covered" >i</span>f(opts.uri)<span class="cstat-no" title="statement not covered" >this.setLocation(opts.uri)}<span class="cstat-no" title="statement not covered" ></span></span>Req.prototype._send=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this._sent=true;<span class="cstat-no" title="statement not covered" >v</span>ar headers=this.headers||{};<span class="cstat-no" title="statement not covered" >v</span>ar u=url.parse(this.uri);<span class="cstat-no" title="statement not covered" >v</span>ar au=u.auth||this.auth;<span class="cstat-no" title="statement not covered" >i</span>f(au){<span class="cstat-no" title="statement not covered" >headers.authorization="Basic "+Buffer(au).toString("base64")}<span class="cstat-no" title="statement not covered" ></span>v</span>ar protocol=u.protocol||"";<span class="cstat-no" title="statement not covered" >v</span>ar iface=protocol==="https:"?https:http;<span class="cstat-no" title="statement not covered" >v</span>ar opts={scheme:protocol.replace(/:$/,""),method:this.method,host:u.hostname,port:Number(u.port)||(protocol==="https:"?443:80),path:u.path,agent:false,headers:headers,withCredentials:this.options.withCredentials};<span class="cstat-no" title="statement not covered" >i</span>f(protocol==="https:"){<span class="cstat-no" title="statement not covered" >opts.pfx=this.options.pfx;<span class="cstat-no" title="statement not covered" >o</span>pts.key=this.options.key;<span class="cstat-no" title="statement not covered" >o</span>pts.cert=this.options.cert;<span class="cstat-no" title="statement not covered" >o</span>pts.ca=this.options.ca;<span class="cstat-no" title="statement not covered" >o</span>pts.ciphers=this.options.ciphers;<span class="cstat-no" title="statement not covered" >o</span>pts.rejectUnauthorized=this.options.rejectUnauthorized;<span class="cstat-no" title="statement not covered" >o</span>pts.secureProtocol=this.options.secureProtocol}<span class="cstat-no" title="statement not covered" ></span>v</span>ar req=iface.request(opts);<span class="cstat-no" title="statement not covered" >i</span>f(req.setTimeout)<span class="cstat-no" title="statement not covered" >req.setTimeout(Math.pow(2,32)*1e3);<span class="cstat-no" title="statement not covered" >r</span></span>eturn req}</span>;<span class="cstat-no" title="statement not covered" >R</span>eq.prototype.setHeader=<span class="fstat-no" title="function not covered" >function(key,value){<span class="cstat-no" title="statement not covered" ></span>if(this._sent)<span class="cstat-no" title="statement not covered" >throw new Error("request already sent");<span class="cstat-no" title="statement not covered" >t</span></span>his.headers[key]=value;<span class="cstat-no" title="statement not covered" >r</span>eturn this}</span>;<span class="cstat-no" title="statement not covered" >R</span>eq.prototype.setLocation=<span class="fstat-no" title="function not covered" >function(uri){<span class="cstat-no" title="statement not covered" ></span>this.uri=uri;<span class="cstat-no" title="statement not covered" >r</span>eturn this}</span>}</span>).call(this,require("g5I+bs"),require("buffer").Buffer)},{buffer:8,duplexer:16,"g5I+bs":45,http:20,https:23,through:26,url:67}],26:[<span class="fstat-no" title="function not covered" >function(require,module,exports){<span class="cstat-no" title="statement not covered" ></span>(<span class="fstat-no" title="function not covered" >function(process){<span class="cstat-no" title="statement not covered" ></span>var Stream=require("stream");<span class="cstat-no" title="statement not covered" >e</span>xports=module.exports=through;<span class="cstat-no" title="statement not covered" >t</span>hrough.through=through;<span class="fstat-no" title="function not covered" >f</span>unction through(write,end){<span class="cstat-no" title="statement not covered" ></span>write=write||<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>this.queue(data)}</span>;<span class="cstat-no" title="statement not covered" >e</span>nd=end||<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this.queue(null)}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar ended=false,destroyed=false,buffer=[];<span class="cstat-no" title="statement not covered" >v</span>ar stream=new Stream;<span class="cstat-no" title="statement not covered" >s</span>tream.readable=stream.writable=true;<span class="cstat-no" title="statement not covered" >s</span>tream.paused=false;<span class="cstat-no" title="statement not covered" >s</span>tream.write=<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>write.call(this,data);<span class="cstat-no" title="statement not covered" >r</span>eturn!stream.paused}</span>;<span class="fstat-no" title="function not covered" >f</span>unction drain(){<span class="cstat-no" title="statement not covered" ></span>while(buffer.length&amp;&amp;!stream.paused){<span class="cstat-no" title="statement not covered" >var data=buffer.shift();<span class="cstat-no" title="statement not covered" >i</span>f(null===data)<span class="cstat-no" title="statement not covered" >return stream.emit("end");e</span>lse <span class="cstat-no" title="statement not covered" >stream.emit("data",data)}</span></span>}<span class="cstat-no" title="statement not covered" ></span>stream.queue=stream.push=<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>buffer.push(data);<span class="cstat-no" title="statement not covered" >d</span>rain();<span class="cstat-no" title="statement not covered" >r</span>eturn stream}</span>;<span class="cstat-no" title="statement not covered" >s</span>tream.on("end",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>stream.readable=false;<span class="cstat-no" title="statement not covered" >i</span>f(!stream.writable)<span class="cstat-no" title="statement not covered" >process.nextTick(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>stream.destroy()}</span>)}</span></span>);<span class="fstat-no" title="function not covered" >f</span>unction _end(){<span class="cstat-no" title="statement not covered" ></span>stream.writable=false;<span class="cstat-no" title="statement not covered" >e</span>nd.call(stream);<span class="cstat-no" title="statement not covered" >i</span>f(!stream.readable)<span class="cstat-no" title="statement not covered" >stream.destroy()}<span class="cstat-no" title="statement not covered" ></span></span>stream.end=<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>if(ended)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >e</span></span>nded=true;<span class="cstat-no" title="statement not covered" >i</span>f(arguments.length)<span class="cstat-no" title="statement not covered" >stream.write(data);<span class="cstat-no" title="statement not covered" >_</span></span>end();<span class="cstat-no" title="statement not covered" >r</span>eturn stream}</span>;<span class="cstat-no" title="statement not covered" >s</span>tream.destroy=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(destroyed)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >d</span></span>estroyed=true;<span class="cstat-no" title="statement not covered" >e</span>nded=true;<span class="cstat-no" title="statement not covered" >b</span>uffer.length=0;<span class="cstat-no" title="statement not covered" >s</span>tream.writable=stream.readable=false;<span class="cstat-no" title="statement not covered" >s</span>tream.emit("close");<span class="cstat-no" title="statement not covered" >r</span>eturn stream}</span>;<span class="cstat-no" title="statement not covered" >s</span>tream.pause=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(stream.paused)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >s</span></span>tream.paused=true;<span class="cstat-no" title="statement not covered" >s</span>tream.emit("pause");<span class="cstat-no" title="statement not covered" >r</span>eturn stream}</span>;<span class="cstat-no" title="statement not covered" >s</span>tream.resume=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(stream.paused){<span class="cstat-no" title="statement not covered" >stream.paused=false}<span class="cstat-no" title="statement not covered" ></span>d</span>rain();<span class="cstat-no" title="statement not covered" >i</span>f(!stream.paused)<span class="cstat-no" title="statement not covered" >stream.emit("drain");<span class="cstat-no" title="statement not covered" >r</span></span>eturn stream}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn stream}</span>}).call(this,require("g5I+bs"))}</span>,{"g5I+bs":45,stream:58}],27:[function(require,module,exports){exports.read=<span class="fstat-no" title="function not covered" >function(buffer,offset,isLE,mLen,nBytes){<span class="cstat-no" title="statement not covered" ></span>var e,m;<span class="cstat-no" title="statement not covered" >v</span>ar eLen=nBytes*8-mLen-1;<span class="cstat-no" title="statement not covered" >v</span>ar eMax=(1&lt;&lt;eLen)-1;<span class="cstat-no" title="statement not covered" >v</span>ar eBias=eMax&gt;&gt;1;<span class="cstat-no" title="statement not covered" >v</span>ar nBits=-7;<span class="cstat-no" title="statement not covered" >v</span>ar i=isLE?nBytes-1:0;<span class="cstat-no" title="statement not covered" >v</span>ar d=isLE?-1:1;<span class="cstat-no" title="statement not covered" >v</span>ar s=buffer[offset+i];<span class="cstat-no" title="statement not covered" >i</span>+=d;<span class="cstat-no" title="statement not covered" >e</span>=s&amp;(1&lt;&lt;-nBits)-1;<span class="cstat-no" title="statement not covered" >s</span>&gt;&gt;=-nBits;<span class="cstat-no" title="statement not covered" >n</span>Bits+=eLen;<span class="cstat-no" title="statement not covered" >f</span>or(;nBits&gt;0;e=e*256+buffer[offset+i],i+=d,nBits-=8){}<span class="cstat-no" title="statement not covered" >m</span>=e&amp;(1&lt;&lt;-nBits)-1;<span class="cstat-no" title="statement not covered" >e</span>&gt;&gt;=-nBits;<span class="cstat-no" title="statement not covered" >n</span>Bits+=mLen;<span class="cstat-no" title="statement not covered" >f</span>or(;nBits&gt;0;m=m*256+buffer[offset+i],i+=d,nBits-=8){}<span class="cstat-no" title="statement not covered" >i</span>f(e===0){<span class="cstat-no" title="statement not covered" >e=1-eBias}</span>else <span class="cstat-no" title="statement not covered" >if(e===eMax){<span class="cstat-no" title="statement not covered" >return m?NaN:(s?-1:1)*Infinity}</span>else{<span class="cstat-no" title="statement not covered" >m=m+Math.pow(2,mLen);<span class="cstat-no" title="statement not covered" >e</span>=e-eBias}<span class="cstat-no" title="statement not covered" ></span>r</span></span>eturn(s?-1:1)*m*Math.pow(2,e-mLen)}</span>;exports.write=<span class="fstat-no" title="function not covered" >function(buffer,value,offset,isLE,mLen,nBytes){<span class="cstat-no" title="statement not covered" ></span>var e,m,c;<span class="cstat-no" title="statement not covered" >v</span>ar eLen=nBytes*8-mLen-1;<span class="cstat-no" title="statement not covered" >v</span>ar eMax=(1&lt;&lt;eLen)-1;<span class="cstat-no" title="statement not covered" >v</span>ar eBias=eMax&gt;&gt;1;<span class="cstat-no" title="statement not covered" >v</span>ar rt=mLen===23?Math.pow(2,-24)-Math.pow(2,-77):0;<span class="cstat-no" title="statement not covered" >v</span>ar i=isLE?0:nBytes-1;<span class="cstat-no" title="statement not covered" >v</span>ar d=isLE?1:-1;<span class="cstat-no" title="statement not covered" >v</span>ar s=value&lt;0||value===0&amp;&amp;1/value&lt;0?1:0;<span class="cstat-no" title="statement not covered" >v</span>alue=Math.abs(value);<span class="cstat-no" title="statement not covered" >i</span>f(isNaN(value)||value===Infinity){<span class="cstat-no" title="statement not covered" >m=isNaN(value)?1:0;<span class="cstat-no" title="statement not covered" >e</span>=eMax}</span>else{<span class="cstat-no" title="statement not covered" >e=Math.floor(Math.log(value)/Math.LN2);<span class="cstat-no" title="statement not covered" >i</span>f(value*(c=Math.pow(2,-e))&lt;1){<span class="cstat-no" title="statement not covered" >e--;<span class="cstat-no" title="statement not covered" >c</span>*=2}<span class="cstat-no" title="statement not covered" ></span>i</span>f(e+eBias&gt;=1){<span class="cstat-no" title="statement not covered" >value+=rt/c}</span>else{<span class="cstat-no" title="statement not covered" >value+=rt*Math.pow(2,1-eBias)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(value*c&gt;=2){<span class="cstat-no" title="statement not covered" >e++;<span class="cstat-no" title="statement not covered" >c</span>/=2}<span class="cstat-no" title="statement not covered" ></span>i</span>f(e+eBias&gt;=eMax){<span class="cstat-no" title="statement not covered" >m=0;<span class="cstat-no" title="statement not covered" >e</span>=eMax}</span>else <span class="cstat-no" title="statement not covered" >if(e+eBias&gt;=1){<span class="cstat-no" title="statement not covered" >m=(value*c-1)*Math.pow(2,mLen);<span class="cstat-no" title="statement not covered" >e</span>=e+eBias}</span>else{<span class="cstat-no" title="statement not covered" >m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen);<span class="cstat-no" title="statement not covered" >e</span>=0}</span>}<span class="cstat-no" title="statement not covered" ></span></span>f</span>or(;mLen&gt;=8;buffer[offset+i]=m&amp;255,i+=d,m/=256,mLen-=8){}<span class="cstat-no" title="statement not covered" >e</span>=e&lt;&lt;mLen|m;<span class="cstat-no" title="statement not covered" >e</span>Len+=mLen;<span class="cstat-no" title="statement not covered" >f</span>or(;eLen&gt;0;buffer[offset+i]=e&amp;255,i+=d,e/=256,eLen-=8){}<span class="cstat-no" title="statement not covered" >b</span>uffer[offset+i-d]|=s*128}</span>},{}],28:[function(require,module,exports){<span class="missing-if-branch" title="else path not taken" >E</span>if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}else{<span class="cstat-no" title="statement not covered" >module.exports=<span class="fstat-no" title="function not covered" >function inherits(ctor,superCtor){<span class="cstat-no" title="statement not covered" ></span>ctor.super_=superCtor;<span class="cstat-no" title="statement not covered" >v</span>ar TempCtor=<span class="fstat-no" title="function not covered" >function(){</span>};<span class="cstat-no" title="statement not covered" >T</span>empCtor.prototype=superCtor.prototype;<span class="cstat-no" title="statement not covered" >c</span>tor.prototype=new TempCtor;<span class="cstat-no" title="statement not covered" >c</span>tor.prototype.constructor=ctor}</span>}</span>},{}],29:[<span class="fstat-no" title="function not covered" >function(require,module,exports){</span>"use strict";<span class="fstat-no" title="function not covered" >function iota(n){<span class="cstat-no" title="statement not covered" ></span>var result=new Array(n);<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;n;++i){<span class="cstat-no" title="statement not covered" >result[i]=i}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn result}<span class="cstat-no" title="statement not covered" ></span>module.exports=iota}</span>,{}],30:[<span class="fstat-no" title="function not covered" >function(require,module,exports){<span class="cstat-no" title="statement not covered" ></span>module.exports=<span class="fstat-no" title="function not covered" >function(obj){<span class="cstat-no" title="statement not covered" ></span>return!!(obj!=null&amp;&amp;(obj._isBuffer||obj.constructor&amp;&amp;typeof obj.constructor.isBuffer==="function"&amp;&amp;obj.constructor.isBuffer(obj)))}</span>}</span>,{}],31:[<span class="fstat-no" title="function not covered" >function(require,module,exports){<span class="cstat-no" title="statement not covered" ></span>var has={}.hasOwnProperty;<span class="cstat-no" title="statement not covered" >e</span>xports=module.exports=<span class="fstat-no" title="function not covered" >function(searchInput){<span class="cstat-no" title="statement not covered" ></span>if(searchInput&amp;&amp;"object"===typeof searchInput){<span class="cstat-no" title="statement not covered" >var hasKeyCode=searchInput.which||searchInput.keyCode||searchInput.charCode;<span class="cstat-no" title="statement not covered" >i</span>f(hasKeyCode)<span class="cstat-no" title="statement not covered" >searchInput=hasKeyCode}<span class="cstat-no" title="statement not covered" ></span></span>i</span>f("number"===typeof searchInput)<span class="cstat-no" title="statement not covered" >return names[searchInput];<span class="cstat-no" title="statement not covered" >v</span></span>ar search=String(searchInput);<span class="cstat-no" title="statement not covered" >v</span>ar foundNamedKey=codes[search.toLowerCase()];<span class="cstat-no" title="statement not covered" >i</span>f(foundNamedKey)<span class="cstat-no" title="statement not covered" >return foundNamedKey;<span class="cstat-no" title="statement not covered" >v</span></span>ar foundNamedKey=aliases[search.toLowerCase()];<span class="cstat-no" title="statement not covered" >i</span>f(foundNamedKey)<span class="cstat-no" title="statement not covered" >return foundNamedKey;<span class="cstat-no" title="statement not covered" >i</span></span>f(search.length===1)<span class="cstat-no" title="statement not covered" >return search.charCodeAt(0);<span class="cstat-no" title="statement not covered" >r</span></span>eturn undefined}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar codes=exports.code=exports.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,windows:91,"right click":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};<span class="cstat-no" title="statement not covered" >v</span>ar aliases=exports.aliases={ctl:17,pause:19,"break":19,caps:20,escape:27,pgup:33,pgdn:33,ins:45,del:46,spc:32};<span class="cstat-no" title="statement not covered" >f</span>or(i=97;i&lt;123;i++)<span class="cstat-no" title="statement not covered" >codes[String.fromCharCode(i)]=i-32;<span class="cstat-no" title="statement not covered" >f</span></span>or(var i=48;i&lt;58;i++)<span class="cstat-no" title="statement not covered" >codes[i-48]=i;<span class="cstat-no" title="statement not covered" >f</span></span>or(i=1;i&lt;13;i++)<span class="cstat-no" title="statement not covered" >codes["f"+i]=i+111;<span class="cstat-no" title="statement not covered" >f</span></span>or(i=0;i&lt;10;i++)<span class="cstat-no" title="statement not covered" >codes["numpad "+i]=i+96;<span class="cstat-no" title="statement not covered" >v</span></span>ar names=exports.names=exports.title={};<span class="cstat-no" title="statement not covered" >f</span>or(i in codes)<span class="cstat-no" title="statement not covered" >names[codes[i]]=i;<span class="cstat-no" title="statement not covered" >f</span></span>or(var alias in aliases){<span class="cstat-no" title="statement not covered" >codes[alias]=aliases[alias]}</span>}</span>,{}],32:[<span class="fstat-no" title="function not covered" >function(require,module,exports){</span>"use strict";<span class="cstat-no" title="statement not covered" >var ops=require("ndarray-ops");<span class="fstat-no" title="function not covered" >f</span>unction add(out_r,out_i,a_r,a_i,b_r,b_i){<span class="cstat-no" title="statement not covered" ></span>ops.add(out_r,a_r,b_r);<span class="cstat-no" title="statement not covered" >o</span>ps.add(out_i,a_i,b_i)}<span class="cstat-no" title="statement not covered" ></span>exports.add=add;<span class="fstat-no" title="function not covered" >f</span>unction addeq(out_r,out_i,a_r,a_i){<span class="cstat-no" title="statement not covered" ></span>ops.addeq(out_r,a_r);<span class="cstat-no" title="statement not covered" >o</span>ps.addeq(out_i,a_i)}<span class="cstat-no" title="statement not covered" ></span>exports.addeq=addeq;<span class="fstat-no" title="function not covered" >f</span>unction adds(out_r,out_i,a_r,a_i,s_r,s_i){<span class="cstat-no" title="statement not covered" ></span>ops.adds(out_r,a_r,s_r);<span class="cstat-no" title="statement not covered" >o</span>ps.adds(out_r,a_i,s_i)}<span class="cstat-no" title="statement not covered" ></span>exports.adds=adds;<span class="fstat-no" title="function not covered" >f</span>unction addseq(out_r,out_i,s_r,s_i){<span class="cstat-no" title="statement not covered" ></span>ops.addseq(out_r,s_r);<span class="cstat-no" title="statement not covered" >o</span>ps.addseq(out_i,s_i)}<span class="cstat-no" title="statement not covered" ></span>exports.addseq=addseq;<span class="fstat-no" title="function not covered" >f</span>unction sub(out_r,out_i,a_r,a_i,b_r,b_i){<span class="cstat-no" title="statement not covered" ></span>ops.sub(out_r,a_r,b_r);<span class="cstat-no" title="statement not covered" >o</span>ps.sub(out_i,a_i,b_i)}<span class="cstat-no" title="statement not covered" ></span>exports.sub=sub;<span class="fstat-no" title="function not covered" >f</span>unction subeq(out_r,out_i,a_r,a_i){<span class="cstat-no" title="statement not covered" ></span>ops.subeq(out_r,a_r);<span class="cstat-no" title="statement not covered" >o</span>ps.subeq(out_i,a_i)}<span class="cstat-no" title="statement not covered" ></span>exports.subeq=subeq;<span class="fstat-no" title="function not covered" >f</span>unction subs(out_r,out_i,a_r,a_i,s_r,s_i){<span class="cstat-no" title="statement not covered" ></span>ops.subs(out_r,a_r,s_r);<span class="cstat-no" title="statement not covered" >o</span>ps.subs(out_i,a_i,s_i)}<span class="cstat-no" title="statement not covered" ></span>exports.subs=subs;<span class="fstat-no" title="function not covered" >f</span>unction subseq(out_r,out_i,s_r,s_i){<span class="cstat-no" title="statement not covered" ></span>ops.subseq(out_r,s_r);<span class="cstat-no" title="statement not covered" >o</span>ps.subseq(out_i,s_i)}<span class="cstat-no" title="statement not covered" ></span>exports.subseq=subseq;<span class="fstat-no" title="function not covered" >f</span>unction neg(out_r,out_i,a_r,a_i){<span class="cstat-no" title="statement not covered" ></span>ops.neg(out_r,a_r);<span class="cstat-no" title="statement not covered" >o</span>ps.neg(out_i,a_i)}<span class="cstat-no" title="statement not covered" ></span>exports.neg=neg;<span class="fstat-no" title="function not covered" >f</span>unction negeq(out_r,out_i){<span class="cstat-no" title="statement not covered" ></span>ops.negeq(out_r);<span class="cstat-no" title="statement not covered" >o</span>ps.negeq(out_i)}<span class="cstat-no" title="statement not covered" ></span>exports.negeq=negeq;<span class="fstat-no" title="function not covered" >f</span>unction conj(out_r,out_i,a_r,a_i){<span class="cstat-no" title="statement not covered" ></span>ops.assign(out_r,a_r);<span class="cstat-no" title="statement not covered" >o</span>ps.neg(out_i,a_i)}<span class="cstat-no" title="statement not covered" ></span>exports.conj=conj;<span class="fstat-no" title="function not covered" >f</span>unction conjeq(out_r,out_i){<span class="cstat-no" title="statement not covered" ></span>ops.negeq(out_i)}<span class="cstat-no" title="statement not covered" ></span>exports.conjeq=conjeq;<span class="cstat-no" title="statement not covered" >e</span>xports.mul=require("cwise/lib/wrapper")({args:["array","array","array","array","array","array"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{var _inline_1_i=_inline_1_arg2_,_inline_1_o=_inline_1_arg3_,_inline_1_t=_inline_1_arg4_,_inline_1_u=_inline_1_arg5_,_inline_1_X=_inline_1_t*(_inline_1_i+_inline_1_o);_inline_1_arg0_=_inline_1_X-_inline_1_o*(_inline_1_t+_inline_1_u),_inline_1_arg1_=_inline_1_X+_inline_1_i*(_inline_1_u-_inline_1_t)}",args:[{name:"_inline_1_arg0_",lvalue:true,rvalue:false,count:1},{name:"_inline_1_arg1_",lvalue:true,rvalue:false,count:1},{name:"_inline_1_arg2_",lvalue:false,rvalue:true,count:1},{name:"_inline_1_arg3_",lvalue:false,rvalue:true,count:1},{name:"_inline_1_arg4_",lvalue:false,rvalue:true,count:1},{name:"_inline_1_arg5_",lvalue:false,rvalue:true,count:1}],thisVars:[],localVars:["_inline_1_X","_inline_1_i","_inline_1_o","_inline_1_t","_inline_1_u"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:false,funcName:"cmul",blockSize:64});<span class="cstat-no" title="statement not covered" >e</span>xports.muleq=require("cwise/lib/wrapper")({args:["array","array","array","array"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{var _inline_4_c=_inline_4_arg2_,_inline_4_f=_inline_4_arg3_,_inline_4_i=_inline_4_arg0_,_inline_4_o=_inline_4_arg1_,_inline_4_t=_inline_4_i*(_inline_4_c+_inline_4_f);_inline_4_arg0_=_inline_4_t-_inline_4_f*(_inline_4_i+_inline_4_o),_inline_4_arg1_=_inline_4_t+_inline_4_c*(_inline_4_o-_inline_4_i)}",args:[{name:"_inline_4_arg0_",lvalue:true,rvalue:true,count:2},{name:"_inline_4_arg1_",lvalue:true,rvalue:true,count:2},{name:"_inline_4_arg2_",lvalue:false,rvalue:true,count:1},{name:"_inline_4_arg3_",lvalue:false,rvalue:true,count:1}],thisVars:[],localVars:["_inline_4_c","_inline_4_f","_inline_4_i","_inline_4_o","_inline_4_t"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:false,funcName:"cmuleq",blockSize:64});<span class="cstat-no" title="statement not covered" >e</span>xports.muls=require("cwise/lib/wrapper")({args:["array","array","array","array","scalar","scalar"],pre:{body:"{this_u=_inline_6_arg4_+_inline_6_arg5_,this_v=_inline_6_arg5_-_inline_6_arg4_}",args:[{name:"_inline_6_arg0_",lvalue:false,rvalue:false,count:0},{name:"_inline_6_arg1_",lvalue:false,rvalue:false,count:0},{name:"_inline_6_arg2_",lvalue:false,rvalue:false,count:0},{name:"_inline_6_arg3_",lvalue:false,rvalue:false,count:0},{name:"_inline_6_arg4_",lvalue:false,rvalue:true,count:2},{name:"_inline_6_arg5_",lvalue:false,rvalue:true,count:2}],thisVars:["this_u","this_v"],localVars:[]},body:{body:"{var _inline_7_n=_inline_7_arg2_,_inline_7_r=_inline_7_arg3_,_inline_7_s=_inline_7_arg4_*(_inline_7_n+_inline_7_r);_inline_7_arg0_=_inline_7_s-_inline_7_r*this_u,_inline_7_arg1_=_inline_7_s+_inline_7_n*this_v}",args:[{name:"_inline_7_arg0_",lvalue:true,rvalue:false,count:1},{name:"_inline_7_arg1_",lvalue:true,rvalue:false,count:1},{name:"_inline_7_arg2_",lvalue:false,rvalue:true,count:1},{name:"_inline_7_arg3_",lvalue:false,rvalue:true,count:1},{name:"_inline_7_arg4_",lvalue:false,rvalue:true,count:1}],thisVars:["this_u","this_v"],localVars:["_inline_7_n","_inline_7_r","_inline_7_s"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:false,funcName:"cmuls",blockSize:64});<span class="cstat-no" title="statement not covered" >e</span>xports.mulseq=require("cwise/lib/wrapper")({args:["array","array","scalar","scalar"],pre:{body:"{this_u=_inline_9_arg2_+_inline_9_arg3_,this_v=_inline_9_arg3_-_inline_9_arg2_}",args:[{name:"_inline_9_arg0_",lvalue:false,rvalue:false,count:0},{name:"_inline_9_arg1_",lvalue:false,rvalue:false,count:0},{name:"_inline_9_arg2_",lvalue:false,rvalue:true,count:2},{name:"_inline_9_arg3_",lvalue:false,rvalue:true,count:2}],thisVars:["this_u","this_v"],localVars:[]},body:{body:"{var _inline_10_a=_inline_10_arg0_,_inline_10_h=_inline_10_arg1_,_inline_10_n=_inline_10_arg2_*(_inline_10_a+_inline_10_h);_inline_10_arg0_=_inline_10_n-_inline_10_h*this_u,_inline_10_arg1_=_inline_10_n+_inline_10_a*this_v}",args:[{name:"_inline_10_arg0_",lvalue:true,rvalue:true,count:2},{name:"_inline_10_arg1_",lvalue:true,rvalue:true,count:2},{name:"_inline_10_arg2_",lvalue:false,rvalue:true,count:1}],thisVars:["this_u","this_v"],localVars:["_inline_10_a","_inline_10_h","_inline_10_n"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:false,funcName:"cmulseq",blockSize:64});<span class="cstat-no" title="statement not covered" >e</span>xports.div=require("cwise/lib/wrapper")({args:["array","array","array","array","array","array"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{var _inline_13_s,_inline_13_v,_inline_13_M=_inline_13_arg2_,_inline_13_c=_inline_13_arg3_,_inline_13_f=_inline_13_arg4_,_inline_13_i=_inline_13_arg5_;Math.abs(_inline_13_f)&gt;=Math.abs(_inline_13_i)?(_inline_13_s=_inline_13_i/_inline_13_f,_inline_13_v=_inline_13_f+_inline_13_i*_inline_13_s,_inline_13_arg0_=(_inline_13_M+_inline_13_c*_inline_13_s)/_inline_13_v,_inline_13_arg1_=(_inline_13_c-_inline_13_M*_inline_13_s)/_inline_13_v):(_inline_13_s=_inline_13_f/_inline_13_i,_inline_13_v=_inline_13_f*_inline_13_s+_inline_13_i,_inline_13_arg0_=(_inline_13_M*_inline_13_s+_inline_13_c)/_inline_13_v,_inline_13_arg1_=(_inline_13_c*_inline_13_s-_inline_13_M)/_inline_13_v)}",args:[{name:"_inline_13_arg0_",lvalue:true,rvalue:false,count:2},{name:"_inline_13_arg1_",lvalue:true,rvalue:false,count:2},{name:"_inline_13_arg2_",lvalue:false,rvalue:true,count:1},{name:"_inline_13_arg3_",lvalue:false,rvalue:true,count:1},{name:"_inline_13_arg4_",lvalue:false,rvalue:true,count:1},{name:"_inline_13_arg5_",lvalue:false,rvalue:true,count:1}],thisVars:[],localVars:["_inline_13_M","_inline_13_c","_inline_13_f","_inline_13_i","_inline_13_s","_inline_13_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:false,funcName:"cdiv",blockSize:64});<span class="cstat-no" title="statement not covered" >e</span>xports.diveq=require("cwise/lib/wrapper")({args:["array","array","array","array"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{var _inline_16_n,_inline_16_r,_inline_16_s=_inline_16_arg0_,_inline_16_v=_inline_16_arg1_,_inline_16_M=_inline_16_arg2_,_inline_16_c=_inline_16_arg3_;Math.abs(_inline_16_M)&gt;=Math.abs(_inline_16_c)?(_inline_16_n=_inline_16_c/_inline_16_M,_inline_16_r=_inline_16_M+_inline_16_c*_inline_16_n,_inline_16_arg0_=(_inline_16_s+_inline_16_v*_inline_16_n)/_inline_16_r,_inline_16_arg1_=(_inline_16_v-_inline_16_s*_inline_16_n)/_inline_16_r):(_inline_16_n=_inline_16_M/_inline_16_c,_inline_16_r=_inline_16_M*_inline_16_n+_inline_16_c,_inline_16_arg0_=(_inline_16_s*_inline_16_n+_inline_16_v)/_inline_16_r,_inline_16_arg1_=(_inline_16_v*_inline_16_n-_inline_16_s)/_inline_16_r)}",args:[{name:"_inline_16_arg0_",lvalue:true,rvalue:true,count:3},{name:"_inline_16_arg1_",lvalue:true,rvalue:true,count:3},{name:"_inline_16_arg2_",lvalue:false,rvalue:true,count:1},{name:"_inline_16_arg3_",lvalue:false,rvalue:true,count:1}],thisVars:[],localVars:["_inline_16_M","_inline_16_c","_inline_16_n","_inline_16_r","_inline_16_s","_inline_16_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:false,funcName:"cdiveq",blockSize:64});<span class="cstat-no" title="statement not covered" >e</span>xports.divs=require("cwise/lib/wrapper")({args:["array","array","array","array","scalar","scalar"],pre:{body:"{var _inline_18_c=_inline_18_arg4_*_inline_18_arg4_+_inline_18_arg5_*_inline_18_arg5_;_inline_18_arg4_/=_inline_18_c,_inline_18_arg5_/=-_inline_18_c,this_c=_inline_18_arg4_,this_u=_inline_18_arg4_+_inline_18_arg5_,this_v=_inline_18_arg5_-_inline_18_arg4_}",args:[{name:"_inline_18_arg0_",lvalue:false,rvalue:false,count:0},{name:"_inline_18_arg1_",lvalue:false,rvalue:false,count:0},{name:"_inline_18_arg2_",lvalue:false,rvalue:false,count:0},{name:"_inline_18_arg3_",lvalue:false,rvalue:false,count:0},{name:"_inline_18_arg4_",lvalue:true,rvalue:true,count:6},{name:"_inline_18_arg5_",lvalue:true,rvalue:true,count:5}],thisVars:["this_c","this_u","this_v"],localVars:["_inline_18_c"]},body:{body:"{var _inline_19_v=_inline_19_arg2_,_inline_19_a=_inline_19_arg3_,_inline_19_c=this_c*(_inline_19_v+_inline_19_a);_inline_19_arg0_=_inline_19_c-_inline_19_a*this_u,_inline_19_arg1_=_inline_19_c+_inline_19_v*this_v}",args:[{name:"_inline_19_arg0_",lvalue:true,rvalue:false,count:1},{name:"_inline_19_arg1_",lvalue:true,rvalue:false,count:1},{name:"_inline_19_arg2_",lvalue:false,rvalue:true,count:1},{name:"_inline_19_arg3_",lvalue:false,rvalue:true,count:1}],thisVars:["this_c","this_u","this_v"],localVars:["_inline_19_a","_inline_19_c","_inline_19_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:false,funcName:"cdivs",blockSize:64});<span class="cstat-no" title="statement not covered" >e</span>xports.divseq=require("cwise/lib/wrapper")({args:["array","array","scalar","scalar"],pre:{body:"{var _inline_21_v=_inline_21_arg2_*_inline_21_arg2_+_inline_21_arg3_*_inline_21_arg3_;_inline_21_arg2_/=_inline_21_v,_inline_21_arg3_/=-_inline_21_v,this_c=_inline_21_arg2_,this_u=_inline_21_arg2_+_inline_21_arg3_,this_v=_inline_21_arg3_-_inline_21_arg2_}",args:[{name:"_inline_21_arg0_",lvalue:false,rvalue:false,count:0},{name:"_inline_21_arg1_",lvalue:false,rvalue:false,count:0},{name:"_inline_21_arg2_",lvalue:true,rvalue:true,count:6},{name:"_inline_21_arg3_",lvalue:true,rvalue:true,count:5}],thisVars:["this_c","this_u","this_v"],localVars:["_inline_21_v"]},body:{body:"{var _inline_22_h=_inline_22_arg0_,_inline_22_s=_inline_22_arg1_,_inline_22_v=this_c*(_inline_22_h+_inline_22_s);_inline_22_arg0_=_inline_22_v-_inline_22_s*this_u,_inline_22_arg1_=_inline_22_v+_inline_22_h*this_v}",args:[{name:"_inline_22_arg0_",lvalue:true,rvalue:true,count:2},{name:"_inline_22_arg1_",lvalue:true,rvalue:true,count:2}],thisVars:["this_c","this_u","this_v"],localVars:["_inline_22_h","_inline_22_s","_inline_22_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:false,funcName:"cdivseq",blockSize:64});<span class="cstat-no" title="statement not covered" >e</span>xports.recip=require("cwise/lib/wrapper")({args:["array","array","array","array"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{var _inline_25_c=_inline_25_arg2_,_inline_25_f=_inline_25_arg3_,_inline_25_i=_inline_25_c*_inline_25_c+_inline_25_f*_inline_25_f;_inline_25_arg0_=_inline_25_c/_inline_25_i,_inline_25_arg1_=-_inline_25_f/_inline_25_i}",args:[{name:"_inline_25_arg0_",lvalue:true,rvalue:false,count:1},{name:"_inline_25_arg1_",lvalue:true,rvalue:false,count:1},{name:"_inline_25_arg2_",lvalue:false,rvalue:true,count:1},{name:"_inline_25_arg3_",lvalue:false,rvalue:true,count:1}],thisVars:[],localVars:["_inline_25_c","_inline_25_f","_inline_25_i"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:false,funcName:"crecip",blockSize:64});<span class="cstat-no" title="statement not covered" >e</span>xports.recipeq=require("cwise/lib/wrapper")({args:["array","array"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{var _inline_28_r=_inline_28_arg0_,_inline_28_v=_inline_28_arg1_,_inline_28_c=_inline_28_r*_inline_28_r+_inline_28_v*_inline_28_v;_inline_28_arg0_=_inline_28_r/_inline_28_c,_inline_28_arg1_=-_inline_28_v/_inline_28_c}",args:[{name:"_inline_28_arg0_",lvalue:true,rvalue:true,count:2},{name:"_inline_28_arg1_",lvalue:true,rvalue:true,count:2}],thisVars:[],localVars:["_inline_28_c","_inline_28_r","_inline_28_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:false,funcName:"crecipeq",blockSize:64});<span class="cstat-no" title="statement not covered" >e</span>xports.exp=require("cwise/lib/wrapper")({args:["array","array","array","array"],pre:{body:"{this_exp=Math.exp,this_cos=Math.cos,this_sin=Math.sin}",args:[],thisVars:["this_cos","this_exp","this_sin"],localVars:[]},body:{body:"{var _inline_31_n=this_exp(_inline_31_arg2_);_inline_31_arg0_=_inline_31_n*this_cos(_inline_31_arg3_),_inline_31_arg1_=_inline_31_n*this_sin(_inline_31_arg3_)}",args:[{name:"_inline_31_arg0_",lvalue:true,rvalue:false,count:1},{name:"_inline_31_arg1_",lvalue:true,rvalue:false,count:1},{name:"_inline_31_arg2_",lvalue:false,rvalue:true,count:1},{name:"_inline_31_arg3_",lvalue:false,rvalue:true,count:2}],thisVars:["this_cos","this_exp","this_sin"],localVars:["_inline_31_n"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:false,funcName:"cexp",blockSize:64});<span class="cstat-no" title="statement not covered" >e</span>xports.expeq=require("cwise/lib/wrapper")({args:["array","array"],pre:{body:"{this_exp=Math.exp,this_cos=Math.cos,this_sin=Math.sin}",args:[],thisVars:["this_cos","this_exp","this_sin"],localVars:[]},body:{body:"{var _inline_34_t=this_exp(_inline_34_arg0_),_inline_34_h=_inline_34_out__ir;_inline_34_arg0_=_inline_34_t*this_cos(_inline_34_h),_inline_34_arg1_=_inline_34_t*this_sin(_inline_34_h)}",args:[{name:"_inline_34_arg0_",lvalue:true,rvalue:true,count:2},{name:"_inline_34_arg1_",lvalue:true,rvalue:false,count:1}],thisVars:["this_cos","this_exp","this_sin"],localVars:["_inline_34_h","_inline_34_out__ir","_inline_34_t"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:false,funcName:"cexpeq",blockSize:64});<span class="cstat-no" title="statement not covered" >e</span>xports.mag=require("cwise/lib/wrapper")({args:["array","array","array"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_37_arg0_=_inline_37_arg1_*_inline_37_arg1_+_inline_37_arg2_*_inline_37_arg2_}",args:[{name:"_inline_37_arg0_",lvalue:true,rvalue:false,count:1},{name:"_inline_37_arg1_",lvalue:false,rvalue:true,count:2},{name:"_inline_37_arg2_",lvalue:false,rvalue:true,count:2}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:false,funcName:"cmag",blockSize:64});<span class="cstat-no" title="statement not covered" >e</span>xports.abs=require("cwise/lib/wrapper")({args:["array","array","array"],pre:{body:"{this_sqrt=Math.sqrt}",args:[],thisVars:["this_sqrt"],localVars:[]},body:{body:"{_inline_40_arg0_=this_sqrt(_inline_40_arg1_*_inline_40_arg1_+_inline_40_arg2_*_inline_40_arg2_)}",args:[{name:"_inline_40_arg0_",lvalue:true,rvalue:false,count:1},{name:"_inline_40_arg1_",lvalue:false,rvalue:true,count:2},{name:"_inline_40_arg2_",lvalue:false,rvalue:true,count:2}],thisVars:["this_sqrt"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:false,funcName:"cabs",blockSize:64});<span class="cstat-no" title="statement not covered" >e</span>xports.arg=ops.atan2}</span>,{"cwise/lib/wrapper":13,"ndarray-ops":42}],33:[<span class="fstat-no" title="function not covered" >function(require,module,exports){</span>"use strict";<span class="cstat-no" title="statement not covered" >var ops=require("ndarray-ops");<span class="cstat-no" title="statement not covered" >v</span>ar cwise=require("cwise");<span class="cstat-no" title="statement not covered" >v</span>ar ndarray=require("ndarray");<span class="cstat-no" title="statement not covered" >v</span>ar fftm=require("./lib/fft-matrix.js");<span class="cstat-no" title="statement not covered" >v</span>ar pool=require("typedarray-pool");<span class="fstat-no" title="function not covered" >f</span>unction ndfft(dir,x,y){<span class="cstat-no" title="statement not covered" ></span>var shape=x.shape,d=shape.length,size=1,stride=new Array(d),pad=0,i,j;<span class="cstat-no" title="statement not covered" >f</span>or(i=d-1;i&gt;=0;--i){<span class="cstat-no" title="statement not covered" >stride[i]=size;<span class="cstat-no" title="statement not covered" >s</span>ize*=shape[i];<span class="cstat-no" title="statement not covered" >p</span>ad=Math.max(pad,fftm.scratchMemory(shape[i]));<span class="cstat-no" title="statement not covered" >i</span>f(x.shape[i]!==y.shape[i]){<span class="cstat-no" title="statement not covered" >throw new Error("Shape mismatch, real and imaginary arrays must have same size")}</span>}<span class="cstat-no" title="statement not covered" ></span>v</span>ar buf_size=4*size+pad;<span class="cstat-no" title="statement not covered" >v</span>ar buffer;<span class="cstat-no" title="statement not covered" >i</span>f(x.dtype==="array"||x.dtype==="float64"||x.dtype==="custom"){<span class="cstat-no" title="statement not covered" >buffer=pool.mallocDouble(buf_size)}</span>else{<span class="cstat-no" title="statement not covered" >buffer=pool.mallocFloat(buf_size)}<span class="cstat-no" title="statement not covered" ></span>v</span>ar x1=ndarray(buffer,shape.slice(0),stride,0),y1=ndarray(buffer,shape.slice(0),stride.slice(0),size),x2=ndarray(buffer,shape.slice(0),stride.slice(0),2*size),y2=ndarray(buffer,shape.slice(0),stride.slice(0),3*size),tmp,n,s1,s2,scratch_ptr=4*size;<span class="cstat-no" title="statement not covered" >o</span>ps.assign(x1,x);<span class="cstat-no" title="statement not covered" >o</span>ps.assign(y1,y);<span class="cstat-no" title="statement not covered" >f</span>or(i=d-1;i&gt;=0;--i){<span class="cstat-no" title="statement not covered" >fftm(dir,size/shape[i],shape[i],buffer,x1.offset,y1.offset,scratch_ptr);<span class="cstat-no" title="statement not covered" >i</span>f(i===0){<span class="cstat-no" title="statement not covered" >break}<span class="cstat-no" title="statement not covered" ></span>n</span>=1;<span class="cstat-no" title="statement not covered" >s</span>1=x2.stride;<span class="cstat-no" title="statement not covered" >s</span>2=y2.stride;<span class="cstat-no" title="statement not covered" >f</span>or(j=i-1;j&lt;d;++j){<span class="cstat-no" title="statement not covered" >s2[j]=s1[j]=n;<span class="cstat-no" title="statement not covered" >n</span>*=shape[j]}<span class="cstat-no" title="statement not covered" ></span>f</span>or(j=i-2;j&gt;=0;--j){<span class="cstat-no" title="statement not covered" >s2[j]=s1[j]=n;<span class="cstat-no" title="statement not covered" >n</span>*=shape[j]}<span class="cstat-no" title="statement not covered" ></span>o</span>ps.assign(x2,x1);<span class="cstat-no" title="statement not covered" >o</span>ps.assign(y2,y1);<span class="cstat-no" title="statement not covered" >t</span>mp=x1;<span class="cstat-no" title="statement not covered" >x</span>1=x2;<span class="cstat-no" title="statement not covered" >x</span>2=tmp;<span class="cstat-no" title="statement not covered" >t</span>mp=y1;<span class="cstat-no" title="statement not covered" >y</span>1=y2;<span class="cstat-no" title="statement not covered" >y</span>2=tmp}<span class="cstat-no" title="statement not covered" ></span>o</span>ps.assign(x,x1);<span class="cstat-no" title="statement not covered" >o</span>ps.assign(y,y1);<span class="cstat-no" title="statement not covered" >p</span>ool.free(buffer)}<span class="cstat-no" title="statement not covered" ></span>module.exports=ndfft}</span>,{"./lib/fft-matrix.js":34,cwise:39,ndarray:43,"ndarray-ops":40,"typedarray-pool":65}],34:[<span class="fstat-no" title="function not covered" >function(require,module,exports){<span class="cstat-no" title="statement not covered" ></span>var bits=require("bit-twiddle");<span class="fstat-no" title="function not covered" >f</span>unction fft(dir,nrows,ncols,buffer,x_ptr,y_ptr,scratch_ptr){<span class="cstat-no" title="statement not covered" ></span>dir|=0;<span class="cstat-no" title="statement not covered" >n</span>rows|=0;<span class="cstat-no" title="statement not covered" >n</span>cols|=0;<span class="cstat-no" title="statement not covered" >x</span>_ptr|=0;<span class="cstat-no" title="statement not covered" >y</span>_ptr|=0;<span class="cstat-no" title="statement not covered" >i</span>f(bits.isPow2(ncols)){<span class="cstat-no" title="statement not covered" >fftRadix2(dir,nrows,ncols,buffer,x_ptr,y_ptr)}</span>else{<span class="cstat-no" title="statement not covered" >fftBluestein(dir,nrows,ncols,buffer,x_ptr,y_ptr,scratch_ptr)}</span>}<span class="cstat-no" title="statement not covered" ></span>module.exports=fft;<span class="fstat-no" title="function not covered" >f</span>unction scratchMemory(n){<span class="cstat-no" title="statement not covered" ></span>if(bits.isPow2(n)){<span class="cstat-no" title="statement not covered" >return 0}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn 2*n+4*bits.nextPow2(2*n+1)}<span class="cstat-no" title="statement not covered" ></span>module.exports.scratchMemory=scratchMemory;<span class="fstat-no" title="function not covered" >f</span>unction fftRadix2(dir,nrows,ncols,buffer,x_ptr,y_ptr){<span class="cstat-no" title="statement not covered" ></span>dir|=0;<span class="cstat-no" title="statement not covered" >n</span>rows|=0;<span class="cstat-no" title="statement not covered" >n</span>cols|=0;<span class="cstat-no" title="statement not covered" >x</span>_ptr|=0;<span class="cstat-no" title="statement not covered" >y</span>_ptr|=0;<span class="cstat-no" title="statement not covered" >v</span>ar nn,i,i1,j,k,i2,l,l1,l2;<span class="cstat-no" title="statement not covered" >v</span>ar c1,c2,t,t1,t2,u1,u2,z,row,a,b,c,d,k1,k2,k3;<span class="cstat-no" title="statement not covered" >n</span>n=ncols;<span class="cstat-no" title="statement not covered" >m</span>=bits.log2(nn);<span class="cstat-no" title="statement not covered" >f</span>or(row=0;row&lt;nrows;++row){<span class="cstat-no" title="statement not covered" >i2=nn&gt;&gt;1;<span class="cstat-no" title="statement not covered" >j</span>=0;<span class="cstat-no" title="statement not covered" >f</span>or(i=0;i&lt;nn-1;i++){<span class="cstat-no" title="statement not covered" >if(i&lt;j){<span class="cstat-no" title="statement not covered" >t=buffer[x_ptr+i];<span class="cstat-no" title="statement not covered" >b</span>uffer[x_ptr+i]=buffer[x_ptr+j];<span class="cstat-no" title="statement not covered" >b</span>uffer[x_ptr+j]=t;<span class="cstat-no" title="statement not covered" >t</span>=buffer[y_ptr+i];<span class="cstat-no" title="statement not covered" >b</span>uffer[y_ptr+i]=buffer[y_ptr+j];<span class="cstat-no" title="statement not covered" >b</span>uffer[y_ptr+j]=t}<span class="cstat-no" title="statement not covered" ></span>k</span>=i2;<span class="cstat-no" title="statement not covered" >w</span>hile(k&lt;=j){<span class="cstat-no" title="statement not covered" >j-=k;<span class="cstat-no" title="statement not covered" >k</span>&gt;&gt;=1}<span class="cstat-no" title="statement not covered" ></span>j</span>+=k}<span class="cstat-no" title="statement not covered" ></span>c</span>1=-1;<span class="cstat-no" title="statement not covered" >c</span>2=0;<span class="cstat-no" title="statement not covered" >l</span>2=1;<span class="cstat-no" title="statement not covered" >f</span>or(l=0;l&lt;m;l++){<span class="cstat-no" title="statement not covered" >l1=l2;<span class="cstat-no" title="statement not covered" >l</span>2&lt;&lt;=1;<span class="cstat-no" title="statement not covered" >u</span>1=1;<span class="cstat-no" title="statement not covered" >u</span>2=0;<span class="cstat-no" title="statement not covered" >f</span>or(j=0;j&lt;l1;j++){<span class="cstat-no" title="statement not covered" >for(i=j;i&lt;nn;i+=l2){<span class="cstat-no" title="statement not covered" >i1=i+l1;<span class="cstat-no" title="statement not covered" >a</span>=buffer[x_ptr+i1];<span class="cstat-no" title="statement not covered" >b</span>=buffer[y_ptr+i1];<span class="cstat-no" title="statement not covered" >c</span>=buffer[x_ptr+i];<span class="cstat-no" title="statement not covered" >d</span>=buffer[y_ptr+i];<span class="cstat-no" title="statement not covered" >k</span>1=u1*(a+b);<span class="cstat-no" title="statement not covered" >k</span>2=a*(u2-u1);<span class="cstat-no" title="statement not covered" >k</span>3=b*(u1+u2);<span class="cstat-no" title="statement not covered" >t</span>1=k1-k3;<span class="cstat-no" title="statement not covered" >t</span>2=k1+k2;<span class="cstat-no" title="statement not covered" >b</span>uffer[x_ptr+i1]=c-t1;<span class="cstat-no" title="statement not covered" >b</span>uffer[y_ptr+i1]=d-t2;<span class="cstat-no" title="statement not covered" >b</span>uffer[x_ptr+i]+=t1;<span class="cstat-no" title="statement not covered" >b</span>uffer[y_ptr+i]+=t2}<span class="cstat-no" title="statement not covered" ></span>k</span>1=c1*(u1+u2);<span class="cstat-no" title="statement not covered" >k</span>2=u1*(c2-c1);<span class="cstat-no" title="statement not covered" >k</span>3=u2*(c1+c2);<span class="cstat-no" title="statement not covered" >u</span>1=k1-k3;<span class="cstat-no" title="statement not covered" >u</span>2=k1+k2}<span class="cstat-no" title="statement not covered" ></span>c</span>2=Math.sqrt((1-c1)/2);<span class="cstat-no" title="statement not covered" >i</span>f(dir&lt;0){<span class="cstat-no" title="statement not covered" >c2=-c2}<span class="cstat-no" title="statement not covered" ></span>c</span>1=Math.sqrt((1+c1)/2)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(dir&lt;0){<span class="cstat-no" title="statement not covered" >var scale_f=1/nn;<span class="cstat-no" title="statement not covered" >f</span>or(i=0;i&lt;nn;i++){<span class="cstat-no" title="statement not covered" >buffer[x_ptr+i]*=scale_f;<span class="cstat-no" title="statement not covered" >b</span>uffer[y_ptr+i]*=scale_f}</span>}<span class="cstat-no" title="statement not covered" ></span>x</span>_ptr+=ncols;<span class="cstat-no" title="statement not covered" >y</span>_ptr+=ncols}</span>}<span class="fstat-no" title="function not covered" ></span>function fftBluestein(dir,nrows,ncols,buffer,x_ptr,y_ptr,scratch_ptr){<span class="cstat-no" title="statement not covered" ></span>dir|=0;<span class="cstat-no" title="statement not covered" >n</span>rows|=0;<span class="cstat-no" title="statement not covered" >n</span>cols|=0;<span class="cstat-no" title="statement not covered" >x</span>_ptr|=0;<span class="cstat-no" title="statement not covered" >y</span>_ptr|=0;<span class="cstat-no" title="statement not covered" >s</span>cratch_ptr|=0;<span class="cstat-no" title="statement not covered" >v</span>ar m=bits.nextPow2(2*ncols+1),cos_ptr=scratch_ptr,sin_ptr=cos_ptr+ncols,xs_ptr=sin_ptr+ncols,ys_ptr=xs_ptr+m,cft_ptr=ys_ptr+m,sft_ptr=cft_ptr+m,w=-dir*Math.PI/ncols,row,a,b,c,d,k1,k2,k3,i;<span class="cstat-no" title="statement not covered" >f</span>or(i=0;i&lt;ncols;++i){<span class="cstat-no" title="statement not covered" >a=w*(i*i%(ncols*2));<span class="cstat-no" title="statement not covered" >c</span>=Math.cos(a);</span></span>
<span class="cstat-no" title="statement not covered" >d=Math.sin(a);<span class="cstat-no" title="statement not covered" >b</span>uffer[cft_ptr+(m-i)]=buffer[cft_ptr+i]=buffer[cos_ptr+i]=c;<span class="cstat-no" title="statement not covered" >b</span>uffer[sft_ptr+(m-i)]=buffer[sft_ptr+i]=buffer[sin_ptr+i]=d}<span class="cstat-no" title="statement not covered" ></span>for(i=ncols;i&lt;=m-ncols;++i){<span class="cstat-no" title="statement not covered" >buffer[cft_ptr+i]=0}<span class="cstat-no" title="statement not covered" ></span>f</span>or(i=ncols;i&lt;=m-ncols;++i){<span class="cstat-no" title="statement not covered" >buffer[sft_ptr+i]=0}<span class="cstat-no" title="statement not covered" ></span>f</span>ftRadix2(1,1,m,buffer,cft_ptr,sft_ptr);<span class="cstat-no" title="statement not covered" >i</span>f(dir&lt;0){<span class="cstat-no" title="statement not covered" >w=1/ncols}</span>else{<span class="cstat-no" title="statement not covered" >w=1}<span class="cstat-no" title="statement not covered" ></span>f</span>or(row=0;row&lt;nrows;++row){<span class="cstat-no" title="statement not covered" >for(i=0;i&lt;ncols;++i){<span class="cstat-no" title="statement not covered" >a=buffer[x_ptr+i];<span class="cstat-no" title="statement not covered" >b</span>=buffer[y_ptr+i];<span class="cstat-no" title="statement not covered" >c</span>=buffer[cos_ptr+i];<span class="cstat-no" title="statement not covered" >d</span>=-buffer[sin_ptr+i];<span class="cstat-no" title="statement not covered" >k</span>1=c*(a+b);<span class="cstat-no" title="statement not covered" >k</span>2=a*(d-c);<span class="cstat-no" title="statement not covered" >k</span>3=b*(c+d);<span class="cstat-no" title="statement not covered" >b</span>uffer[xs_ptr+i]=k1-k3;<span class="cstat-no" title="statement not covered" >b</span>uffer[ys_ptr+i]=k1+k2}<span class="cstat-no" title="statement not covered" ></span>f</span>or(i=ncols;i&lt;m;++i){<span class="cstat-no" title="statement not covered" >buffer[xs_ptr+i]=0}<span class="cstat-no" title="statement not covered" ></span>f</span>or(i=ncols;i&lt;m;++i){<span class="cstat-no" title="statement not covered" >buffer[ys_ptr+i]=0}<span class="cstat-no" title="statement not covered" ></span>f</span>ftRadix2(1,1,m,buffer,xs_ptr,ys_ptr);<span class="cstat-no" title="statement not covered" >f</span>or(i=0;i&lt;m;++i){<span class="cstat-no" title="statement not covered" >a=buffer[xs_ptr+i];<span class="cstat-no" title="statement not covered" >b</span>=buffer[ys_ptr+i];<span class="cstat-no" title="statement not covered" >c</span>=buffer[cft_ptr+i];<span class="cstat-no" title="statement not covered" >d</span>=buffer[sft_ptr+i];<span class="cstat-no" title="statement not covered" >k</span>1=c*(a+b);<span class="cstat-no" title="statement not covered" >k</span>2=a*(d-c);<span class="cstat-no" title="statement not covered" >k</span>3=b*(c+d);<span class="cstat-no" title="statement not covered" >b</span>uffer[xs_ptr+i]=k1-k3;<span class="cstat-no" title="statement not covered" >b</span>uffer[ys_ptr+i]=k1+k2}<span class="cstat-no" title="statement not covered" ></span>f</span>ftRadix2(-1,1,m,buffer,xs_ptr,ys_ptr);<span class="cstat-no" title="statement not covered" >f</span>or(i=0;i&lt;ncols;++i){<span class="cstat-no" title="statement not covered" >a=buffer[xs_ptr+i];<span class="cstat-no" title="statement not covered" >b</span>=buffer[ys_ptr+i];<span class="cstat-no" title="statement not covered" >c</span>=buffer[cos_ptr+i];<span class="cstat-no" title="statement not covered" >d</span>=-buffer[sin_ptr+i];<span class="cstat-no" title="statement not covered" >k</span>1=c*(a+b);<span class="cstat-no" title="statement not covered" >k</span>2=a*(d-c);<span class="cstat-no" title="statement not covered" >k</span>3=b*(c+d);<span class="cstat-no" title="statement not covered" >b</span>uffer[x_ptr+i]=w*(k1-k3);<span class="cstat-no" title="statement not covered" >b</span>uffer[y_ptr+i]=w*(k1+k2)}<span class="cstat-no" title="statement not covered" ></span>x</span>_ptr+=ncols;<span class="cstat-no" title="statement not covered" >y</span>_ptr+=ncols}</span>}</span>},{"bit-twiddle":5}],35:[<span class="fstat-no" title="function not covered" >function(require,module,exports){</span>"use strict";<span class="cstat-no" title="statement not covered" >var createThunk=require("./lib/thunk.js");<span class="fstat-no" title="function not covered" >f</span>unction Procedure(){<span class="cstat-no" title="statement not covered" ></span>this.argTypes=[];<span class="cstat-no" title="statement not covered" >t</span>his.shimArgs=[];<span class="cstat-no" title="statement not covered" >t</span>his.arrayArgs=[];<span class="cstat-no" title="statement not covered" >t</span>his.scalarArgs=[];<span class="cstat-no" title="statement not covered" >t</span>his.indexArgs=[];<span class="cstat-no" title="statement not covered" >t</span>his.shapeArgs=[];<span class="cstat-no" title="statement not covered" >t</span>his.funcName="";<span class="cstat-no" title="statement not covered" >t</span>his.pre=null;<span class="cstat-no" title="statement not covered" >t</span>his.body=null;<span class="cstat-no" title="statement not covered" >t</span>his.post=null;<span class="cstat-no" title="statement not covered" >t</span>his.debug=false}<span class="fstat-no" title="function not covered" ></span>function compileCwise(user_args){<span class="cstat-no" title="statement not covered" ></span>var proc=new Procedure;<span class="cstat-no" title="statement not covered" >p</span>roc.pre=user_args.pre;<span class="cstat-no" title="statement not covered" >p</span>roc.body=user_args.body;<span class="cstat-no" title="statement not covered" >p</span>roc.post=user_args.post;<span class="cstat-no" title="statement not covered" >v</span>ar proc_args=user_args.args.slice(0);<span class="cstat-no" title="statement not covered" >p</span>roc.argTypes=proc_args;<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;proc_args.length;++i){<span class="cstat-no" title="statement not covered" >switch(proc_args[i]){case"array":<span class="cstat-no" title="statement not covered" >proc.arrayArgs.push(i);<span class="cstat-no" title="statement not covered" >p</span>roc.shimArgs.push("array"+i);<span class="cstat-no" title="statement not covered" >i</span>f(i&lt;proc.pre.args.length&amp;&amp;proc.pre.args[i].count&gt;0){<span class="cstat-no" title="statement not covered" >throw new Error("cwise: pre() block may not reference array args")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(i&lt;proc.post.args.length&amp;&amp;proc.post.args[i].count&gt;0){<span class="cstat-no" title="statement not covered" >throw new Error("cwise: post() block may not reference array args")}<span class="cstat-no" title="statement not covered" ></span>b</span>reak;c</span>ase"scalar":<span class="cstat-no" title="statement not covered" >proc.scalarArgs.push(i);<span class="cstat-no" title="statement not covered" >p</span>roc.shimArgs.push("scalar"+i);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"index":<span class="cstat-no" title="statement not covered" >proc.indexArgs.push(i);<span class="cstat-no" title="statement not covered" >i</span>f(i&lt;proc.pre.args.length&amp;&amp;proc.pre.args[i].count&gt;0){<span class="cstat-no" title="statement not covered" >throw new Error("cwise: pre() block may not reference array index")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(i&lt;proc.body.args.length&amp;&amp;proc.body.args[i].lvalue){<span class="cstat-no" title="statement not covered" >throw new Error("cwise: body() block may not write to array index")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(i&lt;proc.post.args.length&amp;&amp;proc.post.args[i].count&gt;0){<span class="cstat-no" title="statement not covered" >throw new Error("cwise: post() block may not reference array index")}<span class="cstat-no" title="statement not covered" ></span>b</span>reak;c</span>ase"shape":<span class="cstat-no" title="statement not covered" >proc.shapeArgs.push(i);<span class="cstat-no" title="statement not covered" >i</span>f(i&lt;proc.pre.args.length&amp;&amp;proc.pre.args[i].lvalue){<span class="cstat-no" title="statement not covered" >throw new Error("cwise: pre() block may not write to array shape")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(i&lt;proc.body.args.length&amp;&amp;proc.body.args[i].lvalue){<span class="cstat-no" title="statement not covered" >throw new Error("cwise: body() block may not write to array shape")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(i&lt;proc.post.args.length&amp;&amp;proc.post.args[i].lvalue){<span class="cstat-no" title="statement not covered" >throw new Error("cwise: post() block may not write to array shape")}<span class="cstat-no" title="statement not covered" ></span>b</span>reak;d</span>efault:<span class="cstat-no" title="statement not covered" >throw new Error("cwise: Unknown argument type "+proc_args[i])}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(proc.arrayArgs.length&lt;=0){<span class="cstat-no" title="statement not covered" >throw new Error("cwise: No array arguments specified")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(proc.pre.args.length&gt;proc_args.length){<span class="cstat-no" title="statement not covered" >throw new Error("cwise: Too many arguments in pre() block")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(proc.body.args.length&gt;proc_args.length){<span class="cstat-no" title="statement not covered" >throw new Error("cwise: Too many arguments in body() block")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(proc.post.args.length&gt;proc_args.length){<span class="cstat-no" title="statement not covered" >throw new Error("cwise: Too many arguments in post() block")}<span class="cstat-no" title="statement not covered" ></span>p</span>roc.debug=!!user_args.printCode||!!user_args.debug;<span class="cstat-no" title="statement not covered" >p</span>roc.funcName=user_args.funcName||"cwise";<span class="cstat-no" title="statement not covered" >p</span>roc.blockSize=user_args.blockSize||64;<span class="cstat-no" title="statement not covered" >r</span>eturn createThunk(proc)}<span class="cstat-no" title="statement not covered" ></span>module.exports=compileCwise}</span>,{"./lib/thunk.js":37}],36:[<span class="fstat-no" title="function not covered" >function(require,module,exports){</span>"use strict";<span class="cstat-no" title="statement not covered" >var uniq=require("uniq");<span class="fstat-no" title="function not covered" >f</span>unction innerFill(order,proc,body){<span class="cstat-no" title="statement not covered" ></span>var dimension=order.length,nargs=proc.arrayArgs.length,has_index=proc.indexArgs.length&gt;0,code=[],vars=[],idx=0,pidx=0,i,j;<span class="cstat-no" title="statement not covered" >f</span>or(i=0;i&lt;dimension;++i){<span class="cstat-no" title="statement not covered" >vars.push(["i",i,"=0"].join(""))}<span class="cstat-no" title="statement not covered" ></span>f</span>or(j=0;j&lt;nargs;++j){<span class="cstat-no" title="statement not covered" >for(i=0;i&lt;dimension;++i){<span class="cstat-no" title="statement not covered" >pidx=idx;<span class="cstat-no" title="statement not covered" >i</span>dx=order[i];<span class="cstat-no" title="statement not covered" >i</span>f(i===0){<span class="cstat-no" title="statement not covered" >vars.push(["d",j,"s",i,"=t",j,"[",idx,"]"].join(""))}</span>else{<span class="cstat-no" title="statement not covered" >vars.push(["d",j,"s",i,"=(t",j,"[",idx,"]-s",pidx,"*t",j,"[",pidx,"])"].join(""))}</span>}</span>}<span class="cstat-no" title="statement not covered" ></span>c</span>ode.push("var "+vars.join(","));<span class="cstat-no" title="statement not covered" >f</span>or(i=dimension-1;i&gt;=0;--i){<span class="cstat-no" title="statement not covered" >idx=order[i];<span class="cstat-no" title="statement not covered" >c</span>ode.push(["for(i",i,"=0;i",i,"&lt;s",idx,";++i",i,"){"].join(""))}<span class="cstat-no" title="statement not covered" ></span>c</span>ode.push(body);<span class="cstat-no" title="statement not covered" >f</span>or(i=0;i&lt;dimension;++i){<span class="cstat-no" title="statement not covered" >pidx=idx;<span class="cstat-no" title="statement not covered" >i</span>dx=order[i];<span class="cstat-no" title="statement not covered" >f</span>or(j=0;j&lt;nargs;++j){<span class="cstat-no" title="statement not covered" >code.push(["p",j,"+=d",j,"s",i].join(""))}<span class="cstat-no" title="statement not covered" ></span>i</span>f(has_index){<span class="cstat-no" title="statement not covered" >if(i&gt;0){<span class="cstat-no" title="statement not covered" >code.push(["index[",pidx,"]-=s",pidx].join(""))}<span class="cstat-no" title="statement not covered" ></span>c</span>ode.push(["++index[",idx,"]"].join(""))}<span class="cstat-no" title="statement not covered" ></span>c</span>ode.push("}")}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn code.join("\n")}<span class="fstat-no" title="function not covered" ></span>function outerFill(matched,order,proc,body){<span class="cstat-no" title="statement not covered" ></span>var dimension=order.length,nargs=proc.arrayArgs.length,blockSize=proc.blockSize,has_index=proc.indexArgs.length&gt;0,code=[];<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;nargs;++i){<span class="cstat-no" title="statement not covered" >code.push(["var offset",i,"=p",i].join(""))}<span class="cstat-no" title="statement not covered" ></span>f</span>or(var i=matched;i&lt;dimension;++i){<span class="cstat-no" title="statement not covered" >code.push(["for(var j"+i+"=SS[",order[i],"]|0;j",i,"&gt;0;){"].join(""));<span class="cstat-no" title="statement not covered" >c</span>ode.push(["if(j",i,"&lt;",blockSize,"){"].join(""));<span class="cstat-no" title="statement not covered" >c</span>ode.push(["s",order[i],"=j",i].join(""));<span class="cstat-no" title="statement not covered" >c</span>ode.push(["j",i,"=0"].join(""));<span class="cstat-no" title="statement not covered" >c</span>ode.push(["}else{s",order[i],"=",blockSize].join(""));<span class="cstat-no" title="statement not covered" >c</span>ode.push(["j",i,"-=",blockSize,"}"].join(""));<span class="cstat-no" title="statement not covered" >i</span>f(has_index){<span class="cstat-no" title="statement not covered" >code.push(["index[",order[i],"]=j",i].join(""))}</span>}<span class="cstat-no" title="statement not covered" ></span>f</span>or(var i=0;i&lt;nargs;++i){<span class="cstat-no" title="statement not covered" >var indexStr=["offset"+i];<span class="cstat-no" title="statement not covered" >f</span>or(var j=matched;j&lt;dimension;++j){<span class="cstat-no" title="statement not covered" >indexStr.push(["j",j,"*t",i,"[",order[j],"]"].join(""))}<span class="cstat-no" title="statement not covered" ></span>c</span>ode.push(["p",i,"=(",indexStr.join("+"),")"].join(""))}<span class="cstat-no" title="statement not covered" ></span>c</span>ode.push(innerFill(order,proc,body));<span class="cstat-no" title="statement not covered" >f</span>or(var i=matched;i&lt;dimension;++i){<span class="cstat-no" title="statement not covered" >code.push("}")}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn code.join("\n")}<span class="fstat-no" title="function not covered" ></span>function countMatches(orders){<span class="cstat-no" title="statement not covered" ></span>var matched=0,dimension=orders[0].length;<span class="cstat-no" title="statement not covered" >w</span>hile(matched&lt;dimension){<span class="cstat-no" title="statement not covered" >for(var j=1;j&lt;orders.length;++j){<span class="cstat-no" title="statement not covered" >if(orders[j][matched]!==orders[0][matched]){<span class="cstat-no" title="statement not covered" >return matched}</span>}<span class="cstat-no" title="statement not covered" ></span>+</span>+matched}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn matched}<span class="fstat-no" title="function not covered" ></span>function processBlock(block,proc,dtypes){<span class="cstat-no" title="statement not covered" ></span>var code=block.body;<span class="cstat-no" title="statement not covered" >v</span>ar pre=[];<span class="cstat-no" title="statement not covered" >v</span>ar post=[];<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;block.args.length;++i){<span class="cstat-no" title="statement not covered" >var carg=block.args[i];<span class="cstat-no" title="statement not covered" >i</span>f(carg.count&lt;=0){<span class="cstat-no" title="statement not covered" >continue}<span class="cstat-no" title="statement not covered" ></span>v</span>ar re=new RegExp(carg.name,"g");<span class="cstat-no" title="statement not covered" >s</span>witch(proc.argTypes[i]){case"array":<span class="cstat-no" title="statement not covered" >var arrNum=proc.arrayArgs.indexOf(i);<span class="cstat-no" title="statement not covered" >i</span>f(carg.count===1){<span class="cstat-no" title="statement not covered" >if(dtypes[arrNum]==="generic"){<span class="cstat-no" title="statement not covered" >if(carg.lvalue){<span class="cstat-no" title="statement not covered" >pre.push(["var l",arrNum,"=a",arrNum,".get(p",arrNum,")"].join(""));<span class="cstat-no" title="statement not covered" >c</span>ode=code.replace(re,"l"+arrNum);<span class="cstat-no" title="statement not covered" >p</span>ost.push(["a",arrNum,".set(p",arrNum,",l",arrNum,")"].join(""))}</span>else{<span class="cstat-no" title="statement not covered" >code=code.replace(re,["a",arrNum,".get(p",arrNum,")"].join(""))}</span>}</span>else{<span class="cstat-no" title="statement not covered" >code=code.replace(re,["a",arrNum,"[p",arrNum,"]"].join(""))}</span>}</span>else <span class="cstat-no" title="statement not covered" >if(dtypes[arrNum]==="generic"){<span class="cstat-no" title="statement not covered" >pre.push(["var l",arrNum,"=a",arrNum,".get(p",arrNum,")"].join(""));<span class="cstat-no" title="statement not covered" >c</span>ode=code.replace(re,"l"+arrNum);<span class="cstat-no" title="statement not covered" >i</span>f(carg.lvalue){<span class="cstat-no" title="statement not covered" >post.push(["a",arrNum,".set(p",arrNum,",l",arrNum,")"].join(""))}</span>}</span>else{<span class="cstat-no" title="statement not covered" >pre.push(["var l",arrNum,"=a",arrNum,"[p",arrNum,"]"].join(""));<span class="cstat-no" title="statement not covered" >c</span>ode=code.replace(re,"l"+arrNum);<span class="cstat-no" title="statement not covered" >i</span>f(carg.lvalue){<span class="cstat-no" title="statement not covered" >post.push(["a",arrNum,"[p",arrNum,"]=l",arrNum].join(""))}</span>}<span class="cstat-no" title="statement not covered" ></span>b</span></span>reak;c</span>ase"scalar":<span class="cstat-no" title="statement not covered" >code=code.replace(re,"Y"+proc.scalarArgs.indexOf(i));<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"index":<span class="cstat-no" title="statement not covered" >code=code.replace(re,"index");<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"shape":<span class="cstat-no" title="statement not covered" >code=code.replace(re,"shape");<span class="cstat-no" title="statement not covered" >b</span>reak}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn[pre.join("\n"),code,post.join("\n")].join("\n").trim()}<span class="fstat-no" title="function not covered" ></span>function typeSummary(dtypes){<span class="cstat-no" title="statement not covered" ></span>var summary=new Array(dtypes.length);<span class="cstat-no" title="statement not covered" >v</span>ar allEqual=true;<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;dtypes.length;++i){<span class="cstat-no" title="statement not covered" >var t=dtypes[i];<span class="cstat-no" title="statement not covered" >v</span>ar digits=t.match(/\d+/);<span class="cstat-no" title="statement not covered" >i</span>f(!digits){<span class="cstat-no" title="statement not covered" >digits=""}</span>else{<span class="cstat-no" title="statement not covered" >digits=digits[0]}<span class="cstat-no" title="statement not covered" ></span>i</span>f(t.charAt(0)===0){<span class="cstat-no" title="statement not covered" >summary[i]="u"+t.charAt(1)+digits}</span>else{<span class="cstat-no" title="statement not covered" >summary[i]=t.charAt(0)+digits}<span class="cstat-no" title="statement not covered" ></span>i</span>f(i&gt;0){<span class="cstat-no" title="statement not covered" >allEqual=allEqual&amp;&amp;summary[i]===summary[i-1]}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(allEqual){<span class="cstat-no" title="statement not covered" >return summary[0]}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn summary.join("")}<span class="fstat-no" title="function not covered" ></span>function generateCWiseOp(proc,typesig){<span class="cstat-no" title="statement not covered" ></span>var dimension=typesig[1].length|0;<span class="cstat-no" title="statement not covered" >v</span>ar orders=new Array(proc.arrayArgs.length);<span class="cstat-no" title="statement not covered" >v</span>ar dtypes=new Array(proc.arrayArgs.length);<span class="cstat-no" title="statement not covered" >v</span>ar arglist=["SS"];<span class="cstat-no" title="statement not covered" >v</span>ar code=["'use strict'"];<span class="cstat-no" title="statement not covered" >v</span>ar vars=[];<span class="cstat-no" title="statement not covered" >f</span>or(var j=0;j&lt;dimension;++j){<span class="cstat-no" title="statement not covered" >vars.push(["s",j,"=SS[",j,"]"].join(""))}<span class="cstat-no" title="statement not covered" ></span>f</span>or(var i=0;i&lt;proc.arrayArgs.length;++i){<span class="cstat-no" title="statement not covered" >arglist.push("a"+i);<span class="cstat-no" title="statement not covered" >a</span>rglist.push("t"+i);<span class="cstat-no" title="statement not covered" >a</span>rglist.push("p"+i);<span class="cstat-no" title="statement not covered" >d</span>types[i]=typesig[2*i];<span class="cstat-no" title="statement not covered" >o</span>rders[i]=typesig[2*i+1]}<span class="cstat-no" title="statement not covered" ></span>f</span>or(var i=0;i&lt;proc.scalarArgs.length;++i){<span class="cstat-no" title="statement not covered" >arglist.push("Y"+i)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(proc.shapeArgs.length&gt;0){<span class="cstat-no" title="statement not covered" >vars.push("shape=SS.slice(0)")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(proc.indexArgs.length&gt;0){<span class="cstat-no" title="statement not covered" >var zeros=new Array(dimension);<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;dimension;++i){<span class="cstat-no" title="statement not covered" >zeros[i]="0"}<span class="cstat-no" title="statement not covered" ></span>v</span>ars.push(["index=[",zeros.join(","),"]"].join(""))}<span class="cstat-no" title="statement not covered" ></span>v</span>ar thisVars=uniq([].concat(proc.pre.thisVars).concat(proc.body.thisVars).concat(proc.post.thisVars));<span class="cstat-no" title="statement not covered" >v</span>ars=vars.concat(thisVars);<span class="cstat-no" title="statement not covered" >c</span>ode.push("var "+vars.join(","));<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;proc.arrayArgs.length;++i){<span class="cstat-no" title="statement not covered" >code.push("p"+i+"|=0")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(proc.pre.body.length&gt;3){<span class="cstat-no" title="statement not covered" >code.push(processBlock(proc.pre,proc,dtypes))}<span class="cstat-no" title="statement not covered" ></span>v</span>ar body=processBlock(proc.body,proc,dtypes);<span class="cstat-no" title="statement not covered" >v</span>ar matched=countMatches(orders);<span class="cstat-no" title="statement not covered" >i</span>f(matched&lt;dimension){<span class="cstat-no" title="statement not covered" >code.push(outerFill(matched,orders[0],proc,body))}</span>else{<span class="cstat-no" title="statement not covered" >code.push(innerFill(orders[0],proc,body))}<span class="cstat-no" title="statement not covered" ></span>i</span>f(proc.post.body.length&gt;3){<span class="cstat-no" title="statement not covered" >code.push(processBlock(proc.post,proc,dtypes))}<span class="cstat-no" title="statement not covered" ></span>i</span>f(proc.debug){<span class="cstat-no" title="statement not covered" >console.log("Generated cwise routine for ",typesig,":\n\n",code.join("\n"))}<span class="cstat-no" title="statement not covered" ></span>v</span>ar loopName=[proc.funcName||"unnamed","_cwise_loop_",orders[0].join("s"),"m",matched,typeSummary(dtypes)].join("");<span class="cstat-no" title="statement not covered" >v</span>ar f=new Function(["function ",loopName,"(",arglist.join(","),"){",code.join("\n"),"} return ",loopName].join(""));<span class="cstat-no" title="statement not covered" >r</span>eturn f()}<span class="cstat-no" title="statement not covered" ></span>module.exports=generateCWiseOp}</span>,{uniq:41}],37:[<span class="fstat-no" title="function not covered" >function(require,module,exports){</span>"use strict";<span class="cstat-no" title="statement not covered" >var compile=require("./compile.js");<span class="fstat-no" title="function not covered" >f</span>unction createThunk(proc){<span class="cstat-no" title="statement not covered" ></span>var code=["'use strict'","var CACHED={}"];<span class="cstat-no" title="statement not covered" >v</span>ar vars=[];<span class="cstat-no" title="statement not covered" >v</span>ar thunkName=proc.funcName+"_cwise_thunk";<span class="cstat-no" title="statement not covered" >c</span>ode.push(["return function ",thunkName,"(",proc.shimArgs.join(","),"){"].join(""));<span class="cstat-no" title="statement not covered" >v</span>ar typesig=[];<span class="cstat-no" title="statement not covered" >v</span>ar string_typesig=[];<span class="cstat-no" title="statement not covered" >v</span>ar proc_args=[["array",proc.arrayArgs[0],".shape"].join("")];<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;proc.arrayArgs.length;++i){<span class="cstat-no" title="statement not covered" >var j=proc.arrayArgs[i];<span class="cstat-no" title="statement not covered" >v</span>ars.push(["t",j,"=array",j,".dtype,","r",j,"=array",j,".order"].join(""));<span class="cstat-no" title="statement not covered" >t</span>ypesig.push("t"+j);<span class="cstat-no" title="statement not covered" >t</span>ypesig.push("r"+j);<span class="cstat-no" title="statement not covered" >s</span>tring_typesig.push("t"+j);<span class="cstat-no" title="statement not covered" >s</span>tring_typesig.push("r"+j+".join()");<span class="cstat-no" title="statement not covered" >p</span>roc_args.push("array"+j+".data");<span class="cstat-no" title="statement not covered" >p</span>roc_args.push("array"+j+".stride");<span class="cstat-no" title="statement not covered" >p</span>roc_args.push("array"+j+".offset|0")}<span class="cstat-no" title="statement not covered" ></span>f</span>or(var i=0;i&lt;proc.scalarArgs.length;++i){<span class="cstat-no" title="statement not covered" >proc_args.push("scalar"+proc.scalarArgs[i])}<span class="cstat-no" title="statement not covered" ></span>v</span>ars.push(["type=[",string_typesig.join(","),"].join()"].join(""));<span class="cstat-no" title="statement not covered" >v</span>ars.push("proc=CACHED[type]");<span class="cstat-no" title="statement not covered" >c</span>ode.push("var "+vars.join(","));<span class="cstat-no" title="statement not covered" >c</span>ode.push(["if(!proc){","CACHED[type]=proc=compile([",typesig.join(","),"])}","return proc(",proc_args.join(","),")}"].join(""));<span class="cstat-no" title="statement not covered" >i</span>f(proc.debug){<span class="cstat-no" title="statement not covered" >console.log("Generated thunk:",code.join("\n"))}<span class="cstat-no" title="statement not covered" ></span>v</span>ar thunk=new Function("compile",code.join("\n"));<span class="cstat-no" title="statement not covered" >r</span>eturn thunk(compile.bind(undefined,proc))}<span class="cstat-no" title="statement not covered" ></span>module.exports=createThunk}</span>,{"./compile.js":36}],38:[<span class="fstat-no" title="function not covered" >function(require,module,exports){</span>"use strict";<span class="cstat-no" title="statement not covered" >var esprima=require("esprima");<span class="cstat-no" title="statement not covered" >v</span>ar uniq=require("uniq");<span class="cstat-no" title="statement not covered" >v</span>ar PREFIX_COUNTER=0;<span class="fstat-no" title="function not covered" >f</span>unction CompiledArgument(name,lvalue,rvalue){<span class="cstat-no" title="statement not covered" ></span>this.name=name;<span class="cstat-no" title="statement not covered" >t</span>his.lvalue=lvalue;<span class="cstat-no" title="statement not covered" >t</span>his.rvalue=rvalue;<span class="cstat-no" title="statement not covered" >t</span>his.count=0}<span class="fstat-no" title="function not covered" ></span>function CompiledRoutine(body,args,thisVars,localVars){<span class="cstat-no" title="statement not covered" ></span>this.body=body;<span class="cstat-no" title="statement not covered" >t</span>his.args=args;<span class="cstat-no" title="statement not covered" >t</span>his.thisVars=thisVars;<span class="cstat-no" title="statement not covered" >t</span>his.localVars=localVars}<span class="fstat-no" title="function not covered" ></span>function isGlobal(identifier){<span class="cstat-no" title="statement not covered" ></span>if(identifier==="eval"){<span class="cstat-no" title="statement not covered" >throw new Error("cwise-parser: eval() not allowed")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(typeof window!=="undefined"){<span class="cstat-no" title="statement not covered" >return identifier in window}</span>else <span class="cstat-no" title="statement not covered" >if(typeof GLOBAL!=="undefined"){<span class="cstat-no" title="statement not covered" >return identifier in GLOBAL}</span>else <span class="cstat-no" title="statement not covered" >if(typeof self!=="undefined"){<span class="cstat-no" title="statement not covered" >return identifier in self}</span>else{<span class="cstat-no" title="statement not covered" >return false}</span>}<span class="fstat-no" title="function not covered" ></span></span></span>function getArgNames(ast){<span class="cstat-no" title="statement not covered" ></span>var params=ast.body[0].expression.callee.params;<span class="cstat-no" title="statement not covered" >v</span>ar names=new Array(params.length);<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;params.length;++i){<span class="cstat-no" title="statement not covered" >names[i]=params[i].name}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn names}<span class="fstat-no" title="function not covered" ></span>function preprocess(func){<span class="cstat-no" title="statement not covered" ></span>var src=["(",func,")()"].join("");<span class="cstat-no" title="statement not covered" >v</span>ar ast=esprima.parse(src,{range:true});<span class="cstat-no" title="statement not covered" >v</span>ar prefix="_inline_"+PREFIX_COUNTER++ +"_";<span class="cstat-no" title="statement not covered" >v</span>ar argNames=getArgNames(ast);<span class="cstat-no" title="statement not covered" >v</span>ar compiledArgs=new Array(argNames.length);<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;argNames.length;++i){<span class="cstat-no" title="statement not covered" >compiledArgs[i]=new CompiledArgument([prefix,"arg",i,"_"].join(""),false,false)}<span class="cstat-no" title="statement not covered" ></span>v</span>ar exploded=new Array(src.length);<span class="cstat-no" title="statement not covered" >f</span>or(var i=0,n=src.length;i&lt;n;++i){<span class="cstat-no" title="statement not covered" >exploded[i]=src.charAt(i)}<span class="cstat-no" title="statement not covered" ></span>v</span>ar localVars=[];<span class="cstat-no" title="statement not covered" >v</span>ar thisVars=[];<span class="cstat-no" title="statement not covered" >v</span>ar computedThis=false;<span class="fstat-no" title="function not covered" >f</span>unction createLocal(id){<span class="cstat-no" title="statement not covered" ></span>var nstr=prefix+id.replace(/\_/g,"__");<span class="cstat-no" title="statement not covered" >l</span>ocalVars.push(nstr);<span class="cstat-no" title="statement not covered" >r</span>eturn nstr}<span class="fstat-no" title="function not covered" ></span>function createThisVar(id){<span class="cstat-no" title="statement not covered" ></span>var nstr="this_"+id.replace(/\_/g,"__");<span class="cstat-no" title="statement not covered" >t</span>hisVars.push(nstr);<span class="cstat-no" title="statement not covered" >r</span>eturn nstr}<span class="fstat-no" title="function not covered" ></span>function rewrite(node,nstr){<span class="cstat-no" title="statement not covered" ></span>var lo=node.range[0],hi=node.range[1];<span class="cstat-no" title="statement not covered" >f</span>or(var i=lo+1;i&lt;hi;++i){<span class="cstat-no" title="statement not covered" >exploded[i]=""}<span class="cstat-no" title="statement not covered" ></span>e</span>xploded[lo]=nstr}<span class="fstat-no" title="function not covered" ></span>function escapeString(str){<span class="cstat-no" title="statement not covered" ></span>return"'"+str.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'"}<span class="fstat-no" title="function not covered" ></span>function source(node){<span class="cstat-no" title="statement not covered" ></span>return exploded.slice(node.range[0],node.range[1]).join("")}<span class="cstat-no" title="statement not covered" ></span>var LVALUE=1;<span class="cstat-no" title="statement not covered" >v</span>ar RVALUE=2;<span class="fstat-no" title="function not covered" >f</span>unction getUsage(node){<span class="cstat-no" title="statement not covered" ></span>if(node.parent.type==="AssignmentExpression"){<span class="cstat-no" title="statement not covered" >if(node.parent.left===node){<span class="cstat-no" title="statement not covered" >if(node.parent.operator==="="){<span class="cstat-no" title="statement not covered" >return LVALUE}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn LVALUE|RVALUE}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(node.parent.type==="UpdateExpression"){<span class="cstat-no" title="statement not covered" >return LVALUE|RVALUE}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn RVALUE}<span class="cstat-no" title="statement not covered" ></span>(<span class="fstat-no" title="function not covered" >function visit(node,parent){<span class="cstat-no" title="statement not covered" ></span>node.parent=parent;<span class="cstat-no" title="statement not covered" >i</span>f(node.type==="MemberExpression"){<span class="cstat-no" title="statement not covered" >if(node.computed){<span class="cstat-no" title="statement not covered" >visit(node.object,node);<span class="cstat-no" title="statement not covered" >v</span>isit(node.property,node)}</span>else <span class="cstat-no" title="statement not covered" >if(node.object.type==="ThisExpression"){<span class="cstat-no" title="statement not covered" >rewrite(node,createThisVar(node.property.name))}</span>else{<span class="cstat-no" title="statement not covered" >visit(node.object,node)}</span>}</span></span>else <span class="cstat-no" title="statement not covered" >if(node.type==="ThisExpression"){<span class="cstat-no" title="statement not covered" >throw new Error("cwise-parser: Computed this is not allowed")}</span>else <span class="cstat-no" title="statement not covered" >if(node.type==="Identifier"){<span class="cstat-no" title="statement not covered" >var name=node.name;<span class="cstat-no" title="statement not covered" >v</span>ar argNo=argNames.indexOf(name);<span class="cstat-no" title="statement not covered" >i</span>f(argNo&gt;=0){<span class="cstat-no" title="statement not covered" >var carg=compiledArgs[argNo];<span class="cstat-no" title="statement not covered" >v</span>ar usage=getUsage(node);<span class="cstat-no" title="statement not covered" >i</span>f(usage&amp;LVALUE){<span class="cstat-no" title="statement not covered" >carg.lvalue=true}<span class="cstat-no" title="statement not covered" ></span>i</span>f(usage&amp;RVALUE){<span class="cstat-no" title="statement not covered" >carg.rvalue=true}<span class="cstat-no" title="statement not covered" ></span>+</span>+carg.count;<span class="cstat-no" title="statement not covered" >r</span>ewrite(node,carg.name)}</span>else <span class="cstat-no" title="statement not covered" >if(isGlobal(name)){}else{<span class="cstat-no" title="statement not covered" >rewrite(node,createLocal(name))}</span>}</span></span>else <span class="cstat-no" title="statement not covered" >if(node.type==="Literal"){<span class="cstat-no" title="statement not covered" >if(typeof node.value==="string"){<span class="cstat-no" title="statement not covered" >rewrite(node,escapeString(node.value))}</span>}</span>else <span class="cstat-no" title="statement not covered" >if(node.type==="WithStatement"){<span class="cstat-no" title="statement not covered" >throw new Error("cwise-parser: with() statements not allowed")}</span>else{<span class="cstat-no" title="statement not covered" >var keys=Object.keys(node);<span class="cstat-no" title="statement not covered" >f</span>or(var i=0,n=keys.length;i&lt;n;++i){<span class="cstat-no" title="statement not covered" >if(keys[i]==="parent"){<span class="cstat-no" title="statement not covered" >continue}<span class="cstat-no" title="statement not covered" ></span>v</span>ar value=node[keys[i]];<span class="cstat-no" title="statement not covered" >i</span>f(value){<span class="cstat-no" title="statement not covered" >if(value instanceof Array){<span class="cstat-no" title="statement not covered" >for(var j=0;j&lt;value.length;++j){<span class="cstat-no" title="statement not covered" >if(value[j]&amp;&amp;typeof value[j].type==="string"){<span class="cstat-no" title="statement not covered" >visit(value[j],node)}</span>}</span>}</span>else <span class="cstat-no" title="statement not covered" >if(typeof value.type==="string"){<span class="cstat-no" title="statement not covered" >visit(value,node)}</span>}</span></span>}</span>}</span>}</span></span></span></span></span>)(ast.body[0].expression.callee.body,undefined);<span class="cstat-no" title="statement not covered" >u</span>niq(localVars);<span class="cstat-no" title="statement not covered" >u</span>niq(thisVars);<span class="cstat-no" title="statement not covered" >v</span>ar routine=new CompiledRoutine(source(ast.body[0].expression.callee.body),compiledArgs,thisVars,localVars);<span class="cstat-no" title="statement not covered" >r</span>eturn routine}<span class="cstat-no" title="statement not covered" ></span>module.exports=preprocess}</span>,{esprima:17,uniq:41}],39:[<span class="fstat-no" title="function not covered" >function(require,module,exports){</span>"use strict";<span class="cstat-no" title="statement not covered" >var parse=require("cwise-parser");<span class="cstat-no" title="statement not covered" >v</span>ar compile=require("cwise-compiler");<span class="cstat-no" title="statement not covered" >v</span>ar REQUIRED_FIELDS=["args","body"];<span class="cstat-no" title="statement not covered" >v</span>ar OPTIONAL_FIELDS=["pre","post","printCode","funcName","blockSize"];<span class="fstat-no" title="function not covered" >f</span>unction createCWise(user_args){<span class="cstat-no" title="statement not covered" ></span>for(var id in user_args){<span class="cstat-no" title="statement not covered" >if(REQUIRED_FIELDS.indexOf(id)&lt;0&amp;&amp;OPTIONAL_FIELDS.indexOf(id)&lt;0){<span class="cstat-no" title="statement not covered" >console.warn("cwise: Unknown argument '"+id+"' passed to expression compiler")}</span>}<span class="cstat-no" title="statement not covered" ></span>f</span>or(var i=0;i&lt;REQUIRED_FIELDS.length;++i){<span class="cstat-no" title="statement not covered" >if(!user_args[REQUIRED_FIELDS[i]]){<span class="cstat-no" title="statement not covered" >throw new Error("cwise: Missing argument: "+REQUIRED_FIELDS[i])}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn compile({args:user_args.args,pre:parse(user_args.pre||<span class="fstat-no" title="function not covered" >function(){</span>}),body:parse(user_args.body),post:parse(user_args.post||<span class="fstat-no" title="function not covered" >function(){</span>}),debug:!!user_args.printCode,funcName:user_args.funcName||user_args.body.name||"cwise",blockSize:user_args.blockSize||64})}<span class="cstat-no" title="statement not covered" ></span>module.exports=createCWise}</span>,{"cwise-compiler":35,"cwise-parser":38}],40:[<span class="fstat-no" title="function not covered" >function(require,module,exports){</span>"use strict";<span class="cstat-no" title="statement not covered" >var compile=require("cwise-compiler");<span class="cstat-no" title="statement not covered" >v</span>ar EmptyProc={body:"",args:[],thisVars:[],localVars:[]};<span class="fstat-no" title="function not covered" >f</span>unction fixup(x){<span class="cstat-no" title="statement not covered" ></span>if(!x){<span class="cstat-no" title="statement not covered" >return EmptyProc}<span class="cstat-no" title="statement not covered" ></span>f</span>or(var i=0;i&lt;x.args.length;++i){<span class="cstat-no" title="statement not covered" >var a=x.args[i];<span class="cstat-no" title="statement not covered" >i</span>f(i===0){<span class="cstat-no" title="statement not covered" >x.args[i]={name:a,lvalue:true,rvalue:!!x.rvalue,count:x.count||1}}</span>else{<span class="cstat-no" title="statement not covered" >x.args[i]={name:a,lvalue:false,rvalue:true,count:1}}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!x.thisVars){<span class="cstat-no" title="statement not covered" >x.thisVars=[]}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!x.localVars){<span class="cstat-no" title="statement not covered" >x.localVars=[]}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn x}<span class="fstat-no" title="function not covered" ></span>function pcompile(user_args){<span class="cstat-no" title="statement not covered" ></span>return compile({args:user_args.args,pre:fixup(user_args.pre),body:fixup(user_args.body),post:fixup(user_args.proc),funcName:user_args.funcName})}<span class="fstat-no" title="function not covered" ></span>function makeOp(user_args){<span class="cstat-no" title="statement not covered" ></span>var args=[];<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;user_args.args.length;++i){<span class="cstat-no" title="statement not covered" >args.push("a"+i)}<span class="cstat-no" title="statement not covered" ></span>v</span>ar wrapper=new Function("P",["return function ",user_args.funcName,"_ndarrayops(",args.join(","),") {P(",args.join(","),");return a0}"].join(""));<span class="cstat-no" title="statement not covered" >r</span>eturn wrapper(pcompile(user_args))}<span class="cstat-no" title="statement not covered" ></span>var assign_ops={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&amp;",bor:"|",bxor:"^",lshift:"&lt;&lt;",rshift:"&gt;&gt;",rrshift:"&gt;&gt;&gt;"};<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" ></span>function(){<span class="cstat-no" title="statement not covered" ></span>for(var id in assign_ops){<span class="cstat-no" title="statement not covered" >var op=assign_ops[id];<span class="cstat-no" title="statement not covered" >e</span>xports[id]=makeOp({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+op+"c"},funcName:id});<span class="cstat-no" title="statement not covered" >e</span>xports[id+"eq"]=makeOp({args:["array","array"],body:{args:["a","b"],body:"a"+op+"=b"},rvalue:true,funcName:id+"eq"});<span class="cstat-no" title="statement not covered" >e</span>xports[id+"s"]=makeOp({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+op+"s"},funcName:id+"s"});<span class="cstat-no" title="statement not covered" >e</span>xports[id+"seq"]=makeOp({args:["array","scalar"],body:{args:["a","s"],body:"a"+op+"=s"},rvalue:true,funcName:id+"seq"})}</span>}</span>)();<span class="cstat-no" title="statement not covered" >v</span>ar unary_ops={not:"!",bnot:"~",neg:"-",recip:"1.0/"};<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" ></span>function(){<span class="cstat-no" title="statement not covered" ></span>for(var id in unary_ops){<span class="cstat-no" title="statement not covered" >var op=unary_ops[id];<span class="cstat-no" title="statement not covered" >e</span>xports[id]=makeOp({args:["array","array"],body:{args:["a","b"],body:"a="+op+"b"},funcName:id});<span class="cstat-no" title="statement not covered" >e</span>xports[id+"eq"]=makeOp({args:["array"],body:{args:["a"],body:"a="+op+"a"},rvalue:true,count:2,funcName:id+"eq"})}</span>}</span>)();<span class="cstat-no" title="statement not covered" >v</span>ar binary_ops={and:"&amp;&amp;",or:"||",eq:"===",neq:"!==",lt:"&lt;",gt:"&gt;",leq:"&lt;=",geq:"&gt;="};<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" ></span>function(){<span class="cstat-no" title="statement not covered" ></span>for(var id in binary_ops){<span class="cstat-no" title="statement not covered" >var op=binary_ops[id];<span class="cstat-no" title="statement not covered" >e</span>xports[id]=makeOp({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+op+"c"},funcName:id});<span class="cstat-no" title="statement not covered" >e</span>xports[id+"s"]=makeOp({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+op+"s"},funcName:id+"s"});<span class="cstat-no" title="statement not covered" >e</span>xports[id+"eq"]=makeOp({args:["array","array"],body:{args:["a","b"],body:"a=a"+op+"b"},rvalue:true,count:2,funcName:id+"eq"});<span class="cstat-no" title="statement not covered" >e</span>xports[id+"seq"]=makeOp({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+op+"s"},rvalue:true,count:2,funcName:id+"seq"})}</span>}</span>)();<span class="cstat-no" title="statement not covered" >v</span>ar math_unary=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" ></span>function(){<span class="cstat-no" title="statement not covered" ></span>for(var i=0;i&lt;math_unary.length;++i){<span class="cstat-no" title="statement not covered" >var f=math_unary[i];<span class="cstat-no" title="statement not covered" >e</span>xports[f]=makeOp({args:["array","array"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:f});<span class="cstat-no" title="statement not covered" >e</span>xports[f+"eq"]=makeOp({args:["array"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:true,count:2,funcName:f+"eq"})}</span>}</span>)();<span class="cstat-no" title="statement not covered" >v</span>ar math_comm=["max","min","atan2","pow"];<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" ></span>function(){<span class="cstat-no" title="statement not covered" ></span>for(var i=0;i&lt;math_comm.length;++i){<span class="cstat-no" title="statement not covered" >var f=math_comm[i];<span class="cstat-no" title="statement not covered" >e</span>xports[f]=makeOp({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:f});<span class="cstat-no" title="statement not covered" >e</span>xports[f+"s"]=makeOp({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:f+"s"});<span class="cstat-no" title="statement not covered" >e</span>xports[f+"eq"]=makeOp({args:["array","array"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:true,count:2,funcName:f+"eq"});<span class="cstat-no" title="statement not covered" >e</span>xports[f+"seq"]=makeOp({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:true,count:2,funcName:f+"seq"})}</span>}</span>)();<span class="cstat-no" title="statement not covered" >v</span>ar math_noncomm=["atan2","pow"];<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" ></span>function(){<span class="cstat-no" title="statement not covered" ></span>for(var i=0;i&lt;math_noncomm.length;++i){<span class="cstat-no" title="statement not covered" >var f=math_noncomm[i];<span class="cstat-no" title="statement not covered" >e</span>xports[f+"op"]=makeOp({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:f+"op"});<span class="cstat-no" title="statement not covered" >e</span>xports[f+"ops"]=makeOp({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:f+"ops"});<span class="cstat-no" title="statement not covered" >e</span>xports[f+"opeq"]=makeOp({args:["array","array"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:true,count:2,funcName:f+"opeq"});<span class="cstat-no" title="statement not covered" >e</span>xports[f+"opseq"]=makeOp({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:true,count:2,funcName:f+"opseq"})}</span>}</span>)();<span class="cstat-no" title="statement not covered" >e</span>xports.any=compile({args:["array"],pre:EmptyProc,body:{args:[{name:"a",lvalue:false,rvalue:true,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"});<span class="cstat-no" title="statement not covered" >e</span>xports.all=compile({args:["array"],pre:EmptyProc,body:{args:[{name:"x",lvalue:false,rvalue:true,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"});<span class="cstat-no" title="statement not covered" >e</span>xports.sum=compile({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:false,rvalue:true,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"});<span class="cstat-no" title="statement not covered" >e</span>xports.prod=compile({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:false,rvalue:true,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"});<span class="cstat-no" title="statement not covered" >e</span>xports.norm2squared=compile({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:false,rvalue:true,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"});<span class="cstat-no" title="statement not covered" >e</span>xports.norm2=compile({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:false,rvalue:true,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"});<span class="cstat-no" title="statement not covered" >e</span>xports.norminf=compile({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:false,rvalue:true,count:4}],body:"if(-a&gt;this_s){this_s=-a}else if(a&gt;this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"});<span class="cstat-no" title="statement not covered" >e</span>xports.norm1=compile({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:false,rvalue:true,count:3}],body:"this_s+=a&lt;0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"});<span class="cstat-no" title="statement not covered" >e</span>xports.sup=compile({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_&gt;this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:false,rvalue:true,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});<span class="cstat-no" title="statement not covered" >e</span>xports.inf=compile({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_&lt;this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:false,rvalue:true,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});<span class="cstat-no" title="statement not covered" >e</span>xports.argmin=compile({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:false,rvalue:false,count:0},{name:"_inline_0_arg1_",lvalue:false,rvalue:false,count:0},{name:"_inline_0_arg2_",lvalue:false,rvalue:true,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_&lt;this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k&lt;_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:false,rvalue:true,count:2},{name:"_inline_1_arg1_",lvalue:false,rvalue:true,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});<span class="cstat-no" title="statement not covered" >e</span>xports.argmax=compile({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:false,rvalue:false,count:0},{name:"_inline_0_arg1_",lvalue:false,rvalue:false,count:0},{name:"_inline_0_arg2_",lvalue:false,rvalue:true,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_&gt;this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k&lt;_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:false,rvalue:true,count:2},{name:"_inline_1_arg1_",lvalue:false,rvalue:true,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});<span class="cstat-no" title="statement not covered" >e</span>xports.random=makeOp({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"});<span class="cstat-no" title="statement not covered" >e</span>xports.assign=makeOp({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"});<span class="cstat-no" title="statement not covered" >e</span>xports.assigns=makeOp({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"})}</span>,{"cwise-compiler":35}],41:[<span class="fstat-no" title="function not covered" >function(require,module,exports){</span>"use strict";<span class="fstat-no" title="function not covered" >function unique_pred(list,compare){<span class="cstat-no" title="statement not covered" ></span>var ptr=1,len=list.length,a=list[0],b=list[0];<span class="cstat-no" title="statement not covered" >f</span>or(var i=1;i&lt;len;++i){<span class="cstat-no" title="statement not covered" >b=a;<span class="cstat-no" title="statement not covered" >a</span>=list[i];<span class="cstat-no" title="statement not covered" >i</span>f(compare(a,b)){<span class="cstat-no" title="statement not covered" >if(i===ptr){<span class="cstat-no" title="statement not covered" >ptr++;<span class="cstat-no" title="statement not covered" >c</span>ontinue}<span class="cstat-no" title="statement not covered" ></span>l</span>ist[ptr++]=a}</span>}<span class="cstat-no" title="statement not covered" ></span>l</span>ist.length=ptr;<span class="cstat-no" title="statement not covered" >r</span>eturn list}<span class="fstat-no" title="function not covered" ></span>function unique_eq(list){<span class="cstat-no" title="statement not covered" ></span>var ptr=1,len=list.length,a=list[0],b=list[0];<span class="cstat-no" title="statement not covered" >f</span>or(var i=1;i&lt;len;++i,b=a){<span class="cstat-no" title="statement not covered" >b=a;<span class="cstat-no" title="statement not covered" >a</span>=list[i];<span class="cstat-no" title="statement not covered" >i</span>f(a!==b){<span class="cstat-no" title="statement not covered" >if(i===ptr){<span class="cstat-no" title="statement not covered" >ptr++;<span class="cstat-no" title="statement not covered" >c</span>ontinue}<span class="cstat-no" title="statement not covered" ></span>l</span>ist[ptr++]=a}</span>}<span class="cstat-no" title="statement not covered" ></span>l</span>ist.length=ptr;<span class="cstat-no" title="statement not covered" >r</span>eturn list}<span class="fstat-no" title="function not covered" ></span>function unique(list,compare,sorted){<span class="cstat-no" title="statement not covered" ></span>if(list.length===0){<span class="cstat-no" title="statement not covered" >return[]}<span class="cstat-no" title="statement not covered" ></span>i</span>f(compare){<span class="cstat-no" title="statement not covered" >if(!sorted){<span class="cstat-no" title="statement not covered" >list.sort(compare)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn unique_pred(list,compare)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!sorted){<span class="cstat-no" title="statement not covered" >list.sort()}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn unique_eq(list)}<span class="cstat-no" title="statement not covered" ></span>module.exports=unique}</span>,{}],42:[<span class="fstat-no" title="function not covered" >function(require,module,exports){</span>"use strict";<span class="cstat-no" title="statement not covered" >var compile=require("cwise-compiler");<span class="cstat-no" title="statement not covered" >v</span>ar EmptyProc={body:"",args:[],thisVars:[],localVars:[]};<span class="fstat-no" title="function not covered" >f</span>unction fixup(x){<span class="cstat-no" title="statement not covered" ></span>if(!x){<span class="cstat-no" title="statement not covered" >return EmptyProc}<span class="cstat-no" title="statement not covered" ></span>f</span>or(var i=0;i&lt;x.args.length;++i){<span class="cstat-no" title="statement not covered" >var a=x.args[i];<span class="cstat-no" title="statement not covered" >i</span>f(i===0){<span class="cstat-no" title="statement not covered" >x.args[i]={name:a,lvalue:true,rvalue:!!x.rvalue,count:x.count||1}}</span>else{<span class="cstat-no" title="statement not covered" >x.args[i]={name:a,lvalue:false,rvalue:true,count:1}}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!x.thisVars){<span class="cstat-no" title="statement not covered" >x.thisVars=[]}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!x.localVars){<span class="cstat-no" title="statement not covered" >x.localVars=[]}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn x}<span class="fstat-no" title="function not covered" ></span>function pcompile(user_args){<span class="cstat-no" title="statement not covered" ></span>return compile({args:user_args.args,pre:fixup(user_args.pre),body:fixup(user_args.body),post:fixup(user_args.proc),funcName:user_args.funcName})}<span class="fstat-no" title="function not covered" ></span>function makeOp(user_args){<span class="cstat-no" title="statement not covered" ></span>var args=[];<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;user_args.args.length;++i){<span class="cstat-no" title="statement not covered" >args.push("a"+i)}<span class="cstat-no" title="statement not covered" ></span>v</span>ar wrapper=new Function("P",["return function ",user_args.funcName,"_ndarrayops(",args.join(","),") {P(",args.join(","),");return a0}"].join(""));<span class="cstat-no" title="statement not covered" >r</span>eturn wrapper(pcompile(user_args))}<span class="cstat-no" title="statement not covered" ></span>var assign_ops={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&amp;",bor:"|",bxor:"^",lshift:"&lt;&lt;",rshift:"&gt;&gt;",rrshift:"&gt;&gt;&gt;"};<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" ></span>function(){<span class="cstat-no" title="statement not covered" ></span>for(var id in assign_ops){<span class="cstat-no" title="statement not covered" >var op=assign_ops[id];<span class="cstat-no" title="statement not covered" >e</span>xports[id]=makeOp({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+op+"c"},funcName:id});<span class="cstat-no" title="statement not covered" >e</span>xports[id+"eq"]=makeOp({args:["array","array"],body:{args:["a","b"],body:"a"+op+"=b"},rvalue:true,funcName:id+"eq"});<span class="cstat-no" title="statement not covered" >e</span>xports[id+"s"]=makeOp({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+op+"s"},funcName:id+"s"});<span class="cstat-no" title="statement not covered" >e</span>xports[id+"seq"]=makeOp({args:["array","scalar"],body:{args:["a","s"],body:"a"+op+"=s"},rvalue:true,funcName:id+"seq"})}</span>}</span>)();<span class="cstat-no" title="statement not covered" >v</span>ar unary_ops={not:"!",bnot:"~",neg:"-",recip:"1.0/"};<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" ></span>function(){<span class="cstat-no" title="statement not covered" ></span>for(var id in unary_ops){<span class="cstat-no" title="statement not covered" >var op=unary_ops[id];<span class="cstat-no" title="statement not covered" >e</span>xports[id]=makeOp({args:["array","array"],body:{args:["a","b"],body:"a="+op+"b"},funcName:id});<span class="cstat-no" title="statement not covered" >e</span>xports[id+"eq"]=makeOp({args:["array"],body:{args:["a"],body:"a="+op+"a"},rvalue:true,count:2,funcName:id+"eq"})}</span>}</span>)();<span class="cstat-no" title="statement not covered" >v</span>ar binary_ops={and:"&amp;&amp;",or:"||",eq:"===",neq:"!==",lt:"&lt;",gt:"&gt;",leq:"&lt;=",geq:"&gt;="};<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" ></span>function(){<span class="cstat-no" title="statement not covered" ></span>for(var id in binary_ops){<span class="cstat-no" title="statement not covered" >var op=binary_ops[id];<span class="cstat-no" title="statement not covered" >e</span>xports[id]=makeOp({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+op+"c"},funcName:id});<span class="cstat-no" title="statement not covered" >e</span>xports[id+"s"]=makeOp({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+op+"s"},funcName:id+"s"});<span class="cstat-no" title="statement not covered" >e</span>xports[id+"eq"]=makeOp({args:["array","array"],body:{args:["a","b"],body:"a=a"+op+"b"},rvalue:true,count:2,funcName:id+"eq"});<span class="cstat-no" title="statement not covered" >e</span>xports[id+"seq"]=makeOp({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+op+"s"},rvalue:true,count:2,funcName:id+"seq"})}</span>}</span>)();<span class="cstat-no" title="statement not covered" >v</span>ar math_unary=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" ></span>function(){<span class="cstat-no" title="statement not covered" ></span>for(var i=0;i&lt;math_unary.length;++i){<span class="cstat-no" title="statement not covered" >var f=math_unary[i];<span class="cstat-no" title="statement not covered" >e</span>xports[f]=makeOp({args:["array","array"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:f});<span class="cstat-no" title="statement not covered" >e</span>xports[f+"eq"]=makeOp({args:["array"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:true,count:2,funcName:f+"eq"})}</span>}</span>)();<span class="cstat-no" title="statement not covered" >v</span>ar math_comm=["max","min","atan2","pow"];<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" ></span>function(){<span class="cstat-no" title="statement not covered" ></span>for(var i=0;i&lt;math_comm.length;++i){<span class="cstat-no" title="statement not covered" >var f=math_comm[i];<span class="cstat-no" title="statement not covered" >e</span>xports[f]=makeOp({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:f});<span class="cstat-no" title="statement not covered" >e</span>xports[f+"s"]=makeOp({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:f+"s"});<span class="cstat-no" title="statement not covered" >e</span>xports[f+"eq"]=makeOp({args:["array","array"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:true,count:2,funcName:f+"eq"});<span class="cstat-no" title="statement not covered" >e</span>xports[f+"seq"]=makeOp({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:true,count:2,funcName:f+"seq"})}</span>}</span>)();<span class="cstat-no" title="statement not covered" >v</span>ar math_noncomm=["atan2","pow"];<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" ></span>function(){<span class="cstat-no" title="statement not covered" ></span>for(var i=0;i&lt;math_noncomm.length;++i){<span class="cstat-no" title="statement not covered" >var f=math_noncomm[i];<span class="cstat-no" title="statement not covered" >e</span>xports[f+"op"]=makeOp({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:f+"op"});<span class="cstat-no" title="statement not covered" >e</span>xports[f+"ops"]=makeOp({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:f+"ops"});<span class="cstat-no" title="statement not covered" >e</span>xports[f+"opeq"]=makeOp({args:["array","array"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:true,count:2,funcName:f+"opeq"});<span class="cstat-no" title="statement not covered" >e</span>xports[f+"opseq"]=makeOp({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:true,count:2,funcName:f+"opseq"})}</span>}</span>)();<span class="cstat-no" title="statement not covered" >e</span>xports.any=compile({args:["array"],pre:EmptyProc,body:{args:[{name:"a",lvalue:false,rvalue:true,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"});<span class="cstat-no" title="statement not covered" >e</span>xports.all=compile({args:["array"],pre:EmptyProc,body:{args:[{name:"x",lvalue:false,rvalue:true,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"});<span class="cstat-no" title="statement not covered" >e</span>xports.sum=compile({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:false,rvalue:true,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"});<span class="cstat-no" title="statement not covered" >e</span>xports.prod=compile({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:false,rvalue:true,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"});<span class="cstat-no" title="statement not covered" >e</span>xports.norm2squared=compile({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:false,rvalue:true,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"});<span class="cstat-no" title="statement not covered" >e</span>xports.norm2=compile({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:false,rvalue:true,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"});<span class="cstat-no" title="statement not covered" >e</span>xports.norminf=compile({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:false,rvalue:true,count:4}],body:"if(-a&gt;this_s){this_s=-a}else if(a&gt;this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"});</span>
<span class="cstat-no" title="statement not covered" >exports.norm1=compile({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:false,rvalue:true,count:3}],body:"this_s+=a&lt;0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"});<span class="cstat-no" title="statement not covered" >e</span>xports.sup=compile({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_&gt;this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:false,rvalue:true,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});<span class="cstat-no" title="statement not covered" >e</span>xports.inf=compile({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_&lt;this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:false,rvalue:true,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});<span class="cstat-no" title="statement not covered" >e</span>xports.argmin=compile({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:false,rvalue:false,count:0},{name:"_inline_0_arg1_",lvalue:false,rvalue:false,count:0},{name:"_inline_0_arg2_",lvalue:false,rvalue:true,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_&lt;this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k&lt;_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:false,rvalue:true,count:2},{name:"_inline_1_arg1_",lvalue:false,rvalue:true,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});<span class="cstat-no" title="statement not covered" >e</span>xports.argmax=compile({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:false,rvalue:false,count:0},{name:"_inline_0_arg1_",lvalue:false,rvalue:false,count:0},{name:"_inline_0_arg2_",lvalue:false,rvalue:true,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_&gt;this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k&lt;_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:false,rvalue:true,count:2},{name:"_inline_1_arg1_",lvalue:false,rvalue:true,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});<span class="cstat-no" title="statement not covered" >e</span>xports.random=makeOp({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"});<span class="cstat-no" title="statement not covered" >e</span>xports.assign=makeOp({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"});<span class="cstat-no" title="statement not covered" >e</span>xports.assigns=makeOp({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"});<span class="cstat-no" title="statement not covered" >e</span>xports.equals=compile({args:["array","array"],pre:EmptyProc,body:{args:[{name:"x",lvalue:false,rvalue:true,count:1},{name:"y",lvalue:false,rvalue:true,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})}</span>,{"cwise-compiler":10}],43:[<span class="fstat-no" title="function not covered" >function(require,module,exports){<span class="cstat-no" title="statement not covered" ></span>var iota=require("iota-array");<span class="cstat-no" title="statement not covered" >v</span>ar isBuffer=require("is-buffer");<span class="cstat-no" title="statement not covered" >v</span>ar hasTypedArrays=typeof Float64Array!=="undefined";<span class="fstat-no" title="function not covered" >f</span>unction compare1st(a,b){<span class="cstat-no" title="statement not covered" ></span>return a[0]-b[0]}<span class="fstat-no" title="function not covered" ></span>function order(){<span class="cstat-no" title="statement not covered" ></span>var stride=this.stride;<span class="cstat-no" title="statement not covered" >v</span>ar terms=new Array(stride.length);<span class="cstat-no" title="statement not covered" >v</span>ar i;<span class="cstat-no" title="statement not covered" >f</span>or(i=0;i&lt;terms.length;++i){<span class="cstat-no" title="statement not covered" >terms[i]=[Math.abs(stride[i]),i]}<span class="cstat-no" title="statement not covered" ></span>t</span>erms.sort(compare1st);<span class="cstat-no" title="statement not covered" >v</span>ar result=new Array(terms.length);<span class="cstat-no" title="statement not covered" >f</span>or(i=0;i&lt;result.length;++i){<span class="cstat-no" title="statement not covered" >result[i]=terms[i][1]}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn result}<span class="fstat-no" title="function not covered" ></span>function compileConstructor(dtype,dimension){<span class="cstat-no" title="statement not covered" ></span>var className=["View",dimension,"d",dtype].join("");<span class="cstat-no" title="statement not covered" >i</span>f(dimension&lt;0){<span class="cstat-no" title="statement not covered" >className="View_Nil"+dtype}<span class="cstat-no" title="statement not covered" ></span>v</span>ar useGetters=dtype==="generic";<span class="cstat-no" title="statement not covered" >i</span>f(dimension===-1){<span class="cstat-no" title="statement not covered" >var code="function "+className+"(a){this.data=a;};var proto="+className+".prototype;proto.dtype='"+dtype+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+className+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+className+"(a){return new "+className+"(a);}";<span class="cstat-no" title="statement not covered" >v</span>ar procedure=new Function(code);<span class="cstat-no" title="statement not covered" >r</span>eturn procedure()}</span>else <span class="cstat-no" title="statement not covered" >if(dimension===0){<span class="cstat-no" title="statement not covered" >var code="function "+className+"(a,d) {this.data = a;this.offset = d};var proto="+className+".prototype;proto.dtype='"+dtype+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+className+"_copy() {return new "+className+"(this.data,this.offset)};proto.pick=function "+className+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+className+"_get(){return "+(useGetters?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+className+"_set(v){return "+(useGetters?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+className+"(a,b,c,d){return new "+className+"(a,d)}";<span class="cstat-no" title="statement not covered" >v</span>ar procedure=new Function("TrivialArray",code);<span class="cstat-no" title="statement not covered" >r</span>eturn procedure(CACHED_CONSTRUCTORS[dtype][0])}<span class="cstat-no" title="statement not covered" ></span>v</span></span>ar code=["'use strict'"];<span class="cstat-no" title="statement not covered" >v</span>ar indices=iota(dimension);<span class="cstat-no" title="statement not covered" >v</span>ar args=indices.map(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return"i"+i}</span>);<span class="cstat-no" title="statement not covered" >v</span>ar index_str="this.offset+"+indices.map(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return"this.stride["+i+"]*i"+i}</span>).join("+");<span class="cstat-no" title="statement not covered" >v</span>ar shapeArg=indices.map(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return"b"+i}</span>).join(",");<span class="cstat-no" title="statement not covered" >v</span>ar strideArg=indices.map(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return"c"+i}</span>).join(",");<span class="cstat-no" title="statement not covered" >c</span>ode.push("function "+className+"(a,"+shapeArg+","+strideArg+",d){this.data=a","this.shape=["+shapeArg+"]","this.stride=["+strideArg+"]","this.offset=d|0}","var proto="+className+".prototype","proto.dtype='"+dtype+"'","proto.dimension="+dimension);<span class="cstat-no" title="statement not covered" >c</span>ode.push("Object.defineProperty(proto,'size',{get:function "+className+"_size(){return "+indices.map(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return"this.shape["+i+"]"}</span>).join("*"),"}})");<span class="cstat-no" title="statement not covered" >i</span>f(dimension===1){<span class="cstat-no" title="statement not covered" >code.push("proto.order=[0]")}</span>else{<span class="cstat-no" title="statement not covered" >code.push("Object.defineProperty(proto,'order',{get:");<span class="cstat-no" title="statement not covered" >i</span>f(dimension&lt;4){<span class="cstat-no" title="statement not covered" >code.push("function "+className+"_order(){");<span class="cstat-no" title="statement not covered" >i</span>f(dimension===2){<span class="cstat-no" title="statement not covered" >code.push("return (Math.abs(this.stride[0])&gt;Math.abs(this.stride[1]))?[1,0]:[0,1]}})")}</span>else <span class="cstat-no" title="statement not covered" >if(dimension===3){<span class="cstat-no" title="statement not covered" >code.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0&gt;s1){if(s1&gt;s2){return [2,1,0];}else if(s0&gt;s2){return [1,2,0];}else{return [1,0,2];}}else if(s0&gt;s2){return [2,0,1];}else if(s2&gt;s1){return [0,1,2];}else{return [0,2,1];}}})")}</span>}</span></span>else{<span class="cstat-no" title="statement not covered" >code.push("ORDER})")}</span>}<span class="cstat-no" title="statement not covered" ></span>c</span>ode.push("proto.set=function "+className+"_set("+args.join(",")+",v){");<span class="cstat-no" title="statement not covered" >i</span>f(useGetters){<span class="cstat-no" title="statement not covered" >code.push("return this.data.set("+index_str+",v)}")}</span>else{<span class="cstat-no" title="statement not covered" >code.push("return this.data["+index_str+"]=v}")}<span class="cstat-no" title="statement not covered" ></span>c</span>ode.push("proto.get=function "+className+"_get("+args.join(",")+"){");<span class="cstat-no" title="statement not covered" >i</span>f(useGetters){<span class="cstat-no" title="statement not covered" >code.push("return this.data.get("+index_str+")}")}</span>else{<span class="cstat-no" title="statement not covered" >code.push("return this.data["+index_str+"]}")}<span class="cstat-no" title="statement not covered" ></span>c</span>ode.push("proto.index=function "+className+"_index(",args.join(),"){return "+index_str+"}");<span class="cstat-no" title="statement not covered" >c</span>ode.push("proto.hi=function "+className+"_hi("+args.join(",")+"){return new "+className+"(this.data,"+indices.map(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return["(typeof i",i,"!=='number'||i",i,"&lt;0)?this.shape[",i,"]:i",i,"|0"].join("")}</span>).join(",")+","+indices.map(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return"this.stride["+i+"]"}</span>).join(",")+",this.offset)}");<span class="cstat-no" title="statement not covered" >v</span>ar a_vars=indices.map(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return"a"+i+"=this.shape["+i+"]"}</span>);<span class="cstat-no" title="statement not covered" >v</span>ar c_vars=indices.map(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return"c"+i+"=this.stride["+i+"]"}</span>);<span class="cstat-no" title="statement not covered" >c</span>ode.push("proto.lo=function "+className+"_lo("+args.join(",")+"){var b=this.offset,d=0,"+a_vars.join(",")+","+c_vars.join(","));<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;dimension;++i){<span class="cstat-no" title="statement not covered" >code.push("if(typeof i"+i+"==='number'&amp;&amp;i"+i+"&gt;=0){d=i"+i+"|0;b+=c"+i+"*d;a"+i+"-=d}")}<span class="cstat-no" title="statement not covered" ></span>c</span>ode.push("return new "+className+"(this.data,"+indices.map(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return"a"+i}</span>).join(",")+","+indices.map(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return"c"+i}</span>).join(",")+",b)}");<span class="cstat-no" title="statement not covered" >c</span>ode.push("proto.step=function "+className+"_step("+args.join(",")+"){var "+indices.map(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return"a"+i+"=this.shape["+i+"]"}</span>).join(",")+","+indices.map(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return"b"+i+"=this.stride["+i+"]"}</span>).join(",")+",c=this.offset,d=0,ceil=Math.ceil");<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;dimension;++i){<span class="cstat-no" title="statement not covered" >code.push("if(typeof i"+i+"==='number'){d=i"+i+"|0;if(d&lt;0){c+=b"+i+"*(a"+i+"-1);a"+i+"=ceil(-a"+i+"/d)}else{a"+i+"=ceil(a"+i+"/d)}b"+i+"*=d}")}<span class="cstat-no" title="statement not covered" ></span>c</span>ode.push("return new "+className+"(this.data,"+indices.map(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return"a"+i}</span>).join(",")+","+indices.map(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return"b"+i}</span>).join(",")+",c)}");<span class="cstat-no" title="statement not covered" >v</span>ar tShape=new Array(dimension);<span class="cstat-no" title="statement not covered" >v</span>ar tStride=new Array(dimension);<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;dimension;++i){<span class="cstat-no" title="statement not covered" >tShape[i]="a[i"+i+"]";<span class="cstat-no" title="statement not covered" >t</span>Stride[i]="b[i"+i+"]"}<span class="cstat-no" title="statement not covered" ></span>c</span>ode.push("proto.transpose=function "+className+"_transpose("+args+"){"+args.map(<span class="fstat-no" title="function not covered" >function(n,idx){<span class="cstat-no" title="statement not covered" ></span>return n+"=("+n+"===undefined?"+idx+":"+n+"|0)"}</span>).join(";"),"var a=this.shape,b=this.stride;return new "+className+"(this.data,"+tShape.join(",")+","+tStride.join(",")+",this.offset)}");<span class="cstat-no" title="statement not covered" >c</span>ode.push("proto.pick=function "+className+"_pick("+args+"){var a=[],b=[],c=this.offset");<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;dimension;++i){<span class="cstat-no" title="statement not covered" >code.push("if(typeof i"+i+"==='number'&amp;&amp;i"+i+"&gt;=0){c=(c+this.stride["+i+"]*i"+i+")|0}else{a.push(this.shape["+i+"]);b.push(this.stride["+i+"])}")}<span class="cstat-no" title="statement not covered" ></span>c</span>ode.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");<span class="cstat-no" title="statement not covered" >c</span>ode.push("return function construct_"+className+"(data,shape,stride,offset){return new "+className+"(data,"+indices.map(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return"shape["+i+"]"}</span>).join(",")+","+indices.map(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return"stride["+i+"]"}</span>).join(",")+",offset)}");<span class="cstat-no" title="statement not covered" >v</span>ar procedure=new Function("CTOR_LIST","ORDER",code.join("\n"));<span class="cstat-no" title="statement not covered" >r</span>eturn procedure(CACHED_CONSTRUCTORS[dtype],order)}<span class="fstat-no" title="function not covered" ></span>function arrayDType(data){<span class="cstat-no" title="statement not covered" ></span>if(isBuffer(data)){<span class="cstat-no" title="statement not covered" >return"buffer"}<span class="cstat-no" title="statement not covered" ></span>i</span>f(hasTypedArrays){<span class="cstat-no" title="statement not covered" >switch(Object.prototype.toString.call(data)){case"[object Float64Array]":<span class="cstat-no" title="statement not covered" >return"float64";c</span>ase"[object Float32Array]":<span class="cstat-no" title="statement not covered" >return"float32";c</span>ase"[object Int8Array]":<span class="cstat-no" title="statement not covered" >return"int8";c</span>ase"[object Int16Array]":<span class="cstat-no" title="statement not covered" >return"int16";c</span>ase"[object Int32Array]":<span class="cstat-no" title="statement not covered" >return"int32";c</span>ase"[object Uint8Array]":<span class="cstat-no" title="statement not covered" >return"uint8";c</span>ase"[object Uint16Array]":<span class="cstat-no" title="statement not covered" >return"uint16";c</span>ase"[object Uint32Array]":<span class="cstat-no" title="statement not covered" >return"uint32";c</span>ase"[object Uint8ClampedArray]":<span class="cstat-no" title="statement not covered" >return"uint8_clamped"}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(Array.isArray(data)){<span class="cstat-no" title="statement not covered" >return"array"}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn"generic"}<span class="cstat-no" title="statement not covered" ></span>var CACHED_CONSTRUCTORS={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" ></span>function(){<span class="cstat-no" title="statement not covered" ></span>for(var id in CACHED_CONSTRUCTORS){<span class="cstat-no" title="statement not covered" >CACHED_CONSTRUCTORS[id].push(compileConstructor(id,-1))}</span>}</span>);<span class="fstat-no" title="function not covered" >f</span>unction wrappedNDArrayCtor(data,shape,stride,offset){<span class="cstat-no" title="statement not covered" ></span>if(data===undefined){<span class="cstat-no" title="statement not covered" >var ctor=CACHED_CONSTRUCTORS.array[0];<span class="cstat-no" title="statement not covered" >r</span>eturn ctor([])}</span>else <span class="cstat-no" title="statement not covered" >if(typeof data==="number"){<span class="cstat-no" title="statement not covered" >data=[data]}<span class="cstat-no" title="statement not covered" ></span>i</span></span>f(shape===undefined){<span class="cstat-no" title="statement not covered" >shape=[data.length]}<span class="cstat-no" title="statement not covered" ></span>v</span>ar d=shape.length;<span class="cstat-no" title="statement not covered" >i</span>f(stride===undefined){<span class="cstat-no" title="statement not covered" >stride=new Array(d);<span class="cstat-no" title="statement not covered" >f</span>or(var i=d-1,sz=1;i&gt;=0;--i){<span class="cstat-no" title="statement not covered" >stride[i]=sz;<span class="cstat-no" title="statement not covered" >s</span>z*=shape[i]}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(offset===undefined){<span class="cstat-no" title="statement not covered" >offset=0;<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;d;++i){<span class="cstat-no" title="statement not covered" >if(stride[i]&lt;0){<span class="cstat-no" title="statement not covered" >offset-=(shape[i]-1)*stride[i]}</span>}</span>}<span class="cstat-no" title="statement not covered" ></span>v</span>ar dtype=arrayDType(data);<span class="cstat-no" title="statement not covered" >v</span>ar ctor_list=CACHED_CONSTRUCTORS[dtype];<span class="cstat-no" title="statement not covered" >w</span>hile(ctor_list.length&lt;=d+1){<span class="cstat-no" title="statement not covered" >ctor_list.push(compileConstructor(dtype,ctor_list.length-1))}<span class="cstat-no" title="statement not covered" ></span>v</span>ar ctor=ctor_list[d+1];<span class="cstat-no" title="statement not covered" >r</span>eturn ctor(data,shape,stride,offset)}<span class="cstat-no" title="statement not covered" ></span>module.exports=wrappedNDArrayCtor}</span>,{"iota-array":29,"is-buffer":30}],44:[function(require,module,exports){(function(){"use strict";<span class="fstat-no" title="function not covered" >function bind1(a,b){<span class="cstat-no" title="statement not covered" ></span>a(b());<span class="cstat-no" title="statement not covered" >b</span>(a)}<span class="fstat-no" title="function not covered" ></span>function bind2(a,b){<span class="cstat-no" title="statement not covered" ></span>b(a());<span class="cstat-no" title="statement not covered" >a</span>(b);<span class="cstat-no" title="statement not covered" >b</span>(a)}<span class="fstat-no" title="function not covered" ></span>function isGet(val){<span class="cstat-no" title="statement not covered" ></span>return undefined===val}<span class="fstat-no" title="function not covered" ></span>function isSet(val){<span class="cstat-no" title="statement not covered" ></span>return"function"!==typeof val}<span class="fstat-no" title="function not covered" ></span>function isFunction(fun){<span class="cstat-no" title="statement not covered" ></span>return"function"===typeof fun}<span class="fstat-no" title="function not covered" ></span>function assertObservable(observable){<span class="cstat-no" title="statement not covered" ></span>if(!isFunction(observable))<span class="cstat-no" title="statement not covered" >throw new Error("transform expects an observable");<span class="cstat-no" title="statement not covered" >r</span></span>eturn observable}<span class="fstat-no" title="function not covered" ></span>function all(ary,val){<span class="cstat-no" title="statement not covered" ></span>for(var k in ary)<span class="cstat-no" title="statement not covered" >ary[k](val)}<span class="fstat-no" title="function not covered" ></span></span>function remove(ary,item){<span class="cstat-no" title="statement not covered" ></span>delete ary[ary.indexOf(item)]}<span class="fstat-no" title="function not covered" ></span>function on(emitter,event,listener){<span class="cstat-no" title="statement not covered" ></span>(emitter.on||emitter.addEventListener).call(emitter,event,listener,false)}<span class="fstat-no" title="function not covered" ></span>function off(emitter,event,listener){<span class="cstat-no" title="statement not covered" ></span>(emitter.removeListener||emitter.removeEventListener||emitter.off).call(emitter,event,listener,false)}<span class="fstat-no" title="function not covered" ></span>function value(initialValue){<span class="cstat-no" title="statement not covered" ></span>var _val=initialValue,listeners=[];<span class="cstat-no" title="statement not covered" >o</span>bservable.set=<span class="fstat-no" title="function not covered" >function(val){<span class="cstat-no" title="statement not covered" ></span>all(listeners,_val=val)}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn observable;<span class="fstat-no" title="function not covered" >f</span>unction observable(val){<span class="cstat-no" title="statement not covered" ></span>return isGet(val)?_val:isSet(val)?all(listeners,_val=val):(listeners.push(val),val(_val),<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>remove(listeners,val)}</span>)}</span>}<span class="fstat-no" title="function not covered" >function property(model,key){<span class="cstat-no" title="statement not covered" ></span>return <span class="fstat-no" title="function not covered" >function(val){<span class="cstat-no" title="statement not covered" ></span>return isGet(val)?model.get(key):isSet(val)?model.set(key,val):(on(model,"change:"+key,val),val(model.get(key)),<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>off(model,"change:"+key,val)}</span>)}</span>}<span class="fstat-no" title="function not covered" ></span>function transform(observable,down,up){<span class="cstat-no" title="statement not covered" ></span>assertObservable(observable);<span class="cstat-no" title="statement not covered" >r</span>eturn <span class="fstat-no" title="function not covered" >function(val){<span class="cstat-no" title="statement not covered" ></span>return isGet(val)?down(observable()):isSet(val)?observable((up||down)(val)):observable(<span class="fstat-no" title="function not covered" >function(_val){<span class="cstat-no" title="statement not covered" ></span>val(down(_val))}</span>)}</span>}<span class="fstat-no" title="function not covered" ></span>function not(observable){<span class="cstat-no" title="statement not covered" ></span>return transform(observable,<span class="fstat-no" title="function not covered" >function(v){<span class="cstat-no" title="statement not covered" ></span>return!v}</span>)}<span class="fstat-no" title="function not covered" ></span>function listen(element,event,attr,listener){<span class="fstat-no" title="function not covered" ></span>function onEvent(){<span class="cstat-no" title="statement not covered" ></span>listener(isFunction(attr)?attr():element[attr])}<span class="cstat-no" title="statement not covered" ></span>on(element,event,onEvent);<span class="cstat-no" title="statement not covered" >o</span>nEvent();<span class="cstat-no" title="statement not covered" >r</span>eturn <span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>off(element,event,onEvent)}</span>}<span class="fstat-no" title="function not covered" ></span>function attribute(element,attr,event){<span class="cstat-no" title="statement not covered" ></span>attr=attr||"value";<span class="cstat-no" title="statement not covered" >e</span>vent=event||"input";<span class="cstat-no" title="statement not covered" >r</span>eturn <span class="fstat-no" title="function not covered" >function(val){<span class="cstat-no" title="statement not covered" ></span>return isGet(val)?element[attr]:isSet(val)?element[attr]=val:listen(element,event,attr,val)}</span>}<span class="fstat-no" title="function not covered" ></span>function select(element){<span class="fstat-no" title="function not covered" ></span>function _attr(){<span class="cstat-no" title="statement not covered" ></span>return element[element.selectedIndex].value}<span class="fstat-no" title="function not covered" ></span>function _set(val){<span class="cstat-no" title="statement not covered" ></span>for(var i=0;i&lt;element.options.length;i++){<span class="cstat-no" title="statement not covered" >if(element.options[i].value==val)<span class="cstat-no" title="statement not covered" >element.selectedIndex=i}</span></span>}<span class="cstat-no" title="statement not covered" ></span>return <span class="fstat-no" title="function not covered" >function(val){<span class="cstat-no" title="statement not covered" ></span>return isGet(val)?element.options[element.selectedIndex].value:isSet(val)?_set(val):listen(element,"change",_attr,val)}</span>}<span class="fstat-no" title="function not covered" ></span>function toggle(el,up,down){<span class="cstat-no" title="statement not covered" ></span>var i=false;<span class="cstat-no" title="statement not covered" >r</span>eturn <span class="fstat-no" title="function not covered" >function(val){<span class="fstat-no" title="function not covered" ></span>function onUp(){<span class="cstat-no" title="statement not covered" ></span>i||val(i=true)}<span class="fstat-no" title="function not covered" ></span>function onDown(){<span class="cstat-no" title="statement not covered" ></span>i&amp;&amp;val(i=false)}<span class="cstat-no" title="statement not covered" ></span>return isGet(val)?i:isSet(val)?undefined:(on(el,up,onUp),on(el,down||up,onDown),val(i),<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>off(el,up,onUp);<span class="cstat-no" title="statement not covered" >o</span>ff(el,down||up,onDown)}</span>)}</span>}<span class="fstat-no" title="function not covered" ></span>function error(message){<span class="cstat-no" title="statement not covered" ></span>throw new Error(message)}<span class="fstat-no" title="function not covered" ></span>function compute(observables,compute){<span class="cstat-no" title="statement not covered" ></span>var cur=observables.map(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return e()}</span>),init=true;<span class="cstat-no" title="statement not covered" >v</span>ar v=value();<span class="cstat-no" title="statement not covered" >o</span>bservables.forEach(<span class="fstat-no" title="function not covered" >function(f,i){<span class="cstat-no" title="statement not covered" ></span>f(<span class="fstat-no" title="function not covered" >function(val){<span class="cstat-no" title="statement not covered" ></span>cur[i]=val;<span class="cstat-no" title="statement not covered" >i</span>f(init)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >v</span></span>(compute.apply(null,cur))}</span>)}</span>);<span class="cstat-no" title="statement not covered" >v</span>(compute.apply(null,cur));<span class="cstat-no" title="statement not covered" >i</span>nit=false;<span class="cstat-no" title="statement not covered" >v</span>(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>compute.apply(null,cur)}</span>);<span class="cstat-no" title="statement not covered" >r</span>eturn v}<span class="fstat-no" title="function not covered" ></span>function boolean(observable,truthy,falsey){<span class="cstat-no" title="statement not covered" ></span>return transform(observable,<span class="fstat-no" title="function not covered" >function(val){<span class="cstat-no" title="statement not covered" ></span>return val?truthy:falsey}</span>,<span class="fstat-no" title="function not covered" >function(val){<span class="cstat-no" title="statement not covered" ></span>return val==truthy?true:false}</span>)}<span class="fstat-no" title="function not covered" ></span>function signal(){<span class="cstat-no" title="statement not covered" ></span>var _val,listeners=[];<span class="cstat-no" title="statement not covered" >r</span>eturn <span class="fstat-no" title="function not covered" >function(val){<span class="cstat-no" title="statement not covered" ></span>return isGet(val)?_val:isSet(val)?!(_val===val)?all(listeners,_val=val):"":(listeners.push(val),val(_val),<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>remove(listeners,val)}</span>)}</span>}</span>var exports=value;exports.bind1=bind1;exports.bind2=bind2;exports.value=value;exports.not=not;exports.property=property;exports.input=exports.attribute=attribute;exports.select=select;exports.compute=compute;exports.transform=transform;exports.boolean=boolean;exports.toggle=toggle;exports.hover=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return toggle(e,"mouseover","mouseout")}</span>;exports.focus=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return toggle(e,"focus","blur")}</span>;exports.signal=signal;<span class="missing-if-branch" title="else path not taken" >E</span>if("object"===typeof module)module.exports=exports;else <span class="cstat-no" title="statement not covered" >window.observable=exports}</span>)()},{}],45:[function(require,module,exports){var process=module.exports={};process.nextTick=function(){var canSetImmediate=typeof window!=="undefined"&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >window.setImmediate;</span>var canPost=typeof window!=="undefined"&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >window.postMessage&amp;</span>&amp;<span class="branch-2 cbranch-no" title="branch not covered" >window.addEventListener;<span class="missing-if-branch" title="if path not taken" >I</span></span>if(canSetImmediate){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >function(f){<span class="cstat-no" title="statement not covered" ></span>return window.setImmediate(f)}</span>}<span class="missing-if-branch" title="if path not taken" >I</span></span>if(canPost){<span class="cstat-no" title="statement not covered" >var queue=[];<span class="cstat-no" title="statement not covered" >w</span>indow.addEventListener("message",<span class="fstat-no" title="function not covered" >function(ev){<span class="cstat-no" title="statement not covered" ></span>var source=ev.source;<span class="cstat-no" title="statement not covered" >i</span>f((source===window||source===null)&amp;&amp;ev.data==="process-tick"){<span class="cstat-no" title="statement not covered" >ev.stopPropagation();<span class="cstat-no" title="statement not covered" >i</span>f(queue.length&gt;0){<span class="cstat-no" title="statement not covered" >var fn=queue.shift();<span class="cstat-no" title="statement not covered" >f</span>n()}</span>}</span>}</span>,true);<span class="cstat-no" title="statement not covered" >r</span>eturn <span class="fstat-no" title="function not covered" >function nextTick(fn){<span class="cstat-no" title="statement not covered" ></span>queue.push(fn);<span class="cstat-no" title="statement not covered" >w</span>indow.postMessage("process-tick","*")}</span>}</span>return <span class="fstat-no" title="function not covered" >function nextTick(fn){<span class="cstat-no" title="statement not covered" ></span>setTimeout(fn,0)}</span>}();process.title="browser";process.browser=true;process.env={};process.argv=[];<span class="fstat-no" title="function not covered" >function noop(){</span>}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=<span class="fstat-no" title="function not covered" >function(name){<span class="cstat-no" title="statement not covered" ></span>throw new Error("process.binding is not supported")}</span>;process.cwd=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return"/"}</span>;process.chdir=<span class="fstat-no" title="function not covered" >function(dir){<span class="cstat-no" title="statement not covered" ></span>throw new Error("process.chdir is not supported")}</span>},{}],46:[function(require,module,exports){(function(global){(function(root){var freeExports=typeof exports=="object"&amp;&amp;exports;var freeModule=typeof module=="object"&amp;&amp;module&amp;&amp;module.exports==freeExports&amp;&amp;module;var freeGlobal=typeof global=="object"&amp;&amp;global;<span class="missing-if-branch" title="if path not taken" >I</span>if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal){<span class="cstat-no" title="statement not covered" >root=freeGlobal}</span>var punycode,maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexPunycode=/^xn--/,regexNonASCII=/[^ -~]/,regexSeparators=/\x2E|\u3002|\uFF0E|\uFF61/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input &gt;= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode,key;<span class="fstat-no" title="function not covered" >function error(type){<span class="cstat-no" title="statement not covered" ></span>throw RangeError(errors[type])}<span class="fstat-no" title="function not covered" ></span>function map(array,fn){<span class="cstat-no" title="statement not covered" ></span>var length=array.length;<span class="cstat-no" title="statement not covered" >w</span>hile(length--){<span class="cstat-no" title="statement not covered" >array[length]=fn(array[length])}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn array}<span class="fstat-no" title="function not covered" ></span>function mapDomain(string,fn){<span class="cstat-no" title="statement not covered" ></span>return map(string.split(regexSeparators),fn).join(".")}<span class="fstat-no" title="function not covered" ></span>function ucs2decode(string){<span class="cstat-no" title="statement not covered" ></span>var output=[],counter=0,length=string.length,value,extra;<span class="cstat-no" title="statement not covered" >w</span>hile(counter&lt;length){<span class="cstat-no" title="statement not covered" >value=string.charCodeAt(counter++);<span class="cstat-no" title="statement not covered" >i</span>f(value&gt;=55296&amp;&amp;value&lt;=56319&amp;&amp;counter&lt;length){<span class="cstat-no" title="statement not covered" >extra=string.charCodeAt(counter++);<span class="cstat-no" title="statement not covered" >i</span>f((extra&amp;64512)==56320){<span class="cstat-no" title="statement not covered" >output.push(((value&amp;1023)&lt;&lt;10)+(extra&amp;1023)+65536)}</span>else{<span class="cstat-no" title="statement not covered" >output.push(value);<span class="cstat-no" title="statement not covered" >c</span>ounter--}</span>}</span>else{<span class="cstat-no" title="statement not covered" >output.push(value)}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn output}<span class="fstat-no" title="function not covered" ></span>function ucs2encode(array){<span class="cstat-no" title="statement not covered" ></span>return map(array,<span class="fstat-no" title="function not covered" >function(value){<span class="cstat-no" title="statement not covered" ></span>var output="";<span class="cstat-no" title="statement not covered" >i</span>f(value&gt;65535){<span class="cstat-no" title="statement not covered" >value-=65536;<span class="cstat-no" title="statement not covered" >o</span>utput+=stringFromCharCode(value&gt;&gt;&gt;10&amp;1023|55296);<span class="cstat-no" title="statement not covered" >v</span>alue=56320|value&amp;1023}<span class="cstat-no" title="statement not covered" ></span>o</span>utput+=stringFromCharCode(value);<span class="cstat-no" title="statement not covered" >r</span>eturn output}</span>).join("")}<span class="fstat-no" title="function not covered" ></span>function basicToDigit(codePoint){<span class="cstat-no" title="statement not covered" ></span>if(codePoint-48&lt;10){<span class="cstat-no" title="statement not covered" >return codePoint-22}<span class="cstat-no" title="statement not covered" ></span>i</span>f(codePoint-65&lt;26){<span class="cstat-no" title="statement not covered" >return codePoint-65}<span class="cstat-no" title="statement not covered" ></span>i</span>f(codePoint-97&lt;26){<span class="cstat-no" title="statement not covered" >return codePoint-97}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn base}<span class="fstat-no" title="function not covered" ></span>function digitToBasic(digit,flag){<span class="cstat-no" title="statement not covered" ></span>return digit+22+75*(digit&lt;26)-((flag!=0)&lt;&lt;5)}<span class="fstat-no" title="function not covered" ></span>function adapt(delta,numPoints,firstTime){<span class="cstat-no" title="statement not covered" ></span>var k=0;<span class="cstat-no" title="statement not covered" >d</span>elta=firstTime?floor(delta/damp):delta&gt;&gt;1;<span class="cstat-no" title="statement not covered" >d</span>elta+=floor(delta/numPoints);<span class="cstat-no" title="statement not covered" >f</span>or(;delta&gt;baseMinusTMin*tMax&gt;&gt;1;k+=base){<span class="cstat-no" title="statement not covered" >delta=floor(delta/baseMinusTMin)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn floor(k+(baseMinusTMin+1)*delta/(delta+skew))}<span class="fstat-no" title="function not covered" ></span>function decode(input){<span class="cstat-no" title="statement not covered" ></span>var output=[],inputLength=input.length,out,i=0,n=initialN,bias=initialBias,basic,j,index,oldi,w,k,digit,t,baseMinusT;<span class="cstat-no" title="statement not covered" >b</span>asic=input.lastIndexOf(delimiter);<span class="cstat-no" title="statement not covered" >i</span>f(basic&lt;0){<span class="cstat-no" title="statement not covered" >basic=0}<span class="cstat-no" title="statement not covered" ></span>f</span>or(j=0;j&lt;basic;++j){<span class="cstat-no" title="statement not covered" >if(input.charCodeAt(j)&gt;=128){<span class="cstat-no" title="statement not covered" >error("not-basic")}<span class="cstat-no" title="statement not covered" ></span>o</span>utput.push(input.charCodeAt(j))}<span class="cstat-no" title="statement not covered" ></span>f</span>or(index=basic&gt;0?basic+1:0;index&lt;inputLength;){<span class="cstat-no" title="statement not covered" >for(oldi=i,w=1,k=base;;k+=base){<span class="cstat-no" title="statement not covered" >if(index&gt;=inputLength){<span class="cstat-no" title="statement not covered" >error("invalid-input")}<span class="cstat-no" title="statement not covered" ></span>d</span>igit=basicToDigit(input.charCodeAt(index++));<span class="cstat-no" title="statement not covered" >i</span>f(digit&gt;=base||digit&gt;floor((maxInt-i)/w)){<span class="cstat-no" title="statement not covered" >error("overflow")}<span class="cstat-no" title="statement not covered" ></span>i</span>+=digit*w;<span class="cstat-no" title="statement not covered" >t</span>=k&lt;=bias?tMin:k&gt;=bias+tMax?tMax:k-bias;<span class="cstat-no" title="statement not covered" >i</span>f(digit&lt;t){<span class="cstat-no" title="statement not covered" >break}<span class="cstat-no" title="statement not covered" ></span>b</span>aseMinusT=base-t;<span class="cstat-no" title="statement not covered" >i</span>f(w&gt;floor(maxInt/baseMinusT)){<span class="cstat-no" title="statement not covered" >error("overflow")}<span class="cstat-no" title="statement not covered" ></span>w</span>*=baseMinusT}<span class="cstat-no" title="statement not covered" ></span>o</span>ut=output.length+1;<span class="cstat-no" title="statement not covered" >b</span>ias=adapt(i-oldi,out,oldi==0);<span class="cstat-no" title="statement not covered" >i</span>f(floor(i/out)&gt;maxInt-n){<span class="cstat-no" title="statement not covered" >error("overflow")}<span class="cstat-no" title="statement not covered" ></span>n</span>+=floor(i/out);<span class="cstat-no" title="statement not covered" >i</span>%=out;<span class="cstat-no" title="statement not covered" >o</span>utput.splice(i++,0,n)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn ucs2encode(output)}<span class="fstat-no" title="function not covered" ></span>function encode(input){<span class="cstat-no" title="statement not covered" ></span>var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,output=[],inputLength,handledCPCountPlusOne,baseMinusT,qMinusT;<span class="cstat-no" title="statement not covered" >i</span>nput=ucs2decode(input);<span class="cstat-no" title="statement not covered" >i</span>nputLength=input.length;<span class="cstat-no" title="statement not covered" >n</span>=initialN;<span class="cstat-no" title="statement not covered" >d</span>elta=0;<span class="cstat-no" title="statement not covered" >b</span>ias=initialBias;<span class="cstat-no" title="statement not covered" >f</span>or(j=0;j&lt;inputLength;++j){<span class="cstat-no" title="statement not covered" >currentValue=input[j];<span class="cstat-no" title="statement not covered" >i</span>f(currentValue&lt;128){<span class="cstat-no" title="statement not covered" >output.push(stringFromCharCode(currentValue))}</span>}<span class="cstat-no" title="statement not covered" ></span>h</span>andledCPCount=basicLength=output.length;<span class="cstat-no" title="statement not covered" >i</span>f(basicLength){<span class="cstat-no" title="statement not covered" >output.push(delimiter)}<span class="cstat-no" title="statement not covered" ></span>w</span>hile(handledCPCount&lt;inputLength){<span class="cstat-no" title="statement not covered" >for(m=maxInt,j=0;j&lt;inputLength;++j){<span class="cstat-no" title="statement not covered" >currentValue=input[j];<span class="cstat-no" title="statement not covered" >i</span>f(currentValue&gt;=n&amp;&amp;currentValue&lt;m){<span class="cstat-no" title="statement not covered" >m=currentValue}</span>}<span class="cstat-no" title="statement not covered" ></span>h</span>andledCPCountPlusOne=handledCPCount+1;<span class="cstat-no" title="statement not covered" >i</span>f(m-n&gt;floor((maxInt-delta)/handledCPCountPlusOne)){<span class="cstat-no" title="statement not covered" >error("overflow")}<span class="cstat-no" title="statement not covered" ></span>d</span>elta+=(m-n)*handledCPCountPlusOne;<span class="cstat-no" title="statement not covered" >n</span>=m;<span class="cstat-no" title="statement not covered" >f</span>or(j=0;j&lt;inputLength;++j){<span class="cstat-no" title="statement not covered" >currentValue=input[j];<span class="cstat-no" title="statement not covered" >i</span>f(currentValue&lt;n&amp;&amp;++delta&gt;maxInt){<span class="cstat-no" title="statement not covered" >error("overflow")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(currentValue==n){<span class="cstat-no" title="statement not covered" >for(q=delta,k=base;;k+=base){<span class="cstat-no" title="statement not covered" >t=k&lt;=bias?tMin:k&gt;=bias+tMax?tMax:k-bias;<span class="cstat-no" title="statement not covered" >i</span>f(q&lt;t){<span class="cstat-no" title="statement not covered" >break}<span class="cstat-no" title="statement not covered" ></span>q</span>MinusT=q-t;<span class="cstat-no" title="statement not covered" >b</span>aseMinusT=base-t;<span class="cstat-no" title="statement not covered" >o</span>utput.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0)));<span class="cstat-no" title="statement not covered" >q</span>=floor(qMinusT/baseMinusT)}<span class="cstat-no" title="statement not covered" ></span>o</span>utput.push(stringFromCharCode(digitToBasic(q,0)));<span class="cstat-no" title="statement not covered" >b</span>ias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength);<span class="cstat-no" title="statement not covered" >d</span>elta=0;<span class="cstat-no" title="statement not covered" >+</span>+handledCPCount}</span>}<span class="cstat-no" title="statement not covered" ></span>+</span>+delta;<span class="cstat-no" title="statement not covered" >+</span>+n}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn output.join("")}<span class="fstat-no" title="function not covered" ></span>function toUnicode(domain){<span class="cstat-no" title="statement not covered" ></span>return mapDomain(domain,<span class="fstat-no" title="function not covered" >function(string){<span class="cstat-no" title="statement not covered" ></span>return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string}</span>)}<span class="fstat-no" title="function not covered" ></span>function toASCII(domain){<span class="cstat-no" title="statement not covered" ></span>return mapDomain(domain,<span class="fstat-no" title="function not covered" >function(string){<span class="cstat-no" title="statement not covered" ></span>return regexNonASCII.test(string)?"xn--"+encode(string):string}</span>)}</span>punycode={version:"1.2.4",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:toASCII,toUnicode:toUnicode};<span class="missing-if-branch" title="if path not taken" >I</span>if(typeof define=="function"&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >typeof define.amd=="object"&amp;</span>&amp;<span class="branch-2 cbranch-no" title="branch not covered" >define.amd)</span>{<span class="cstat-no" title="statement not covered" >define("punycode",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return punycode}</span>)}</span>else <span class="missing-if-branch" title="else path not taken" >E</span>if(freeExports&amp;&amp;!freeExports.nodeType){<span class="missing-if-branch" title="else path not taken" >E</span>if(freeModule){freeModule.exports=punycode}else{<span class="cstat-no" title="statement not covered" >for(key in punycode){<span class="cstat-no" title="statement not covered" >punycode.hasOwnProperty(key)&amp;&amp;(freeExports[key]=punycode[key])}</span>}</span>}else{<span class="cstat-no" title="statement not covered" >root.punycode=punycode}</span>})(this)}).call(this,typeof self!=="undefined"?<span class="branch-0 cbranch-no" title="branch not covered" >self:</span>typeof window!=="undefined"?<span class="branch-0 cbranch-no" title="branch not covered" >window:</span>{})},{}],47:[function(require,module,exports){"use strict";<span class="fstat-no" title="function not covered" >function hasOwnProperty(obj,prop){<span class="cstat-no" title="statement not covered" ></span>return Object.prototype.hasOwnProperty.call(obj,prop)}</span>module.exports=<span class="fstat-no" title="function not covered" >function(qs,sep,eq,options){<span class="cstat-no" title="statement not covered" ></span>sep=sep||"&amp;";<span class="cstat-no" title="statement not covered" >e</span>q=eq||"=";<span class="cstat-no" title="statement not covered" >v</span>ar obj={};<span class="cstat-no" title="statement not covered" >i</span>f(typeof qs!=="string"||qs.length===0){<span class="cstat-no" title="statement not covered" >return obj}<span class="cstat-no" title="statement not covered" ></span>v</span>ar regexp=/\+/g;<span class="cstat-no" title="statement not covered" >q</span>s=qs.split(sep);<span class="cstat-no" title="statement not covered" >v</span>ar maxKeys=1e3;<span class="cstat-no" title="statement not covered" >i</span>f(options&amp;&amp;typeof options.maxKeys==="number"){<span class="cstat-no" title="statement not covered" >maxKeys=options.maxKeys}<span class="cstat-no" title="statement not covered" ></span>v</span>ar len=qs.length;<span class="cstat-no" title="statement not covered" >i</span>f(maxKeys&gt;0&amp;&amp;len&gt;maxKeys){<span class="cstat-no" title="statement not covered" >len=maxKeys}<span class="cstat-no" title="statement not covered" ></span>f</span>or(var i=0;i&lt;len;++i){<span class="cstat-no" title="statement not covered" >var x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq),kstr,vstr,k,v;<span class="cstat-no" title="statement not covered" >i</span>f(idx&gt;=0){<span class="cstat-no" title="statement not covered" >kstr=x.substr(0,idx);<span class="cstat-no" title="statement not covered" >v</span>str=x.substr(idx+1)}</span>else{<span class="cstat-no" title="statement not covered" >kstr=x;<span class="cstat-no" title="statement not covered" >v</span>str=""}<span class="cstat-no" title="statement not covered" ></span>k</span>=decodeURIComponent(kstr);<span class="cstat-no" title="statement not covered" >v</span>=decodeURIComponent(vstr);<span class="cstat-no" title="statement not covered" >i</span>f(!hasOwnProperty(obj,k)){<span class="cstat-no" title="statement not covered" >obj[k]=v}</span>else <span class="cstat-no" title="statement not covered" >if(isArray(obj[k])){<span class="cstat-no" title="statement not covered" >obj[k].push(v)}</span>else{<span class="cstat-no" title="statement not covered" >obj[k]=[obj[k],v]}</span>}<span class="cstat-no" title="statement not covered" ></span></span>r</span>eturn obj}</span>;var isArray=Array.isArray||<span class="fstat-no" title="function not covered" ><span class="branch-1 cbranch-no" title="branch not covered" >function(xs){<span class="cstat-no" title="statement not covered" ></span>return Object.prototype.toString.call(xs)==="[object Array]"}</span>}</span>,{}],48:[function(require,module,exports){"use strict";var stringifyPrimitive=<span class="fstat-no" title="function not covered" >function(v){<span class="cstat-no" title="statement not covered" ></span>switch(typeof v){case"string":<span class="cstat-no" title="statement not covered" >return v;c</span>ase"boolean":<span class="cstat-no" title="statement not covered" >return v?"true":"false";c</span>ase"number":<span class="cstat-no" title="statement not covered" >return isFinite(v)?v:"";d</span>efault:<span class="cstat-no" title="statement not covered" >return""}</span>}</span>;module.exports=<span class="fstat-no" title="function not covered" >function(obj,sep,eq,name){<span class="cstat-no" title="statement not covered" ></span>sep=sep||"&amp;";<span class="cstat-no" title="statement not covered" >e</span>q=eq||"=";<span class="cstat-no" title="statement not covered" >i</span>f(obj===null){<span class="cstat-no" title="statement not covered" >obj=undefined}<span class="cstat-no" title="statement not covered" ></span>i</span>f(typeof obj==="object"){<span class="cstat-no" title="statement not covered" >return map(objectKeys(obj),<span class="fstat-no" title="function not covered" >function(k){<span class="cstat-no" title="statement not covered" ></span>var ks=encodeURIComponent(stringifyPrimitive(k))+eq;<span class="cstat-no" title="statement not covered" >i</span>f(isArray(obj[k])){<span class="cstat-no" title="statement not covered" >return obj[k].map(<span class="fstat-no" title="function not covered" >function(v){<span class="cstat-no" title="statement not covered" ></span>return ks+encodeURIComponent(stringifyPrimitive(v))}</span>).join(sep)}</span>else{<span class="cstat-no" title="statement not covered" >return ks+encodeURIComponent(stringifyPrimitive(obj[k]))}</span>}</span>).join(sep)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!name)<span class="cstat-no" title="statement not covered" >return"";<span class="cstat-no" title="statement not covered" >r</span></span>eturn encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj))}</span>;var isArray=Array.isArray||<span class="fstat-no" title="function not covered" ><span class="branch-1 cbranch-no" title="branch not covered" >function(xs){<span class="cstat-no" title="statement not covered" ></span>return Object.prototype.toString.call(xs)==="[object Array]"}</span>;<span class="fstat-no" title="function not covered" ></span>function map(xs,f){<span class="cstat-no" title="statement not covered" ></span>if(xs.map)<span class="cstat-no" title="statement not covered" >return xs.map(f);<span class="cstat-no" title="statement not covered" >v</span></span>ar res=[];<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;xs.length;i++){<span class="cstat-no" title="statement not covered" >res.push(f(xs[i],i))}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn res}</span>var objectKeys=Object.keys||<span class="fstat-no" title="function not covered" ><span class="branch-1 cbranch-no" title="branch not covered" >function(obj){<span class="cstat-no" title="statement not covered" ></span>var res=[];<span class="cstat-no" title="statement not covered" >f</span>or(var key in obj){<span class="cstat-no" title="statement not covered" >if(Object.prototype.hasOwnProperty.call(obj,key))<span class="cstat-no" title="statement not covered" >res.push(key)}<span class="cstat-no" title="statement not covered" ></span></span>r</span>eturn res}</span>}</span>,{}],49:[function(require,module,exports){"use strict";exports.decode=exports.parse=require("./decode");exports.encode=exports.stringify=require("./encode")},{"./decode":47,"./encode":48}],50:[<span class="fstat-no" title="function not covered" >function(require,module,exports){<span class="cstat-no" title="statement not covered" ></span>var Stream=require("stream");<span class="cstat-no" title="statement not covered" >v</span>ar sockjs=require("sockjs-client");<span class="cstat-no" title="statement not covered" >v</span>ar resolve=require("url").resolve;<span class="cstat-no" title="statement not covered" >v</span>ar parse=require("url").parse;<span class="cstat-no" title="statement not covered" >m</span>odule.exports=<span class="fstat-no" title="function not covered" >function(u,cb){<span class="cstat-no" title="statement not covered" ></span>var uri=parse(u).protocol?u:resolve(window.location.href,u);<span class="cstat-no" title="statement not covered" >v</span>ar stream=new Stream;<span class="cstat-no" title="statement not covered" >s</span>tream.readable=true;<span class="cstat-no" title="statement not covered" >s</span>tream.writable=true;<span class="cstat-no" title="statement not covered" >v</span>ar ready=false;<span class="cstat-no" title="statement not covered" >v</span>ar buffer=[];<span class="cstat-no" title="statement not covered" >v</span>ar sock=sockjs(uri);<span class="cstat-no" title="statement not covered" >s</span>tream.sock=sock;<span class="cstat-no" title="statement not covered" >s</span>tream.write=<span class="fstat-no" title="function not covered" >function(msg){<span class="cstat-no" title="statement not covered" ></span>if(!ready||buffer.length)<span class="cstat-no" title="statement not covered" >buffer.push(msg);e</span>lse <span class="cstat-no" title="statement not covered" >sock.send(msg)}</span></span>;<span class="cstat-no" title="statement not covered" >s</span>tream.end=<span class="fstat-no" title="function not covered" >function(msg){<span class="cstat-no" title="statement not covered" ></span>if(msg!==undefined)<span class="cstat-no" title="statement not covered" >stream.write(msg);<span class="cstat-no" title="statement not covered" >i</span></span>f(!ready){<span class="cstat-no" title="statement not covered" >stream._ended=true;<span class="cstat-no" title="statement not covered" >r</span>eturn}<span class="cstat-no" title="statement not covered" ></span>s</span>tream.writable=false;<span class="cstat-no" title="statement not covered" >s</span>ock.close()}</span>;<span class="cstat-no" title="statement not covered" >s</span>tream.destroy=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>stream._ended=true;<span class="cstat-no" title="statement not covered" >s</span>tream.writable=stream.readable=false;<span class="cstat-no" title="statement not covered" >b</span>uffer.length=0;<span class="cstat-no" title="statement not covered" >s</span>ock.close()}</span>;<span class="cstat-no" title="statement not covered" >s</span>ock.onopen=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(typeof cb==="function")<span class="cstat-no" title="statement not covered" >cb();<span class="cstat-no" title="statement not covered" >r</span></span>eady=true;<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;buffer.length;i++){<span class="cstat-no" title="statement not covered" >sock.send(buffer[i])}<span class="cstat-no" title="statement not covered" ></span>b</span>uffer=[];<span class="cstat-no" title="statement not covered" >s</span>tream.emit("connect");<span class="cstat-no" title="statement not covered" >i</span>f(stream._ended)<span class="cstat-no" title="statement not covered" >stream.end()}</span></span>;<span class="cstat-no" title="statement not covered" >s</span>ock.onmessage=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>stream.emit("data",e.data)}</span>;<span class="cstat-no" title="statement not covered" >s</span>ock.onclose=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>stream.emit("end");<span class="cstat-no" title="statement not covered" >s</span>tream.writable=false;<span class="cstat-no" title="statement not covered" >s</span>tream.readable=false}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn stream}</span>}</span>,{"sockjs-client":51,stream:58,url:67}],51:[<span class="fstat-no" title="function not covered" >function(require,module,exports){<span class="cstat-no" title="statement not covered" ></span>var JSON;<span class="cstat-no" title="statement not covered" >J</span>SON||(JSON={}),<span class="fstat-no" title="function not covered" >function(){<span class="fstat-no" title="function not covered" ></span>function str(a,b){<span class="cstat-no" title="statement not covered" ></span>var c,d,e,f,g=gap,h,i=b[a];<span class="cstat-no" title="statement not covered" >i</span>&amp;&amp;typeof i=="object"&amp;&amp;typeof i.toJSON=="function"&amp;&amp;(i=i.toJSON(a)),typeof rep=="function"&amp;&amp;(i=rep.call(b,a,i));<span class="cstat-no" title="statement not covered" >s</span>witch(typeof i){case"string":<span class="cstat-no" title="statement not covered" >return quote(i);c</span>ase"number":<span class="cstat-no" title="statement not covered" >return isFinite(i)?String(i):"null";c</span>ase"boolean":case"null":<span class="cstat-no" title="statement not covered" >return String(i);c</span>ase"object":<span class="cstat-no" title="statement not covered" >if(!i)<span class="cstat-no" title="statement not covered" >return"null";<span class="cstat-no" title="statement not covered" >g</span></span>ap+=indent,h=[];<span class="cstat-no" title="statement not covered" >i</span>f(Object.prototype.toString.apply(i)==="[object Array]"){<span class="cstat-no" title="statement not covered" >f=i.length;<span class="cstat-no" title="statement not covered" >f</span>or(c=0;c&lt;f;c+=1)<span class="cstat-no" title="statement not covered" >h[c]=str(c,i)||"null";<span class="cstat-no" title="statement not covered" >e</span></span>=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g;<span class="cstat-no" title="statement not covered" >r</span>eturn e}<span class="cstat-no" title="statement not covered" ></span>i</span>f(rep&amp;&amp;typeof rep=="object"){<span class="cstat-no" title="statement not covered" >f=rep.length;<span class="cstat-no" title="statement not covered" >f</span>or(c=0;c&lt;f;c+=1)<span class="cstat-no" title="statement not covered" >typeof rep[c]=="string"&amp;&amp;(d=rep[c],e=str(d,i),e&amp;&amp;h.push(quote(d)+(gap?": ":":")+e))}</span></span>else <span class="cstat-no" title="statement not covered" >for(d in i)<span class="cstat-no" title="statement not covered" >Object.prototype.hasOwnProperty.call(i,d)&amp;&amp;(e=str(d,i),e&amp;&amp;h.push(quote(d)+(gap?": ":":")+e));<span class="cstat-no" title="statement not covered" >e</span></span></span>=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g;<span class="cstat-no" title="statement not covered" >r</span>eturn e}</span>}<span class="fstat-no" title="function not covered" ></span>function quote(a){<span class="cstat-no" title="statement not covered" ></span>escapable.lastIndex=0;<span class="cstat-no" title="statement not covered" >r</span>eturn escapable.test(a)?'"'+a.replace(escapable,<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>var b=meta[a];<span class="cstat-no" title="statement not covered" >r</span>eturn typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}</span>)+'"':'"'+a+'"'}<span class="fstat-no" title="function not covered" ></span>function f(a){<span class="cstat-no" title="statement not covered" ></span>return a&lt;10?"0"+a:a}<span class="cstat-no" title="statement not covered" ></span>"use strict",typeof Date.prototype.toJSON!="function"&amp;&amp;(Date.prototype.toJSON=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null}</span>,String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return this.valueOf()}</span>);<span class="cstat-no" title="statement not covered" >v</span>ar cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;<span class="cstat-no" title="statement not covered" >t</span>ypeof JSON.stringify!="function"&amp;&amp;(JSON.stringify=<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>var d;<span class="cstat-no" title="statement not covered" >g</span>ap="",indent="";<span class="cstat-no" title="statement not covered" >i</span>f(typeof c=="number")<span class="cstat-no" title="statement not covered" >for(d=0;d&lt;c;d+=1)<span class="cstat-no" title="statement not covered" >indent+=" ";e</span></span>lse <span class="cstat-no" title="statement not covered" >typeof c=="string"&amp;&amp;(indent=c);<span class="cstat-no" title="statement not covered" >r</span></span>ep=b;<span class="cstat-no" title="statement not covered" >i</span>f(!b||typeof b=="function"||typeof b=="object"&amp;&amp;typeof b.length=="number")<span class="cstat-no" title="statement not covered" >return str("",{"":a});<span class="cstat-no" title="statement not covered" >t</span></span>hrow new Error("JSON.stringify")}</span>),typeof JSON.parse!="function"&amp;&amp;(JSON.parse=<span class="fstat-no" title="function not covered" >function(text,reviver){<span class="fstat-no" title="function not covered" ></span>function walk(a,b){<span class="cstat-no" title="statement not covered" ></span>var c,d,e=a[b];<span class="cstat-no" title="statement not covered" >i</span>f(e&amp;&amp;typeof e=="object")<span class="cstat-no" title="statement not covered" >for(c in e)<span class="cstat-no" title="statement not covered" >Object.prototype.hasOwnProperty.call(e,c)&amp;&amp;(d=walk(e,c),d!==undefined?e[c]=d:delete e[c]);<span class="cstat-no" title="statement not covered" >r</span></span></span>eturn reviver.call(a,b,e)}<span class="cstat-no" title="statement not covered" ></span>var j;<span class="cstat-no" title="statement not covered" >t</span>ext=String(text),cx.lastIndex=0,cx.test(text)&amp;&amp;(text=text.replace(cx,<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}</span>));<span class="cstat-no" title="statement not covered" >i</span>f(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){<span class="cstat-no" title="statement not covered" >j=eval("("+text+")");<span class="cstat-no" title="statement not covered" >r</span>eturn typeof reviver=="function"?walk({"":j},""):j}<span class="cstat-no" title="statement not covered" ></span>t</span>hrow new SyntaxError("JSON.parse")}</span>)}</span>();<span class="cstat-no" title="statement not covered" >v</span>ar SockJS=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var _document=document;<span class="cstat-no" title="statement not covered" >v</span>ar _window=window;<span class="cstat-no" title="statement not covered" >v</span>ar utils={};<span class="cstat-no" title="statement not covered" >v</span>ar REventTarget=<span class="fstat-no" title="function not covered" >function(){</span>};<span class="cstat-no" title="statement not covered" >R</span>EventTarget.prototype.addEventListener=<span class="fstat-no" title="function not covered" >function(eventType,listener){<span class="cstat-no" title="statement not covered" ></span>if(!this._listeners){<span class="cstat-no" title="statement not covered" >this._listeners={}}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!(eventType in this._listeners)){<span class="cstat-no" title="statement not covered" >this._listeners[eventType]=[]}<span class="cstat-no" title="statement not covered" ></span>v</span>ar arr=this._listeners[eventType];<span class="cstat-no" title="statement not covered" >i</span>f(utils.arrIndexOf(arr,listener)===-1){<span class="cstat-no" title="statement not covered" >arr.push(listener)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn}</span>;<span class="cstat-no" title="statement not covered" >R</span>EventTarget.prototype.removeEventListener=<span class="fstat-no" title="function not covered" >function(eventType,listener){<span class="cstat-no" title="statement not covered" ></span>if(!(this._listeners&amp;&amp;eventType in this._listeners)){<span class="cstat-no" title="statement not covered" >return}<span class="cstat-no" title="statement not covered" ></span>v</span>ar arr=this._listeners[eventType];<span class="cstat-no" title="statement not covered" >v</span>ar idx=utils.arrIndexOf(arr,listener);<span class="cstat-no" title="statement not covered" >i</span>f(idx!==-1){<span class="cstat-no" title="statement not covered" >if(arr.length&gt;1){<span class="cstat-no" title="statement not covered" >this._listeners[eventType]=arr.slice(0,idx).concat(arr.slice(idx+1))}</span>else{<span class="cstat-no" title="statement not covered" >delete this._listeners[eventType]}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn}</span>;<span class="cstat-no" title="statement not covered" >R</span>EventTarget.prototype.dispatchEvent=<span class="fstat-no" title="function not covered" >function(event){<span class="cstat-no" title="statement not covered" ></span>var t=event.type;<span class="cstat-no" title="statement not covered" >v</span>ar args=Array.prototype.slice.call(arguments,0);<span class="cstat-no" title="statement not covered" >i</span>f(this["on"+t]){<span class="cstat-no" title="statement not covered" >this["on"+t].apply(this,args)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(this._listeners&amp;&amp;t in this._listeners){<span class="cstat-no" title="statement not covered" >for(var i=0;i&lt;this._listeners[t].length;i++){<span class="cstat-no" title="statement not covered" >this._listeners[t][i].apply(this,args)}</span>}</span>}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar SimpleEvent=<span class="fstat-no" title="function not covered" >function(type,obj){<span class="cstat-no" title="statement not covered" ></span>this.type=type;<span class="cstat-no" title="statement not covered" >i</span>f(typeof obj!=="undefined"){<span class="cstat-no" title="statement not covered" >for(var k in obj){<span class="cstat-no" title="statement not covered" >if(!obj.hasOwnProperty(k))<span class="cstat-no" title="statement not covered" >continue;<span class="cstat-no" title="statement not covered" >t</span></span>his[k]=obj[k]}</span>}</span>}</span>;<span class="cstat-no" title="statement not covered" >S</span>impleEvent.prototype.toString=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var r=[];<span class="cstat-no" title="statement not covered" >f</span>or(var k in this){<span class="cstat-no" title="statement not covered" >if(!this.hasOwnProperty(k))<span class="cstat-no" title="statement not covered" >continue;<span class="cstat-no" title="statement not covered" >v</span></span>ar v=this[k];<span class="cstat-no" title="statement not covered" >i</span>f(typeof v==="function")<span class="cstat-no" title="statement not covered" >v="[function]";<span class="cstat-no" title="statement not covered" >r</span></span>.push(k+"="+v)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn"SimpleEvent("+r.join(", ")+")"}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar EventEmitter=<span class="fstat-no" title="function not covered" >function(events){<span class="cstat-no" title="statement not covered" ></span>this.events=events||[]}</span>;<span class="cstat-no" title="statement not covered" >E</span>ventEmitter.prototype.emit=<span class="fstat-no" title="function not covered" >function(type){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >v</span>ar args=Array.prototype.slice.call(arguments,1);<span class="cstat-no" title="statement not covered" >i</span>f(!that.nuked&amp;&amp;that["on"+type]){<span class="cstat-no" title="statement not covered" >that["on"+type].apply(that,args)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(utils.arrIndexOf(that.events,type)===-1){<span class="cstat-no" title="statement not covered" >utils.log("Event "+JSON.stringify(type)+" not listed "+JSON.stringify(that.events)+" in "+that)}</span>}</span>;<span class="cstat-no" title="statement not covered" >E</span>ventEmitter.prototype.nuke=<span class="fstat-no" title="function not covered" >function(type){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >t</span>hat.nuked=true;<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;that.events.length;i++){<span class="cstat-no" title="statement not covered" >delete that[that.events[i]]}</span>}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar random_string_chars="abcdefghijklmnopqrstuvwxyz0123456789_";<span class="cstat-no" title="statement not covered" >u</span>tils.random_string=<span class="fstat-no" title="function not covered" >function(length,max){<span class="cstat-no" title="statement not covered" ></span>max=max||random_string_chars.length;<span class="cstat-no" title="statement not covered" >v</span>ar i,ret=[];<span class="cstat-no" title="statement not covered" >f</span>or(i=0;i&lt;length;i++){<span class="cstat-no" title="statement not covered" >ret.push(random_string_chars.substr(Math.floor(Math.random()*max),1))}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn ret.join("")}</span>;<span class="cstat-no" title="statement not covered" >u</span>tils.random_number=<span class="fstat-no" title="function not covered" >function(max){<span class="cstat-no" title="statement not covered" ></span>return Math.floor(Math.random()*max)}</span>;<span class="cstat-no" title="statement not covered" >u</span>tils.random_number_string=<span class="fstat-no" title="function not covered" >function(max){<span class="cstat-no" title="statement not covered" ></span>var t=(""+(max-1)).length;<span class="cstat-no" title="statement not covered" >v</span>ar p=Array(t+1).join("0");<span class="cstat-no" title="statement not covered" >r</span>eturn(p+utils.random_number(max)).slice(-t)}</span>;<span class="cstat-no" title="statement not covered" >u</span>tils.getOrigin=<span class="fstat-no" title="function not covered" >function(url){<span class="cstat-no" title="statement not covered" ></span>url+="/";<span class="cstat-no" title="statement not covered" >v</span>ar parts=url.split("/").slice(0,3);<span class="cstat-no" title="statement not covered" >r</span>eturn parts.join("/")}</span>;<span class="cstat-no" title="statement not covered" >u</span>tils.isSameOriginUrl=<span class="fstat-no" title="function not covered" >function(url_a,url_b){<span class="cstat-no" title="statement not covered" ></span>if(!url_b)<span class="cstat-no" title="statement not covered" >url_b=_window.location.href;<span class="cstat-no" title="statement not covered" >r</span></span>eturn url_a.split("/").slice(0,3).join("/")===url_b.split("/").slice(0,3).join("/")}</span>;<span class="cstat-no" title="statement not covered" >u</span>tils.getParentDomain=<span class="fstat-no" title="function not covered" >function(url){<span class="cstat-no" title="statement not covered" ></span>if(/^[0-9.]*$/.test(url))<span class="cstat-no" title="statement not covered" >return url;<span class="cstat-no" title="statement not covered" >i</span></span>f(/^\[/.test(url))<span class="cstat-no" title="statement not covered" >return url;<span class="cstat-no" title="statement not covered" >i</span></span>f(!/[.]/.test(url))<span class="cstat-no" title="statement not covered" >return url;<span class="cstat-no" title="statement not covered" >v</span></span>ar parts=url.split(".").slice(1);<span class="cstat-no" title="statement not covered" >r</span>eturn parts.join(".")}</span>;<span class="cstat-no" title="statement not covered" >u</span>tils.objectExtend=<span class="fstat-no" title="function not covered" >function(dst,src){<span class="cstat-no" title="statement not covered" ></span>for(var k in src){<span class="cstat-no" title="statement not covered" >if(src.hasOwnProperty(k)){<span class="cstat-no" title="statement not covered" >dst[k]=src[k]}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn dst}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar WPrefix="_jp";<span class="cstat-no" title="statement not covered" >u</span>tils.polluteGlobalNamespace=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(!(WPrefix in _window)){<span class="cstat-no" title="statement not covered" >_window[WPrefix]={}}</span>}</span>;<span class="cstat-no" title="statement not covered" >u</span>tils.closeFrame=<span class="fstat-no" title="function not covered" >function(code,reason){<span class="cstat-no" title="statement not covered" ></span>return"c"+JSON.stringify([code,reason])}</span>;<span class="cstat-no" title="statement not covered" >u</span>tils.userSetCode=<span class="fstat-no" title="function not covered" >function(code){<span class="cstat-no" title="statement not covered" ></span>return code===1e3||code&gt;=3e3&amp;&amp;code&lt;=4999}</span>;<span class="cstat-no" title="statement not covered" >u</span>tils.countRTO=<span class="fstat-no" title="function not covered" >function(rtt){<span class="cstat-no" title="statement not covered" ></span>var rto;<span class="cstat-no" title="statement not covered" >i</span>f(rtt&gt;100){<span class="cstat-no" title="statement not covered" >rto=3*rtt}</span>else{<span class="cstat-no" title="statement not covered" >rto=rtt+200}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn rto}</span>;<span class="cstat-no" title="statement not covered" >u</span>tils.log=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(_window.console&amp;&amp;console.log&amp;&amp;console.log.apply){<span class="cstat-no" title="statement not covered" >console.log.apply(console,arguments)}</span>}</span>;<span class="cstat-no" title="statement not covered" >u</span>tils.bind=<span class="fstat-no" title="function not covered" >function(fun,that){<span class="cstat-no" title="statement not covered" ></span>if(fun.bind){<span class="cstat-no" title="statement not covered" >return fun.bind(that)}</span>else{<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return fun.apply(that,arguments)}</span>}</span>}</span>;<span class="cstat-no" title="statement not covered" >u</span>tils.flatUrl=<span class="fstat-no" title="function not covered" >function(url){<span class="cstat-no" title="statement not covered" ></span>return url.indexOf("?")===-1&amp;&amp;url.indexOf("#")===-1}</span>;<span class="cstat-no" title="statement not covered" >u</span>tils.amendUrl=<span class="fstat-no" title="function not covered" >function(url){<span class="cstat-no" title="statement not covered" ></span>var dl=_document.location;<span class="cstat-no" title="statement not covered" >i</span>f(!url){<span class="cstat-no" title="statement not covered" >throw new Error("Wrong url for SockJS")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!utils.flatUrl(url)){<span class="cstat-no" title="statement not covered" >throw new Error("Only basic urls are supported in SockJS")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(url.indexOf("//")===0){<span class="cstat-no" title="statement not covered" >url=dl.protocol+url}<span class="cstat-no" title="statement not covered" ></span>i</span>f(url.indexOf("/")===0){<span class="cstat-no" title="statement not covered" >url=dl.protocol+"//"+dl.host+url}<span class="cstat-no" title="statement not covered" ></span>u</span>rl=url.replace(/[\/]+$/,"");<span class="cstat-no" title="statement not covered" >r</span>eturn url}</span>;<span class="cstat-no" title="statement not covered" >u</span>tils.arrIndexOf=<span class="fstat-no" title="function not covered" >function(arr,obj){<span class="cstat-no" title="statement not covered" ></span>for(var i=0;i&lt;arr.length;i++){<span class="cstat-no" title="statement not covered" >if(arr[i]===obj){<span class="cstat-no" title="statement not covered" >return i}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn-1}</span>;<span class="cstat-no" title="statement not covered" >u</span>tils.arrSkip=<span class="fstat-no" title="function not covered" >function(arr,obj){<span class="cstat-no" title="statement not covered" ></span>var idx=utils.arrIndexOf(arr,obj);<span class="cstat-no" title="statement not covered" >i</span>f(idx===-1){<span class="cstat-no" title="statement not covered" >return arr.slice()}</span>else{<span class="cstat-no" title="statement not covered" >var dst=arr.slice(0,idx);<span class="cstat-no" title="statement not covered" >r</span>eturn dst.concat(arr.slice(idx+1))}</span>}</span>;<span class="cstat-no" title="statement not covered" >u</span>tils.isArray=Array.isArray||<span class="fstat-no" title="function not covered" >function(value){<span class="cstat-no" title="statement not covered" ></span>return{}.toString.call(value).indexOf("Array")&gt;=0}</span>;<span class="cstat-no" title="statement not covered" >u</span>tils.delay=<span class="fstat-no" title="function not covered" >function(t,fun){<span class="cstat-no" title="statement not covered" ></span>if(typeof t==="function"){<span class="cstat-no" title="statement not covered" >fun=t;<span class="cstat-no" title="statement not covered" >t</span>=0}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn setTimeout(fun,t)}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar json_escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,json_lookup={"\x00":"\\u0000","<":"\\u0001",">":"\\u0002","":"\\u0003","":"\\u0004","":"\\u0005","":"\\u0006","":"\\u0007","\b":"\\b","	":"\\t","\n":"\\n","":"\\u000b","\f":"\\f","\r":"\\r","":"\\u000e","":"\\u000f","":"\\u0010","":"\\u0011","":"\\u0012","":"\\u0013","":"\\u0014","":"\\u0015","":"\\u0016","":"\\u0017","":"\\u0018","":"\\u0019","":"\\u001a","":"\\u001b","":"\\u001c","":"\\u001d","":"\\u001e","":"\\u001f",'"':'\\"',"\\":"\\\\","":"\\u007f","":"\\u0080","":"\\u0081","":"\\u0082","":"\\u0083","":"\\u0084","":"\\u0085","":"\\u0086","":"\\u0087","":"\\u0088","":"\\u0089","":"\\u008a","":"\\u008b","":"\\u008c","":"\\u008d","":"\\u008e","":"\\u008f","":"\\u0090","":"\\u0091","":"\\u0092","":"\\u0093","":"\\u0094","":"\\u0095","":"\\u0096","":"\\u0097","":"\\u0098","":"\\u0099","":"\\u009a","":"\\u009b","":"\\u009c","":"\\u009d","":"\\u009e","":"\\u009f","­":"\\u00ad","؀":"\\u0600","؁":"\\u0601","؂":"\\u0602","؃":"\\u0603","؄":"\\u0604","܏":"\\u070f","឴":"\\u17b4","឵":"\\u17b5","‌":"\\u200c","‍":"\\u200d","‎":"\\u200e","‏":"\\u200f","\u2028":"\\u2028","\u2029":"\\u2029","‪":"\\u202a","‫":"\\u202b","‬":"\\u202c","‭":"\\u202d","‮":"\\u202e"," ":"\\u202f","⁠":"\\u2060","⁡":"\\u2061","⁢":"\\u2062","⁣":"\\u2063","⁤":"\\u2064","⁥":"\\u2065","⁦":"\\u2066","⁧":"\\u2067","⁨":"\\u2068","⁩":"\\u2069","⁪":"\\u206a","⁫":"\\u206b","⁬":"\\u206c","⁭":"\\u206d","⁮":"\\u206e","⁯":"\\u206f","﻿":"\\ufeff","￰":"\\ufff0","￱":"\\ufff1","￲":"\\ufff2","￳":"\\ufff3","￴":"\\ufff4","￵":"\\ufff5","￶":"\\ufff6","￷":"\\ufff7","￸":"\\ufff8","￹":"\\ufff9","￺":"\\ufffa","￻":"\\ufffb","￼":"\\ufffc","�":"\\ufffd","￾":"\\ufffe","￿":"\\uffff"};</span></span>
<span class="cstat-no" title="statement not covered" >var extra_escapable=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,extra_lookup;<span class="cstat-no" title="statement not covered" >v</span>ar JSONQuote=JSON&amp;&amp;JSON.stringify||<span class="fstat-no" title="function not covered" >function(string){<span class="cstat-no" title="statement not covered" ></span>json_escapable.lastIndex=0;<span class="cstat-no" title="statement not covered" >i</span>f(json_escapable.test(string)){<span class="cstat-no" title="statement not covered" >string=string.replace(json_escapable,<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return json_lookup[a]}</span>)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn'"'+string+'"'}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar unroll_lookup=<span class="fstat-no" title="function not covered" >function(escapable){<span class="cstat-no" title="statement not covered" ></span>var i;<span class="cstat-no" title="statement not covered" >v</span>ar unrolled={};<span class="cstat-no" title="statement not covered" >v</span>ar c=[];<span class="cstat-no" title="statement not covered" >f</span>or(i=0;i&lt;65536;i++){<span class="cstat-no" title="statement not covered" >c.push(String.fromCharCode(i))}<span class="cstat-no" title="statement not covered" ></span>e</span>scapable.lastIndex=0;<span class="cstat-no" title="statement not covered" >c</span>.join("").replace(escapable,<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>unrolled[a]="\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);<span class="cstat-no" title="statement not covered" >r</span>eturn""}</span>);<span class="cstat-no" title="statement not covered" >e</span>scapable.lastIndex=0;<span class="cstat-no" title="statement not covered" >r</span>eturn unrolled}</span>;<span class="cstat-no" title="statement not covered" >u</span>tils.quote=<span class="fstat-no" title="function not covered" >function(string){<span class="cstat-no" title="statement not covered" ></span>var quoted=JSONQuote(string);<span class="cstat-no" title="statement not covered" >e</span>xtra_escapable.lastIndex=0;<span class="cstat-no" title="statement not covered" >i</span>f(!extra_escapable.test(quoted)){<span class="cstat-no" title="statement not covered" >return quoted}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!extra_lookup)<span class="cstat-no" title="statement not covered" >extra_lookup=unroll_lookup(extra_escapable);<span class="cstat-no" title="statement not covered" >r</span></span>eturn quoted.replace(extra_escapable,<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return extra_lookup[a]}</span>)}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar _all_protocols=["websocket","xdr-streaming","xhr-streaming","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"];<span class="cstat-no" title="statement not covered" >u</span>tils.probeProtocols=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var probed={};<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;_all_protocols.length;i++){<span class="cstat-no" title="statement not covered" >var protocol=_all_protocols[i];<span class="cstat-no" title="statement not covered" >p</span>robed[protocol]=SockJS[protocol]&amp;&amp;SockJS[protocol].enabled()}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn probed}</span>;<span class="cstat-no" title="statement not covered" >u</span>tils.detectProtocols=<span class="fstat-no" title="function not covered" >function(probed,protocols_whitelist,info){<span class="cstat-no" title="statement not covered" ></span>var pe={},protocols=[];<span class="cstat-no" title="statement not covered" >i</span>f(!protocols_whitelist)<span class="cstat-no" title="statement not covered" >protocols_whitelist=_all_protocols;<span class="cstat-no" title="statement not covered" >f</span></span>or(var i=0;i&lt;protocols_whitelist.length;i++){<span class="cstat-no" title="statement not covered" >var protocol=protocols_whitelist[i];<span class="cstat-no" title="statement not covered" >p</span>e[protocol]=probed[protocol]}<span class="cstat-no" title="statement not covered" ></span>v</span>ar maybe_push=<span class="fstat-no" title="function not covered" >function(protos){<span class="cstat-no" title="statement not covered" ></span>var proto=protos.shift();<span class="cstat-no" title="statement not covered" >i</span>f(pe[proto]){<span class="cstat-no" title="statement not covered" >protocols.push(proto)}</span>else{<span class="cstat-no" title="statement not covered" >if(protos.length&gt;0){<span class="cstat-no" title="statement not covered" >maybe_push(protos)}</span>}</span>}</span>;<span class="cstat-no" title="statement not covered" >i</span>f(info.websocket!==false){<span class="cstat-no" title="statement not covered" >maybe_push(["websocket"])}<span class="cstat-no" title="statement not covered" ></span>i</span>f(pe["xhr-streaming"]&amp;&amp;!info.null_origin){<span class="cstat-no" title="statement not covered" >protocols.push("xhr-streaming")}</span>else{<span class="cstat-no" title="statement not covered" >if(pe["xdr-streaming"]&amp;&amp;!info.cookie_needed&amp;&amp;!info.null_origin){<span class="cstat-no" title="statement not covered" >protocols.push("xdr-streaming")}</span>else{<span class="cstat-no" title="statement not covered" >maybe_push(["iframe-eventsource","iframe-htmlfile"])}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(pe["xhr-polling"]&amp;&amp;!info.null_origin){<span class="cstat-no" title="statement not covered" >protocols.push("xhr-polling")}</span>else{<span class="cstat-no" title="statement not covered" >if(pe["xdr-polling"]&amp;&amp;!info.cookie_needed&amp;&amp;!info.null_origin){<span class="cstat-no" title="statement not covered" >protocols.push("xdr-polling")}</span>else{<span class="cstat-no" title="statement not covered" >maybe_push(["iframe-xhr-polling","jsonp-polling"])}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn protocols}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar MPrefix="_sockjs_global";<span class="cstat-no" title="statement not covered" >u</span>tils.createHook=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var window_id="a"+utils.random_string(8);<span class="cstat-no" title="statement not covered" >i</span>f(!(MPrefix in _window)){<span class="cstat-no" title="statement not covered" >var map={};<span class="cstat-no" title="statement not covered" >_</span>window[MPrefix]=<span class="fstat-no" title="function not covered" >function(window_id){<span class="cstat-no" title="statement not covered" ></span>if(!(window_id in map)){<span class="cstat-no" title="statement not covered" >map[window_id]={id:window_id,del:<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>delete map[window_id]}</span>}}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn map[window_id]}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn _window[MPrefix](window_id)}</span>;<span class="cstat-no" title="statement not covered" >u</span>tils.attachMessage=<span class="fstat-no" title="function not covered" >function(listener){<span class="cstat-no" title="statement not covered" ></span>utils.attachEvent("message",listener)}</span>;<span class="cstat-no" title="statement not covered" >u</span>tils.attachEvent=<span class="fstat-no" title="function not covered" >function(event,listener){<span class="cstat-no" title="statement not covered" ></span>if(typeof _window.addEventListener!=="undefined"){<span class="cstat-no" title="statement not covered" >_window.addEventListener(event,listener,false)}</span>else{<span class="cstat-no" title="statement not covered" >_document.attachEvent("on"+event,listener);<span class="cstat-no" title="statement not covered" >_</span>window.attachEvent("on"+event,listener)}</span>}</span>;<span class="cstat-no" title="statement not covered" >u</span>tils.detachMessage=<span class="fstat-no" title="function not covered" >function(listener){<span class="cstat-no" title="statement not covered" ></span>utils.detachEvent("message",listener)}</span>;<span class="cstat-no" title="statement not covered" >u</span>tils.detachEvent=<span class="fstat-no" title="function not covered" >function(event,listener){<span class="cstat-no" title="statement not covered" ></span>if(typeof _window.addEventListener!=="undefined"){<span class="cstat-no" title="statement not covered" >_window.removeEventListener(event,listener,false)}</span>else{<span class="cstat-no" title="statement not covered" >_document.detachEvent("on"+event,listener);<span class="cstat-no" title="statement not covered" >_</span>window.detachEvent("on"+event,listener)}</span>}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar on_unload={};<span class="cstat-no" title="statement not covered" >v</span>ar after_unload=false;<span class="cstat-no" title="statement not covered" >v</span>ar trigger_unload_callbacks=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>for(var ref in on_unload){<span class="cstat-no" title="statement not covered" >on_unload[ref]();<span class="cstat-no" title="statement not covered" >d</span>elete on_unload[ref]}</span>}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar unload_triggered=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(after_unload)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >a</span></span>fter_unload=true;<span class="cstat-no" title="statement not covered" >t</span>rigger_unload_callbacks()}</span>;<span class="cstat-no" title="statement not covered" >u</span>tils.attachEvent("beforeunload",unload_triggered);<span class="cstat-no" title="statement not covered" >u</span>tils.attachEvent("unload",unload_triggered);<span class="cstat-no" title="statement not covered" >u</span>tils.unload_add=<span class="fstat-no" title="function not covered" >function(listener){<span class="cstat-no" title="statement not covered" ></span>var ref=utils.random_string(8);<span class="cstat-no" title="statement not covered" >o</span>n_unload[ref]=listener;<span class="cstat-no" title="statement not covered" >i</span>f(after_unload){<span class="cstat-no" title="statement not covered" >utils.delay(trigger_unload_callbacks)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn ref}</span>;<span class="cstat-no" title="statement not covered" >u</span>tils.unload_del=<span class="fstat-no" title="function not covered" >function(ref){<span class="cstat-no" title="statement not covered" ></span>if(ref in on_unload)<span class="cstat-no" title="statement not covered" >delete on_unload[ref]}</span></span>;<span class="cstat-no" title="statement not covered" >u</span>tils.createIframe=<span class="fstat-no" title="function not covered" >function(iframe_url,error_callback){<span class="cstat-no" title="statement not covered" ></span>var iframe=_document.createElement("iframe");<span class="cstat-no" title="statement not covered" >v</span>ar tref,unload_ref;<span class="cstat-no" title="statement not covered" >v</span>ar unattach=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>clearTimeout(tref);<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >iframe.onload=null}</span>catch(x){}<span class="cstat-no" title="statement not covered" >i</span>frame.onerror=null}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar cleanup=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(iframe){<span class="cstat-no" title="statement not covered" >unattach();<span class="cstat-no" title="statement not covered" >s</span>etTimeout(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(iframe){<span class="cstat-no" title="statement not covered" >iframe.parentNode.removeChild(iframe)}<span class="cstat-no" title="statement not covered" ></span>i</span>frame=null}</span>,0);<span class="cstat-no" title="statement not covered" >u</span>tils.unload_del(unload_ref)}</span>}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar onerror=<span class="fstat-no" title="function not covered" >function(r){<span class="cstat-no" title="statement not covered" ></span>if(iframe){<span class="cstat-no" title="statement not covered" >cleanup();<span class="cstat-no" title="statement not covered" >e</span>rror_callback(r)}</span>}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar post=<span class="fstat-no" title="function not covered" >function(msg,origin){<span class="cstat-no" title="statement not covered" ></span>try{<span class="cstat-no" title="statement not covered" >if(iframe&amp;&amp;iframe.contentWindow){<span class="cstat-no" title="statement not covered" >iframe.contentWindow.postMessage(msg,origin)}</span>}</span>catch(x){}}</span>;<span class="cstat-no" title="statement not covered" >i</span>frame.src=iframe_url;<span class="cstat-no" title="statement not covered" >i</span>frame.style.display="none";<span class="cstat-no" title="statement not covered" >i</span>frame.style.position="absolute";<span class="cstat-no" title="statement not covered" >i</span>frame.onerror=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>onerror("onerror")}</span>;<span class="cstat-no" title="statement not covered" >i</span>frame.onload=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>clearTimeout(tref);<span class="cstat-no" title="statement not covered" >t</span>ref=setTimeout(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>onerror("onload timeout")}</span>,2e3)}</span>;<span class="cstat-no" title="statement not covered" >_</span>document.body.appendChild(iframe);<span class="cstat-no" title="statement not covered" >t</span>ref=setTimeout(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>onerror("timeout")}</span>,15e3);<span class="cstat-no" title="statement not covered" >u</span>nload_ref=utils.unload_add(cleanup);<span class="cstat-no" title="statement not covered" >r</span>eturn{post:post,cleanup:cleanup,loaded:unattach}}</span>;<span class="cstat-no" title="statement not covered" >u</span>tils.createHtmlfile=<span class="fstat-no" title="function not covered" >function(iframe_url,error_callback){<span class="cstat-no" title="statement not covered" ></span>var doc=new ActiveXObject("htmlfile");<span class="cstat-no" title="statement not covered" >v</span>ar tref,unload_ref;<span class="cstat-no" title="statement not covered" >v</span>ar iframe;<span class="cstat-no" title="statement not covered" >v</span>ar unattach=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>clearTimeout(tref)}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar cleanup=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(doc){<span class="cstat-no" title="statement not covered" >unattach();<span class="cstat-no" title="statement not covered" >u</span>tils.unload_del(unload_ref);<span class="cstat-no" title="statement not covered" >i</span>frame.parentNode.removeChild(iframe);<span class="cstat-no" title="statement not covered" >i</span>frame=doc=null;<span class="cstat-no" title="statement not covered" >C</span>ollectGarbage()}</span>}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar onerror=<span class="fstat-no" title="function not covered" >function(r){<span class="cstat-no" title="statement not covered" ></span>if(doc){<span class="cstat-no" title="statement not covered" >cleanup();<span class="cstat-no" title="statement not covered" >e</span>rror_callback(r)}</span>}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar post=<span class="fstat-no" title="function not covered" >function(msg,origin){<span class="cstat-no" title="statement not covered" ></span>try{<span class="cstat-no" title="statement not covered" >if(iframe&amp;&amp;iframe.contentWindow){<span class="cstat-no" title="statement not covered" >iframe.contentWindow.postMessage(msg,origin)}</span>}</span>catch(x){}}</span>;<span class="cstat-no" title="statement not covered" >d</span>oc.open();<span class="cstat-no" title="statement not covered" >d</span>oc.write("&lt;html&gt;&lt;s"+"cript&gt;"+'document.domain="'+document.domain+'";'+"&lt;/s"+"cript&gt;&lt;/html&gt;");<span class="cstat-no" title="statement not covered" >d</span>oc.close();<span class="cstat-no" title="statement not covered" >d</span>oc.parentWindow[WPrefix]=_window[WPrefix];<span class="cstat-no" title="statement not covered" >v</span>ar c=doc.createElement("div");<span class="cstat-no" title="statement not covered" >d</span>oc.body.appendChild(c);<span class="cstat-no" title="statement not covered" >i</span>frame=doc.createElement("iframe");<span class="cstat-no" title="statement not covered" >c</span>.appendChild(iframe);<span class="cstat-no" title="statement not covered" >i</span>frame.src=iframe_url;<span class="cstat-no" title="statement not covered" >t</span>ref=setTimeout(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>onerror("timeout")}</span>,15e3);<span class="cstat-no" title="statement not covered" >u</span>nload_ref=utils.unload_add(cleanup);<span class="cstat-no" title="statement not covered" >r</span>eturn{post:post,cleanup:cleanup,loaded:unattach}}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar AbstractXHRObject=<span class="fstat-no" title="function not covered" >function(){</span>};<span class="cstat-no" title="statement not covered" >A</span>bstractXHRObject.prototype=new EventEmitter(["chunk","finish"]);<span class="cstat-no" title="statement not covered" >A</span>bstractXHRObject.prototype._start=<span class="fstat-no" title="function not covered" >function(method,url,payload,opts){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >that.xhr=new XMLHttpRequest}</span>catch(x){}<span class="cstat-no" title="statement not covered" >i</span>f(!that.xhr){<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >that.xhr=new _window.ActiveXObject("Microsoft.XMLHTTP")}</span>catch(x){}}<span class="cstat-no" title="statement not covered" ></span>i</span>f(_window.ActiveXObject||_window.XDomainRequest){<span class="cstat-no" title="statement not covered" >url+=(url.indexOf("?")===-1?"?":"&amp;")+"t="+ +new Date}<span class="cstat-no" title="statement not covered" ></span>t</span>hat.unload_ref=utils.unload_add(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>that._cleanup(true)}</span>);<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >that.xhr.open(method,url,true)}</span>catch(e){<span class="cstat-no" title="statement not covered" >that.emit("finish",0,"");<span class="cstat-no" title="statement not covered" >t</span>hat._cleanup();<span class="cstat-no" title="statement not covered" >r</span>eturn}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!opts||!opts.no_credentials){<span class="cstat-no" title="statement not covered" >that.xhr.withCredentials="true"}<span class="cstat-no" title="statement not covered" ></span>i</span>f(opts&amp;&amp;opts.headers){<span class="cstat-no" title="statement not covered" >for(var key in opts.headers){<span class="cstat-no" title="statement not covered" >that.xhr.setRequestHeader(key,opts.headers[key])}</span>}<span class="cstat-no" title="statement not covered" ></span>t</span>hat.xhr.onreadystatechange=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(that.xhr){<span class="cstat-no" title="statement not covered" >var x=that.xhr;<span class="cstat-no" title="statement not covered" >s</span>witch(x.readyState){case 3:<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >var status=x.status;<span class="cstat-no" title="statement not covered" >v</span>ar text=x.responseText}</span>catch(x){};<span class="cstat-no" title="statement not covered" ></span>if(text&amp;&amp;text.length&gt;0){<span class="cstat-no" title="statement not covered" >that.emit("chunk",status,text)}<span class="cstat-no" title="statement not covered" ></span>b</span>reak;c</span>ase 4:<span class="cstat-no" title="statement not covered" >that.emit("finish",x.status,x.responseText);<span class="cstat-no" title="statement not covered" >t</span>hat._cleanup(false);<span class="cstat-no" title="statement not covered" >b</span>reak}</span>}</span>}</span>;<span class="cstat-no" title="statement not covered" >t</span>hat.xhr.send(payload)}</span>;<span class="cstat-no" title="statement not covered" >A</span>bstractXHRObject.prototype._cleanup=<span class="fstat-no" title="function not covered" >function(abort){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >i</span>f(!that.xhr)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >u</span></span>tils.unload_del(that.unload_ref);<span class="cstat-no" title="statement not covered" >t</span>hat.xhr.onreadystatechange=<span class="fstat-no" title="function not covered" >function(){</span>};<span class="cstat-no" title="statement not covered" >i</span>f(abort){<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >that.xhr.abort()}</span>catch(x){}}<span class="cstat-no" title="statement not covered" ></span>t</span>hat.unload_ref=that.xhr=null}</span>;<span class="cstat-no" title="statement not covered" >A</span>bstractXHRObject.prototype.close=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >t</span>hat.nuke();<span class="cstat-no" title="statement not covered" >t</span>hat._cleanup(true)}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar XHRCorsObject=utils.XHRCorsObject=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var that=this,args=arguments;<span class="cstat-no" title="statement not covered" >u</span>tils.delay(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>that._start.apply(that,args)}</span>)}</span>;<span class="cstat-no" title="statement not covered" >X</span>HRCorsObject.prototype=new AbstractXHRObject;<span class="cstat-no" title="statement not covered" >v</span>ar XHRLocalObject=utils.XHRLocalObject=<span class="fstat-no" title="function not covered" >function(method,url,payload){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >u</span>tils.delay(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>that._start(method,url,payload,{no_credentials:true})}</span>)}</span>;<span class="cstat-no" title="statement not covered" >X</span>HRLocalObject.prototype=new AbstractXHRObject;<span class="cstat-no" title="statement not covered" >v</span>ar XDRObject=utils.XDRObject=<span class="fstat-no" title="function not covered" >function(method,url,payload){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >u</span>tils.delay(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>that._start(method,url,payload)}</span>)}</span>;<span class="cstat-no" title="statement not covered" >X</span>DRObject.prototype=new EventEmitter(["chunk","finish"]);<span class="cstat-no" title="statement not covered" >X</span>DRObject.prototype._start=<span class="fstat-no" title="function not covered" >function(method,url,payload){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >v</span>ar xdr=new XDomainRequest;<span class="cstat-no" title="statement not covered" >u</span>rl+=(url.indexOf("?")===-1?"?":"&amp;")+"t="+ +new Date;<span class="cstat-no" title="statement not covered" >v</span>ar onerror=xdr.ontimeout=xdr.onerror=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>that.emit("finish",0,"");<span class="cstat-no" title="statement not covered" >t</span>hat._cleanup(false)}</span>;<span class="cstat-no" title="statement not covered" >x</span>dr.onprogress=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>that.emit("chunk",200,xdr.responseText)}</span>;<span class="cstat-no" title="statement not covered" >x</span>dr.onload=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>that.emit("finish",200,xdr.responseText);<span class="cstat-no" title="statement not covered" >t</span>hat._cleanup(false)}</span>;<span class="cstat-no" title="statement not covered" >t</span>hat.xdr=xdr;<span class="cstat-no" title="statement not covered" >t</span>hat.unload_ref=utils.unload_add(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>that._cleanup(true)}</span>);<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >that.xdr.open(method,url);<span class="cstat-no" title="statement not covered" >t</span>hat.xdr.send(payload)}</span>catch(x){<span class="cstat-no" title="statement not covered" >onerror()}</span>}</span>;<span class="cstat-no" title="statement not covered" >X</span>DRObject.prototype._cleanup=<span class="fstat-no" title="function not covered" >function(abort){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >i</span>f(!that.xdr)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >u</span></span>tils.unload_del(that.unload_ref);<span class="cstat-no" title="statement not covered" >t</span>hat.xdr.ontimeout=that.xdr.onerror=that.xdr.onprogress=that.xdr.onload=null;<span class="cstat-no" title="statement not covered" >i</span>f(abort){<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >that.xdr.abort()}</span>catch(x){}}<span class="cstat-no" title="statement not covered" ></span>t</span>hat.unload_ref=that.xdr=null}</span>;<span class="cstat-no" title="statement not covered" >X</span>DRObject.prototype.close=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >t</span>hat.nuke();<span class="cstat-no" title="statement not covered" >t</span>hat._cleanup(true)}</span>;<span class="cstat-no" title="statement not covered" >u</span>tils.isXHRCorsCapable=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(_window.XMLHttpRequest&amp;&amp;"withCredentials"in new XMLHttpRequest){<span class="cstat-no" title="statement not covered" >return 1}<span class="cstat-no" title="statement not covered" ></span>i</span>f(_window.XDomainRequest&amp;&amp;_document.domain){<span class="cstat-no" title="statement not covered" >return 2}<span class="cstat-no" title="statement not covered" ></span>i</span>f(IframeTransport.enabled()){<span class="cstat-no" title="statement not covered" >return 3}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn 4}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar SockJS=<span class="fstat-no" title="function not covered" >function(url,dep_protocols_whitelist,options){<span class="cstat-no" title="statement not covered" ></span>if(this===window){<span class="cstat-no" title="statement not covered" >return new SockJS(url,dep_protocols_whitelist,options)}<span class="cstat-no" title="statement not covered" ></span>v</span>ar that=this,protocols_whitelist;<span class="cstat-no" title="statement not covered" >t</span>hat._options={devel:false,debug:false,protocols_whitelist:[],info:undefined,rtt:undefined};<span class="cstat-no" title="statement not covered" >i</span>f(options){<span class="cstat-no" title="statement not covered" >utils.objectExtend(that._options,options)}<span class="cstat-no" title="statement not covered" ></span>t</span>hat._base_url=utils.amendUrl(url);<span class="cstat-no" title="statement not covered" >t</span>hat._server=that._options.server||utils.random_number_string(1e3);<span class="cstat-no" title="statement not covered" >i</span>f(that._options.protocols_whitelist&amp;&amp;that._options.protocols_whitelist.length){<span class="cstat-no" title="statement not covered" >protocols_whitelist=that._options.protocols_whitelist}</span>else{<span class="cstat-no" title="statement not covered" >if(typeof dep_protocols_whitelist==="string"&amp;&amp;dep_protocols_whitelist.length&gt;0){<span class="cstat-no" title="statement not covered" >protocols_whitelist=[dep_protocols_whitelist]}</span>else <span class="cstat-no" title="statement not covered" >if(utils.isArray(dep_protocols_whitelist)){<span class="cstat-no" title="statement not covered" >protocols_whitelist=dep_protocols_whitelist}</span>else{<span class="cstat-no" title="statement not covered" >protocols_whitelist=null}<span class="cstat-no" title="statement not covered" ></span>i</span></span>f(protocols_whitelist){<span class="cstat-no" title="statement not covered" >that._debug('Deprecated API: Use "protocols_whitelist" option '+"instead of supplying protocol list as a second "+"parameter to SockJS constructor.")}</span>}<span class="cstat-no" title="statement not covered" ></span>t</span>hat._protocols=[];<span class="cstat-no" title="statement not covered" >t</span>hat.protocol=null;<span class="cstat-no" title="statement not covered" >t</span>hat.readyState=SockJS.CONNECTING;<span class="cstat-no" title="statement not covered" >t</span>hat._ir=createInfoReceiver(that._base_url);<span class="cstat-no" title="statement not covered" >t</span>hat._ir.onfinish=<span class="fstat-no" title="function not covered" >function(info,rtt){<span class="cstat-no" title="statement not covered" ></span>that._ir=null;<span class="cstat-no" title="statement not covered" >i</span>f(info){<span class="cstat-no" title="statement not covered" >if(that._options.info){<span class="cstat-no" title="statement not covered" >info=utils.objectExtend(info,that._options.info)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(that._options.rtt){<span class="cstat-no" title="statement not covered" >rtt=that._options.rtt}<span class="cstat-no" title="statement not covered" ></span>t</span>hat._applyInfo(info,rtt,protocols_whitelist);<span class="cstat-no" title="statement not covered" >t</span>hat._didClose()}</span>else{<span class="cstat-no" title="statement not covered" >that._didClose(1002,"Can't connect to server",true)}</span>}</span>}</span>;<span class="cstat-no" title="statement not covered" >S</span>ockJS.prototype=new REventTarget;<span class="cstat-no" title="statement not covered" >S</span>ockJS.version="0.3.1.7.ga67f.dirty";<span class="cstat-no" title="statement not covered" >S</span>ockJS.CONNECTING=0;<span class="cstat-no" title="statement not covered" >S</span>ockJS.OPEN=1;<span class="cstat-no" title="statement not covered" >S</span>ockJS.CLOSING=2;<span class="cstat-no" title="statement not covered" >S</span>ockJS.CLOSED=3;<span class="cstat-no" title="statement not covered" >S</span>ockJS.prototype._debug=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(this._options.debug)<span class="cstat-no" title="statement not covered" >utils.log.apply(utils,arguments)}</span></span>;<span class="cstat-no" title="statement not covered" >S</span>ockJS.prototype._dispatchOpen=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >i</span>f(that.readyState===SockJS.CONNECTING){<span class="cstat-no" title="statement not covered" >if(that._transport_tref){<span class="cstat-no" title="statement not covered" >clearTimeout(that._transport_tref);<span class="cstat-no" title="statement not covered" >t</span>hat._transport_tref=null}<span class="cstat-no" title="statement not covered" ></span>t</span>hat.readyState=SockJS.OPEN;<span class="cstat-no" title="statement not covered" >t</span>hat.dispatchEvent(new SimpleEvent("open"))}</span>else{<span class="cstat-no" title="statement not covered" >that._didClose(1006,"Server lost session")}</span>}</span>;<span class="cstat-no" title="statement not covered" >S</span>ockJS.prototype._dispatchMessage=<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >i</span>f(that.readyState!==SockJS.OPEN)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >t</span></span>hat.dispatchEvent(new SimpleEvent("message",{data:data}))}</span>;<span class="cstat-no" title="statement not covered" >S</span>ockJS.prototype._dispatchHeartbeat=<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >i</span>f(that.readyState!==SockJS.OPEN)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >t</span></span>hat.dispatchEvent(new SimpleEvent("heartbeat",{}))}</span>;<span class="cstat-no" title="statement not covered" >S</span>ockJS.prototype._didClose=<span class="fstat-no" title="function not covered" >function(code,reason,force){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >i</span>f(that.readyState!==SockJS.CONNECTING&amp;&amp;that.readyState!==SockJS.OPEN&amp;&amp;that.readyState!==SockJS.CLOSING)<span class="cstat-no" title="statement not covered" >throw new Error("INVALID_STATE_ERR");<span class="cstat-no" title="statement not covered" >i</span></span>f(that._ir){<span class="cstat-no" title="statement not covered" >that._ir.nuke();<span class="cstat-no" title="statement not covered" >t</span>hat._ir=null}<span class="cstat-no" title="statement not covered" ></span>i</span>f(that._transport){<span class="cstat-no" title="statement not covered" >that._transport.doCleanup();<span class="cstat-no" title="statement not covered" >t</span>hat._transport=null}<span class="cstat-no" title="statement not covered" ></span>v</span>ar close_event=new SimpleEvent("close",{code:code,reason:reason,wasClean:utils.userSetCode(code)});<span class="cstat-no" title="statement not covered" >i</span>f(!utils.userSetCode(code)&amp;&amp;that.readyState===SockJS.CONNECTING&amp;&amp;!force){<span class="cstat-no" title="statement not covered" >if(that._try_next_protocol(close_event)){<span class="cstat-no" title="statement not covered" >return}<span class="cstat-no" title="statement not covered" ></span>c</span>lose_event=new SimpleEvent("close",{code:2e3,reason:"All transports failed",wasClean:false,last_event:close_event})}<span class="cstat-no" title="statement not covered" ></span>t</span>hat.readyState=SockJS.CLOSED;<span class="cstat-no" title="statement not covered" >u</span>tils.delay(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>that.dispatchEvent(close_event)}</span>)}</span>;<span class="cstat-no" title="statement not covered" >S</span>ockJS.prototype._didMessage=<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >v</span>ar type=data.slice(0,1);<span class="cstat-no" title="statement not covered" >s</span>witch(type){case"o":<span class="cstat-no" title="statement not covered" >that._dispatchOpen();<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"a":<span class="cstat-no" title="statement not covered" >var payload=JSON.parse(data.slice(1)||"[]");<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;payload.length;i++){<span class="cstat-no" title="statement not covered" >that._dispatchMessage(payload[i])}<span class="cstat-no" title="statement not covered" ></span>b</span>reak;c</span>ase"m":<span class="cstat-no" title="statement not covered" >var payload=JSON.parse(data.slice(1)||"null");<span class="cstat-no" title="statement not covered" >t</span>hat._dispatchMessage(payload);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"c":<span class="cstat-no" title="statement not covered" >var payload=JSON.parse(data.slice(1)||"[]");<span class="cstat-no" title="statement not covered" >t</span>hat._didClose(payload[0],payload[1]);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"h":<span class="cstat-no" title="statement not covered" >that._dispatchHeartbeat();<span class="cstat-no" title="statement not covered" >b</span>reak}</span>}</span>;<span class="cstat-no" title="statement not covered" >S</span>ockJS.prototype._try_next_protocol=<span class="fstat-no" title="function not covered" >function(close_event){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >i</span>f(that.protocol){<span class="cstat-no" title="statement not covered" >that._debug("Closed transport:",that.protocol,""+close_event);<span class="cstat-no" title="statement not covered" >t</span>hat.protocol=null}<span class="cstat-no" title="statement not covered" ></span>i</span>f(that._transport_tref){<span class="cstat-no" title="statement not covered" >clearTimeout(that._transport_tref);<span class="cstat-no" title="statement not covered" >t</span>hat._transport_tref=null}<span class="cstat-no" title="statement not covered" ></span>w</span>hile(1){<span class="cstat-no" title="statement not covered" >var protocol=that.protocol=that._protocols.shift();<span class="cstat-no" title="statement not covered" >i</span>f(!protocol){<span class="cstat-no" title="statement not covered" >return false}<span class="cstat-no" title="statement not covered" ></span>i</span>f(SockJS[protocol]&amp;&amp;SockJS[protocol].need_body===true&amp;&amp;(!_document.body||typeof _document.readyState!=="undefined"&amp;&amp;_document.readyState!=="complete")){<span class="cstat-no" title="statement not covered" >that._protocols.unshift(protocol);<span class="cstat-no" title="statement not covered" >t</span>hat.protocol="waiting-for-load";<span class="cstat-no" title="statement not covered" >u</span>tils.attachEvent("load",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>that._try_next_protocol()}</span>);<span class="cstat-no" title="statement not covered" >r</span>eturn true}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!SockJS[protocol]||!SockJS[protocol].enabled(that._options)){<span class="cstat-no" title="statement not covered" >that._debug("Skipping transport:",protocol)}</span>else{<span class="cstat-no" title="statement not covered" >var roundTrips=SockJS[protocol].roundTrips||1;<span class="cstat-no" title="statement not covered" >v</span>ar to=(that._options.rto||0)*roundTrips||5e3;<span class="cstat-no" title="statement not covered" >t</span>hat._transport_tref=utils.delay(to,<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(that.readyState===SockJS.CONNECTING){<span class="cstat-no" title="statement not covered" >that._didClose(2007,"Transport timeouted")}</span>}</span>);<span class="cstat-no" title="statement not covered" >v</span>ar connid=utils.random_string(8);<span class="cstat-no" title="statement not covered" >v</span>ar trans_url=that._base_url+"/"+that._server+"/"+connid;<span class="cstat-no" title="statement not covered" >t</span>hat._debug("Opening transport:",protocol," url:"+trans_url," RTO:"+that._options.rto);<span class="cstat-no" title="statement not covered" >t</span>hat._transport=new SockJS[protocol](that,trans_url,that._base_url);<span class="cstat-no" title="statement not covered" >r</span>eturn true}</span>}</span>}</span>;<span class="cstat-no" title="statement not covered" >S</span>ockJS.prototype.close=<span class="fstat-no" title="function not covered" >function(code,reason){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >i</span>f(code&amp;&amp;!utils.userSetCode(code))<span class="cstat-no" title="statement not covered" >throw new Error("INVALID_ACCESS_ERR");<span class="cstat-no" title="statement not covered" >i</span></span>f(that.readyState!==SockJS.CONNECTING&amp;&amp;that.readyState!==SockJS.OPEN){<span class="cstat-no" title="statement not covered" >return false}<span class="cstat-no" title="statement not covered" ></span>t</span>hat.readyState=SockJS.CLOSING;<span class="cstat-no" title="statement not covered" >t</span>hat._didClose(code||1e3,reason||"Normal closure");<span class="cstat-no" title="statement not covered" >r</span>eturn true}</span>;<span class="cstat-no" title="statement not covered" >S</span>ockJS.prototype.send=<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >i</span>f(that.readyState===SockJS.CONNECTING)<span class="cstat-no" title="statement not covered" >throw new Error("INVALID_STATE_ERR");<span class="cstat-no" title="statement not covered" >i</span></span>f(that.readyState===SockJS.OPEN){<span class="cstat-no" title="statement not covered" >that._transport.doSend(utils.quote(""+data))}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn true}</span>;<span class="cstat-no" title="statement not covered" >S</span>ockJS.prototype._applyInfo=<span class="fstat-no" title="function not covered" >function(info,rtt,protocols_whitelist){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >t</span>hat._options.info=info;<span class="cstat-no" title="statement not covered" >t</span>hat._options.rtt=rtt;<span class="cstat-no" title="statement not covered" >t</span>hat._options.rto=utils.countRTO(rtt);<span class="cstat-no" title="statement not covered" >t</span>hat._options.info.null_origin=!_document.domain;<span class="cstat-no" title="statement not covered" >v</span>ar probed=utils.probeProtocols();<span class="cstat-no" title="statement not covered" >t</span>hat._protocols=utils.detectProtocols(probed,protocols_whitelist,info)}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar WebSocketTransport=SockJS.websocket=<span class="fstat-no" title="function not covered" >function(ri,trans_url){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >v</span>ar url=trans_url+"/websocket";<span class="cstat-no" title="statement not covered" >i</span>f(url.slice(0,5)==="https"){<span class="cstat-no" title="statement not covered" >url="wss"+url.slice(5)}</span>else{<span class="cstat-no" title="statement not covered" >url="ws"+url.slice(4)}<span class="cstat-no" title="statement not covered" ></span>t</span>hat.ri=ri;<span class="cstat-no" title="statement not covered" >t</span>hat.url=url;<span class="cstat-no" title="statement not covered" >v</span>ar Constructor=_window.WebSocket||_window.MozWebSocket;<span class="cstat-no" title="statement not covered" >t</span>hat.ws=new Constructor(that.url);<span class="cstat-no" title="statement not covered" >t</span>hat.ws.onmessage=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>that.ri._didMessage(e.data)}</span>;<span class="cstat-no" title="statement not covered" >t</span>hat.unload_ref=utils.unload_add(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>that.ws.close()}</span>);<span class="cstat-no" title="statement not covered" >t</span>hat.ws.onclose=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>that.ri._didMessage(utils.closeFrame(1006,"WebSocket connection broken"))}</span>}</span>;<span class="cstat-no" title="statement not covered" >W</span>ebSocketTransport.prototype.doSend=<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>this.ws.send("["+data+"]")}</span>;<span class="cstat-no" title="statement not covered" >W</span>ebSocketTransport.prototype.doCleanup=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >v</span>ar ws=that.ws;<span class="cstat-no" title="statement not covered" >i</span>f(ws){<span class="cstat-no" title="statement not covered" >ws.onmessage=ws.onclose=null;<span class="cstat-no" title="statement not covered" >w</span>s.close();<span class="cstat-no" title="statement not covered" >u</span>tils.unload_del(that.unload_ref);<span class="cstat-no" title="statement not covered" >t</span>hat.unload_ref=that.ri=that.ws=null}</span>}</span>;<span class="cstat-no" title="statement not covered" >W</span>ebSocketTransport.enabled=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return!!(_window.WebSocket||_window.MozWebSocket)}</span>;<span class="cstat-no" title="statement not covered" >W</span>ebSocketTransport.roundTrips=2;<span class="cstat-no" title="statement not covered" >v</span>ar BufferedSender=<span class="fstat-no" title="function not covered" >function(){</span>};<span class="cstat-no" title="statement not covered" >B</span>ufferedSender.prototype.send_constructor=<span class="fstat-no" title="function not covered" >function(sender){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >t</span>hat.send_buffer=[];<span class="cstat-no" title="statement not covered" >t</span>hat.sender=sender}</span>;<span class="cstat-no" title="statement not covered" >B</span>ufferedSender.prototype.doSend=<span class="fstat-no" title="function not covered" >function(message){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >t</span>hat.send_buffer.push(message);<span class="cstat-no" title="statement not covered" >i</span>f(!that.send_stop){<span class="cstat-no" title="statement not covered" >that.send_schedule()}</span>}</span>;<span class="cstat-no" title="statement not covered" >B</span>ufferedSender.prototype.send_schedule_wait=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >v</span>ar tref;<span class="cstat-no" title="statement not covered" >t</span>hat.send_stop=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>that.send_stop=null;<span class="cstat-no" title="statement not covered" >c</span>learTimeout(tref)}</span>;<span class="cstat-no" title="statement not covered" >t</span>ref=utils.delay(25,<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>that.send_stop=null;<span class="cstat-no" title="statement not covered" >t</span>hat.send_schedule()}</span>)}</span>;<span class="cstat-no" title="statement not covered" >B</span>ufferedSender.prototype.send_schedule=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >i</span>f(that.send_buffer.length&gt;0){<span class="cstat-no" title="statement not covered" >var payload="["+that.send_buffer.join(",")+"]";<span class="cstat-no" title="statement not covered" >t</span>hat.send_stop=that.sender(that.trans_url,payload,<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>that.send_stop=null;<span class="cstat-no" title="statement not covered" >t</span>hat.send_schedule_wait()}</span>);<span class="cstat-no" title="statement not covered" >t</span>hat.send_buffer=[]}</span>}</span>;<span class="cstat-no" title="statement not covered" >B</span>ufferedSender.prototype.send_destructor=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >i</span>f(that._send_stop){<span class="cstat-no" title="statement not covered" >that._send_stop()}<span class="cstat-no" title="statement not covered" ></span>t</span>hat._send_stop=null}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar jsonPGenericSender=<span class="fstat-no" title="function not covered" >function(url,payload,callback){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >i</span>f(!("_send_form"in that)){<span class="cstat-no" title="statement not covered" >var form=that._send_form=_document.createElement("form");<span class="cstat-no" title="statement not covered" >v</span>ar area=that._send_area=_document.createElement("textarea");<span class="cstat-no" title="statement not covered" >a</span>rea.name="d";<span class="cstat-no" title="statement not covered" >f</span>orm.style.display="none";<span class="cstat-no" title="statement not covered" >f</span>orm.style.position="absolute";<span class="cstat-no" title="statement not covered" >f</span>orm.method="POST";<span class="cstat-no" title="statement not covered" >f</span>orm.enctype="application/x-www-form-urlencoded";<span class="cstat-no" title="statement not covered" >f</span>orm.acceptCharset="UTF-8";<span class="cstat-no" title="statement not covered" >f</span>orm.appendChild(area);<span class="cstat-no" title="statement not covered" >_</span>document.body.appendChild(form)}<span class="cstat-no" title="statement not covered" ></span>v</span>ar form=that._send_form;<span class="cstat-no" title="statement not covered" >v</span>ar area=that._send_area;<span class="cstat-no" title="statement not covered" >v</span>ar id="a"+utils.random_string(8);<span class="cstat-no" title="statement not covered" >f</span>orm.target=id;<span class="cstat-no" title="statement not covered" >f</span>orm.action=url+"/jsonp_send?i="+id;<span class="cstat-no" title="statement not covered" >v</span>ar iframe;<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >iframe=_document.createElement('&lt;iframe name="'+id+'"&gt;')}</span>catch(x){<span class="cstat-no" title="statement not covered" >iframe=_document.createElement("iframe");<span class="cstat-no" title="statement not covered" >i</span>frame.name=id}<span class="cstat-no" title="statement not covered" ></span>i</span>frame.id=id;<span class="cstat-no" title="statement not covered" >f</span>orm.appendChild(iframe);<span class="cstat-no" title="statement not covered" >i</span>frame.style.display="none";<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >area.value=payload}</span>catch(e){<span class="cstat-no" title="statement not covered" >utils.log("Your browser is seriously broken. Go home! "+e.message)}<span class="cstat-no" title="statement not covered" ></span>f</span>orm.submit();<span class="cstat-no" title="statement not covered" >v</span>ar completed=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>if(!iframe.onerror)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >i</span></span>frame.onreadystatechange=iframe.onerror=iframe.onload=null;<span class="cstat-no" title="statement not covered" >u</span>tils.delay(500,<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>iframe.parentNode.removeChild(iframe);<span class="cstat-no" title="statement not covered" >i</span>frame=null}</span>);<span class="cstat-no" title="statement not covered" >a</span>rea.value="";<span class="cstat-no" title="statement not covered" >c</span>allback()}</span>;<span class="cstat-no" title="statement not covered" >i</span>frame.onerror=iframe.onload=completed;<span class="cstat-no" title="statement not covered" >i</span>frame.onreadystatechange=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>if(iframe.readyState=="complete")<span class="cstat-no" title="statement not covered" >completed()}</span></span>;<span class="cstat-no" title="statement not covered" >r</span>eturn completed}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar createAjaxSender=<span class="fstat-no" title="function not covered" >function(AjaxObject){<span class="cstat-no" title="statement not covered" ></span>return <span class="fstat-no" title="function not covered" >function(url,payload,callback){<span class="cstat-no" title="statement not covered" ></span>var xo=new AjaxObject("POST",url+"/xhr_send",payload);<span class="cstat-no" title="statement not covered" >x</span>o.onfinish=<span class="fstat-no" title="function not covered" >function(status,text){<span class="cstat-no" title="statement not covered" ></span>callback(status)}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn <span class="fstat-no" title="function not covered" >function(abort_reason){<span class="cstat-no" title="statement not covered" ></span>callback(0,abort_reason)}</span>}</span>}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar jsonPGenericReceiver=<span class="fstat-no" title="function not covered" >function(url,callback){<span class="cstat-no" title="statement not covered" ></span>var tref;<span class="cstat-no" title="statement not covered" >v</span>ar script=_document.createElement("script");<span class="cstat-no" title="statement not covered" >v</span>ar script2;<span class="cstat-no" title="statement not covered" >v</span>ar close_script=<span class="fstat-no" title="function not covered" >function(frame){<span class="cstat-no" title="statement not covered" ></span>if(script2){<span class="cstat-no" title="statement not covered" >script2.parentNode.removeChild(script2);<span class="cstat-no" title="statement not covered" >s</span>cript2=null}<span class="cstat-no" title="statement not covered" ></span>i</span>f(script){<span class="cstat-no" title="statement not covered" >clearTimeout(tref);<span class="cstat-no" title="statement not covered" >s</span>cript.parentNode.removeChild(script);<span class="cstat-no" title="statement not covered" >s</span>cript.onreadystatechange=script.onerror=script.onload=script.onclick=null;<span class="cstat-no" title="statement not covered" >s</span>cript=null;<span class="cstat-no" title="statement not covered" >c</span>allback(frame);<span class="cstat-no" title="statement not covered" >c</span>allback=null}</span>}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar loaded_okay=false;<span class="cstat-no" title="statement not covered" >v</span>ar error_timer=null;<span class="cstat-no" title="statement not covered" >s</span>cript.id="a"+utils.random_string(8);<span class="cstat-no" title="statement not covered" >s</span>cript.src=url;<span class="cstat-no" title="statement not covered" >s</span>cript.type="text/javascript";<span class="cstat-no" title="statement not covered" >s</span>cript.charset="UTF-8";<span class="cstat-no" title="statement not covered" >s</span>cript.onerror=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>if(!error_timer){<span class="cstat-no" title="statement not covered" >error_timer=setTimeout(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(!loaded_okay){<span class="cstat-no" title="statement not covered" >close_script(utils.closeFrame(1006,"JSONP script loaded abnormally (onerror)"))}</span>}</span>,1e3)}</span>}</span>;<span class="cstat-no" title="statement not covered" >s</span>cript.onload=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>close_script(utils.closeFrame(1006,"JSONP script loaded abnormally (onload)"))}</span>;<span class="cstat-no" title="statement not covered" >s</span>cript.onreadystatechange=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>if(/loaded|closed/.test(script.readyState)){<span class="cstat-no" title="statement not covered" >if(script&amp;&amp;script.htmlFor&amp;&amp;script.onclick){<span class="cstat-no" title="statement not covered" >loaded_okay=true;<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >script.onclick()}</span>catch(x){}}<span class="cstat-no" title="statement not covered" ></span>i</span>f(script){<span class="cstat-no" title="statement not covered" >close_script(utils.closeFrame(1006,"JSONP script loaded abnormally (onreadystatechange)"))}</span>}</span>}</span>;<span class="cstat-no" title="statement not covered" >i</span>f(typeof script.async==="undefined"&amp;&amp;_document.attachEvent){<span class="cstat-no" title="statement not covered" >if(!/opera/i.test(navigator.userAgent)){<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >script.htmlFor=script.id;<span class="cstat-no" title="statement not covered" >s</span>cript.event="onclick"}</span>catch(x){}<span class="cstat-no" title="statement not covered" >s</span>cript.async=true}</span>else{<span class="cstat-no" title="statement not covered" >script2=_document.createElement("script");<span class="cstat-no" title="statement not covered" >s</span>cript2.text="try{var a = document.getElementById('"+script.id+"'); if(a)a.onerror();}catch(x){};";<span class="cstat-no" title="statement not covered" >s</span>cript.async=script2.async=false}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(typeof script.async!=="undefined"){<span class="cstat-no" title="statement not covered" >script.async=true}<span class="cstat-no" title="statement not covered" ></span>t</span>ref=setTimeout(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>close_script(utils.closeFrame(1006,"JSONP script loaded abnormally (timeout)"))}</span>,35e3);<span class="cstat-no" title="statement not covered" >v</span>ar head=_document.getElementsByTagName("head")[0];<span class="cstat-no" title="statement not covered" >h</span>ead.insertBefore(script,head.firstChild);<span class="cstat-no" title="statement not covered" >i</span>f(script2){<span class="cstat-no" title="statement not covered" >head.insertBefore(script2,head.firstChild)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn close_script}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar JsonPTransport=SockJS["jsonp-polling"]=<span class="fstat-no" title="function not covered" >function(ri,trans_url){<span class="cstat-no" title="statement not covered" ></span>utils.polluteGlobalNamespace();<span class="cstat-no" title="statement not covered" >v</span>ar that=this;<span class="cstat-no" title="statement not covered" >t</span>hat.ri=ri;<span class="cstat-no" title="statement not covered" >t</span>hat.trans_url=trans_url;<span class="cstat-no" title="statement not covered" >t</span>hat.send_constructor(jsonPGenericSender);<span class="cstat-no" title="statement not covered" >t</span>hat._schedule_recv()}</span>;<span class="cstat-no" title="statement not covered" >J</span>sonPTransport.prototype=new BufferedSender;<span class="cstat-no" title="statement not covered" >J</span>sonPTransport.prototype._schedule_recv=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >v</span>ar callback=<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>that._recv_stop=null;<span class="cstat-no" title="statement not covered" >i</span>f(data){<span class="cstat-no" title="statement not covered" >if(!that._is_closing){<span class="cstat-no" title="statement not covered" >that.ri._didMessage(data)}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!that._is_closing){<span class="cstat-no" title="statement not covered" >that._schedule_recv()}</span>}</span>;<span class="cstat-no" title="statement not covered" >t</span>hat._recv_stop=jsonPReceiverWrapper(that.trans_url+"/jsonp",jsonPGenericReceiver,callback)}</span>;<span class="cstat-no" title="statement not covered" >J</span>sonPTransport.enabled=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return true}</span>;<span class="cstat-no" title="statement not covered" >J</span>sonPTransport.need_body=true;<span class="cstat-no" title="statement not covered" >J</span>sonPTransport.prototype.doCleanup=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >t</span>hat._is_closing=true;<span class="cstat-no" title="statement not covered" >i</span>f(that._recv_stop){<span class="cstat-no" title="statement not covered" >that._recv_stop()}<span class="cstat-no" title="statement not covered" ></span>t</span>hat.ri=that._recv_stop=null;<span class="cstat-no" title="statement not covered" >t</span>hat.send_destructor()}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar jsonPReceiverWrapper=<span class="fstat-no" title="function not covered" >function(url,constructReceiver,user_callback){<span class="cstat-no" title="statement not covered" ></span>var id="a"+utils.random_string(6);<span class="cstat-no" title="statement not covered" >v</span>ar url_id=url+"?c="+escape(WPrefix+"."+id);<span class="cstat-no" title="statement not covered" >v</span>ar callback=<span class="fstat-no" title="function not covered" >function(frame){<span class="cstat-no" title="statement not covered" ></span>delete _window[WPrefix][id];<span class="cstat-no" title="statement not covered" >u</span>ser_callback(frame)}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar close_script=constructReceiver(url_id,callback);<span class="cstat-no" title="statement not covered" >_</span>window[WPrefix][id]=close_script;<span class="cstat-no" title="statement not covered" >v</span>ar stop=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(_window[WPrefix][id]){<span class="cstat-no" title="statement not covered" >_window[WPrefix][id](utils.closeFrame(1e3,"JSONP user aborted read"))}</span>}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn stop}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar AjaxBasedTransport=<span class="fstat-no" title="function not covered" >function(){</span>};<span class="cstat-no" title="statement not covered" >A</span>jaxBasedTransport.prototype=new BufferedSender;<span class="cstat-no" title="statement not covered" >A</span>jaxBasedTransport.prototype.run=<span class="fstat-no" title="function not covered" >function(ri,trans_url,url_suffix,Receiver,AjaxObject){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >t</span>hat.ri=ri;<span class="cstat-no" title="statement not covered" >t</span>hat.trans_url=trans_url;<span class="cstat-no" title="statement not covered" >t</span>hat.send_constructor(createAjaxSender(AjaxObject));<span class="cstat-no" title="statement not covered" >t</span>hat.poll=new Polling(ri,Receiver,trans_url+url_suffix,AjaxObject)}</span>;<span class="cstat-no" title="statement not covered" >A</span>jaxBasedTransport.prototype.doCleanup=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >i</span>f(that.poll){<span class="cstat-no" title="statement not covered" >that.poll.abort();<span class="cstat-no" title="statement not covered" >t</span>hat.poll=null}</span>}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar XhrStreamingTransport=SockJS["xhr-streaming"]=<span class="fstat-no" title="function not covered" >function(ri,trans_url){<span class="cstat-no" title="statement not covered" ></span>this.run(ri,trans_url,"/xhr_streaming",XhrReceiver,utils.XHRCorsObject)}</span>;<span class="cstat-no" title="statement not covered" >X</span>hrStreamingTransport.prototype=new AjaxBasedTransport;<span class="cstat-no" title="statement not covered" >X</span>hrStreamingTransport.enabled=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return _window.XMLHttpRequest&amp;&amp;"withCredentials"in new XMLHttpRequest&amp;&amp;!/opera/i.test(navigator.userAgent)}</span>;<span class="cstat-no" title="statement not covered" >X</span>hrStreamingTransport.roundTrips=2;<span class="cstat-no" title="statement not covered" >X</span>hrStreamingTransport.need_body=true;<span class="cstat-no" title="statement not covered" >v</span>ar XdrStreamingTransport=SockJS["xdr-streaming"]=<span class="fstat-no" title="function not covered" >function(ri,trans_url){<span class="cstat-no" title="statement not covered" ></span>this.run(ri,trans_url,"/xhr_streaming",XhrReceiver,utils.XDRObject)}</span>;<span class="cstat-no" title="statement not covered" >X</span>drStreamingTransport.prototype=new AjaxBasedTransport;<span class="cstat-no" title="statement not covered" >X</span>drStreamingTransport.enabled=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return!!_window.XDomainRequest}</span>;<span class="cstat-no" title="statement not covered" >X</span>drStreamingTransport.roundTrips=2;<span class="cstat-no" title="statement not covered" >v</span>ar XhrPollingTransport=SockJS["xhr-polling"]=<span class="fstat-no" title="function not covered" >function(ri,trans_url){<span class="cstat-no" title="statement not covered" ></span>this.run(ri,trans_url,"/xhr",XhrReceiver,utils.XHRCorsObject)}</span>;<span class="cstat-no" title="statement not covered" >X</span>hrPollingTransport.prototype=new AjaxBasedTransport;<span class="cstat-no" title="statement not covered" >X</span>hrPollingTransport.enabled=XhrStreamingTransport.enabled;<span class="cstat-no" title="statement not covered" >X</span>hrPollingTransport.roundTrips=2;<span class="cstat-no" title="statement not covered" >v</span>ar XdrPollingTransport=SockJS["xdr-polling"]=<span class="fstat-no" title="function not covered" >function(ri,trans_url){<span class="cstat-no" title="statement not covered" ></span>this.run(ri,trans_url,"/xhr",XhrReceiver,utils.XDRObject)}</span>;<span class="cstat-no" title="statement not covered" >X</span>drPollingTransport.prototype=new AjaxBasedTransport;<span class="cstat-no" title="statement not covered" >X</span>drPollingTransport.enabled=XdrStreamingTransport.enabled;<span class="cstat-no" title="statement not covered" >X</span>drPollingTransport.roundTrips=2;<span class="cstat-no" title="statement not covered" >v</span>ar IframeTransport=<span class="fstat-no" title="function not covered" >function(){</span>};<span class="cstat-no" title="statement not covered" >I</span>frameTransport.prototype.i_constructor=<span class="fstat-no" title="function not covered" >function(ri,trans_url,base_url){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >t</span>hat.ri=ri;<span class="cstat-no" title="statement not covered" >t</span>hat.origin=utils.getOrigin(base_url);<span class="cstat-no" title="statement not covered" >t</span>hat.base_url=base_url;<span class="cstat-no" title="statement not covered" >t</span>hat.trans_url=trans_url;<span class="cstat-no" title="statement not covered" >v</span>ar iframe_url=base_url+"/iframe.html";<span class="cstat-no" title="statement not covered" >i</span>f(that.ri._options.devel){<span class="cstat-no" title="statement not covered" >iframe_url+="?t="+ +new Date}<span class="cstat-no" title="statement not covered" ></span>t</span>hat.window_id=utils.random_string(8);<span class="cstat-no" title="statement not covered" >i</span>frame_url+="#"+that.window_id;<span class="cstat-no" title="statement not covered" >t</span>hat.iframeObj=utils.createIframe(iframe_url,<span class="fstat-no" title="function not covered" >function(r){<span class="cstat-no" title="statement not covered" ></span>that.ri._didClose(1006,"Unable to load an iframe ("+r+")")}</span>);<span class="cstat-no" title="statement not covered" >t</span>hat.onmessage_cb=utils.bind(that.onmessage,that);<span class="cstat-no" title="statement not covered" >u</span>tils.attachMessage(that.onmessage_cb)}</span>;<span class="cstat-no" title="statement not covered" >I</span>frameTransport.prototype.doCleanup=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >i</span>f(that.iframeObj){<span class="cstat-no" title="statement not covered" >utils.detachMessage(that.onmessage_cb);<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >if(that.iframeObj.iframe.contentWindow){<span class="cstat-no" title="statement not covered" >that.postMessage("c")}</span>}</span>catch(x){}<span class="cstat-no" title="statement not covered" >t</span>hat.iframeObj.cleanup();<span class="cstat-no" title="statement not covered" >t</span>hat.iframeObj=null;<span class="cstat-no" title="statement not covered" >t</span>hat.onmessage_cb=that.iframeObj=null}</span>}</span>;<span class="cstat-no" title="statement not covered" >I</span>frameTransport.prototype.onmessage=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >i</span>f(e.origin!==that.origin)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >v</span></span>ar window_id=e.data.slice(0,8);<span class="cstat-no" title="statement not covered" >v</span>ar type=e.data.slice(8,9);<span class="cstat-no" title="statement not covered" >v</span>ar data=e.data.slice(9);<span class="cstat-no" title="statement not covered" >i</span>f(window_id!==that.window_id)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >s</span></span>witch(type){case"s":<span class="cstat-no" title="statement not covered" >that.iframeObj.loaded();<span class="cstat-no" title="statement not covered" >t</span>hat.postMessage("s",JSON.stringify([SockJS.version,that.protocol,that.trans_url,that.base_url]));<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"t":<span class="cstat-no" title="statement not covered" >that.ri._didMessage(data);<span class="cstat-no" title="statement not covered" >b</span>reak}</span>}</span>;<span class="cstat-no" title="statement not covered" >I</span>frameTransport.prototype.postMessage=<span class="fstat-no" title="function not covered" >function(type,data){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >t</span>hat.iframeObj.post(that.window_id+type+(data||""),that.origin)}</span>;<span class="cstat-no" title="statement not covered" >I</span>frameTransport.prototype.doSend=<span class="fstat-no" title="function not covered" >function(message){<span class="cstat-no" title="statement not covered" ></span>this.postMessage("m",message)}</span>;<span class="cstat-no" title="statement not covered" >I</span>frameTransport.enabled=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var konqueror=navigator&amp;&amp;navigator.userAgent&amp;&amp;navigator.userAgent.indexOf("Konqueror")!==-1;<span class="cstat-no" title="statement not covered" >r</span>eturn(typeof _window.postMessage==="function"||typeof _window.postMessage==="object")&amp;&amp;!konqueror}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar curr_window_id;<span class="cstat-no" title="statement not covered" >v</span>ar postMessage=<span class="fstat-no" title="function not covered" >function(type,data){<span class="cstat-no" title="statement not covered" ></span>if(parent!==_window){<span class="cstat-no" title="statement not covered" >parent.postMessage(curr_window_id+type+(data||""),"*")}</span>else{<span class="cstat-no" title="statement not covered" >utils.log("Can't postMessage, no parent window.",type,data)}</span>}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar FacadeJS=<span class="fstat-no" title="function not covered" >function(){</span>};<span class="cstat-no" title="statement not covered" >F</span>acadeJS.prototype._didClose=<span class="fstat-no" title="function not covered" >function(code,reason){<span class="cstat-no" title="statement not covered" ></span>postMessage("t",utils.closeFrame(code,reason))}</span>;<span class="cstat-no" title="statement not covered" >F</span>acadeJS.prototype._didMessage=<span class="fstat-no" title="function not covered" >function(frame){<span class="cstat-no" title="statement not covered" ></span>postMessage("t",frame)}</span>;<span class="cstat-no" title="statement not covered" >F</span>acadeJS.prototype._doSend=<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>this._transport.doSend(data)}</span>;<span class="cstat-no" title="statement not covered" >F</span>acadeJS.prototype._doCleanup=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this._transport.doCleanup()}</span>;<span class="cstat-no" title="statement not covered" >u</span>tils.parent_origin=undefined;<span class="cstat-no" title="statement not covered" >S</span>ockJS.bootstrap_iframe=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var facade;<span class="cstat-no" title="statement not covered" >c</span>urr_window_id=_document.location.hash.slice(1);<span class="cstat-no" title="statement not covered" >v</span>ar onMessage=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>if(e.source!==parent)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >i</span></span>f(typeof utils.parent_origin==="undefined")<span class="cstat-no" title="statement not covered" >utils.parent_origin=e.origin;<span class="cstat-no" title="statement not covered" >i</span></span>f(e.origin!==utils.parent_origin)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >v</span></span>ar window_id=e.data.slice(0,8);<span class="cstat-no" title="statement not covered" >v</span>ar type=e.data.slice(8,9);<span class="cstat-no" title="statement not covered" >v</span>ar data=e.data.slice(9);<span class="cstat-no" title="statement not covered" >i</span>f(window_id!==curr_window_id)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >s</span></span>witch(type){case"s":<span class="cstat-no" title="statement not covered" >var p=JSON.parse(data);<span class="cstat-no" title="statement not covered" >v</span>ar version=p[0];<span class="cstat-no" title="statement not covered" >v</span>ar protocol=p[1];<span class="cstat-no" title="statement not covered" >v</span>ar trans_url=p[2];<span class="cstat-no" title="statement not covered" >v</span>ar base_url=p[3];<span class="cstat-no" title="statement not covered" >i</span>f(version!==SockJS.version){<span class="cstat-no" title="statement not covered" >utils.log("Incompatibile SockJS! Main site uses:"+' "'+version+'", the iframe:'+' "'+SockJS.version+'".')}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!utils.flatUrl(trans_url)||!utils.flatUrl(base_url)){<span class="cstat-no" title="statement not covered" >utils.log("Only basic urls are supported in SockJS");<span class="cstat-no" title="statement not covered" >r</span>eturn}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!utils.isSameOriginUrl(trans_url)||!utils.isSameOriginUrl(base_url)){<span class="cstat-no" title="statement not covered" >utils.log("Can't connect to different domain from within an "+"iframe. ("+JSON.stringify([_window.location.href,trans_url,base_url])+")");<span class="cstat-no" title="statement not covered" >r</span>eturn}<span class="cstat-no" title="statement not covered" ></span>f</span>acade=new FacadeJS;<span class="cstat-no" title="statement not covered" >f</span>acade._transport=new FacadeJS[protocol](facade,trans_url,base_url);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"m":<span class="cstat-no" title="statement not covered" >facade._doSend(data);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"c":<span class="cstat-no" title="statement not covered" >if(facade)<span class="cstat-no" title="statement not covered" >facade._doCleanup();<span class="cstat-no" title="statement not covered" >f</span></span>acade=null;<span class="cstat-no" title="statement not covered" >b</span>reak}</span>}</span>;<span class="cstat-no" title="statement not covered" >u</span>tils.attachMessage(onMessage);<span class="cstat-no" title="statement not covered" >p</span>ostMessage("s")}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar InfoReceiver=<span class="fstat-no" title="function not covered" >function(base_url,AjaxObject){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >u</span>tils.delay(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>that.doXhr(base_url,AjaxObject)}</span>)}</span>;<span class="cstat-no" title="statement not covered" >I</span>nfoReceiver.prototype=new EventEmitter(["finish"]);<span class="cstat-no" title="statement not covered" >I</span>nfoReceiver.prototype.doXhr=<span class="fstat-no" title="function not covered" >function(base_url,AjaxObject){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >v</span>ar t0=(new Date).getTime();<span class="cstat-no" title="statement not covered" >v</span>ar xo=new AjaxObject("GET",base_url+"/info");<span class="cstat-no" title="statement not covered" >v</span>ar tref=utils.delay(8e3,<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>xo.ontimeout()}</span>);<span class="cstat-no" title="statement not covered" >x</span>o.onfinish=<span class="fstat-no" title="function not covered" >function(status,text){<span class="cstat-no" title="statement not covered" ></span>clearTimeout(tref);<span class="cstat-no" title="statement not covered" >t</span>ref=null;<span class="cstat-no" title="statement not covered" >i</span>f(status===200){<span class="cstat-no" title="statement not covered" >var rtt=(new Date).getTime()-t0;<span class="cstat-no" title="statement not covered" >v</span>ar info=JSON.parse(text);<span class="cstat-no" title="statement not covered" >i</span>f(typeof info!=="object")<span class="cstat-no" title="statement not covered" >info={};<span class="cstat-no" title="statement not covered" >t</span></span>hat.emit("finish",info,rtt)}</span>else{<span class="cstat-no" title="statement not covered" >that.emit("finish")}</span>}</span>;<span class="cstat-no" title="statement not covered" >x</span>o.ontimeout=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>xo.close();<span class="cstat-no" title="statement not covered" >t</span>hat.emit("finish")}</span>}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar InfoReceiverIframe=<span class="fstat-no" title="function not covered" >function(base_url){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >v</span>ar go=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var ifr=new IframeTransport;<span class="cstat-no" title="statement not covered" >i</span>fr.protocol="w-iframe-info-receiver";<span class="cstat-no" title="statement not covered" >v</span>ar fun=<span class="fstat-no" title="function not covered" >function(r){<span class="cstat-no" title="statement not covered" ></span>if(typeof r==="string"&amp;&amp;r.substr(0,1)==="m"){<span class="cstat-no" title="statement not covered" >var d=JSON.parse(r.substr(1));<span class="cstat-no" title="statement not covered" >v</span>ar info=d[0],rtt=d[1];<span class="cstat-no" title="statement not covered" >t</span>hat.emit("finish",info,rtt)}</span>else{<span class="cstat-no" title="statement not covered" >that.emit("finish")}<span class="cstat-no" title="statement not covered" ></span>i</span>fr.doCleanup();<span class="cstat-no" title="statement not covered" >i</span>fr=null}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar mock_ri={_options:{},_didClose:fun,_didMessage:fun};<span class="cstat-no" title="statement not covered" >i</span>fr.i_constructor(mock_ri,base_url,base_url)}</span>;<span class="cstat-no" title="statement not covered" >i</span>f(!_document.body){<span class="cstat-no" title="statement not covered" >utils.attachEvent("load",go)}</span>else{<span class="cstat-no" title="statement not covered" >go()}</span>}</span>;<span class="cstat-no" title="statement not covered" >I</span>nfoReceiverIframe.prototype=new EventEmitter(["finish"]);<span class="cstat-no" title="statement not covered" >v</span>ar InfoReceiverFake=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >u</span>tils.delay(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>that.emit("finish",{},2e3)}</span>)}</span>;<span class="cstat-no" title="statement not covered" >I</span>nfoReceiverFake.prototype=new EventEmitter(["finish"]);<span class="cstat-no" title="statement not covered" >v</span>ar createInfoReceiver=<span class="fstat-no" title="function not covered" >function(base_url){<span class="cstat-no" title="statement not covered" ></span>if(utils.isSameOriginUrl(base_url)){<span class="cstat-no" title="statement not covered" >return new InfoReceiver(base_url,utils.XHRLocalObject)}<span class="cstat-no" title="statement not covered" ></span>s</span>witch(utils.isXHRCorsCapable()){case 1:<span class="cstat-no" title="statement not covered" >return new InfoReceiver(base_url,utils.XHRCorsObject);c</span>ase 2:<span class="cstat-no" title="statement not covered" >return new InfoReceiver(base_url,utils.XDRObject);c</span>ase 3:<span class="cstat-no" title="statement not covered" >return new InfoReceiverIframe(base_url);d</span>efault:<span class="cstat-no" title="statement not covered" >return new InfoReceiverFake}</span>}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar WInfoReceiverIframe=FacadeJS["w-iframe-info-receiver"]=<span class="fstat-no" title="function not covered" >function(ri,_trans_url,base_url){<span class="cstat-no" title="statement not covered" ></span>var ir=new InfoReceiver(base_url,utils.XHRLocalObject);<span class="cstat-no" title="statement not covered" >i</span>r.onfinish=<span class="fstat-no" title="function not covered" >function(info,rtt){<span class="cstat-no" title="statement not covered" ></span>ri._didMessage("m"+JSON.stringify([info,rtt]));<span class="cstat-no" title="statement not covered" >r</span>i._didClose()}</span>}</span>;<span class="cstat-no" title="statement not covered" >W</span>InfoReceiverIframe.prototype.doCleanup=<span class="fstat-no" title="function not covered" >function(){</span>};<span class="cstat-no" title="statement not covered" >v</span>ar EventSourceIframeTransport=SockJS["iframe-eventsource"]=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >t</span>hat.protocol="w-iframe-eventsource";<span class="cstat-no" title="statement not covered" >t</span>hat.i_constructor.apply(that,arguments)}</span>;<span class="cstat-no" title="statement not covered" >E</span>ventSourceIframeTransport.prototype=new IframeTransport;<span class="cstat-no" title="statement not covered" >E</span>ventSourceIframeTransport.enabled=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return"EventSource"in _window&amp;&amp;IframeTransport.enabled()}</span>;<span class="cstat-no" title="statement not covered" >E</span>ventSourceIframeTransport.need_body=true;<span class="cstat-no" title="statement not covered" >E</span>ventSourceIframeTransport.roundTrips=3;<span class="cstat-no" title="statement not covered" >v</span>ar EventSourceTransport=FacadeJS["w-iframe-eventsource"]=<span class="fstat-no" title="function not covered" >function(ri,trans_url){<span class="cstat-no" title="statement not covered" ></span>this.run(ri,trans_url,"/eventsource",EventSourceReceiver,utils.XHRLocalObject)}</span>;<span class="cstat-no" title="statement not covered" >E</span>ventSourceTransport.prototype=new AjaxBasedTransport;<span class="cstat-no" title="statement not covered" >v</span>ar XhrPollingIframeTransport=SockJS["iframe-xhr-polling"]=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >t</span>hat.protocol="w-iframe-xhr-polling";<span class="cstat-no" title="statement not covered" >t</span>hat.i_constructor.apply(that,arguments)}</span>;<span class="cstat-no" title="statement not covered" >X</span>hrPollingIframeTransport.prototype=new IframeTransport;<span class="cstat-no" title="statement not covered" >X</span>hrPollingIframeTransport.enabled=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return _window.XMLHttpRequest&amp;&amp;IframeTransport.enabled()}</span>;<span class="cstat-no" title="statement not covered" >X</span>hrPollingIframeTransport.need_body=true;<span class="cstat-no" title="statement not covered" >X</span>hrPollingIframeTransport.roundTrips=3;<span class="cstat-no" title="statement not covered" >v</span>ar XhrPollingITransport=FacadeJS["w-iframe-xhr-polling"]=<span class="fstat-no" title="function not covered" >function(ri,trans_url){<span class="cstat-no" title="statement not covered" ></span>this.run(ri,trans_url,"/xhr",XhrReceiver,utils.XHRLocalObject)}</span>;<span class="cstat-no" title="statement not covered" >X</span>hrPollingITransport.prototype=new AjaxBasedTransport;<span class="cstat-no" title="statement not covered" >v</span>ar HtmlFileIframeTransport=SockJS["iframe-htmlfile"]=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >t</span>hat.protocol="w-iframe-htmlfile";<span class="cstat-no" title="statement not covered" >t</span>hat.i_constructor.apply(that,arguments)}</span>;<span class="cstat-no" title="statement not covered" >H</span>tmlFileIframeTransport.prototype=new IframeTransport;<span class="cstat-no" title="statement not covered" >H</span>tmlFileIframeTransport.enabled=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return IframeTransport.enabled()}</span>;<span class="cstat-no" title="statement not covered" >H</span>tmlFileIframeTransport.need_body=true;<span class="cstat-no" title="statement not covered" >H</span>tmlFileIframeTransport.roundTrips=3;<span class="cstat-no" title="statement not covered" >v</span>ar HtmlFileTransport=FacadeJS["w-iframe-htmlfile"]=<span class="fstat-no" title="function not covered" >function(ri,trans_url){<span class="cstat-no" title="statement not covered" ></span>this.run(ri,trans_url,"/htmlfile",HtmlfileReceiver,utils.XHRLocalObject)}</span>;<span class="cstat-no" title="statement not covered" >H</span>tmlFileTransport.prototype=new AjaxBasedTransport;<span class="cstat-no" title="statement not covered" >v</span>ar Polling=<span class="fstat-no" title="function not covered" >function(ri,Receiver,recv_url,AjaxObject){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >t</span>hat.ri=ri;<span class="cstat-no" title="statement not covered" >t</span>hat.Receiver=Receiver;<span class="cstat-no" title="statement not covered" >t</span>hat.recv_url=recv_url;<span class="cstat-no" title="statement not covered" >t</span>hat.AjaxObject=AjaxObject;<span class="cstat-no" title="statement not covered" >t</span>hat._scheduleRecv()}</span>;<span class="cstat-no" title="statement not covered" >P</span>olling.prototype._scheduleRecv=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >v</span>ar poll=that.poll=new that.Receiver(that.recv_url,that.AjaxObject);<span class="cstat-no" title="statement not covered" >v</span>ar msg_counter=0;<span class="cstat-no" title="statement not covered" >p</span>oll.onmessage=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>msg_counter+=1;<span class="cstat-no" title="statement not covered" >t</span>hat.ri._didMessage(e.data)}</span>;<span class="cstat-no" title="statement not covered" >p</span>oll.onclose=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>that.poll=poll=poll.onmessage=poll.onclose=null;<span class="cstat-no" title="statement not covered" >i</span>f(!that.poll_is_closing){<span class="cstat-no" title="statement not covered" >if(e.reason==="permanent"){<span class="cstat-no" title="statement not covered" >that.ri._didClose(1006,"Polling error ("+e.reason+")")}</span>else{<span class="cstat-no" title="statement not covered" >that._scheduleRecv()}</span>}</span>}</span>}</span>;<span class="cstat-no" title="statement not covered" >P</span>olling.prototype.abort=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >t</span>hat.poll_is_closing=true;<span class="cstat-no" title="statement not covered" >i</span>f(that.poll){<span class="cstat-no" title="statement not covered" >that.poll.abort()}</span>}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar EventSourceReceiver=<span class="fstat-no" title="function not covered" >function(url){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >v</span>ar es=new EventSource(url);<span class="cstat-no" title="statement not covered" >e</span>s.onmessage=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>that.dispatchEvent(new SimpleEvent("message",{data:unescape(e.data)}))}</span>;<span class="cstat-no" title="statement not covered" >t</span>hat.es_close=es.onerror=<span class="fstat-no" title="function not covered" >function(e,abort_reason){<span class="cstat-no" title="statement not covered" ></span>var reason=abort_reason?"user":es.readyState!==2?"network":"permanent";<span class="cstat-no" title="statement not covered" >t</span>hat.es_close=es.onmessage=es.onerror=null;<span class="cstat-no" title="statement not covered" >e</span>s.close();<span class="cstat-no" title="statement not covered" >e</span>s=null;<span class="cstat-no" title="statement not covered" >u</span>tils.delay(200,<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>that.dispatchEvent(new SimpleEvent("close",{reason:reason}))}</span>)}</span>}</span>;<span class="cstat-no" title="statement not covered" >E</span>ventSourceReceiver.prototype=new REventTarget;<span class="cstat-no" title="statement not covered" >E</span>ventSourceReceiver.prototype.abort=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >i</span>f(that.es_close){<span class="cstat-no" title="statement not covered" >that.es_close({},true)}</span>}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar _is_ie_htmlfile_capable;<span class="cstat-no" title="statement not covered" >v</span>ar isIeHtmlfileCapable=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(_is_ie_htmlfile_capable===undefined){<span class="cstat-no" title="statement not covered" >if("ActiveXObject"in _window){<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >_is_ie_htmlfile_capable=!!new ActiveXObject("htmlfile")</span></span></span></span></span>
}catch(x){}}else{<span class="cstat-no" title="statement not covered" >_is_ie_htmlfile_capable=false}</span>}<span class="cstat-no" title="statement not covered" >return _is_ie_htmlfile_capable}</span>;<span class="cstat-no" title="statement not covered" >var HtmlfileReceiver=<span class="fstat-no" title="function not covered" >function(url){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >u</span>tils.polluteGlobalNamespace();<span class="cstat-no" title="statement not covered" >t</span>hat.id="a"+utils.random_string(6,26);<span class="cstat-no" title="statement not covered" >u</span>rl+=(url.indexOf("?")===-1?"?":"&amp;")+"c="+escape(WPrefix+"."+that.id);<span class="cstat-no" title="statement not covered" >v</span>ar constructor=isIeHtmlfileCapable()?utils.createHtmlfile:utils.createIframe;<span class="cstat-no" title="statement not covered" >v</span>ar iframeObj;<span class="cstat-no" title="statement not covered" >_</span>window[WPrefix][that.id]={start:<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>iframeObj.loaded()}</span>,message:<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>that.dispatchEvent(new SimpleEvent("message",{data:data}))}</span>,stop:<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>that.iframe_close({},"network")}</span>};<span class="cstat-no" title="statement not covered" >t</span>hat.iframe_close=<span class="fstat-no" title="function not covered" >function(e,abort_reason){<span class="cstat-no" title="statement not covered" ></span>iframeObj.cleanup();<span class="cstat-no" title="statement not covered" >t</span>hat.iframe_close=iframeObj=null;<span class="cstat-no" title="statement not covered" >d</span>elete _window[WPrefix][that.id];<span class="cstat-no" title="statement not covered" >t</span>hat.dispatchEvent(new SimpleEvent("close",{reason:abort_reason}))}</span>;<span class="cstat-no" title="statement not covered" >i</span>frameObj=constructor(url,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>that.iframe_close({},"permanent")}</span>)}</span>;<span class="cstat-no" title="statement not covered" >H</span>tmlfileReceiver.prototype=new REventTarget;<span class="cstat-no" title="statement not covered" >H</span>tmlfileReceiver.prototype.abort=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >i</span>f(that.iframe_close){<span class="cstat-no" title="statement not covered" >that.iframe_close({},"user")}</span>}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar XhrReceiver=<span class="fstat-no" title="function not covered" >function(url,AjaxObject){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >v</span>ar buf_pos=0;<span class="cstat-no" title="statement not covered" >t</span>hat.xo=new AjaxObject("POST",url,null);<span class="cstat-no" title="statement not covered" >t</span>hat.xo.onchunk=<span class="fstat-no" title="function not covered" >function(status,text){<span class="cstat-no" title="statement not covered" ></span>if(status!==200)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >w</span></span>hile(1){<span class="cstat-no" title="statement not covered" >var buf=text.slice(buf_pos);<span class="cstat-no" title="statement not covered" >v</span>ar p=buf.indexOf("\n");<span class="cstat-no" title="statement not covered" >i</span>f(p===-1)<span class="cstat-no" title="statement not covered" >break;<span class="cstat-no" title="statement not covered" >b</span></span>uf_pos+=p+1;<span class="cstat-no" title="statement not covered" >v</span>ar msg=buf.slice(0,p);<span class="cstat-no" title="statement not covered" >t</span>hat.dispatchEvent(new SimpleEvent("message",{data:msg}))}</span>}</span>;<span class="cstat-no" title="statement not covered" >t</span>hat.xo.onfinish=<span class="fstat-no" title="function not covered" >function(status,text){<span class="cstat-no" title="statement not covered" ></span>that.xo.onchunk(status,text);<span class="cstat-no" title="statement not covered" >t</span>hat.xo=null;<span class="cstat-no" title="statement not covered" >v</span>ar reason=status===200?"network":"permanent";<span class="cstat-no" title="statement not covered" >t</span>hat.dispatchEvent(new SimpleEvent("close",{reason:reason}))}</span>}</span>;<span class="cstat-no" title="statement not covered" >X</span>hrReceiver.prototype=new REventTarget;<span class="cstat-no" title="statement not covered" >X</span>hrReceiver.prototype.abort=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >i</span>f(that.xo){<span class="cstat-no" title="statement not covered" >that.xo.close();<span class="cstat-no" title="statement not covered" >t</span>hat.dispatchEvent(new SimpleEvent("close",{reason:"user"}));<span class="cstat-no" title="statement not covered" >t</span>hat.xo=null}</span>}</span>;<span class="cstat-no" title="statement not covered" >S</span>ockJS.getUtils=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return utils}</span>;<span class="cstat-no" title="statement not covered" >S</span>ockJS.getIframeTransport=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return IframeTransport}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn SockJS}</span>();<span class="cstat-no" title="statement not covered" >if("_sockjs_onload"in window)<span class="cstat-no" title="statement not covered" >setTimeout(_sockjs_onload,1);<span class="cstat-no" title="statement not covered" >i</span></span>f(typeof define==="function"&amp;&amp;define.amd){<span class="cstat-no" title="statement not covered" >define("sockjs",[],<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return SockJS}</span>)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(typeof module==="object"&amp;&amp;module&amp;&amp;module.exports){<span class="cstat-no" title="statement not covered" >module.exports=SockJS}</span>}</span>,{}],52:[<span class="fstat-no" title="function not covered" >function(require,module,exports){<span class="cstat-no" title="statement not covered" ></span>(<span class="fstat-no" title="function not covered" >function(process){<span class="cstat-no" title="statement not covered" ></span>var hyperglue=require("hyperglue");<span class="cstat-no" title="statement not covered" >v</span>ar EventEmitter=require("events").EventEmitter;<span class="cstat-no" title="statement not covered" >v</span>ar inherits=require("inherits");<span class="cstat-no" title="statement not covered" >v</span>ar html=require("./static/html");<span class="cstat-no" title="statement not covered" >v</span>ar css=require("./static/css");<span class="cstat-no" title="statement not covered" >m</span>odule.exports=Slider;<span class="cstat-no" title="statement not covered" >i</span>nherits(Slider,EventEmitter);<span class="cstat-no" title="statement not covered" >v</span>ar insertedCss=false;<span class="fstat-no" title="function not covered" >f</span>unction Slider(opts){<span class="cstat-no" title="statement not covered" ></span>if(!(this instanceof Slider))<span class="cstat-no" title="statement not covered" >return new Slider(opts);<span class="cstat-no" title="statement not covered" >E</span></span>ventEmitter.call(this);<span class="cstat-no" title="statement not covered" >v</span>ar self=this;<span class="cstat-no" title="statement not covered" >i</span>f(!opts)<span class="cstat-no" title="statement not covered" >opts={};<span class="cstat-no" title="statement not covered" >t</span></span>his.max=opts.max===undefined?1:opts.max;<span class="cstat-no" title="statement not covered" >t</span>his.min=opts.min===undefined?0:opts.min;<span class="cstat-no" title="statement not covered" >t</span>his.snap=opts.snap;<span class="cstat-no" title="statement not covered" >p</span>rocess.nextTick(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(opts.init!==undefined){<span class="cstat-no" title="statement not covered" >self.set(opts.init)}</span>else <span class="cstat-no" title="statement not covered" >if(opts.min!==undefined){<span class="cstat-no" title="statement not covered" >self.set(opts.min)}</span>else <span class="cstat-no" title="statement not covered" >self.set(0)}</span></span></span>);<span class="cstat-no" title="statement not covered" >i</span>f(!insertedCss&amp;&amp;opts.insertCss!==false){<span class="cstat-no" title="statement not covered" >var style=document.createElement("style");<span class="cstat-no" title="statement not covered" >s</span>tyle.appendChild(document.createTextNode(css));<span class="cstat-no" title="statement not covered" >i</span>f(document.head.childNodes.length){<span class="cstat-no" title="statement not covered" >document.head.insertBefore(style,document.head.childNodes[0])}</span>else{<span class="cstat-no" title="statement not covered" >document.head.appendChild(style)}<span class="cstat-no" title="statement not covered" ></span>i</span>nsertedCss=true}<span class="cstat-no" title="statement not covered" ></span>v</span>ar root=this.element=hyperglue(html);<span class="cstat-no" title="statement not covered" >v</span>ar turtle=this.turtle=root.querySelector(".turtle");<span class="cstat-no" title="statement not covered" >v</span>ar runner=root.querySelector(".runner");<span class="cstat-no" title="statement not covered" >v</span>ar down=false;<span class="cstat-no" title="statement not covered" >t</span>urtle.addEventListener("mousedown",<span class="fstat-no" title="function not covered" >function(ev){<span class="cstat-no" title="statement not covered" ></span>ev.preventDefault();<span class="cstat-no" title="statement not covered" >t</span>urtle.className="turtle pressed";<span class="cstat-no" title="statement not covered" >d</span>own={x:ev.clientX-root.offsetLeft-turtle.offsetLeft}}</span>);<span class="cstat-no" title="statement not covered" >r</span>oot.addEventListener("mousedown",<span class="fstat-no" title="function not covered" >function(ev){<span class="cstat-no" title="statement not covered" ></span>ev.preventDefault()}</span>);<span class="cstat-no" title="statement not covered" >w</span>indow.addEventListener("mouseup",mouseup);<span class="cstat-no" title="statement not covered" >w</span>indow.addEventListener("mousemove",onmove);<span class="fstat-no" title="function not covered" >f</span>unction onmove(ev){<span class="cstat-no" title="statement not covered" ></span>ev.preventDefault();<span class="cstat-no" title="statement not covered" >i</span>f(!down)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >v</span></span>ar w=self._elementWidth();<span class="cstat-no" title="statement not covered" >v</span>ar x=Math.max(0,Math.min(w,ev.clientX-root.offsetLeft-down.x));<span class="cstat-no" title="statement not covered" >v</span>ar value=x/w;<span class="cstat-no" title="statement not covered" >i</span>f(isNaN(value))<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >s</span></span>elf.set(self.interpolate(value))}<span class="fstat-no" title="function not covered" ></span>function mouseup(){<span class="cstat-no" title="statement not covered" ></span>down=true;<span class="cstat-no" title="statement not covered" >t</span>urtle.className="turtle"}</span>}<span class="cstat-no" title="statement not covered" >Slider.prototype.appendTo=<span class="fstat-no" title="function not covered" >function(target){<span class="cstat-no" title="statement not covered" ></span>if(typeof target==="string"){<span class="cstat-no" title="statement not covered" >target=document.querySelector(target)}<span class="cstat-no" title="statement not covered" ></span>t</span>arget.appendChild(this.element)}</span>;<span class="cstat-no" title="statement not covered" >S</span>lider.prototype.interpolate=<span class="fstat-no" title="function not covered" >function(value){<span class="cstat-no" title="statement not covered" ></span>var v=value*(this.max-this.min)+this.min;<span class="cstat-no" title="statement not covered" >v</span>ar res=this.snap?Math.round(v/this.snap)*this.snap:v;<span class="cstat-no" title="statement not covered" >r</span>eturn Math.max(this.min,Math.min(this.max,res))}</span>;<span class="cstat-no" title="statement not covered" >S</span>lider.prototype.set=<span class="fstat-no" title="function not covered" >function(value){<span class="cstat-no" title="statement not covered" ></span>value=Math.max(this.min,Math.min(this.max,value));<span class="cstat-no" title="statement not covered" >v</span>ar x=(value-this.min)/(this.max-this.min);<span class="cstat-no" title="statement not covered" >t</span>his.turtle.style.left=x*this._elementWidth()+"px";<span class="cstat-no" title="statement not covered" >v</span>alue=Math.round(value*1e10)/1e10;<span class="cstat-no" title="statement not covered" >t</span>his.emit("value",value)}</span>;<span class="cstat-no" title="statement not covered" >S</span>lider.prototype._elementWidth=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var style={root:window.getComputedStyle(this.element),turtle:window.getComputedStyle(this.turtle)};<span class="cstat-no" title="statement not covered" >r</span>eturn num(style.root.width)-num(style.turtle.width)-num(style.turtle["border-width"])}</span>;<span class="fstat-no" title="function not covered" >f</span>unction num(s){<span class="cstat-no" title="statement not covered" ></span>return Number((/^(\d+)/.exec(s)||[0,0])[1])}</span>}).call(this,require("g5I+bs"))}</span>,{"./static/css":53,"./static/html":54,events:18,"g5I+bs":45,hyperglue:24,inherits:28}],53:[<span class="fstat-no" title="function not covered" >function(require,module,exports){<span class="cstat-no" title="statement not covered" ></span>module.exports=[".slideways {","position: relative;","left: 0px;","top: 0px;","display: inline-block;","height: 24px;","width: 150px;","}",".slideways .turtle {","position: absolute;","top: 0px;","left: 0px;","bottom: 0px;","width: 8px;","margin-top: 0px;","margin-bottom: 0px;","background-color: white;","border: 2px solid rgb(52,52,52);","border-radius: 4px;","}",".slideways .turtle.pressed {","background-color: rgb(223,223,223);","}",".slideways .runner {","position: absolute;","top: 8px;","left: 4px;","right: 4px;","height: 5px;","background-color: rgb(96,96,96);","border: 2px solid rgb(52,52,52);","border-radius: 3px;","}"].join("\n")}</span>,{}],54:[<span class="fstat-no" title="function not covered" >function(require,module,exports){<span class="cstat-no" title="statement not covered" ></span>module.exports=['&lt;div class="slideways"&gt;','&lt;div class="runner"&gt;&lt;/div&gt;','&lt;div class="turtle"&gt;&lt;/div&gt;',"&lt;/div&gt;"].join("\n")}</span>,{}],55:[<span class="fstat-no" title="function not covered" >function(require,module,exports){<span class="cstat-no" title="statement not covered" ></span>var through=require("through");<span class="cstat-no" title="statement not covered" >v</span>ar Decoder=require("string_decoder").StringDecoder;<span class="cstat-no" title="statement not covered" >m</span>odule.exports=split;<span class="fstat-no" title="function not covered" >f</span>unction split(matcher,mapper,options){<span class="cstat-no" title="statement not covered" ></span>var decoder=new Decoder;<span class="cstat-no" title="statement not covered" >v</span>ar soFar="";<span class="cstat-no" title="statement not covered" >v</span>ar maxLength=options&amp;&amp;options.maxLength;<span class="cstat-no" title="statement not covered" >i</span>f("function"===typeof matcher)<span class="cstat-no" title="statement not covered" >mapper=matcher,matcher=null;<span class="cstat-no" title="statement not covered" >i</span></span>f(!matcher)<span class="cstat-no" title="statement not covered" >matcher=/\r?\n/;<span class="fstat-no" title="function not covered" >f</span></span>unction emit(stream,piece){<span class="cstat-no" title="statement not covered" ></span>if(mapper){<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >piece=mapper(piece)}</span>catch(err){<span class="cstat-no" title="statement not covered" >return stream.emit("error",err)}<span class="cstat-no" title="statement not covered" ></span>i</span>f("undefined"!==typeof piece)<span class="cstat-no" title="statement not covered" >stream.queue(piece)}</span></span>else <span class="cstat-no" title="statement not covered" >stream.queue(piece)}<span class="fstat-no" title="function not covered" ></span></span>function next(stream,buffer){<span class="cstat-no" title="statement not covered" ></span>var pieces=((soFar!=null?soFar:"")+buffer).split(matcher);<span class="cstat-no" title="statement not covered" >s</span>oFar=pieces.pop();<span class="cstat-no" title="statement not covered" >i</span>f(maxLength&amp;&amp;soFar.length&gt;maxLength)<span class="cstat-no" title="statement not covered" >stream.emit("error",new Error("maximum buffer reached"));<span class="cstat-no" title="statement not covered" >f</span></span>or(var i=0;i&lt;pieces.length;i++){<span class="cstat-no" title="statement not covered" >var piece=pieces[i];<span class="cstat-no" title="statement not covered" >e</span>mit(stream,piece)}</span>}<span class="cstat-no" title="statement not covered" ></span>return through(<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>next(this,decoder.write(b))}</span>,<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(decoder.end)<span class="cstat-no" title="statement not covered" >next(this,decoder.end());<span class="cstat-no" title="statement not covered" >i</span></span>f(soFar!=null)<span class="cstat-no" title="statement not covered" >emit(this,soFar);<span class="cstat-no" title="statement not covered" >t</span></span>his.queue(null)}</span>)}</span>},{string_decoder:7,through:56}],56:[<span class="fstat-no" title="function not covered" >function(require,module,exports){<span class="cstat-no" title="statement not covered" ></span>(<span class="fstat-no" title="function not covered" >function(process){<span class="cstat-no" title="statement not covered" ></span>var Stream=require("stream");<span class="cstat-no" title="statement not covered" >e</span>xports=module.exports=through;<span class="cstat-no" title="statement not covered" >t</span>hrough.through=through;<span class="fstat-no" title="function not covered" >f</span>unction through(write,end,opts){<span class="cstat-no" title="statement not covered" ></span>write=write||<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>this.queue(data)}</span>;<span class="cstat-no" title="statement not covered" >e</span>nd=end||<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this.queue(null)}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar ended=false,destroyed=false,buffer=[],_ended=false;<span class="cstat-no" title="statement not covered" >v</span>ar stream=new Stream;<span class="cstat-no" title="statement not covered" >s</span>tream.readable=stream.writable=true;<span class="cstat-no" title="statement not covered" >s</span>tream.paused=false;<span class="cstat-no" title="statement not covered" >s</span>tream.autoDestroy=!(opts&amp;&amp;opts.autoDestroy===false);<span class="cstat-no" title="statement not covered" >s</span>tream.write=<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>write.call(this,data);<span class="cstat-no" title="statement not covered" >r</span>eturn!stream.paused}</span>;<span class="fstat-no" title="function not covered" >f</span>unction drain(){<span class="cstat-no" title="statement not covered" ></span>while(buffer.length&amp;&amp;!stream.paused){<span class="cstat-no" title="statement not covered" >var data=buffer.shift();<span class="cstat-no" title="statement not covered" >i</span>f(null===data)<span class="cstat-no" title="statement not covered" >return stream.emit("end");e</span>lse <span class="cstat-no" title="statement not covered" >stream.emit("data",data)}</span></span>}<span class="cstat-no" title="statement not covered" ></span>stream.queue=stream.push=<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>if(_ended)<span class="cstat-no" title="statement not covered" >return stream;<span class="cstat-no" title="statement not covered" >i</span></span>f(data===null)<span class="cstat-no" title="statement not covered" >_ended=true;<span class="cstat-no" title="statement not covered" >b</span></span>uffer.push(data);<span class="cstat-no" title="statement not covered" >d</span>rain();<span class="cstat-no" title="statement not covered" >r</span>eturn stream}</span>;<span class="cstat-no" title="statement not covered" >s</span>tream.on("end",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>stream.readable=false;<span class="cstat-no" title="statement not covered" >i</span>f(!stream.writable&amp;&amp;stream.autoDestroy)<span class="cstat-no" title="statement not covered" >process.nextTick(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>stream.destroy()}</span>)}</span></span>);<span class="fstat-no" title="function not covered" >f</span>unction _end(){<span class="cstat-no" title="statement not covered" ></span>stream.writable=false;<span class="cstat-no" title="statement not covered" >e</span>nd.call(stream);<span class="cstat-no" title="statement not covered" >i</span>f(!stream.readable&amp;&amp;stream.autoDestroy)<span class="cstat-no" title="statement not covered" >stream.destroy()}<span class="cstat-no" title="statement not covered" ></span></span>stream.end=<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>if(ended)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >e</span></span>nded=true;<span class="cstat-no" title="statement not covered" >i</span>f(arguments.length)<span class="cstat-no" title="statement not covered" >stream.write(data);<span class="cstat-no" title="statement not covered" >_</span></span>end();<span class="cstat-no" title="statement not covered" >r</span>eturn stream}</span>;<span class="cstat-no" title="statement not covered" >s</span>tream.destroy=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(destroyed)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >d</span></span>estroyed=true;<span class="cstat-no" title="statement not covered" >e</span>nded=true;<span class="cstat-no" title="statement not covered" >b</span>uffer.length=0;<span class="cstat-no" title="statement not covered" >s</span>tream.writable=stream.readable=false;<span class="cstat-no" title="statement not covered" >s</span>tream.emit("close");<span class="cstat-no" title="statement not covered" >r</span>eturn stream}</span>;<span class="cstat-no" title="statement not covered" >s</span>tream.pause=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(stream.paused)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >s</span></span>tream.paused=true;<span class="cstat-no" title="statement not covered" >r</span>eturn stream}</span>;<span class="cstat-no" title="statement not covered" >s</span>tream.resume=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(stream.paused){<span class="cstat-no" title="statement not covered" >stream.paused=false;<span class="cstat-no" title="statement not covered" >s</span>tream.emit("resume")}<span class="cstat-no" title="statement not covered" ></span>d</span>rain();<span class="cstat-no" title="statement not covered" >i</span>f(!stream.paused)<span class="cstat-no" title="statement not covered" >stream.emit("drain");<span class="cstat-no" title="statement not covered" >r</span></span>eturn stream}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn stream}</span>}).call(this,require("g5I+bs"))}</span>,{"g5I+bs":45,stream:58}],57:[function(require,module,exports){module.exports=Duplex;var inherits=require("inherits");var setImmediate=require("process/browser.js").nextTick;var Readable=require("./readable.js");var Writable=require("./writable.js");inherits(Duplex,Readable);Duplex.prototype.write=Writable.prototype.write;Duplex.prototype.end=Writable.prototype.end;Duplex.prototype._write=Writable.prototype._write;<span class="fstat-no" title="function not covered" >function Duplex(options){<span class="cstat-no" title="statement not covered" ></span>if(!(this instanceof Duplex))<span class="cstat-no" title="statement not covered" >return new Duplex(options);<span class="cstat-no" title="statement not covered" >R</span></span>eadable.call(this,options);<span class="cstat-no" title="statement not covered" >W</span>ritable.call(this,options);<span class="cstat-no" title="statement not covered" >i</span>f(options&amp;&amp;options.readable===false)<span class="cstat-no" title="statement not covered" >this.readable=false;<span class="cstat-no" title="statement not covered" >i</span></span>f(options&amp;&amp;options.writable===false)<span class="cstat-no" title="statement not covered" >this.writable=false;<span class="cstat-no" title="statement not covered" >t</span></span>his.allowHalfOpen=true;<span class="cstat-no" title="statement not covered" >i</span>f(options&amp;&amp;options.allowHalfOpen===false)<span class="cstat-no" title="statement not covered" >this.allowHalfOpen=false;<span class="cstat-no" title="statement not covered" >t</span></span>his.once("end",onend)}<span class="fstat-no" title="function not covered" ></span>function onend(){<span class="cstat-no" title="statement not covered" ></span>if(this.allowHalfOpen||this._writableState.ended)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >v</span></span>ar self=this;<span class="cstat-no" title="statement not covered" >s</span>etImmediate(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>self.end()}</span>)}</span>},{"./readable.js":61,"./writable.js":63,inherits:28,"process/browser.js":59}],58:[function(require,module,exports){module.exports=Stream;var EE=require("events").EventEmitter;var inherits=require("inherits");inherits(Stream,EE);Stream.Readable=require("./readable.js");Stream.Writable=require("./writable.js");Stream.Duplex=require("./duplex.js");Stream.Transform=require("./transform.js");Stream.PassThrough=require("./passthrough.js");Stream.Stream=Stream;<span class="fstat-no" title="function not covered" >function Stream(){<span class="cstat-no" title="statement not covered" ></span>EE.call(this)}</span>Stream.prototype.pipe=<span class="fstat-no" title="function not covered" >function(dest,options){<span class="cstat-no" title="statement not covered" ></span>var source=this;<span class="fstat-no" title="function not covered" >f</span>unction ondata(chunk){<span class="cstat-no" title="statement not covered" ></span>if(dest.writable){<span class="cstat-no" title="statement not covered" >if(false===dest.write(chunk)&amp;&amp;source.pause){<span class="cstat-no" title="statement not covered" >source.pause()}</span>}</span>}<span class="cstat-no" title="statement not covered" ></span>source.on("data",ondata);<span class="fstat-no" title="function not covered" >f</span>unction ondrain(){<span class="cstat-no" title="statement not covered" ></span>if(source.readable&amp;&amp;source.resume){<span class="cstat-no" title="statement not covered" >source.resume()}</span>}<span class="cstat-no" title="statement not covered" ></span>dest.on("drain",ondrain);<span class="cstat-no" title="statement not covered" >i</span>f(!dest._isStdio&amp;&amp;(!options||options.end!==false)){<span class="cstat-no" title="statement not covered" >source.on("end",onend);<span class="cstat-no" title="statement not covered" >s</span>ource.on("close",onclose)}<span class="cstat-no" title="statement not covered" ></span>v</span>ar didOnEnd=false;<span class="fstat-no" title="function not covered" >f</span>unction onend(){<span class="cstat-no" title="statement not covered" ></span>if(didOnEnd)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >d</span></span>idOnEnd=true;<span class="cstat-no" title="statement not covered" >d</span>est.end()}<span class="fstat-no" title="function not covered" ></span>function onclose(){<span class="cstat-no" title="statement not covered" ></span>if(didOnEnd)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >d</span></span>idOnEnd=true;<span class="cstat-no" title="statement not covered" >i</span>f(typeof dest.destroy==="function")<span class="cstat-no" title="statement not covered" >dest.destroy()}<span class="fstat-no" title="function not covered" ></span></span>function onerror(er){<span class="cstat-no" title="statement not covered" ></span>cleanup();<span class="cstat-no" title="statement not covered" >i</span>f(EE.listenerCount(this,"error")===0){<span class="cstat-no" title="statement not covered" >throw er}</span>}<span class="cstat-no" title="statement not covered" ></span>source.on("error",onerror);<span class="cstat-no" title="statement not covered" >d</span>est.on("error",onerror);<span class="fstat-no" title="function not covered" >f</span>unction cleanup(){<span class="cstat-no" title="statement not covered" ></span>source.removeListener("data",ondata);<span class="cstat-no" title="statement not covered" >d</span>est.removeListener("drain",ondrain);<span class="cstat-no" title="statement not covered" >s</span>ource.removeListener("end",onend);<span class="cstat-no" title="statement not covered" >s</span>ource.removeListener("close",onclose);<span class="cstat-no" title="statement not covered" >s</span>ource.removeListener("error",onerror);<span class="cstat-no" title="statement not covered" >d</span>est.removeListener("error",onerror);<span class="cstat-no" title="statement not covered" >s</span>ource.removeListener("end",cleanup);<span class="cstat-no" title="statement not covered" >s</span>ource.removeListener("close",cleanup);<span class="cstat-no" title="statement not covered" >d</span>est.removeListener("close",cleanup)}<span class="cstat-no" title="statement not covered" ></span>source.on("end",cleanup);<span class="cstat-no" title="statement not covered" >s</span>ource.on("close",cleanup);<span class="cstat-no" title="statement not covered" >d</span>est.on("close",cleanup);<span class="cstat-no" title="statement not covered" >d</span>est.emit("pipe",source);<span class="cstat-no" title="statement not covered" >r</span>eturn dest}</span>},{"./duplex.js":57,"./passthrough.js":60,"./readable.js":61,"./transform.js":62,"./writable.js":63,events:18,inherits:28}],59:[function(require,module,exports){var process=module.exports={};process.nextTick=function(){var canSetImmediate=typeof window!=="undefined"&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >window.setImmediate;</span>var canPost=typeof window!=="undefined"&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >window.postMessage&amp;</span>&amp;<span class="branch-2 cbranch-no" title="branch not covered" >window.addEventListener;<span class="missing-if-branch" title="if path not taken" >I</span></span>if(canSetImmediate){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >function(f){<span class="cstat-no" title="statement not covered" ></span>return window.setImmediate(f)}</span>}<span class="missing-if-branch" title="if path not taken" >I</span></span>if(canPost){<span class="cstat-no" title="statement not covered" >var queue=[];<span class="cstat-no" title="statement not covered" >w</span>indow.addEventListener("message",<span class="fstat-no" title="function not covered" >function(ev){<span class="cstat-no" title="statement not covered" ></span>var source=ev.source;<span class="cstat-no" title="statement not covered" >i</span>f((source===window||source===null)&amp;&amp;ev.data==="process-tick"){<span class="cstat-no" title="statement not covered" >ev.stopPropagation();<span class="cstat-no" title="statement not covered" >i</span>f(queue.length&gt;0){<span class="cstat-no" title="statement not covered" >var fn=queue.shift();<span class="cstat-no" title="statement not covered" >f</span>n()}</span>}</span>}</span>,true);<span class="cstat-no" title="statement not covered" >r</span>eturn <span class="fstat-no" title="function not covered" >function nextTick(fn){<span class="cstat-no" title="statement not covered" ></span>queue.push(fn);<span class="cstat-no" title="statement not covered" >w</span>indow.postMessage("process-tick","*")}</span>}</span>return <span class="fstat-no" title="function not covered" >function nextTick(fn){<span class="cstat-no" title="statement not covered" ></span>setTimeout(fn,0)}</span>}();process.title="browser";process.browser=true;process.env={};process.argv=[];process.binding=<span class="fstat-no" title="function not covered" >function(name){<span class="cstat-no" title="statement not covered" ></span>throw new Error("process.binding is not supported")}</span>;process.cwd=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return"/"}</span>;process.chdir=<span class="fstat-no" title="function not covered" >function(dir){<span class="cstat-no" title="statement not covered" ></span>throw new Error("process.chdir is not supported")}</span>},{}],60:[function(require,module,exports){module.exports=PassThrough;var Transform=require("./transform.js");var inherits=require("inherits");inherits(PassThrough,Transform);<span class="fstat-no" title="function not covered" >function PassThrough(options){<span class="cstat-no" title="statement not covered" ></span>if(!(this instanceof PassThrough))<span class="cstat-no" title="statement not covered" >return new PassThrough(options);<span class="cstat-no" title="statement not covered" >T</span></span>ransform.call(this,options)}</span>PassThrough.prototype._transform=<span class="fstat-no" title="function not covered" >function(chunk,encoding,cb){<span class="cstat-no" title="statement not covered" ></span>cb(null,chunk)}</span>},{"./transform.js":62,inherits:28}],61:[function(require,module,exports){(function(process){module.exports=Readable;Readable.ReadableState=ReadableState;var EE=require("events").EventEmitter;var Stream=require("./index.js");var Buffer=require("buffer").Buffer;var setImmediate=require("process/browser.js").nextTick;var StringDecoder;var inherits=require("inherits");inherits(Readable,Stream);<span class="fstat-no" title="function not covered" >function ReadableState(options,stream){<span class="cstat-no" title="statement not covered" ></span>options=options||{};<span class="cstat-no" title="statement not covered" >v</span>ar hwm=options.highWaterMark;<span class="cstat-no" title="statement not covered" >t</span>his.highWaterMark=hwm||hwm===0?hwm:16*1024;<span class="cstat-no" title="statement not covered" >t</span>his.highWaterMark=~~this.highWaterMark;<span class="cstat-no" title="statement not covered" >t</span>his.buffer=[];<span class="cstat-no" title="statement not covered" >t</span>his.length=0;<span class="cstat-no" title="statement not covered" >t</span>his.pipes=null;<span class="cstat-no" title="statement not covered" >t</span>his.pipesCount=0;<span class="cstat-no" title="statement not covered" >t</span>his.flowing=false;<span class="cstat-no" title="statement not covered" >t</span>his.ended=false;<span class="cstat-no" title="statement not covered" >t</span>his.endEmitted=false;<span class="cstat-no" title="statement not covered" >t</span>his.reading=false;<span class="cstat-no" title="statement not covered" >t</span>his.calledRead=false;<span class="cstat-no" title="statement not covered" >t</span>his.sync=true;<span class="cstat-no" title="statement not covered" >t</span>his.needReadable=false;<span class="cstat-no" title="statement not covered" >t</span>his.emittedReadable=false;<span class="cstat-no" title="statement not covered" >t</span>his.readableListening=false;<span class="cstat-no" title="statement not covered" >t</span>his.objectMode=!!options.objectMode;<span class="cstat-no" title="statement not covered" >t</span>his.defaultEncoding=options.defaultEncoding||"utf8";<span class="cstat-no" title="statement not covered" >t</span>his.ranOut=false;<span class="cstat-no" title="statement not covered" >t</span>his.awaitDrain=0;<span class="cstat-no" title="statement not covered" >t</span>his.readingMore=false;<span class="cstat-no" title="statement not covered" >t</span>his.decoder=null;<span class="cstat-no" title="statement not covered" >t</span>his.encoding=null;<span class="cstat-no" title="statement not covered" >i</span>f(options.encoding){<span class="cstat-no" title="statement not covered" >if(!StringDecoder)<span class="cstat-no" title="statement not covered" >StringDecoder=require("string_decoder").StringDecoder;<span class="cstat-no" title="statement not covered" >t</span></span>his.decoder=new StringDecoder(options.encoding);<span class="cstat-no" title="statement not covered" >t</span>his.encoding=options.encoding}</span>}<span class="fstat-no" title="function not covered" ></span>function Readable(options){<span class="cstat-no" title="statement not covered" ></span>if(!(this instanceof Readable))<span class="cstat-no" title="statement not covered" >return new Readable(options);<span class="cstat-no" title="statement not covered" >t</span></span>his._readableState=new ReadableState(options,this);<span class="cstat-no" title="statement not covered" >t</span>his.readable=true;<span class="cstat-no" title="statement not covered" >S</span>tream.call(this)}</span>Readable.prototype.push=<span class="fstat-no" title="function not covered" >function(chunk,encoding){<span class="cstat-no" title="statement not covered" ></span>var state=this._readableState;<span class="cstat-no" title="statement not covered" >i</span>f(typeof chunk==="string"&amp;&amp;!state.objectMode){<span class="cstat-no" title="statement not covered" >encoding=encoding||state.defaultEncoding;<span class="cstat-no" title="statement not covered" >i</span>f(encoding!==state.encoding){<span class="cstat-no" title="statement not covered" >chunk=new Buffer(chunk,encoding);<span class="cstat-no" title="statement not covered" >e</span>ncoding=""}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn readableAddChunk(this,state,chunk,encoding,false)}</span>;Readable.prototype.unshift=<span class="fstat-no" title="function not covered" >function(chunk){<span class="cstat-no" title="statement not covered" ></span>var state=this._readableState;<span class="cstat-no" title="statement not covered" >r</span>eturn readableAddChunk(this,state,chunk,"",true)}</span>;<span class="fstat-no" title="function not covered" >function readableAddChunk(stream,state,chunk,encoding,addToFront){<span class="cstat-no" title="statement not covered" ></span>var er=chunkInvalid(state,chunk);<span class="cstat-no" title="statement not covered" >i</span>f(er){<span class="cstat-no" title="statement not covered" >stream.emit("error",er)}</span>else <span class="cstat-no" title="statement not covered" >if(chunk===null||chunk===undefined){<span class="cstat-no" title="statement not covered" >state.reading=false;<span class="cstat-no" title="statement not covered" >i</span>f(!state.ended)<span class="cstat-no" title="statement not covered" >onEofChunk(stream,state)}</span></span>else <span class="cstat-no" title="statement not covered" >if(state.objectMode||chunk&amp;&amp;chunk.length&gt;0){<span class="cstat-no" title="statement not covered" >if(state.ended&amp;&amp;!addToFront){<span class="cstat-no" title="statement not covered" >var e=new Error("stream.push() after EOF");<span class="cstat-no" title="statement not covered" >s</span>tream.emit("error",e)}</span>else <span class="cstat-no" title="statement not covered" >if(state.endEmitted&amp;&amp;addToFront){<span class="cstat-no" title="statement not covered" >var e=new Error("stream.unshift() after end event");<span class="cstat-no" title="statement not covered" >s</span>tream.emit("error",e)}</span>else{<span class="cstat-no" title="statement not covered" >if(state.decoder&amp;&amp;!addToFront&amp;&amp;!encoding)<span class="cstat-no" title="statement not covered" >chunk=state.decoder.write(chunk);<span class="cstat-no" title="statement not covered" >s</span></span>tate.length+=state.objectMode?1:chunk.length;<span class="cstat-no" title="statement not covered" >i</span>f(addToFront){<span class="cstat-no" title="statement not covered" >state.buffer.unshift(chunk)}</span>else{<span class="cstat-no" title="statement not covered" >state.reading=false;<span class="cstat-no" title="statement not covered" >s</span>tate.buffer.push(chunk)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(state.needReadable)<span class="cstat-no" title="statement not covered" >emitReadable(stream);<span class="cstat-no" title="statement not covered" >m</span></span>aybeReadMore(stream,state)}</span>}</span></span>else <span class="cstat-no" title="statement not covered" >if(!addToFront){<span class="cstat-no" title="statement not covered" >state.reading=false}<span class="cstat-no" title="statement not covered" ></span>r</span></span></span></span>eturn needMoreData(state)}<span class="fstat-no" title="function not covered" ></span>function needMoreData(state){<span class="cstat-no" title="statement not covered" ></span>return!state.ended&amp;&amp;(state.needReadable||state.length&lt;state.highWaterMark||state.length===0)}</span>Readable.prototype.setEncoding=<span class="fstat-no" title="function not covered" >function(enc){<span class="cstat-no" title="statement not covered" ></span>if(!StringDecoder)<span class="cstat-no" title="statement not covered" >StringDecoder=require("string_decoder").StringDecoder;<span class="cstat-no" title="statement not covered" >t</span></span>his._readableState.decoder=new StringDecoder(enc);<span class="cstat-no" title="statement not covered" >t</span>his._readableState.encoding=enc}</span>;var MAX_HWM=8388608;<span class="fstat-no" title="function not covered" >function roundUpToNextPowerOf2(n){<span class="cstat-no" title="statement not covered" ></span>if(n&gt;=MAX_HWM){<span class="cstat-no" title="statement not covered" >n=MAX_HWM}</span>else{<span class="cstat-no" title="statement not covered" >n--;<span class="cstat-no" title="statement not covered" >f</span>or(var p=1;p&lt;32;p&lt;&lt;=1)<span class="cstat-no" title="statement not covered" >n|=n&gt;&gt;p;<span class="cstat-no" title="statement not covered" >n</span></span>++}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn n}<span class="fstat-no" title="function not covered" ></span>function howMuchToRead(n,state){<span class="cstat-no" title="statement not covered" ></span>if(state.length===0&amp;&amp;state.ended)<span class="cstat-no" title="statement not covered" >return 0;<span class="cstat-no" title="statement not covered" >i</span></span>f(state.objectMode)<span class="cstat-no" title="statement not covered" >return n===0?0:1;<span class="cstat-no" title="statement not covered" >i</span></span>f(isNaN(n)||n===null){<span class="cstat-no" title="statement not covered" >if(state.flowing&amp;&amp;state.buffer.length)<span class="cstat-no" title="statement not covered" >return state.buffer[0].length;e</span>lse <span class="cstat-no" title="statement not covered" >return state.length}<span class="cstat-no" title="statement not covered" ></span></span>i</span>f(n&lt;=0)<span class="cstat-no" title="statement not covered" >return 0;<span class="cstat-no" title="statement not covered" >i</span></span>f(n&gt;state.highWaterMark)<span class="cstat-no" title="statement not covered" >state.highWaterMark=roundUpToNextPowerOf2(n);<span class="cstat-no" title="statement not covered" >i</span></span>f(n&gt;state.length){<span class="cstat-no" title="statement not covered" >if(!state.ended){<span class="cstat-no" title="statement not covered" >state.needReadable=true;<span class="cstat-no" title="statement not covered" >r</span>eturn 0}</span>else <span class="cstat-no" title="statement not covered" >return state.length}<span class="cstat-no" title="statement not covered" ></span></span>r</span>eturn n}</span>Readable.prototype.read=<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>var state=this._readableState;<span class="cstat-no" title="statement not covered" >s</span>tate.calledRead=true;<span class="cstat-no" title="statement not covered" >v</span>ar nOrig=n;<span class="cstat-no" title="statement not covered" >i</span>f(typeof n!=="number"||n&gt;0)<span class="cstat-no" title="statement not covered" >state.emittedReadable=false;<span class="cstat-no" title="statement not covered" >i</span></span>f(n===0&amp;&amp;state.needReadable&amp;&amp;(state.length&gt;=state.highWaterMark||state.ended)){<span class="cstat-no" title="statement not covered" >emitReadable(this);<span class="cstat-no" title="statement not covered" >r</span>eturn null}<span class="cstat-no" title="statement not covered" ></span>n</span>=howMuchToRead(n,state);<span class="cstat-no" title="statement not covered" >i</span>f(n===0&amp;&amp;state.ended){<span class="cstat-no" title="statement not covered" >if(state.length===0)<span class="cstat-no" title="statement not covered" >endReadable(this);<span class="cstat-no" title="statement not covered" >r</span></span>eturn null}<span class="cstat-no" title="statement not covered" ></span>v</span>ar doRead=state.needReadable;<span class="cstat-no" title="statement not covered" >i</span>f(state.length-n&lt;=state.highWaterMark)<span class="cstat-no" title="statement not covered" >doRead=true;<span class="cstat-no" title="statement not covered" >i</span></span>f(state.ended||state.reading)<span class="cstat-no" title="statement not covered" >doRead=false;<span class="cstat-no" title="statement not covered" >i</span></span>f(doRead){<span class="cstat-no" title="statement not covered" >state.reading=true;<span class="cstat-no" title="statement not covered" >s</span>tate.sync=true;<span class="cstat-no" title="statement not covered" >i</span>f(state.length===0)<span class="cstat-no" title="statement not covered" >state.needReadable=true;<span class="cstat-no" title="statement not covered" >t</span></span>his._read(state.highWaterMark);<span class="cstat-no" title="statement not covered" >s</span>tate.sync=false}<span class="cstat-no" title="statement not covered" ></span>i</span>f(doRead&amp;&amp;!state.reading)<span class="cstat-no" title="statement not covered" >n=howMuchToRead(nOrig,state);<span class="cstat-no" title="statement not covered" >v</span></span>ar ret;<span class="cstat-no" title="statement not covered" >i</span>f(n&gt;0)<span class="cstat-no" title="statement not covered" >ret=fromList(n,state);e</span>lse <span class="cstat-no" title="statement not covered" >ret=null;<span class="cstat-no" title="statement not covered" >i</span></span>f(ret===null){<span class="cstat-no" title="statement not covered" >state.needReadable=true;<span class="cstat-no" title="statement not covered" >n</span>=0}<span class="cstat-no" title="statement not covered" ></span>s</span>tate.length-=n;<span class="cstat-no" title="statement not covered" >i</span>f(state.length===0&amp;&amp;!state.ended)<span class="cstat-no" title="statement not covered" >state.needReadable=true;<span class="cstat-no" title="statement not covered" >i</span></span>f(state.ended&amp;&amp;!state.endEmitted&amp;&amp;state.length===0)<span class="cstat-no" title="statement not covered" >endReadable(this);<span class="cstat-no" title="statement not covered" >r</span></span>eturn ret}</span>;<span class="fstat-no" title="function not covered" >function chunkInvalid(state,chunk){<span class="cstat-no" title="statement not covered" ></span>var er=null;<span class="cstat-no" title="statement not covered" >i</span>f(!Buffer.isBuffer(chunk)&amp;&amp;"string"!==typeof chunk&amp;&amp;chunk!==null&amp;&amp;chunk!==undefined&amp;&amp;!state.objectMode&amp;&amp;!er){<span class="cstat-no" title="statement not covered" >er=new TypeError("Invalid non-string/buffer chunk")}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn er}<span class="fstat-no" title="function not covered" ></span>function onEofChunk(stream,state){<span class="cstat-no" title="statement not covered" ></span>if(state.decoder&amp;&amp;!state.ended){<span class="cstat-no" title="statement not covered" >var chunk=state.decoder.end();<span class="cstat-no" title="statement not covered" >i</span>f(chunk&amp;&amp;chunk.length){<span class="cstat-no" title="statement not covered" >state.buffer.push(chunk);<span class="cstat-no" title="statement not covered" >s</span>tate.length+=state.objectMode?1:chunk.length}</span>}<span class="cstat-no" title="statement not covered" ></span>s</span>tate.ended=true;<span class="cstat-no" title="statement not covered" >i</span>f(state.length&gt;0)<span class="cstat-no" title="statement not covered" >emitReadable(stream);e</span>lse <span class="cstat-no" title="statement not covered" >endReadable(stream)}<span class="fstat-no" title="function not covered" ></span></span>function emitReadable(stream){<span class="cstat-no" title="statement not covered" ></span>var state=stream._readableState;<span class="cstat-no" title="statement not covered" >s</span>tate.needReadable=false;<span class="cstat-no" title="statement not covered" >i</span>f(state.emittedReadable)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >s</span></span>tate.emittedReadable=true;<span class="cstat-no" title="statement not covered" >i</span>f(state.sync)<span class="cstat-no" title="statement not covered" >setImmediate(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>emitReadable_(stream)}</span>);e</span>lse <span class="cstat-no" title="statement not covered" >emitReadable_(stream)}<span class="fstat-no" title="function not covered" ></span></span>function emitReadable_(stream){<span class="cstat-no" title="statement not covered" ></span>stream.emit("readable")}<span class="fstat-no" title="function not covered" ></span>function maybeReadMore(stream,state){<span class="cstat-no" title="statement not covered" ></span>if(!state.readingMore){<span class="cstat-no" title="statement not covered" >state.readingMore=true;<span class="cstat-no" title="statement not covered" >s</span>etImmediate(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>maybeReadMore_(stream,state)}</span>)}</span>}<span class="fstat-no" title="function not covered" ></span>function maybeReadMore_(stream,state){<span class="cstat-no" title="statement not covered" ></span>var len=state.length;<span class="cstat-no" title="statement not covered" >w</span>hile(!state.reading&amp;&amp;!state.flowing&amp;&amp;!state.ended&amp;&amp;state.length&lt;state.highWaterMark){<span class="cstat-no" title="statement not covered" >stream.read(0);<span class="cstat-no" title="statement not covered" >i</span>f(len===state.length)<span class="cstat-no" title="statement not covered" >break;e</span>lse <span class="cstat-no" title="statement not covered" >len=state.length}<span class="cstat-no" title="statement not covered" ></span></span>s</span>tate.readingMore=false}</span>Readable.prototype._read=<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>this.emit("error",new Error("not implemented"))}</span>;Readable.prototype.pipe=<span class="fstat-no" title="function not covered" >function(dest,pipeOpts){<span class="cstat-no" title="statement not covered" ></span>var src=this;<span class="cstat-no" title="statement not covered" >v</span>ar state=this._readableState;<span class="cstat-no" title="statement not covered" >s</span>witch(state.pipesCount){case 0:<span class="cstat-no" title="statement not covered" >state.pipes=dest;<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase 1:<span class="cstat-no" title="statement not covered" >state.pipes=[state.pipes,dest];<span class="cstat-no" title="statement not covered" >b</span>reak;d</span>efault:<span class="cstat-no" title="statement not covered" >state.pipes.push(dest);<span class="cstat-no" title="statement not covered" >b</span>reak}<span class="cstat-no" title="statement not covered" ></span>s</span>tate.pipesCount+=1;<span class="cstat-no" title="statement not covered" >v</span>ar doEnd=(!pipeOpts||pipeOpts.end!==false)&amp;&amp;dest!==process.stdout&amp;&amp;dest!==process.stderr;<span class="cstat-no" title="statement not covered" >v</span>ar endFn=doEnd?onend:cleanup;<span class="cstat-no" title="statement not covered" >i</span>f(state.endEmitted)<span class="cstat-no" title="statement not covered" >setImmediate(endFn);e</span>lse <span class="cstat-no" title="statement not covered" >src.once("end",endFn);<span class="cstat-no" title="statement not covered" >d</span></span>est.on("unpipe",onunpipe);<span class="fstat-no" title="function not covered" >f</span>unction onunpipe(readable){<span class="cstat-no" title="statement not covered" ></span>if(readable!==src)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >c</span></span>leanup()}<span class="fstat-no" title="function not covered" ></span>function onend(){<span class="cstat-no" title="statement not covered" ></span>dest.end()}<span class="cstat-no" title="statement not covered" ></span>var ondrain=pipeOnDrain(src);<span class="cstat-no" title="statement not covered" >d</span>est.on("drain",ondrain);<span class="fstat-no" title="function not covered" >f</span>unction cleanup(){<span class="cstat-no" title="statement not covered" ></span>dest.removeListener("close",onclose);<span class="cstat-no" title="statement not covered" >d</span>est.removeListener("finish",onfinish);<span class="cstat-no" title="statement not covered" >d</span>est.removeListener("drain",ondrain);<span class="cstat-no" title="statement not covered" >d</span>est.removeListener("error",onerror);<span class="cstat-no" title="statement not covered" >d</span>est.removeListener("unpipe",onunpipe);<span class="cstat-no" title="statement not covered" >s</span>rc.removeListener("end",onend);<span class="cstat-no" title="statement not covered" >s</span>rc.removeListener("end",cleanup);<span class="cstat-no" title="statement not covered" >i</span>f(!dest._writableState||dest._writableState.needDrain)<span class="cstat-no" title="statement not covered" >ondrain()}<span class="cstat-no" title="statement not covered" ></span></span>var errListeners=EE.listenerCount(dest,"error");<span class="fstat-no" title="function not covered" >f</span>unction onerror(er){<span class="cstat-no" title="statement not covered" ></span>unpipe();<span class="cstat-no" title="statement not covered" >i</span>f(errListeners===0&amp;&amp;EE.listenerCount(dest,"error")===0)<span class="cstat-no" title="statement not covered" >dest.emit("error",er)}<span class="cstat-no" title="statement not covered" ></span></span>dest.once("error",onerror);<span class="fstat-no" title="function not covered" >f</span>unction onclose(){<span class="cstat-no" title="statement not covered" ></span>dest.removeListener("finish",onfinish);<span class="cstat-no" title="statement not covered" >u</span>npipe()}<span class="cstat-no" title="statement not covered" ></span>dest.once("close",onclose);<span class="fstat-no" title="function not covered" >f</span>unction onfinish(){<span class="cstat-no" title="statement not covered" ></span>dest.removeListener("close",onclose);<span class="cstat-no" title="statement not covered" >u</span>npipe()}<span class="cstat-no" title="statement not covered" ></span>dest.once("finish",onfinish);<span class="fstat-no" title="function not covered" >f</span>unction unpipe(){<span class="cstat-no" title="statement not covered" ></span>src.unpipe(dest)}<span class="cstat-no" title="statement not covered" ></span>dest.emit("pipe",src);<span class="cstat-no" title="statement not covered" >i</span>f(!state.flowing){<span class="cstat-no" title="statement not covered" >this.on("readable",pipeOnReadable);<span class="cstat-no" title="statement not covered" >s</span>tate.flowing=true;<span class="cstat-no" title="statement not covered" >s</span>etImmediate(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>flow(src)}</span>)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn dest}</span>;<span class="fstat-no" title="function not covered" >function pipeOnDrain(src){<span class="cstat-no" title="statement not covered" ></span>return <span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var dest=this;<span class="cstat-no" title="statement not covered" >v</span>ar state=src._readableState;<span class="cstat-no" title="statement not covered" >s</span>tate.awaitDrain--;<span class="cstat-no" title="statement not covered" >i</span>f(state.awaitDrain===0)<span class="cstat-no" title="statement not covered" >flow(src)}</span></span>}<span class="fstat-no" title="function not covered" ></span>function flow(src){<span class="cstat-no" title="statement not covered" ></span>var state=src._readableState;<span class="cstat-no" title="statement not covered" >v</span>ar chunk;<span class="cstat-no" title="statement not covered" >s</span>tate.awaitDrain=0;<span class="fstat-no" title="function not covered" >f</span>unction write(dest,i,list){<span class="cstat-no" title="statement not covered" ></span>var written=dest.write(chunk);<span class="cstat-no" title="statement not covered" >i</span>f(false===written){<span class="cstat-no" title="statement not covered" >state.awaitDrain++}</span>}<span class="cstat-no" title="statement not covered" ></span>while(state.pipesCount&amp;&amp;null!==(chunk=src.read())){<span class="cstat-no" title="statement not covered" >if(state.pipesCount===1)<span class="cstat-no" title="statement not covered" >write(state.pipes,0,null);e</span>lse <span class="cstat-no" title="statement not covered" >forEach(state.pipes,write);<span class="cstat-no" title="statement not covered" >s</span></span>rc.emit("data",chunk);<span class="cstat-no" title="statement not covered" >i</span>f(state.awaitDrain&gt;0)<span class="cstat-no" title="statement not covered" >return}<span class="cstat-no" title="statement not covered" ></span></span>i</span>f(state.pipesCount===0){<span class="cstat-no" title="statement not covered" >state.flowing=false;<span class="cstat-no" title="statement not covered" >i</span>f(EE.listenerCount(src,"data")&gt;0)<span class="cstat-no" title="statement not covered" >emitDataEvents(src);<span class="cstat-no" title="statement not covered" >r</span></span>eturn}<span class="cstat-no" title="statement not covered" ></span>s</span>tate.ranOut=true}<span class="fstat-no" title="function not covered" ></span>function pipeOnReadable(){<span class="cstat-no" title="statement not covered" ></span>if(this._readableState.ranOut){<span class="cstat-no" title="statement not covered" >this._readableState.ranOut=false;<span class="cstat-no" title="statement not covered" >f</span>low(this)}</span>}</span>Readable.prototype.unpipe=<span class="fstat-no" title="function not covered" >function(dest){<span class="cstat-no" title="statement not covered" ></span>var state=this._readableState;<span class="cstat-no" title="statement not covered" >i</span>f(state.pipesCount===0)<span class="cstat-no" title="statement not covered" >return this;<span class="cstat-no" title="statement not covered" >i</span></span>f(state.pipesCount===1){<span class="cstat-no" title="statement not covered" >if(dest&amp;&amp;dest!==state.pipes)<span class="cstat-no" title="statement not covered" >return this;<span class="cstat-no" title="statement not covered" >i</span></span>f(!dest)<span class="cstat-no" title="statement not covered" >dest=state.pipes;<span class="cstat-no" title="statement not covered" >s</span></span>tate.pipes=null;<span class="cstat-no" title="statement not covered" >s</span>tate.pipesCount=0;<span class="cstat-no" title="statement not covered" >t</span>his.removeListener("readable",pipeOnReadable);<span class="cstat-no" title="statement not covered" >s</span>tate.flowing=false;<span class="cstat-no" title="statement not covered" >i</span>f(dest)<span class="cstat-no" title="statement not covered" >dest.emit("unpipe",this);<span class="cstat-no" title="statement not covered" >r</span></span>eturn this}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!dest){<span class="cstat-no" title="statement not covered" >var dests=state.pipes;<span class="cstat-no" title="statement not covered" >v</span>ar len=state.pipesCount;<span class="cstat-no" title="statement not covered" >s</span>tate.pipes=null;<span class="cstat-no" title="statement not covered" >s</span>tate.pipesCount=0;<span class="cstat-no" title="statement not covered" >t</span>his.removeListener("readable",pipeOnReadable);<span class="cstat-no" title="statement not covered" >s</span>tate.flowing=false;<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;len;i++)<span class="cstat-no" title="statement not covered" >dests[i].emit("unpipe",this);<span class="cstat-no" title="statement not covered" >r</span></span>eturn this}<span class="cstat-no" title="statement not covered" ></span>v</span>ar i=indexOf(state.pipes,dest);<span class="cstat-no" title="statement not covered" >i</span>f(i===-1)<span class="cstat-no" title="statement not covered" >return this;<span class="cstat-no" title="statement not covered" >s</span></span>tate.pipes.splice(i,1);<span class="cstat-no" title="statement not covered" >s</span>tate.pipesCount-=1;<span class="cstat-no" title="statement not covered" >i</span>f(state.pipesCount===1)<span class="cstat-no" title="statement not covered" >state.pipes=state.pipes[0];<span class="cstat-no" title="statement not covered" >d</span></span>est.emit("unpipe",this);<span class="cstat-no" title="statement not covered" >r</span>eturn this}</span>;Readable.prototype.on=<span class="fstat-no" title="function not covered" >function(ev,fn){<span class="cstat-no" title="statement not covered" ></span>var res=Stream.prototype.on.call(this,ev,fn);<span class="cstat-no" title="statement not covered" >i</span>f(ev==="data"&amp;&amp;!this._readableState.flowing)<span class="cstat-no" title="statement not covered" >emitDataEvents(this);<span class="cstat-no" title="statement not covered" >i</span></span>f(ev==="readable"&amp;&amp;this.readable){<span class="cstat-no" title="statement not covered" >var state=this._readableState;<span class="cstat-no" title="statement not covered" >i</span>f(!state.readableListening){<span class="cstat-no" title="statement not covered" >state.readableListening=true;<span class="cstat-no" title="statement not covered" >s</span>tate.emittedReadable=false;<span class="cstat-no" title="statement not covered" >s</span>tate.needReadable=true;<span class="cstat-no" title="statement not covered" >i</span>f(!state.reading){<span class="cstat-no" title="statement not covered" >this.read(0)}</span>else <span class="cstat-no" title="statement not covered" >if(state.length){<span class="cstat-no" title="statement not covered" >emitReadable(this,state)}</span>}</span></span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn res}</span>;Readable.prototype.addListener=Readable.prototype.on;Readable.prototype.resume=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>emitDataEvents(this);<span class="cstat-no" title="statement not covered" >t</span>his.read(0);<span class="cstat-no" title="statement not covered" >t</span>his.emit("resume")}</span>;Readable.prototype.pause=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>emitDataEvents(this,true);<span class="cstat-no" title="statement not covered" >t</span>his.emit("pause")}</span>;<span class="fstat-no" title="function not covered" >function emitDataEvents(stream,startPaused){<span class="cstat-no" title="statement not covered" ></span>var state=stream._readableState;<span class="cstat-no" title="statement not covered" >i</span>f(state.flowing){<span class="cstat-no" title="statement not covered" >throw new Error("Cannot switch to old mode now.")}<span class="cstat-no" title="statement not covered" ></span>v</span>ar paused=startPaused||false;<span class="cstat-no" title="statement not covered" >v</span>ar readable=false;<span class="cstat-no" title="statement not covered" >s</span>tream.readable=true;<span class="cstat-no" title="statement not covered" >s</span>tream.pipe=Stream.prototype.pipe;<span class="cstat-no" title="statement not covered" >s</span>tream.on=stream.addListener=Stream.prototype.on;<span class="cstat-no" title="statement not covered" >s</span>tream.on("readable",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>readable=true;<span class="cstat-no" title="statement not covered" >v</span>ar c;<span class="cstat-no" title="statement not covered" >w</span>hile(!paused&amp;&amp;null!==(c=stream.read()))<span class="cstat-no" title="statement not covered" >stream.emit("data",c);<span class="cstat-no" title="statement not covered" >i</span></span>f(c===null){<span class="cstat-no" title="statement not covered" >readable=false;<span class="cstat-no" title="statement not covered" >s</span>tream._readableState.needReadable=true}</span>}</span>);<span class="cstat-no" title="statement not covered" >s</span>tream.pause=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>paused=true;<span class="cstat-no" title="statement not covered" >t</span>his.emit("pause")}</span>;<span class="cstat-no" title="statement not covered" >s</span>tream.resume=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>paused=false;<span class="cstat-no" title="statement not covered" >i</span>f(readable)<span class="cstat-no" title="statement not covered" >setImmediate(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>stream.emit("readable")}</span>);e</span>lse <span class="cstat-no" title="statement not covered" >this.read(0);<span class="cstat-no" title="statement not covered" >t</span></span>his.emit("resume")}</span>;<span class="cstat-no" title="statement not covered" >s</span>tream.emit("readable")}</span>Readable.prototype.wrap=<span class="fstat-no" title="function not covered" >function(stream){<span class="cstat-no" title="statement not covered" ></span>var state=this._readableState;<span class="cstat-no" title="statement not covered" >v</span>ar paused=false;<span class="cstat-no" title="statement not covered" >v</span>ar self=this;<span class="cstat-no" title="statement not covered" >s</span>tream.on("end",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(state.decoder&amp;&amp;!state.ended){<span class="cstat-no" title="statement not covered" >var chunk=state.decoder.end();<span class="cstat-no" title="statement not covered" >i</span>f(chunk&amp;&amp;chunk.length)<span class="cstat-no" title="statement not covered" >self.push(chunk)}<span class="cstat-no" title="statement not covered" ></span></span>s</span>elf.push(null)}</span>);<span class="cstat-no" title="statement not covered" >s</span>tream.on("data",<span class="fstat-no" title="function not covered" >function(chunk){<span class="cstat-no" title="statement not covered" ></span>if(state.decoder)<span class="cstat-no" title="statement not covered" >chunk=state.decoder.write(chunk);<span class="cstat-no" title="statement not covered" >i</span></span>f(!chunk||!state.objectMode&amp;&amp;!chunk.length)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >v</span></span>ar ret=self.push(chunk);<span class="cstat-no" title="statement not covered" >i</span>f(!ret){<span class="cstat-no" title="statement not covered" >paused=true;<span class="cstat-no" title="statement not covered" >s</span>tream.pause()}</span>}</span>);<span class="cstat-no" title="statement not covered" >f</span>or(var i in stream){<span class="cstat-no" title="statement not covered" >if(typeof stream[i]==="function"&amp;&amp;typeof this[i]==="undefined"){<span class="cstat-no" title="statement not covered" >this[i]=<span class="fstat-no" title="function not covered" >function(method){<span class="cstat-no" title="statement not covered" ></span>return <span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return stream[method].apply(stream,arguments)}</span>}</span>(i)}</span>}<span class="cstat-no" title="statement not covered" ></span>v</span>ar events=["error","close","destroy","pause","resume"];<span class="cstat-no" title="statement not covered" >f</span>orEach(events,<span class="fstat-no" title="function not covered" >function(ev){<span class="cstat-no" title="statement not covered" ></span>stream.on(ev,<span class="fstat-no" title="function not covered" >function(x){<span class="cstat-no" title="statement not covered" ></span>return self.emit.apply(self,ev,x)}</span>)}</span>);<span class="cstat-no" title="statement not covered" >s</span>elf._read=<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>if(paused){<span class="cstat-no" title="statement not covered" >paused=false;<span class="cstat-no" title="statement not covered" >s</span>tream.resume()}</span>}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn self}</span>;Readable._fromList=fromList;<span class="fstat-no" title="function not covered" >function fromList(n,state){<span class="cstat-no" title="statement not covered" ></span>var list=state.buffer;<span class="cstat-no" title="statement not covered" >v</span>ar length=state.length;<span class="cstat-no" title="statement not covered" >v</span>ar stringMode=!!state.decoder;<span class="cstat-no" title="statement not covered" >v</span>ar objectMode=!!state.objectMode;<span class="cstat-no" title="statement not covered" >v</span>ar ret;<span class="cstat-no" title="statement not covered" >i</span>f(list.length===0)<span class="cstat-no" title="statement not covered" >return null;<span class="cstat-no" title="statement not covered" >i</span></span>f(length===0)<span class="cstat-no" title="statement not covered" >ret=null;e</span>lse <span class="cstat-no" title="statement not covered" >if(objectMode)<span class="cstat-no" title="statement not covered" >ret=list.shift();e</span>lse <span class="cstat-no" title="statement not covered" >if(!n||n&gt;=length){<span class="cstat-no" title="statement not covered" >if(stringMode)<span class="cstat-no" title="statement not covered" >ret=list.join("");e</span>lse <span class="cstat-no" title="statement not covered" >ret=Buffer.concat(list,length);<span class="cstat-no" title="statement not covered" >l</span></span>ist.length=0}</span>else{<span class="cstat-no" title="statement not covered" >if(n&lt;list[0].length){<span class="cstat-no" title="statement not covered" >var buf=list[0];<span class="cstat-no" title="statement not covered" >r</span>et=buf.slice(0,n);<span class="cstat-no" title="statement not covered" >l</span>ist[0]=buf.slice(n)}</span>else <span class="cstat-no" title="statement not covered" >if(n===list[0].length){<span class="cstat-no" title="statement not covered" >ret=list.shift()}</span>else{<span class="cstat-no" title="statement not covered" >if(stringMode)<span class="cstat-no" title="statement not covered" >ret="";e</span>lse <span class="cstat-no" title="statement not covered" >ret=new Buffer(n);<span class="cstat-no" title="statement not covered" >v</span></span>ar c=0;<span class="cstat-no" title="statement not covered" >f</span>or(var i=0,l=list.length;i&lt;l&amp;&amp;c&lt;n;i++){<span class="cstat-no" title="statement not covered" >var buf=list[0];<span class="cstat-no" title="statement not covered" >v</span>ar cpy=Math.min(n-c,buf.length);<span class="cstat-no" title="statement not covered" >i</span>f(stringMode)<span class="cstat-no" title="statement not covered" >ret+=buf.slice(0,cpy);e</span>lse <span class="cstat-no" title="statement not covered" >buf.copy(ret,c,0,cpy);<span class="cstat-no" title="statement not covered" >i</span></span>f(cpy&lt;buf.length)<span class="cstat-no" title="statement not covered" >list[0]=buf.slice(cpy);e</span>lse <span class="cstat-no" title="statement not covered" >list.shift();<span class="cstat-no" title="statement not covered" >c</span></span>+=cpy}</span>}</span>}<span class="cstat-no" title="statement not covered" ></span></span>r</span></span></span>eturn ret}<span class="fstat-no" title="function not covered" ></span>function endReadable(stream){<span class="cstat-no" title="statement not covered" ></span>var state=stream._readableState;<span class="cstat-no" title="statement not covered" >i</span>f(state.length&gt;0)<span class="cstat-no" title="statement not covered" >throw new Error("endReadable called on non-empty stream");<span class="cstat-no" title="statement not covered" >i</span></span>f(!state.endEmitted&amp;&amp;state.calledRead){<span class="cstat-no" title="statement not covered" >state.ended=true;<span class="cstat-no" title="statement not covered" >s</span>etImmediate(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(!state.endEmitted&amp;&amp;state.length===0){<span class="cstat-no" title="statement not covered" >state.endEmitted=true;<span class="cstat-no" title="statement not covered" >s</span>tream.readable=false;<span class="cstat-no" title="statement not covered" >s</span>tream.emit("end")}</span>}</span>)}</span>}<span class="fstat-no" title="function not covered" ></span>function forEach(xs,f){<span class="cstat-no" title="statement not covered" ></span>for(var i=0,l=xs.length;i&lt;l;i++){<span class="cstat-no" title="statement not covered" >f(xs[i],i)}</span>}<span class="fstat-no" title="function not covered" ></span>function indexOf(xs,x){<span class="cstat-no" title="statement not covered" ></span>for(var i=0,l=xs.length;i&lt;l;i++){<span class="cstat-no" title="statement not covered" >if(xs[i]===x)<span class="cstat-no" title="statement not covered" >return i}<span class="cstat-no" title="statement not covered" ></span></span>r</span>eturn-1}</span>}).call(this,require("g5I+bs"))},{"./index.js":58,buffer:8,events:18,"g5I+bs":45,inherits:28,"process/browser.js":59,string_decoder:7}],62:[function(require,module,exports){module.exports=Transform;var Duplex=require("./duplex.js");var inherits=require("inherits");inherits(Transform,Duplex);<span class="fstat-no" title="function not covered" >function TransformState(options,stream){<span class="cstat-no" title="statement not covered" ></span>this.afterTransform=<span class="fstat-no" title="function not covered" >function(er,data){<span class="cstat-no" title="statement not covered" ></span>return afterTransform(stream,er,data)}</span>;<span class="cstat-no" title="statement not covered" >t</span>his.needTransform=false;<span class="cstat-no" title="statement not covered" >t</span>his.transforming=false;<span class="cstat-no" title="statement not covered" >t</span>his.writecb=null;<span class="cstat-no" title="statement not covered" >t</span>his.writechunk=null}<span class="fstat-no" title="function not covered" ></span>function afterTransform(stream,er,data){<span class="cstat-no" title="statement not covered" ></span>var ts=stream._transformState;<span class="cstat-no" title="statement not covered" >t</span>s.transforming=false;<span class="cstat-no" title="statement not covered" >v</span>ar cb=ts.writecb;<span class="cstat-no" title="statement not covered" >i</span>f(!cb)<span class="cstat-no" title="statement not covered" >return stream.emit("error",new Error("no writecb in Transform class"));<span class="cstat-no" title="statement not covered" >t</span></span>s.writechunk=null;<span class="cstat-no" title="statement not covered" >t</span>s.writecb=null;<span class="cstat-no" title="statement not covered" >i</span>f(data!==null&amp;&amp;data!==undefined)<span class="cstat-no" title="statement not covered" >stream.push(data);<span class="cstat-no" title="statement not covered" >i</span></span>f(cb)<span class="cstat-no" title="statement not covered" >cb(er);<span class="cstat-no" title="statement not covered" >v</span></span>ar rs=stream._readableState;<span class="cstat-no" title="statement not covered" >r</span>s.reading=false;<span class="cstat-no" title="statement not covered" >i</span>f(rs.needReadable||rs.length&lt;rs.highWaterMark){<span class="cstat-no" title="statement not covered" >stream._read(rs.highWaterMark)}</span>}<span class="fstat-no" title="function not covered" ></span>function Transform(options){<span class="cstat-no" title="statement not covered" ></span>if(!(this instanceof Transform))<span class="cstat-no" title="statement not covered" >return new Transform(options);<span class="cstat-no" title="statement not covered" >D</span></span>uplex.call(this,options);<span class="cstat-no" title="statement not covered" >v</span>ar ts=this._transformState=new TransformState(options,this);<span class="cstat-no" title="statement not covered" >v</span>ar stream=this;<span class="cstat-no" title="statement not covered" >t</span>his._readableState.needReadable=true;<span class="cstat-no" title="statement not covered" >t</span>his._readableState.sync=false;<span class="cstat-no" title="statement not covered" >t</span>his.once("finish",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if("function"===typeof this._flush)<span class="cstat-no" title="statement not covered" >this._flush(<span class="fstat-no" title="function not covered" >function(er){<span class="cstat-no" title="statement not covered" ></span>done(stream,er)}</span>);e</span>lse <span class="cstat-no" title="statement not covered" >done(stream)}</span></span>)}</span>Transform.prototype.push=<span class="fstat-no" title="function not covered" >function(chunk,encoding){<span class="cstat-no" title="statement not covered" ></span>this._transformState.needTransform=false;<span class="cstat-no" title="statement not covered" >r</span>eturn Duplex.prototype.push.call(this,chunk,encoding)}</span>;Transform.prototype._transform=<span class="fstat-no" title="function not covered" >function(chunk,encoding,cb){<span class="cstat-no" title="statement not covered" ></span>throw new Error("not implemented")}</span>;Transform.prototype._write=<span class="fstat-no" title="function not covered" >function(chunk,encoding,cb){<span class="cstat-no" title="statement not covered" ></span>var ts=this._transformState;<span class="cstat-no" title="statement not covered" >t</span>s.writecb=cb;<span class="cstat-no" title="statement not covered" >t</span>s.writechunk=chunk;<span class="cstat-no" title="statement not covered" >t</span>s.writeencoding=encoding;<span class="cstat-no" title="statement not covered" >i</span>f(!ts.transforming){<span class="cstat-no" title="statement not covered" >var rs=this._readableState;<span class="cstat-no" title="statement not covered" >i</span>f(ts.needTransform||rs.needReadable||rs.length&lt;rs.highWaterMark)<span class="cstat-no" title="statement not covered" >this._read(rs.highWaterMark)}</span></span>}</span>;Transform.prototype._read=<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>var ts=this._transformState;<span class="cstat-no" title="statement not covered" >i</span>f(ts.writechunk&amp;&amp;ts.writecb&amp;&amp;!ts.transforming){<span class="cstat-no" title="statement not covered" >ts.transforming=true;<span class="cstat-no" title="statement not covered" >t</span>his._transform(ts.writechunk,ts.writeencoding,ts.afterTransform)}</span>else{<span class="cstat-no" title="statement not covered" >ts.needTransform=true}</span>}</span>;<span class="fstat-no" title="function not covered" >function done(stream,er){<span class="cstat-no" title="statement not covered" ></span>if(er)<span class="cstat-no" title="statement not covered" >return stream.emit("error",er);<span class="cstat-no" title="statement not covered" >v</span></span>ar ws=stream._writableState;<span class="cstat-no" title="statement not covered" >v</span>ar rs=stream._readableState;<span class="cstat-no" title="statement not covered" >v</span>ar ts=stream._transformState;<span class="cstat-no" title="statement not covered" >i</span>f(ws.length)<span class="cstat-no" title="statement not covered" >throw new Error("calling transform done when ws.length != 0");<span class="cstat-no" title="statement not covered" >i</span></span>f(ts.transforming)<span class="cstat-no" title="statement not covered" >throw new Error("calling transform done when still transforming");<span class="cstat-no" title="statement not covered" >r</span></span>eturn stream.push(null)}</span>},{"./duplex.js":57,inherits:28}],63:[function(require,module,exports){module.exports=Writable;Writable.WritableState=WritableState;var isUint8Array=typeof Uint8Array!=="undefined"?<span class="fstat-no" title="function not covered" >function(x){<span class="cstat-no" title="statement not covered" ></span>return x instanceof Uint8Array}</span>:<span class="fstat-no" title="function not covered" ><span class="branch-1 cbranch-no" title="branch not covered" >function(x){<span class="cstat-no" title="statement not covered" ></span>return x&amp;&amp;x.constructor&amp;&amp;x.constructor.name==="Uint8Array"}</span>;</span>var isArrayBuffer=typeof ArrayBuffer!=="undefined"?<span class="fstat-no" title="function not covered" >function(x){<span class="cstat-no" title="statement not covered" ></span>return x instanceof ArrayBuffer}</span>:<span class="fstat-no" title="function not covered" ><span class="branch-1 cbranch-no" title="branch not covered" >function(x){<span class="cstat-no" title="statement not covered" ></span>return x&amp;&amp;x.constructor&amp;&amp;x.constructor.name==="ArrayBuffer"}</span>;</span>var inherits=require("inherits");var Stream=require("./index.js");var setImmediate=require("process/browser.js").nextTick;var Buffer=require("buffer").Buffer;inherits(Writable,Stream);<span class="fstat-no" title="function not covered" >function WriteReq(chunk,encoding,cb){<span class="cstat-no" title="statement not covered" ></span>this.chunk=chunk;<span class="cstat-no" title="statement not covered" >t</span>his.encoding=encoding;<span class="cstat-no" title="statement not covered" >t</span>his.callback=cb}<span class="fstat-no" title="function not covered" ></span>function WritableState(options,stream){<span class="cstat-no" title="statement not covered" ></span>options=options||{};<span class="cstat-no" title="statement not covered" >v</span>ar hwm=options.highWaterMark;<span class="cstat-no" title="statement not covered" >t</span>his.highWaterMark=hwm||hwm===0?hwm:16*1024;<span class="cstat-no" title="statement not covered" >t</span>his.objectMode=!!options.objectMode;<span class="cstat-no" title="statement not covered" >t</span>his.highWaterMark=~~this.highWaterMark;<span class="cstat-no" title="statement not covered" >t</span>his.needDrain=false;<span class="cstat-no" title="statement not covered" >t</span>his.ending=false;<span class="cstat-no" title="statement not covered" >t</span>his.ended=false;<span class="cstat-no" title="statement not covered" >t</span>his.finished=false;<span class="cstat-no" title="statement not covered" >v</span>ar noDecode=options.decodeStrings===false;<span class="cstat-no" title="statement not covered" >t</span>his.decodeStrings=!noDecode;<span class="cstat-no" title="statement not covered" >t</span>his.defaultEncoding=options.defaultEncoding||"utf8";<span class="cstat-no" title="statement not covered" >t</span>his.length=0;<span class="cstat-no" title="statement not covered" >t</span>his.writing=false;<span class="cstat-no" title="statement not covered" >t</span>his.sync=true;<span class="cstat-no" title="statement not covered" >t</span>his.bufferProcessing=false;<span class="cstat-no" title="statement not covered" >t</span>his.onwrite=<span class="fstat-no" title="function not covered" >function(er){<span class="cstat-no" title="statement not covered" ></span>onwrite(stream,er)}</span>;<span class="cstat-no" title="statement not covered" >t</span>his.writecb=null;<span class="cstat-no" title="statement not covered" >t</span>his.writelen=0;<span class="cstat-no" title="statement not covered" >t</span>his.buffer=[]}<span class="fstat-no" title="function not covered" ></span>function Writable(options){<span class="cstat-no" title="statement not covered" ></span>if(!(this instanceof Writable)&amp;&amp;!(this instanceof Stream.Duplex))<span class="cstat-no" title="statement not covered" >return new Writable(options);<span class="cstat-no" title="statement not covered" >t</span></span>his._writableState=new WritableState(options,this);<span class="cstat-no" title="statement not covered" >t</span>his.writable=true;<span class="cstat-no" title="statement not covered" >S</span>tream.call(this)}</span>Writable.prototype.pipe=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this.emit("error",new Error("Cannot pipe. Not readable."))}</span>;<span class="fstat-no" title="function not covered" >function writeAfterEnd(stream,state,cb){<span class="cstat-no" title="statement not covered" ></span>var er=new Error("write after end");<span class="cstat-no" title="statement not covered" >s</span>tream.emit("error",er);<span class="cstat-no" title="statement not covered" >s</span>etImmediate(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>cb(er)}</span>)}<span class="fstat-no" title="function not covered" ></span>function validChunk(stream,state,chunk,cb){<span class="cstat-no" title="statement not covered" ></span>var valid=true;<span class="cstat-no" title="statement not covered" >i</span>f(!Buffer.isBuffer(chunk)&amp;&amp;"string"!==typeof chunk&amp;&amp;chunk!==null&amp;&amp;chunk!==undefined&amp;&amp;!state.objectMode){<span class="cstat-no" title="statement not covered" >var er=new TypeError("Invalid non-string/buffer chunk");<span class="cstat-no" title="statement not covered" >s</span>tream.emit("error",er);<span class="cstat-no" title="statement not covered" >s</span>etImmediate(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>cb(er)}</span>);<span class="cstat-no" title="statement not covered" >v</span>alid=false}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn valid}</span>Writable.prototype.write=<span class="fstat-no" title="function not covered" >function(chunk,encoding,cb){<span class="cstat-no" title="statement not covered" ></span>var state=this._writableState;<span class="cstat-no" title="statement not covered" >v</span>ar ret=false;<span class="cstat-no" title="statement not covered" >i</span>f(typeof encoding==="function"){<span class="cstat-no" title="statement not covered" >cb=encoding;<span class="cstat-no" title="statement not covered" >e</span>ncoding=null}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!Buffer.isBuffer(chunk)&amp;&amp;isUint8Array(chunk))<span class="cstat-no" title="statement not covered" >chunk=new Buffer(chunk);<span class="cstat-no" title="statement not covered" >i</span></span>f(isArrayBuffer(chunk)&amp;&amp;typeof Uint8Array!=="undefined")<span class="cstat-no" title="statement not covered" >chunk=new Buffer(new Uint8Array(chunk));<span class="cstat-no" title="statement not covered" >i</span></span>f(Buffer.isBuffer(chunk))<span class="cstat-no" title="statement not covered" >encoding="buffer";e</span>lse <span class="cstat-no" title="statement not covered" >if(!encoding)<span class="cstat-no" title="statement not covered" >encoding=state.defaultEncoding;<span class="cstat-no" title="statement not covered" >i</span></span></span>f(typeof cb!=="function")<span class="cstat-no" title="statement not covered" >cb=<span class="fstat-no" title="function not covered" >function(){</span>};<span class="cstat-no" title="statement not covered" >i</span></span>f(state.ended)<span class="cstat-no" title="statement not covered" >writeAfterEnd(this,state,cb);e</span>lse <span class="cstat-no" title="statement not covered" >if(validChunk(this,state,chunk,cb))<span class="cstat-no" title="statement not covered" >ret=writeOrBuffer(this,state,chunk,encoding,cb);<span class="cstat-no" title="statement not covered" >r</span></span></span>eturn ret}</span>;<span class="fstat-no" title="function not covered" >function decodeChunk(state,chunk,encoding){<span class="cstat-no" title="statement not covered" ></span>if(!state.objectMode&amp;&amp;state.decodeStrings!==false&amp;&amp;typeof chunk==="string"){<span class="cstat-no" title="statement not covered" >chunk=new Buffer(chunk,encoding)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn chunk}<span class="fstat-no" title="function not covered" ></span>function writeOrBuffer(stream,state,chunk,encoding,cb){<span class="cstat-no" title="statement not covered" ></span>chunk=decodeChunk(state,chunk,encoding);<span class="cstat-no" title="statement not covered" >v</span>ar len=state.objectMode?1:chunk.length;<span class="cstat-no" title="statement not covered" >s</span>tate.length+=len;<span class="cstat-no" title="statement not covered" >v</span>ar ret=state.length&lt;state.highWaterMark;<span class="cstat-no" title="statement not covered" >s</span>tate.needDrain=!ret;<span class="cstat-no" title="statement not covered" >i</span>f(state.writing)<span class="cstat-no" title="statement not covered" >state.buffer.push(new WriteReq(chunk,encoding,cb));e</span>lse <span class="cstat-no" title="statement not covered" >doWrite(stream,state,len,chunk,encoding,cb);<span class="cstat-no" title="statement not covered" >r</span></span>eturn ret}<span class="fstat-no" title="function not covered" ></span>function doWrite(stream,state,len,chunk,encoding,cb){<span class="cstat-no" title="statement not covered" ></span>state.writelen=len;<span class="cstat-no" title="statement not covered" >s</span>tate.writecb=cb;<span class="cstat-no" title="statement not covered" >s</span>tate.writing=true;<span class="cstat-no" title="statement not covered" >s</span>tate.sync=true;<span class="cstat-no" title="statement not covered" >s</span>tream._write(chunk,encoding,state.onwrite);<span class="cstat-no" title="statement not covered" >s</span>tate.sync=false}<span class="fstat-no" title="function not covered" ></span>function onwriteError(stream,state,sync,er,cb){<span class="cstat-no" title="statement not covered" ></span>if(sync)<span class="cstat-no" title="statement not covered" >setImmediate(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>cb(er)}</span>);e</span>lse <span class="cstat-no" title="statement not covered" >cb(er);<span class="cstat-no" title="statement not covered" >s</span></span>tream.emit("error",er)}<span class="fstat-no" title="function not covered" ></span>function onwriteStateUpdate(state){<span class="cstat-no" title="statement not covered" ></span>state.writing=false;<span class="cstat-no" title="statement not covered" >s</span>tate.writecb=null;<span class="cstat-no" title="statement not covered" >s</span>tate.length-=state.writelen;<span class="cstat-no" title="statement not covered" >s</span>tate.writelen=0}<span class="fstat-no" title="function not covered" ></span>function onwrite(stream,er){<span class="cstat-no" title="statement not covered" ></span>var state=stream._writableState;<span class="cstat-no" title="statement not covered" >v</span>ar sync=state.sync;<span class="cstat-no" title="statement not covered" >v</span>ar cb=state.writecb;<span class="cstat-no" title="statement not covered" >o</span>nwriteStateUpdate(state);<span class="cstat-no" title="statement not covered" >i</span>f(er)<span class="cstat-no" title="statement not covered" >onwriteError(stream,state,sync,er,cb);e</span>lse{<span class="cstat-no" title="statement not covered" >var finished=needFinish(stream,state);<span class="cstat-no" title="statement not covered" >i</span>f(!finished&amp;&amp;!state.bufferProcessing&amp;&amp;state.buffer.length)<span class="cstat-no" title="statement not covered" >clearBuffer(stream,state);<span class="cstat-no" title="statement not covered" >i</span></span>f(sync){<span class="cstat-no" title="statement not covered" >setImmediate(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>afterWrite(stream,state,finished,cb)}</span>)}</span>else{<span class="cstat-no" title="statement not covered" >afterWrite(stream,state,finished,cb)}</span>}</span>}<span class="fstat-no" title="function not covered" ></span>function afterWrite(stream,state,finished,cb){<span class="cstat-no" title="statement not covered" ></span>if(!finished)<span class="cstat-no" title="statement not covered" >onwriteDrain(stream,state);<span class="cstat-no" title="statement not covered" >c</span></span>b();<span class="cstat-no" title="statement not covered" >i</span>f(finished)<span class="cstat-no" title="statement not covered" >finishMaybe(stream,state)}<span class="fstat-no" title="function not covered" ></span></span>function onwriteDrain(stream,state){<span class="cstat-no" title="statement not covered" ></span>if(state.length===0&amp;&amp;state.needDrain){<span class="cstat-no" title="statement not covered" >state.needDrain=false;<span class="cstat-no" title="statement not covered" >s</span>tream.emit("drain")}</span>}<span class="fstat-no" title="function not covered" ></span>function clearBuffer(stream,state){<span class="cstat-no" title="statement not covered" ></span>state.bufferProcessing=true;<span class="cstat-no" title="statement not covered" >f</span>or(var c=0;c&lt;state.buffer.length;c++){<span class="cstat-no" title="statement not covered" >var entry=state.buffer[c];<span class="cstat-no" title="statement not covered" >v</span>ar chunk=entry.chunk;<span class="cstat-no" title="statement not covered" >v</span>ar encoding=entry.encoding;<span class="cstat-no" title="statement not covered" >v</span>ar cb=entry.callback;<span class="cstat-no" title="statement not covered" >v</span>ar len=state.objectMode?1:chunk.length;<span class="cstat-no" title="statement not covered" >d</span>oWrite(stream,state,len,chunk,encoding,cb);<span class="cstat-no" title="statement not covered" >i</span>f(state.writing){<span class="cstat-no" title="statement not covered" >c++;<span class="cstat-no" title="statement not covered" >b</span>reak}</span>}<span class="cstat-no" title="statement not covered" ></span>s</span>tate.bufferProcessing=false;<span class="cstat-no" title="statement not covered" >i</span>f(c&lt;state.buffer.length)<span class="cstat-no" title="statement not covered" >state.buffer=state.buffer.slice(c);e</span>lse <span class="cstat-no" title="statement not covered" >state.buffer.length=0}</span></span>Writable.prototype._write=<span class="fstat-no" title="function not covered" >function(chunk,encoding,cb){<span class="cstat-no" title="statement not covered" ></span>cb(new Error("not implemented"))}</span>;Writable.prototype.end=<span class="fstat-no" title="function not covered" >function(chunk,encoding,cb){<span class="cstat-no" title="statement not covered" ></span>var state=this._writableState;<span class="cstat-no" title="statement not covered" >i</span>f(typeof chunk==="function"){<span class="cstat-no" title="statement not covered" >cb=chunk;<span class="cstat-no" title="statement not covered" >c</span>hunk=null;<span class="cstat-no" title="statement not covered" >e</span>ncoding=null}</span>else <span class="cstat-no" title="statement not covered" >if(typeof encoding==="function"){<span class="cstat-no" title="statement not covered" >cb=encoding;<span class="cstat-no" title="statement not covered" >e</span>ncoding=null}<span class="cstat-no" title="statement not covered" ></span>i</span></span>f(typeof chunk!=="undefined"&amp;&amp;chunk!==null)<span class="cstat-no" title="statement not covered" >this.write(chunk,encoding);<span class="cstat-no" title="statement not covered" >i</span></span>f(!state.ending&amp;&amp;!state.finished)<span class="cstat-no" title="statement not covered" >endWritable(this,state,cb)}</span></span>;<span class="fstat-no" title="function not covered" >function needFinish(stream,state){<span class="cstat-no" title="statement not covered" ></span>return state.ending&amp;&amp;state.length===0&amp;&amp;!state.finished&amp;&amp;!state.writing}<span class="fstat-no" title="function not covered" ></span>function finishMaybe(stream,state){<span class="cstat-no" title="statement not covered" ></span>var need=needFinish(stream,state);</span>
<span class="cstat-no" title="statement not covered" >if(need){<span class="cstat-no" title="statement not covered" >state.finished=true;<span class="cstat-no" title="statement not covered" >s</span>tream.emit("finish")}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn need}<span class="fstat-no" title="function not covered" ></span>function endWritable(stream,state,cb){<span class="cstat-no" title="statement not covered" ></span>state.ending=true;<span class="cstat-no" title="statement not covered" >f</span>inishMaybe(stream,state);<span class="cstat-no" title="statement not covered" >i</span>f(cb){<span class="cstat-no" title="statement not covered" >if(state.finished)<span class="cstat-no" title="statement not covered" >setImmediate(cb);e</span>lse <span class="cstat-no" title="statement not covered" >stream.once("finish",cb)}<span class="cstat-no" title="statement not covered" ></span></span>s</span>tate.ended=true}</span>},{"./index.js":58,buffer:8,inherits:28,"process/browser.js":59}],64:[<span class="fstat-no" title="function not covered" >function(require,module,exports){<span class="cstat-no" title="statement not covered" ></span>(<span class="fstat-no" title="function not covered" >function(process){<span class="cstat-no" title="statement not covered" ></span>var Stream=require("stream");<span class="cstat-no" title="statement not covered" >e</span>xports=module.exports=through;<span class="cstat-no" title="statement not covered" >t</span>hrough.through=through;<span class="fstat-no" title="function not covered" >f</span>unction through(write,end){<span class="cstat-no" title="statement not covered" ></span>write=write||<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>this.emit("data",data)}</span>;<span class="cstat-no" title="statement not covered" >e</span>nd=end||<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this.emit("end")}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar ended=false,destroyed=false;<span class="cstat-no" title="statement not covered" >v</span>ar stream=new Stream,buffer=[];<span class="cstat-no" title="statement not covered" >s</span>tream.buffer=buffer;<span class="cstat-no" title="statement not covered" >s</span>tream.readable=stream.writable=true;<span class="cstat-no" title="statement not covered" >s</span>tream.paused=false;<span class="cstat-no" title="statement not covered" >s</span>tream.write=<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>write.call(this,data);<span class="cstat-no" title="statement not covered" >r</span>eturn!stream.paused}</span>;<span class="fstat-no" title="function not covered" >f</span>unction drain(){<span class="cstat-no" title="statement not covered" ></span>while(buffer.length&amp;&amp;!stream.paused){<span class="cstat-no" title="statement not covered" >var data=buffer.shift();<span class="cstat-no" title="statement not covered" >i</span>f(null===data)<span class="cstat-no" title="statement not covered" >return stream.emit("end");e</span>lse <span class="cstat-no" title="statement not covered" >stream.emit("data",data)}</span></span>}<span class="cstat-no" title="statement not covered" ></span>stream.queue=<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>buffer.push(data);<span class="cstat-no" title="statement not covered" >d</span>rain()}</span>;<span class="cstat-no" title="statement not covered" >s</span>tream.on("end",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>stream.readable=false;<span class="cstat-no" title="statement not covered" >i</span>f(!stream.writable)<span class="cstat-no" title="statement not covered" >process.nextTick(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>stream.destroy()}</span>)}</span></span>);<span class="fstat-no" title="function not covered" >f</span>unction _end(){<span class="cstat-no" title="statement not covered" ></span>stream.writable=false;<span class="cstat-no" title="statement not covered" >e</span>nd.call(stream);<span class="cstat-no" title="statement not covered" >i</span>f(!stream.readable)<span class="cstat-no" title="statement not covered" >stream.destroy()}<span class="cstat-no" title="statement not covered" ></span></span>stream.end=<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>if(ended)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >e</span></span>nded=true;<span class="cstat-no" title="statement not covered" >i</span>f(arguments.length)<span class="cstat-no" title="statement not covered" >stream.write(data);<span class="cstat-no" title="statement not covered" >_</span></span>end()}</span>;<span class="cstat-no" title="statement not covered" >s</span>tream.destroy=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(destroyed)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >d</span></span>estroyed=true;<span class="cstat-no" title="statement not covered" >e</span>nded=true;<span class="cstat-no" title="statement not covered" >b</span>uffer.length=0;<span class="cstat-no" title="statement not covered" >s</span>tream.writable=stream.readable=false;<span class="cstat-no" title="statement not covered" >s</span>tream.emit("close")}</span>;<span class="cstat-no" title="statement not covered" >s</span>tream.pause=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(stream.paused)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >s</span></span>tream.paused=true;<span class="cstat-no" title="statement not covered" >s</span>tream.emit("pause")}</span>;<span class="cstat-no" title="statement not covered" >s</span>tream.resume=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(stream.paused){<span class="cstat-no" title="statement not covered" >stream.paused=false}<span class="cstat-no" title="statement not covered" ></span>d</span>rain();<span class="cstat-no" title="statement not covered" >i</span>f(!stream.paused)<span class="cstat-no" title="statement not covered" >stream.emit("drain")}</span></span>;<span class="cstat-no" title="statement not covered" >r</span>eturn stream}</span>}).call(this,require("g5I+bs"))}</span>,{"g5I+bs":45,stream:58}],65:[<span class="fstat-no" title="function not covered" >function(require,module,exports){<span class="cstat-no" title="statement not covered" ></span>(<span class="fstat-no" title="function not covered" >function(global){</span>"use strict";<span class="cstat-no" title="statement not covered" >var bits=require("bit-twiddle");<span class="cstat-no" title="statement not covered" >v</span>ar dup=require("dup");<span class="cstat-no" title="statement not covered" >i</span>f(!global.__TYPEDARRAY_POOL){<span class="cstat-no" title="statement not covered" >global.__TYPEDARRAY_POOL={UINT8:dup([32,0]),UINT16:dup([32,0]),UINT32:dup([32,0]),INT8:dup([32,0]),INT16:dup([32,0]),INT32:dup([32,0]),FLOAT:dup([32,0]),DOUBLE:dup([32,0]),DATA:dup([32,0])}}<span class="cstat-no" title="statement not covered" ></span>v</span>ar POOL=global.__TYPEDARRAY_POOL;<span class="cstat-no" title="statement not covered" >v</span>ar UINT8=POOL.UINT8,UINT16=POOL.UINT16,UINT32=POOL.UINT32,INT8=POOL.INT8,INT16=POOL.INT16,INT32=POOL.INT32,FLOAT=POOL.FLOAT,DOUBLE=POOL.DOUBLE,DATA=POOL.DATA;<span class="cstat-no" title="statement not covered" >e</span>xports.free=<span class="fstat-no" title="function not covered" >function free(array){<span class="cstat-no" title="statement not covered" ></span>if(array instanceof ArrayBuffer){<span class="cstat-no" title="statement not covered" >var n=array.byteLength|0,log_n=bits.log2(n);<span class="cstat-no" title="statement not covered" >D</span>ATA[log_n].push(array)}</span>else{<span class="cstat-no" title="statement not covered" >var n=array.length|0,log_n=bits.log2(n);<span class="cstat-no" title="statement not covered" >i</span>f(array instanceof Uint8Array){<span class="cstat-no" title="statement not covered" >UINT8[log_n].push(array)}</span>else <span class="cstat-no" title="statement not covered" >if(array instanceof Uint16Array){<span class="cstat-no" title="statement not covered" >UINT16[log_n].push(array)}</span>else <span class="cstat-no" title="statement not covered" >if(array instanceof Uint32Array){<span class="cstat-no" title="statement not covered" >UINT32[log_n].push(array)}</span>else <span class="cstat-no" title="statement not covered" >if(array instanceof Int8Array){<span class="cstat-no" title="statement not covered" >INT8[log_n].push(array)}</span>else <span class="cstat-no" title="statement not covered" >if(array instanceof Int16Array){<span class="cstat-no" title="statement not covered" >INT16[log_n].push(array)}</span>else <span class="cstat-no" title="statement not covered" >if(array instanceof Int32Array){<span class="cstat-no" title="statement not covered" >INT32[log_n].push(array)}</span>else <span class="cstat-no" title="statement not covered" >if(array instanceof Float32Array){<span class="cstat-no" title="statement not covered" >FLOAT[log_n].push(array)}</span>else <span class="cstat-no" title="statement not covered" >if(array instanceof Float64Array){<span class="cstat-no" title="statement not covered" >DOUBLE[log_n].push(array)}</span>}</span></span></span></span></span></span></span></span>}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.freeUint8=<span class="fstat-no" title="function not covered" >function freeUint8(array){<span class="cstat-no" title="statement not covered" ></span>UINT8[bits.log2(array.length)].push(array)}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.freeUint16=<span class="fstat-no" title="function not covered" >function freeUint16(array){<span class="cstat-no" title="statement not covered" ></span>UINT16[bits.log2(array.length)].push(array)}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.freeUint32=<span class="fstat-no" title="function not covered" >function freeUint32(array){<span class="cstat-no" title="statement not covered" ></span>UINT32[bits.log2(array.length)].push(array)}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.freeInt8=<span class="fstat-no" title="function not covered" >function freeInt8(array){<span class="cstat-no" title="statement not covered" ></span>INT8[bits.log2(array.length)].push(array)}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.freeInt16=<span class="fstat-no" title="function not covered" >function freeInt16(array){<span class="cstat-no" title="statement not covered" ></span>INT16[bits.log2(array.length)].push(array)}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.freeInt32=<span class="fstat-no" title="function not covered" >function freeInt32(array){<span class="cstat-no" title="statement not covered" ></span>INT32[bits.log2(array.length)].push(array)}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.freeFloat32=exports.freeFloat=<span class="fstat-no" title="function not covered" >function freeFloat(array){<span class="cstat-no" title="statement not covered" ></span>FLOAT[bits.log2(array.length)].push(array)}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.freeFloat64=exports.freeDouble=<span class="fstat-no" title="function not covered" >function freeDouble(array){<span class="cstat-no" title="statement not covered" ></span>DOUBLE[bits.log2(array.length)].push(array)}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.freeArrayBuffer=<span class="fstat-no" title="function not covered" >function freeArrayBuffer(array){<span class="cstat-no" title="statement not covered" ></span>DATA[bits.log2(array.length)].push(array)}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.malloc=<span class="fstat-no" title="function not covered" >function malloc(n,dtype){<span class="cstat-no" title="statement not covered" ></span>n=bits.nextPow2(n);<span class="cstat-no" title="statement not covered" >v</span>ar log_n=bits.log2(n);<span class="cstat-no" title="statement not covered" >i</span>f(dtype===undefined){<span class="cstat-no" title="statement not covered" >var d=DATA[log_n];<span class="cstat-no" title="statement not covered" >i</span>f(d.length&gt;0){<span class="cstat-no" title="statement not covered" >var r=d[d.length-1];<span class="cstat-no" title="statement not covered" >d</span>.pop();<span class="cstat-no" title="statement not covered" >r</span>eturn r}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn new ArrayBuffer(n)}</span>else{<span class="cstat-no" title="statement not covered" >switch(dtype){case"uint8":<span class="cstat-no" title="statement not covered" >var u8=UINT8[log_n];<span class="cstat-no" title="statement not covered" >i</span>f(u8.length&gt;0){<span class="cstat-no" title="statement not covered" >return u8.pop()}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn new Uint8Array(n);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"uint16":<span class="cstat-no" title="statement not covered" >var u16=UINT16[log_n];<span class="cstat-no" title="statement not covered" >i</span>f(u16.length&gt;0){<span class="cstat-no" title="statement not covered" >return u16.pop()}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn new Uint16Array(n);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"uint32":<span class="cstat-no" title="statement not covered" >var u32=UINT32[log_n];<span class="cstat-no" title="statement not covered" >i</span>f(u32.length&gt;0){<span class="cstat-no" title="statement not covered" >return u32.pop()}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn new Uint32Array(n);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"int8":<span class="cstat-no" title="statement not covered" >var i8=INT8[log_n];<span class="cstat-no" title="statement not covered" >i</span>f(i8.length&gt;0){<span class="cstat-no" title="statement not covered" >return i8.pop()}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn new Int8Array(n);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"int16":<span class="cstat-no" title="statement not covered" >var i16=INT16[log_n];<span class="cstat-no" title="statement not covered" >i</span>f(i16.length&gt;0){<span class="cstat-no" title="statement not covered" >return i16.pop()}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn new Int16Array(n);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"int32":<span class="cstat-no" title="statement not covered" >var i32=INT32[log_n];<span class="cstat-no" title="statement not covered" >i</span>f(i32.length&gt;0){<span class="cstat-no" title="statement not covered" >return i32.pop()}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn new Int32Array(n);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"float":case"float32":<span class="cstat-no" title="statement not covered" >var f=FLOAT[log_n];<span class="cstat-no" title="statement not covered" >i</span>f(f.length&gt;0){<span class="cstat-no" title="statement not covered" >return f.pop()}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn new Float32Array(n);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"double":case"float64":<span class="cstat-no" title="statement not covered" >var dd=DOUBLE[log_n];<span class="cstat-no" title="statement not covered" >i</span>f(dd.length&gt;0){<span class="cstat-no" title="statement not covered" >return dd.pop()}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn new Float64Array(n);<span class="cstat-no" title="statement not covered" >b</span>reak;d</span>efault:<span class="cstat-no" title="statement not covered" >return null}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn null}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.mallocUint8=<span class="fstat-no" title="function not covered" >function mallocUint8(n){<span class="cstat-no" title="statement not covered" ></span>n=bits.nextPow2(n);<span class="cstat-no" title="statement not covered" >v</span>ar log_n=bits.log2(n);<span class="cstat-no" title="statement not covered" >v</span>ar cache=UINT8[log_n];<span class="cstat-no" title="statement not covered" >i</span>f(cache.length&gt;0){<span class="cstat-no" title="statement not covered" >return cache.pop()}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn new Uint8Array(n)}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.mallocUint16=<span class="fstat-no" title="function not covered" >function mallocUint16(n){<span class="cstat-no" title="statement not covered" ></span>n=bits.nextPow2(n);<span class="cstat-no" title="statement not covered" >v</span>ar log_n=bits.log2(n);<span class="cstat-no" title="statement not covered" >v</span>ar cache=UINT16[log_n];<span class="cstat-no" title="statement not covered" >i</span>f(cache.length&gt;0){<span class="cstat-no" title="statement not covered" >return cache.pop()}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn new Uint16Array(n)}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.mallocUint32=<span class="fstat-no" title="function not covered" >function mallocUint32(n){<span class="cstat-no" title="statement not covered" ></span>n=bits.nextPow2(n);<span class="cstat-no" title="statement not covered" >v</span>ar log_n=bits.log2(n);<span class="cstat-no" title="statement not covered" >v</span>ar cache=UINT32[log_n];<span class="cstat-no" title="statement not covered" >i</span>f(cache.length&gt;0){<span class="cstat-no" title="statement not covered" >return cache.pop()}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn new Uint32Array(n)}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.mallocInt8=<span class="fstat-no" title="function not covered" >function mallocInt8(n){<span class="cstat-no" title="statement not covered" ></span>n=bits.nextPow2(n);<span class="cstat-no" title="statement not covered" >v</span>ar log_n=bits.log2(n);<span class="cstat-no" title="statement not covered" >v</span>ar cache=INT8[log_n];<span class="cstat-no" title="statement not covered" >i</span>f(cache.length&gt;0){<span class="cstat-no" title="statement not covered" >return cache.pop()}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn new Int8Array(n)}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.mallocInt16=<span class="fstat-no" title="function not covered" >function mallocInt16(n){<span class="cstat-no" title="statement not covered" ></span>n=bits.nextPow2(n);<span class="cstat-no" title="statement not covered" >v</span>ar log_n=bits.log2(n);<span class="cstat-no" title="statement not covered" >v</span>ar cache=INT16[log_n];<span class="cstat-no" title="statement not covered" >i</span>f(cache.length&gt;0){<span class="cstat-no" title="statement not covered" >return cache.pop()}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn new Int16Array(n)}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.mallocInt32=<span class="fstat-no" title="function not covered" >function mallocInt32(n){<span class="cstat-no" title="statement not covered" ></span>n=bits.nextPow2(n);<span class="cstat-no" title="statement not covered" >v</span>ar log_n=bits.log2(n);<span class="cstat-no" title="statement not covered" >v</span>ar cache=INT32[log_n];<span class="cstat-no" title="statement not covered" >i</span>f(cache.length&gt;0){<span class="cstat-no" title="statement not covered" >return cache.pop()}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn new Int32Array(n)}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.mallocFloat32=exports.mallocFloat=<span class="fstat-no" title="function not covered" >function mallocFloat(n){<span class="cstat-no" title="statement not covered" ></span>n=bits.nextPow2(n);<span class="cstat-no" title="statement not covered" >v</span>ar log_n=bits.log2(n);<span class="cstat-no" title="statement not covered" >v</span>ar cache=FLOAT[log_n];<span class="cstat-no" title="statement not covered" >i</span>f(cache.length&gt;0){<span class="cstat-no" title="statement not covered" >return cache.pop()}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn new Float32Array(n)}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.mallocFloat64=exports.mallocDouble=<span class="fstat-no" title="function not covered" >function mallocDouble(n){<span class="cstat-no" title="statement not covered" ></span>n=bits.nextPow2(n);<span class="cstat-no" title="statement not covered" >v</span>ar log_n=bits.log2(n);<span class="cstat-no" title="statement not covered" >v</span>ar cache=DOUBLE[log_n];<span class="cstat-no" title="statement not covered" >i</span>f(cache.length&gt;0){<span class="cstat-no" title="statement not covered" >return cache.pop()}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn new Float64Array(n)}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.mallocArrayBuffer=<span class="fstat-no" title="function not covered" >function mallocArrayBuffer(n){<span class="cstat-no" title="statement not covered" ></span>n=bits.nextPow2(n);<span class="cstat-no" title="statement not covered" >v</span>ar log_n=bits.log2(n);<span class="cstat-no" title="statement not covered" >v</span>ar cache=DATA[log_n];<span class="cstat-no" title="statement not covered" >i</span>f(cache.length&gt;0){<span class="cstat-no" title="statement not covered" >return cache.pop()}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn new ArrayBuffer(n)}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.clearCache=<span class="fstat-no" title="function not covered" >function clearCache(){<span class="cstat-no" title="statement not covered" ></span>for(var i=0;i&lt;32;++i){<span class="cstat-no" title="statement not covered" >UINT8[i].length=0;<span class="cstat-no" title="statement not covered" >U</span>INT16[i].length=0;<span class="cstat-no" title="statement not covered" >U</span>INT32[i].length=0;<span class="cstat-no" title="statement not covered" >I</span>NT8[i].length=0;<span class="cstat-no" title="statement not covered" >I</span>NT16[i].length=0;<span class="cstat-no" title="statement not covered" >I</span>NT32[i].length=0;<span class="cstat-no" title="statement not covered" >F</span>LOAT[i].length=0;<span class="cstat-no" title="statement not covered" >D</span>OUBLE[i].length=0;<span class="cstat-no" title="statement not covered" >D</span>ATA[i].length=0}</span>}</span>}</span>).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})}</span>,{"bit-twiddle":5,dup:15}],66:[<span class="fstat-no" title="function not covered" >function(require,module,exports){</span>"use strict";<span class="fstat-no" title="function not covered" >function unique_pred(list,compare){<span class="cstat-no" title="statement not covered" ></span>var ptr=1,len=list.length,a=list[0],b=list[0];<span class="cstat-no" title="statement not covered" >f</span>or(var i=1;i&lt;len;++i){<span class="cstat-no" title="statement not covered" >b=a;<span class="cstat-no" title="statement not covered" >a</span>=list[i];<span class="cstat-no" title="statement not covered" >i</span>f(compare(a,b)){<span class="cstat-no" title="statement not covered" >if(i===ptr){<span class="cstat-no" title="statement not covered" >ptr++;<span class="cstat-no" title="statement not covered" >c</span>ontinue}<span class="cstat-no" title="statement not covered" ></span>l</span>ist[ptr++]=a}</span>}<span class="cstat-no" title="statement not covered" ></span>l</span>ist.length=ptr;<span class="cstat-no" title="statement not covered" >r</span>eturn list}<span class="fstat-no" title="function not covered" ></span>function unique_eq(list){<span class="cstat-no" title="statement not covered" ></span>var ptr=1,len=list.length,a=list[0],b=list[0];<span class="cstat-no" title="statement not covered" >f</span>or(var i=1;i&lt;len;++i,b=a){<span class="cstat-no" title="statement not covered" >b=a;<span class="cstat-no" title="statement not covered" >a</span>=list[i];<span class="cstat-no" title="statement not covered" >i</span>f(a!==b){<span class="cstat-no" title="statement not covered" >if(i===ptr){<span class="cstat-no" title="statement not covered" >ptr++;<span class="cstat-no" title="statement not covered" >c</span>ontinue}<span class="cstat-no" title="statement not covered" ></span>l</span>ist[ptr++]=a}</span>}<span class="cstat-no" title="statement not covered" ></span>l</span>ist.length=ptr;<span class="cstat-no" title="statement not covered" >r</span>eturn list}<span class="fstat-no" title="function not covered" ></span>function unique(list,compare,sorted){<span class="cstat-no" title="statement not covered" ></span>if(list.length===0){<span class="cstat-no" title="statement not covered" >return list}<span class="cstat-no" title="statement not covered" ></span>i</span>f(compare){<span class="cstat-no" title="statement not covered" >if(!sorted){<span class="cstat-no" title="statement not covered" >list.sort(compare)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn unique_pred(list,compare)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!sorted){<span class="cstat-no" title="statement not covered" >list.sort()}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn unique_eq(list)}<span class="cstat-no" title="statement not covered" ></span>module.exports=unique}</span>,{}],67:[function(require,module,exports){var punycode=require("punycode");exports.parse=urlParse;exports.resolve=urlResolve;exports.resolveObject=urlResolveObject;exports.format=urlFormat;exports.Url=Url;<span class="fstat-no" title="function not covered" >function Url(){<span class="cstat-no" title="statement not covered" ></span>this.protocol=null;<span class="cstat-no" title="statement not covered" >t</span>his.slashes=null;<span class="cstat-no" title="statement not covered" >t</span>his.auth=null;<span class="cstat-no" title="statement not covered" >t</span>his.host=null;<span class="cstat-no" title="statement not covered" >t</span>his.port=null;<span class="cstat-no" title="statement not covered" >t</span>his.hostname=null;<span class="cstat-no" title="statement not covered" >t</span>his.hash=null;<span class="cstat-no" title="statement not covered" >t</span>his.search=null;<span class="cstat-no" title="statement not covered" >t</span>his.query=null;<span class="cstat-no" title="statement not covered" >t</span>his.pathname=null;<span class="cstat-no" title="statement not covered" >t</span>his.path=null;<span class="cstat-no" title="statement not covered" >t</span>his.href=null}</span>var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,delims=["&lt;","&gt;",'"',"`"," ","\r","\n","	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:true,"javascript:":true},hostlessProtocol={javascript:true,"javascript:":true},slashedProtocol={http:true,https:true,ftp:true,gopher:true,file:true,"http:":true,"https:":true,"ftp:":true,"gopher:":true,"file:":true},querystring=require("querystring");<span class="fstat-no" title="function not covered" >function urlParse(url,parseQueryString,slashesDenoteHost){<span class="cstat-no" title="statement not covered" ></span>if(url&amp;&amp;isObject(url)&amp;&amp;url instanceof Url)<span class="cstat-no" title="statement not covered" >return url;<span class="cstat-no" title="statement not covered" >v</span></span>ar u=new Url;<span class="cstat-no" title="statement not covered" >u</span>.parse(url,parseQueryString,slashesDenoteHost);<span class="cstat-no" title="statement not covered" >r</span>eturn u}</span>Url.prototype.parse=<span class="fstat-no" title="function not covered" >function(url,parseQueryString,slashesDenoteHost){<span class="cstat-no" title="statement not covered" ></span>if(!isString(url)){<span class="cstat-no" title="statement not covered" >throw new TypeError("Parameter 'url' must be a string, not "+typeof url)}<span class="cstat-no" title="statement not covered" ></span>v</span>ar rest=url;<span class="cstat-no" title="statement not covered" >r</span>est=rest.trim();<span class="cstat-no" title="statement not covered" >v</span>ar proto=protocolPattern.exec(rest);<span class="cstat-no" title="statement not covered" >i</span>f(proto){<span class="cstat-no" title="statement not covered" >proto=proto[0];<span class="cstat-no" title="statement not covered" >v</span>ar lowerProto=proto.toLowerCase();<span class="cstat-no" title="statement not covered" >t</span>his.protocol=lowerProto;<span class="cstat-no" title="statement not covered" >r</span>est=rest.substr(proto.length)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(slashesDenoteHost||proto||rest.match(/^\/\/[^@\/]+@[^@\/]+/)){<span class="cstat-no" title="statement not covered" >var slashes=rest.substr(0,2)==="//";<span class="cstat-no" title="statement not covered" >i</span>f(slashes&amp;&amp;!(proto&amp;&amp;hostlessProtocol[proto])){<span class="cstat-no" title="statement not covered" >rest=rest.substr(2);<span class="cstat-no" title="statement not covered" >t</span>his.slashes=true}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!hostlessProtocol[proto]&amp;&amp;(slashes||proto&amp;&amp;!slashedProtocol[proto])){<span class="cstat-no" title="statement not covered" >var hostEnd=-1;<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;hostEndingChars.length;i++){<span class="cstat-no" title="statement not covered" >var hec=rest.indexOf(hostEndingChars[i]);<span class="cstat-no" title="statement not covered" >i</span>f(hec!==-1&amp;&amp;(hostEnd===-1||hec&lt;hostEnd))<span class="cstat-no" title="statement not covered" >hostEnd=hec}<span class="cstat-no" title="statement not covered" ></span></span>v</span>ar auth,atSign;<span class="cstat-no" title="statement not covered" >i</span>f(hostEnd===-1){<span class="cstat-no" title="statement not covered" >atSign=rest.lastIndexOf("@")}</span>else{<span class="cstat-no" title="statement not covered" >atSign=rest.lastIndexOf("@",hostEnd)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(atSign!==-1){<span class="cstat-no" title="statement not covered" >auth=rest.slice(0,atSign);<span class="cstat-no" title="statement not covered" >r</span>est=rest.slice(atSign+1);<span class="cstat-no" title="statement not covered" >t</span>his.auth=decodeURIComponent(auth)}<span class="cstat-no" title="statement not covered" ></span>h</span>ostEnd=-1;<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;nonHostChars.length;i++){<span class="cstat-no" title="statement not covered" >var hec=rest.indexOf(nonHostChars[i]);<span class="cstat-no" title="statement not covered" >i</span>f(hec!==-1&amp;&amp;(hostEnd===-1||hec&lt;hostEnd))<span class="cstat-no" title="statement not covered" >hostEnd=hec}<span class="cstat-no" title="statement not covered" ></span></span>i</span>f(hostEnd===-1)<span class="cstat-no" title="statement not covered" >hostEnd=rest.length;<span class="cstat-no" title="statement not covered" >t</span></span>his.host=rest.slice(0,hostEnd);<span class="cstat-no" title="statement not covered" >r</span>est=rest.slice(hostEnd);<span class="cstat-no" title="statement not covered" >t</span>his.parseHost();<span class="cstat-no" title="statement not covered" >t</span>his.hostname=this.hostname||"";<span class="cstat-no" title="statement not covered" >v</span>ar ipv6Hostname=this.hostname[0]==="["&amp;&amp;this.hostname[this.hostname.length-1]==="]";<span class="cstat-no" title="statement not covered" >i</span>f(!ipv6Hostname){<span class="cstat-no" title="statement not covered" >var hostparts=this.hostname.split(/\./);<span class="cstat-no" title="statement not covered" >f</span>or(var i=0,l=hostparts.length;i&lt;l;i++){<span class="cstat-no" title="statement not covered" >var part=hostparts[i];<span class="cstat-no" title="statement not covered" >i</span>f(!part)<span class="cstat-no" title="statement not covered" >continue;<span class="cstat-no" title="statement not covered" >i</span></span>f(!part.match(hostnamePartPattern)){<span class="cstat-no" title="statement not covered" >var newpart="";<span class="cstat-no" title="statement not covered" >f</span>or(var j=0,k=part.length;j&lt;k;j++){<span class="cstat-no" title="statement not covered" >if(part.charCodeAt(j)&gt;127){<span class="cstat-no" title="statement not covered" >newpart+="x"}</span>else{<span class="cstat-no" title="statement not covered" >newpart+=part[j]}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!newpart.match(hostnamePartPattern)){<span class="cstat-no" title="statement not covered" >var validParts=hostparts.slice(0,i);<span class="cstat-no" title="statement not covered" >v</span>ar notHost=hostparts.slice(i+1);<span class="cstat-no" title="statement not covered" >v</span>ar bit=part.match(hostnamePartStart);<span class="cstat-no" title="statement not covered" >i</span>f(bit){<span class="cstat-no" title="statement not covered" >validParts.push(bit[1]);<span class="cstat-no" title="statement not covered" >n</span>otHost.unshift(bit[2])}<span class="cstat-no" title="statement not covered" ></span>i</span>f(notHost.length){<span class="cstat-no" title="statement not covered" >rest="/"+notHost.join(".")+rest}<span class="cstat-no" title="statement not covered" ></span>t</span>his.hostname=validParts.join(".");<span class="cstat-no" title="statement not covered" >b</span>reak}</span>}</span>}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(this.hostname.length&gt;hostnameMaxLen){<span class="cstat-no" title="statement not covered" >this.hostname=""}</span>else{<span class="cstat-no" title="statement not covered" >this.hostname=this.hostname.toLowerCase()}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!ipv6Hostname){<span class="cstat-no" title="statement not covered" >var domainArray=this.hostname.split(".");<span class="cstat-no" title="statement not covered" >v</span>ar newOut=[];<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;domainArray.length;++i){<span class="cstat-no" title="statement not covered" >var s=domainArray[i];<span class="cstat-no" title="statement not covered" >n</span>ewOut.push(s.match(/[^A-Za-z0-9_-]/)?"xn--"+punycode.encode(s):s)}<span class="cstat-no" title="statement not covered" ></span>t</span>his.hostname=newOut.join(".")}<span class="cstat-no" title="statement not covered" ></span>v</span>ar p=this.port?":"+this.port:"";<span class="cstat-no" title="statement not covered" >v</span>ar h=this.hostname||"";<span class="cstat-no" title="statement not covered" >t</span>his.host=h+p;<span class="cstat-no" title="statement not covered" >t</span>his.href+=this.host;<span class="cstat-no" title="statement not covered" >i</span>f(ipv6Hostname){<span class="cstat-no" title="statement not covered" >this.hostname=this.hostname.substr(1,this.hostname.length-2);<span class="cstat-no" title="statement not covered" >i</span>f(rest[0]!=="/"){<span class="cstat-no" title="statement not covered" >rest="/"+rest}</span>}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!unsafeProtocol[lowerProto]){<span class="cstat-no" title="statement not covered" >for(var i=0,l=autoEscape.length;i&lt;l;i++){<span class="cstat-no" title="statement not covered" >var ae=autoEscape[i];<span class="cstat-no" title="statement not covered" >v</span>ar esc=encodeURIComponent(ae);<span class="cstat-no" title="statement not covered" >i</span>f(esc===ae){<span class="cstat-no" title="statement not covered" >esc=escape(ae)}<span class="cstat-no" title="statement not covered" ></span>r</span>est=rest.split(ae).join(esc)}</span>}<span class="cstat-no" title="statement not covered" ></span>v</span>ar hash=rest.indexOf("#");<span class="cstat-no" title="statement not covered" >i</span>f(hash!==-1){<span class="cstat-no" title="statement not covered" >this.hash=rest.substr(hash);<span class="cstat-no" title="statement not covered" >r</span>est=rest.slice(0,hash)}<span class="cstat-no" title="statement not covered" ></span>v</span>ar qm=rest.indexOf("?");<span class="cstat-no" title="statement not covered" >i</span>f(qm!==-1){<span class="cstat-no" title="statement not covered" >this.search=rest.substr(qm);<span class="cstat-no" title="statement not covered" >t</span>his.query=rest.substr(qm+1);<span class="cstat-no" title="statement not covered" >i</span>f(parseQueryString){<span class="cstat-no" title="statement not covered" >this.query=querystring.parse(this.query)}<span class="cstat-no" title="statement not covered" ></span>r</span>est=rest.slice(0,qm)}</span>else <span class="cstat-no" title="statement not covered" >if(parseQueryString){<span class="cstat-no" title="statement not covered" >this.search="";<span class="cstat-no" title="statement not covered" >t</span>his.query={}}<span class="cstat-no" title="statement not covered" ></span>i</span></span>f(rest)<span class="cstat-no" title="statement not covered" >this.pathname=rest;<span class="cstat-no" title="statement not covered" >i</span></span>f(slashedProtocol[lowerProto]&amp;&amp;this.hostname&amp;&amp;!this.pathname){<span class="cstat-no" title="statement not covered" >this.pathname="/"}<span class="cstat-no" title="statement not covered" ></span>i</span>f(this.pathname||this.search){<span class="cstat-no" title="statement not covered" >var p=this.pathname||"";<span class="cstat-no" title="statement not covered" >v</span>ar s=this.search||"";<span class="cstat-no" title="statement not covered" >t</span>his.path=p+s}<span class="cstat-no" title="statement not covered" ></span>t</span>his.href=this.format();<span class="cstat-no" title="statement not covered" >r</span>eturn this}</span>;<span class="fstat-no" title="function not covered" >function urlFormat(obj){<span class="cstat-no" title="statement not covered" ></span>if(isString(obj))<span class="cstat-no" title="statement not covered" >obj=urlParse(obj);<span class="cstat-no" title="statement not covered" >i</span></span>f(!(obj instanceof Url))<span class="cstat-no" title="statement not covered" >return Url.prototype.format.call(obj);<span class="cstat-no" title="statement not covered" >r</span></span>eturn obj.format()}</span>Url.prototype.format=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var auth=this.auth||"";<span class="cstat-no" title="statement not covered" >i</span>f(auth){<span class="cstat-no" title="statement not covered" >auth=encodeURIComponent(auth);<span class="cstat-no" title="statement not covered" >a</span>uth=auth.replace(/%3A/i,":");<span class="cstat-no" title="statement not covered" >a</span>uth+="@"}<span class="cstat-no" title="statement not covered" ></span>v</span>ar protocol=this.protocol||"",pathname=this.pathname||"",hash=this.hash||"",host=false,query="";<span class="cstat-no" title="statement not covered" >i</span>f(this.host){<span class="cstat-no" title="statement not covered" >host=auth+this.host}</span>else <span class="cstat-no" title="statement not covered" >if(this.hostname){<span class="cstat-no" title="statement not covered" >host=auth+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]");<span class="cstat-no" title="statement not covered" >i</span>f(this.port){<span class="cstat-no" title="statement not covered" >host+=":"+this.port}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span></span>f(this.query&amp;&amp;isObject(this.query)&amp;&amp;Object.keys(this.query).length){<span class="cstat-no" title="statement not covered" >query=querystring.stringify(this.query)}<span class="cstat-no" title="statement not covered" ></span>v</span>ar search=this.search||query&amp;&amp;"?"+query||"";<span class="cstat-no" title="statement not covered" >i</span>f(protocol&amp;&amp;protocol.substr(-1)!==":")<span class="cstat-no" title="statement not covered" >protocol+=":";<span class="cstat-no" title="statement not covered" >i</span></span>f(this.slashes||(!protocol||slashedProtocol[protocol])&amp;&amp;host!==false){<span class="cstat-no" title="statement not covered" >host="//"+(host||"");<span class="cstat-no" title="statement not covered" >i</span>f(pathname&amp;&amp;pathname.charAt(0)!=="/")<span class="cstat-no" title="statement not covered" >pathname="/"+pathname}</span></span>else <span class="cstat-no" title="statement not covered" >if(!host){<span class="cstat-no" title="statement not covered" >host=""}<span class="cstat-no" title="statement not covered" ></span>i</span></span>f(hash&amp;&amp;hash.charAt(0)!=="#")<span class="cstat-no" title="statement not covered" >hash="#"+hash;<span class="cstat-no" title="statement not covered" >i</span></span>f(search&amp;&amp;search.charAt(0)!=="?")<span class="cstat-no" title="statement not covered" >search="?"+search;<span class="cstat-no" title="statement not covered" >p</span></span>athname=pathname.replace(/[?#]/g,<span class="fstat-no" title="function not covered" >function(match){<span class="cstat-no" title="statement not covered" ></span>return encodeURIComponent(match)}</span>);<span class="cstat-no" title="statement not covered" >s</span>earch=search.replace("#","%23");<span class="cstat-no" title="statement not covered" >r</span>eturn protocol+host+pathname+search+hash}</span>;<span class="fstat-no" title="function not covered" >function urlResolve(source,relative){<span class="cstat-no" title="statement not covered" ></span>return urlParse(source,false,true).resolve(relative)}</span>Url.prototype.resolve=<span class="fstat-no" title="function not covered" >function(relative){<span class="cstat-no" title="statement not covered" ></span>return this.resolveObject(urlParse(relative,false,true)).format()}</span>;<span class="fstat-no" title="function not covered" >function urlResolveObject(source,relative){<span class="cstat-no" title="statement not covered" ></span>if(!source)<span class="cstat-no" title="statement not covered" >return relative;<span class="cstat-no" title="statement not covered" >r</span></span>eturn urlParse(source,false,true).resolveObject(relative)}</span>Url.prototype.resolveObject=<span class="fstat-no" title="function not covered" >function(relative){<span class="cstat-no" title="statement not covered" ></span>if(isString(relative)){<span class="cstat-no" title="statement not covered" >var rel=new Url;<span class="cstat-no" title="statement not covered" >r</span>el.parse(relative,false,true);<span class="cstat-no" title="statement not covered" >r</span>elative=rel}<span class="cstat-no" title="statement not covered" ></span>v</span>ar result=new Url;<span class="cstat-no" title="statement not covered" >O</span>bject.keys(this).forEach(<span class="fstat-no" title="function not covered" >function(k){<span class="cstat-no" title="statement not covered" ></span>result[k]=this[k]}</span>,this);<span class="cstat-no" title="statement not covered" >r</span>esult.hash=relative.hash;<span class="cstat-no" title="statement not covered" >i</span>f(relative.href===""){<span class="cstat-no" title="statement not covered" >result.href=result.format();<span class="cstat-no" title="statement not covered" >r</span>eturn result}<span class="cstat-no" title="statement not covered" ></span>i</span>f(relative.slashes&amp;&amp;!relative.protocol){<span class="cstat-no" title="statement not covered" >Object.keys(relative).forEach(<span class="fstat-no" title="function not covered" >function(k){<span class="cstat-no" title="statement not covered" ></span>if(k!=="protocol")<span class="cstat-no" title="statement not covered" >result[k]=relative[k]}</span></span>);<span class="cstat-no" title="statement not covered" >i</span>f(slashedProtocol[result.protocol]&amp;&amp;result.hostname&amp;&amp;!result.pathname){<span class="cstat-no" title="statement not covered" >result.path=result.pathname="/"}<span class="cstat-no" title="statement not covered" ></span>r</span>esult.href=result.format();<span class="cstat-no" title="statement not covered" >r</span>eturn result}<span class="cstat-no" title="statement not covered" ></span>i</span>f(relative.protocol&amp;&amp;relative.protocol!==result.protocol){<span class="cstat-no" title="statement not covered" >if(!slashedProtocol[relative.protocol]){<span class="cstat-no" title="statement not covered" >Object.keys(relative).forEach(<span class="fstat-no" title="function not covered" >function(k){<span class="cstat-no" title="statement not covered" ></span>result[k]=relative[k]}</span>);<span class="cstat-no" title="statement not covered" >r</span>esult.href=result.format();<span class="cstat-no" title="statement not covered" >r</span>eturn result}<span class="cstat-no" title="statement not covered" ></span>r</span>esult.protocol=relative.protocol;<span class="cstat-no" title="statement not covered" >i</span>f(!relative.host&amp;&amp;!hostlessProtocol[relative.protocol]){<span class="cstat-no" title="statement not covered" >var relPath=(relative.pathname||"").split("/");<span class="cstat-no" title="statement not covered" >w</span>hile(relPath.length&amp;&amp;!(relative.host=relPath.shift()));<span class="cstat-no" title="statement not covered" >i</span>f(!relative.host)<span class="cstat-no" title="statement not covered" >relative.host="";<span class="cstat-no" title="statement not covered" >i</span></span>f(!relative.hostname)<span class="cstat-no" title="statement not covered" >relative.hostname="";<span class="cstat-no" title="statement not covered" >i</span></span>f(relPath[0]!=="")<span class="cstat-no" title="statement not covered" >relPath.unshift("");<span class="cstat-no" title="statement not covered" >i</span></span>f(relPath.length&lt;2)<span class="cstat-no" title="statement not covered" >relPath.unshift("");<span class="cstat-no" title="statement not covered" >r</span></span>esult.pathname=relPath.join("/")}</span>else{<span class="cstat-no" title="statement not covered" >result.pathname=relative.pathname}<span class="cstat-no" title="statement not covered" ></span>r</span>esult.search=relative.search;<span class="cstat-no" title="statement not covered" >r</span>esult.query=relative.query;<span class="cstat-no" title="statement not covered" >r</span>esult.host=relative.host||"";<span class="cstat-no" title="statement not covered" >r</span>esult.auth=relative.auth;<span class="cstat-no" title="statement not covered" >r</span>esult.hostname=relative.hostname||relative.host;<span class="cstat-no" title="statement not covered" >r</span>esult.port=relative.port;<span class="cstat-no" title="statement not covered" >i</span>f(result.pathname||result.search){<span class="cstat-no" title="statement not covered" >var p=result.pathname||"";<span class="cstat-no" title="statement not covered" >v</span>ar s=result.search||"";<span class="cstat-no" title="statement not covered" >r</span>esult.path=p+s}<span class="cstat-no" title="statement not covered" ></span>r</span>esult.slashes=result.slashes||relative.slashes;<span class="cstat-no" title="statement not covered" >r</span>esult.href=result.format();<span class="cstat-no" title="statement not covered" >r</span>eturn result}<span class="cstat-no" title="statement not covered" ></span>v</span>ar isSourceAbs=result.pathname&amp;&amp;result.pathname.charAt(0)==="/",isRelAbs=relative.host||relative.pathname&amp;&amp;relative.pathname.charAt(0)==="/",mustEndAbs=isRelAbs||isSourceAbs||result.host&amp;&amp;relative.pathname,removeAllDots=mustEndAbs,srcPath=result.pathname&amp;&amp;result.pathname.split("/")||[],relPath=relative.pathname&amp;&amp;relative.pathname.split("/")||[],psychotic=result.protocol&amp;&amp;!slashedProtocol[result.protocol];<span class="cstat-no" title="statement not covered" >i</span>f(psychotic){<span class="cstat-no" title="statement not covered" >result.hostname="";<span class="cstat-no" title="statement not covered" >r</span>esult.port=null;<span class="cstat-no" title="statement not covered" >i</span>f(result.host){<span class="cstat-no" title="statement not covered" >if(srcPath[0]==="")<span class="cstat-no" title="statement not covered" >srcPath[0]=result.host;e</span>lse <span class="cstat-no" title="statement not covered" >srcPath.unshift(result.host)}<span class="cstat-no" title="statement not covered" ></span></span>r</span>esult.host="";<span class="cstat-no" title="statement not covered" >i</span>f(relative.protocol){<span class="cstat-no" title="statement not covered" >relative.hostname=null;<span class="cstat-no" title="statement not covered" >r</span>elative.port=null;<span class="cstat-no" title="statement not covered" >i</span>f(relative.host){<span class="cstat-no" title="statement not covered" >if(relPath[0]==="")<span class="cstat-no" title="statement not covered" >relPath[0]=relative.host;e</span>lse <span class="cstat-no" title="statement not covered" >relPath.unshift(relative.host)}<span class="cstat-no" title="statement not covered" ></span></span>r</span>elative.host=null}<span class="cstat-no" title="statement not covered" ></span>m</span>ustEndAbs=mustEndAbs&amp;&amp;(relPath[0]===""||srcPath[0]==="")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(isRelAbs){<span class="cstat-no" title="statement not covered" >result.host=relative.host||relative.host===""?relative.host:result.host;<span class="cstat-no" title="statement not covered" >r</span>esult.hostname=relative.hostname||relative.hostname===""?relative.hostname:result.hostname;<span class="cstat-no" title="statement not covered" >r</span>esult.search=relative.search;<span class="cstat-no" title="statement not covered" >r</span>esult.query=relative.query;<span class="cstat-no" title="statement not covered" >s</span>rcPath=relPath}</span>else <span class="cstat-no" title="statement not covered" >if(relPath.length){<span class="cstat-no" title="statement not covered" >if(!srcPath)<span class="cstat-no" title="statement not covered" >srcPath=[];<span class="cstat-no" title="statement not covered" >s</span></span>rcPath.pop();<span class="cstat-no" title="statement not covered" >s</span>rcPath=srcPath.concat(relPath);<span class="cstat-no" title="statement not covered" >r</span>esult.search=relative.search;<span class="cstat-no" title="statement not covered" >r</span>esult.query=relative.query}</span>else <span class="cstat-no" title="statement not covered" >if(!isNullOrUndefined(relative.search)){<span class="cstat-no" title="statement not covered" >if(psychotic){<span class="cstat-no" title="statement not covered" >result.hostname=result.host=srcPath.shift();<span class="cstat-no" title="statement not covered" >v</span>ar authInHost=result.host&amp;&amp;result.host.indexOf("@")&gt;0?result.host.split("@"):false;<span class="cstat-no" title="statement not covered" >i</span>f(authInHost){<span class="cstat-no" title="statement not covered" >result.auth=authInHost.shift();<span class="cstat-no" title="statement not covered" >r</span>esult.host=result.hostname=authInHost.shift()}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>esult.search=relative.search;<span class="cstat-no" title="statement not covered" >r</span>esult.query=relative.query;<span class="cstat-no" title="statement not covered" >i</span>f(!isNull(result.pathname)||!isNull(result.search)){<span class="cstat-no" title="statement not covered" >result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")}<span class="cstat-no" title="statement not covered" ></span>r</span>esult.href=result.format();<span class="cstat-no" title="statement not covered" >r</span>eturn result}<span class="cstat-no" title="statement not covered" ></span>i</span></span></span>f(!srcPath.length){<span class="cstat-no" title="statement not covered" >result.pathname=null;<span class="cstat-no" title="statement not covered" >i</span>f(result.search){<span class="cstat-no" title="statement not covered" >result.path="/"+result.search}</span>else{<span class="cstat-no" title="statement not covered" >result.path=null}<span class="cstat-no" title="statement not covered" ></span>r</span>esult.href=result.format();<span class="cstat-no" title="statement not covered" >r</span>eturn result}<span class="cstat-no" title="statement not covered" ></span>v</span>ar last=srcPath.slice(-1)[0];<span class="cstat-no" title="statement not covered" >v</span>ar hasTrailingSlash=(result.host||relative.host)&amp;&amp;(last==="."||last==="..")||last==="";<span class="cstat-no" title="statement not covered" >v</span>ar up=0;<span class="cstat-no" title="statement not covered" >f</span>or(var i=srcPath.length;i&gt;=0;i--){<span class="cstat-no" title="statement not covered" >last=srcPath[i];<span class="cstat-no" title="statement not covered" >i</span>f(last=="."){<span class="cstat-no" title="statement not covered" >srcPath.splice(i,1)}</span>else <span class="cstat-no" title="statement not covered" >if(last===".."){<span class="cstat-no" title="statement not covered" >srcPath.splice(i,1);<span class="cstat-no" title="statement not covered" >u</span>p++}</span>else <span class="cstat-no" title="statement not covered" >if(up){<span class="cstat-no" title="statement not covered" >srcPath.splice(i,1);<span class="cstat-no" title="statement not covered" >u</span>p--}</span>}<span class="cstat-no" title="statement not covered" ></span></span></span>i</span>f(!mustEndAbs&amp;&amp;!removeAllDots){<span class="cstat-no" title="statement not covered" >for(;up--;up){<span class="cstat-no" title="statement not covered" >srcPath.unshift("..")}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(mustEndAbs&amp;&amp;srcPath[0]!==""&amp;&amp;(!srcPath[0]||srcPath[0].charAt(0)!=="/")){<span class="cstat-no" title="statement not covered" >srcPath.unshift("")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(hasTrailingSlash&amp;&amp;srcPath.join("/").substr(-1)!=="/"){<span class="cstat-no" title="statement not covered" >srcPath.push("")}<span class="cstat-no" title="statement not covered" ></span>v</span>ar isAbsolute=srcPath[0]===""||srcPath[0]&amp;&amp;srcPath[0].charAt(0)==="/";<span class="cstat-no" title="statement not covered" >i</span>f(psychotic){<span class="cstat-no" title="statement not covered" >result.hostname=result.host=isAbsolute?"":srcPath.length?srcPath.shift():"";<span class="cstat-no" title="statement not covered" >v</span>ar authInHost=result.host&amp;&amp;result.host.indexOf("@")&gt;0?result.host.split("@"):false;<span class="cstat-no" title="statement not covered" >i</span>f(authInHost){<span class="cstat-no" title="statement not covered" >result.auth=authInHost.shift();<span class="cstat-no" title="statement not covered" >r</span>esult.host=result.hostname=authInHost.shift()}</span>}<span class="cstat-no" title="statement not covered" ></span>m</span>ustEndAbs=mustEndAbs||result.host&amp;&amp;srcPath.length;<span class="cstat-no" title="statement not covered" >i</span>f(mustEndAbs&amp;&amp;!isAbsolute){<span class="cstat-no" title="statement not covered" >srcPath.unshift("")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!srcPath.length){<span class="cstat-no" title="statement not covered" >result.pathname=null;<span class="cstat-no" title="statement not covered" >r</span>esult.path=null}</span>else{<span class="cstat-no" title="statement not covered" >result.pathname=srcPath.join("/")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!isNull(result.pathname)||!isNull(result.search)){<span class="cstat-no" title="statement not covered" >result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")}<span class="cstat-no" title="statement not covered" ></span>r</span>esult.auth=relative.auth||result.auth;<span class="cstat-no" title="statement not covered" >r</span>esult.slashes=result.slashes||relative.slashes;<span class="cstat-no" title="statement not covered" >r</span>esult.href=result.format();<span class="cstat-no" title="statement not covered" >r</span>eturn result}</span>;Url.prototype.parseHost=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var host=this.host;<span class="cstat-no" title="statement not covered" >v</span>ar port=portPattern.exec(host);<span class="cstat-no" title="statement not covered" >i</span>f(port){<span class="cstat-no" title="statement not covered" >port=port[0];<span class="cstat-no" title="statement not covered" >i</span>f(port!==":"){<span class="cstat-no" title="statement not covered" >this.port=port.substr(1)}<span class="cstat-no" title="statement not covered" ></span>h</span>ost=host.substr(0,host.length-port.length)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(host)<span class="cstat-no" title="statement not covered" >this.hostname=host}</span></span>;<span class="fstat-no" title="function not covered" >function isString(arg){<span class="cstat-no" title="statement not covered" ></span>return typeof arg==="string"}<span class="fstat-no" title="function not covered" ></span>function isObject(arg){<span class="cstat-no" title="statement not covered" ></span>return typeof arg==="object"&amp;&amp;arg!==null}<span class="fstat-no" title="function not covered" ></span>function isNull(arg){<span class="cstat-no" title="statement not covered" ></span>return arg===null}<span class="fstat-no" title="function not covered" ></span>function isNullOrUndefined(arg){<span class="cstat-no" title="statement not covered" ></span>return arg==null}</span>},{punycode:46,querystring:49}],68:[function(require,module,exports){module.exports=<span class="fstat-no" title="function not covered" >function isBuffer(arg){<span class="cstat-no" title="statement not covered" ></span>return arg&amp;&amp;typeof arg==="object"&amp;&amp;typeof arg.copy==="function"&amp;&amp;typeof arg.fill==="function"&amp;&amp;typeof arg.readUInt8==="function"}</span>},{}],69:[function(require,module,exports){(function(process,global){var formatRegExp=/%[sdj%]/g;exports.format=<span class="fstat-no" title="function not covered" >function(f){<span class="cstat-no" title="statement not covered" ></span>if(!isString(f)){<span class="cstat-no" title="statement not covered" >var objects=[];<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;arguments.length;i++){<span class="cstat-no" title="statement not covered" >objects.push(inspect(arguments[i]))}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn objects.join(" ")}<span class="cstat-no" title="statement not covered" ></span>v</span>ar i=1;<span class="cstat-no" title="statement not covered" >v</span>ar args=arguments;<span class="cstat-no" title="statement not covered" >v</span>ar len=args.length;<span class="cstat-no" title="statement not covered" >v</span>ar str=String(f).replace(formatRegExp,<span class="fstat-no" title="function not covered" >function(x){<span class="cstat-no" title="statement not covered" ></span>if(x==="%%")<span class="cstat-no" title="statement not covered" >return"%";<span class="cstat-no" title="statement not covered" >i</span></span>f(i&gt;=len)<span class="cstat-no" title="statement not covered" >return x;<span class="cstat-no" title="statement not covered" >s</span></span>witch(x){case"%s":<span class="cstat-no" title="statement not covered" >return String(args[i++]);c</span>ase"%d":<span class="cstat-no" title="statement not covered" >return Number(args[i++]);c</span>ase"%j":<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >return JSON.stringify(args[i++])}</span>catch(_){<span class="cstat-no" title="statement not covered" >return"[Circular]"}</span>d</span>efault:<span class="cstat-no" title="statement not covered" >return x}</span>}</span>);<span class="cstat-no" title="statement not covered" >f</span>or(var x=args[i];i&lt;len;x=args[++i]){<span class="cstat-no" title="statement not covered" >if(isNull(x)||!isObject(x)){<span class="cstat-no" title="statement not covered" >str+=" "+x}</span>else{<span class="cstat-no" title="statement not covered" >str+=" "+inspect(x)}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn str}</span>;exports.deprecate=<span class="fstat-no" title="function not covered" >function(fn,msg){<span class="cstat-no" title="statement not covered" ></span>if(isUndefined(global.process)){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return exports.deprecate(fn,msg).apply(this,arguments)}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(process.noDeprecation===true){<span class="cstat-no" title="statement not covered" >return fn}<span class="cstat-no" title="statement not covered" ></span>v</span>ar warned=false;<span class="fstat-no" title="function not covered" >f</span>unction deprecated(){<span class="cstat-no" title="statement not covered" ></span>if(!warned){<span class="cstat-no" title="statement not covered" >if(process.throwDeprecation){<span class="cstat-no" title="statement not covered" >throw new Error(msg)}</span>else <span class="cstat-no" title="statement not covered" >if(process.traceDeprecation){<span class="cstat-no" title="statement not covered" >console.trace(msg)}</span>else{<span class="cstat-no" title="statement not covered" >console.error(msg)}<span class="cstat-no" title="statement not covered" ></span>w</span></span>arned=true}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn fn.apply(this,arguments)}<span class="cstat-no" title="statement not covered" ></span>return deprecated}</span>;var debugs={};var debugEnviron;exports.debuglog=<span class="fstat-no" title="function not covered" >function(set){<span class="cstat-no" title="statement not covered" ></span>if(isUndefined(debugEnviron))<span class="cstat-no" title="statement not covered" >debugEnviron=process.env.NODE_DEBUG||"";<span class="cstat-no" title="statement not covered" >s</span></span>et=set.toUpperCase();<span class="cstat-no" title="statement not covered" >i</span>f(!debugs[set]){<span class="cstat-no" title="statement not covered" >if(new RegExp("\\b"+set+"\\b","i").test(debugEnviron)){<span class="cstat-no" title="statement not covered" >var pid=process.pid;<span class="cstat-no" title="statement not covered" >d</span>ebugs[set]=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var msg=exports.format.apply(exports,arguments);<span class="cstat-no" title="statement not covered" >c</span>onsole.error("%s %d: %s",set,pid,msg)}</span>}</span>else{<span class="cstat-no" title="statement not covered" >debugs[set]=<span class="fstat-no" title="function not covered" >function(){</span>}}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn debugs[set]}</span>;<span class="fstat-no" title="function not covered" >function inspect(obj,opts){<span class="cstat-no" title="statement not covered" ></span>var ctx={seen:[],stylize:stylizeNoColor};<span class="cstat-no" title="statement not covered" >i</span>f(arguments.length&gt;=3)<span class="cstat-no" title="statement not covered" >ctx.depth=arguments[2];<span class="cstat-no" title="statement not covered" >i</span></span>f(arguments.length&gt;=4)<span class="cstat-no" title="statement not covered" >ctx.colors=arguments[3];<span class="cstat-no" title="statement not covered" >i</span></span>f(isBoolean(opts)){<span class="cstat-no" title="statement not covered" >ctx.showHidden=opts}</span>else <span class="cstat-no" title="statement not covered" >if(opts){<span class="cstat-no" title="statement not covered" >exports._extend(ctx,opts)}<span class="cstat-no" title="statement not covered" ></span>i</span></span>f(isUndefined(ctx.showHidden))<span class="cstat-no" title="statement not covered" >ctx.showHidden=false;<span class="cstat-no" title="statement not covered" >i</span></span>f(isUndefined(ctx.depth))<span class="cstat-no" title="statement not covered" >ctx.depth=2;<span class="cstat-no" title="statement not covered" >i</span></span>f(isUndefined(ctx.colors))<span class="cstat-no" title="statement not covered" >ctx.colors=false;<span class="cstat-no" title="statement not covered" >i</span></span>f(isUndefined(ctx.customInspect))<span class="cstat-no" title="statement not covered" >ctx.customInspect=true;<span class="cstat-no" title="statement not covered" >i</span></span>f(ctx.colors)<span class="cstat-no" title="statement not covered" >ctx.stylize=stylizeWithColor;<span class="cstat-no" title="statement not covered" >r</span></span>eturn formatValue(ctx,obj,ctx.depth)}</span>exports.inspect=inspect;inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};inspect.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};<span class="fstat-no" title="function not covered" >function stylizeWithColor(str,styleType){<span class="cstat-no" title="statement not covered" ></span>var style=inspect.styles[styleType];<span class="cstat-no" title="statement not covered" >i</span>f(style){<span class="cstat-no" title="statement not covered" >return"["+inspect.colors[style][0]+"m"+str+"["+inspect.colors[style][1]+"m"}</span>else{<span class="cstat-no" title="statement not covered" >return str}</span>}<span class="fstat-no" title="function not covered" ></span>function stylizeNoColor(str,styleType){<span class="cstat-no" title="statement not covered" ></span>return str}<span class="fstat-no" title="function not covered" ></span>function arrayToHash(array){<span class="cstat-no" title="statement not covered" ></span>var hash={};<span class="cstat-no" title="statement not covered" >a</span>rray.forEach(<span class="fstat-no" title="function not covered" >function(val,idx){<span class="cstat-no" title="statement not covered" ></span>hash[val]=true}</span>);<span class="cstat-no" title="statement not covered" >r</span>eturn hash}<span class="fstat-no" title="function not covered" ></span>function formatValue(ctx,value,recurseTimes){<span class="cstat-no" title="statement not covered" ></span>if(ctx.customInspect&amp;&amp;value&amp;&amp;isFunction(value.inspect)&amp;&amp;value.inspect!==exports.inspect&amp;&amp;!(value.constructor&amp;&amp;value.constructor.prototype===value)){<span class="cstat-no" title="statement not covered" >var ret=value.inspect(recurseTimes,ctx);<span class="cstat-no" title="statement not covered" >i</span>f(!isString(ret)){<span class="cstat-no" title="statement not covered" >ret=formatValue(ctx,ret,recurseTimes)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn ret}<span class="cstat-no" title="statement not covered" ></span>v</span>ar primitive=formatPrimitive(ctx,value);<span class="cstat-no" title="statement not covered" >i</span>f(primitive){<span class="cstat-no" title="statement not covered" >return primitive}<span class="cstat-no" title="statement not covered" ></span>v</span>ar keys=Object.keys(value);<span class="cstat-no" title="statement not covered" >v</span>ar visibleKeys=arrayToHash(keys);<span class="cstat-no" title="statement not covered" >i</span>f(ctx.showHidden){<span class="cstat-no" title="statement not covered" >keys=Object.getOwnPropertyNames(value)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(isError(value)&amp;&amp;(keys.indexOf("message")&gt;=0||keys.indexOf("description")&gt;=0)){<span class="cstat-no" title="statement not covered" >return formatError(value)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(keys.length===0){<span class="cstat-no" title="statement not covered" >if(isFunction(value)){<span class="cstat-no" title="statement not covered" >var name=value.name?": "+value.name:"";<span class="cstat-no" title="statement not covered" >r</span>eturn ctx.stylize("[Function"+name+"]","special")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(isRegExp(value)){<span class="cstat-no" title="statement not covered" >return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(isDate(value)){<span class="cstat-no" title="statement not covered" >return ctx.stylize(Date.prototype.toString.call(value),"date")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(isError(value)){<span class="cstat-no" title="statement not covered" >return formatError(value)}</span>}<span class="cstat-no" title="statement not covered" ></span>v</span>ar base="",array=false,braces=["{","}"];<span class="cstat-no" title="statement not covered" >i</span>f(isArray(value)){<span class="cstat-no" title="statement not covered" >array=true;<span class="cstat-no" title="statement not covered" >b</span>races=["[","]"]}<span class="cstat-no" title="statement not covered" ></span>i</span>f(isFunction(value)){<span class="cstat-no" title="statement not covered" >var n=value.name?": "+value.name:"";<span class="cstat-no" title="statement not covered" >b</span>ase=" [Function"+n+"]"}<span class="cstat-no" title="statement not covered" ></span>i</span>f(isRegExp(value)){<span class="cstat-no" title="statement not covered" >base=" "+RegExp.prototype.toString.call(value)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(isDate(value)){<span class="cstat-no" title="statement not covered" >base=" "+Date.prototype.toUTCString.call(value)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(isError(value)){<span class="cstat-no" title="statement not covered" >base=" "+formatError(value)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(keys.length===0&amp;&amp;(!array||value.length==0)){<span class="cstat-no" title="statement not covered" >return braces[0]+base+braces[1]}<span class="cstat-no" title="statement not covered" ></span>i</span>f(recurseTimes&lt;0){<span class="cstat-no" title="statement not covered" >if(isRegExp(value)){<span class="cstat-no" title="statement not covered" >return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}</span>else{<span class="cstat-no" title="statement not covered" >return ctx.stylize("[Object]","special")}</span>}<span class="cstat-no" title="statement not covered" ></span>c</span>tx.seen.push(value);<span class="cstat-no" title="statement not covered" >v</span>ar output;<span class="cstat-no" title="statement not covered" >i</span>f(array){<span class="cstat-no" title="statement not covered" >output=formatArray(ctx,value,recurseTimes,visibleKeys,keys)}</span>else{<span class="cstat-no" title="statement not covered" >output=keys.map(<span class="fstat-no" title="function not covered" >function(key){<span class="cstat-no" title="statement not covered" ></span>return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)}</span>)}<span class="cstat-no" title="statement not covered" ></span>c</span>tx.seen.pop();<span class="cstat-no" title="statement not covered" >r</span>eturn reduceToSingleString(output,base,braces)}<span class="fstat-no" title="function not covered" ></span>function formatPrimitive(ctx,value){<span class="cstat-no" title="statement not covered" ></span>if(isUndefined(value))<span class="cstat-no" title="statement not covered" >return ctx.stylize("undefined","undefined");<span class="cstat-no" title="statement not covered" >i</span></span>f(isString(value)){<span class="cstat-no" title="statement not covered" >var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";<span class="cstat-no" title="statement not covered" >r</span>eturn ctx.stylize(simple,"string")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(isNumber(value))<span class="cstat-no" title="statement not covered" >return ctx.stylize(""+value,"number");<span class="cstat-no" title="statement not covered" >i</span></span>f(isBoolean(value))<span class="cstat-no" title="statement not covered" >return ctx.stylize(""+value,"boolean");<span class="cstat-no" title="statement not covered" >i</span></span>f(isNull(value))<span class="cstat-no" title="statement not covered" >return ctx.stylize("null","null")}<span class="fstat-no" title="function not covered" ></span></span>function formatError(value){<span class="cstat-no" title="statement not covered" ></span>return"["+Error.prototype.toString.call(value)+"]"}<span class="fstat-no" title="function not covered" ></span>function formatArray(ctx,value,recurseTimes,visibleKeys,keys){<span class="cstat-no" title="statement not covered" ></span>var output=[];<span class="cstat-no" title="statement not covered" >f</span>or(var i=0,l=value.length;i&lt;l;++i){<span class="cstat-no" title="statement not covered" >if(hasOwnProperty(value,String(i))){<span class="cstat-no" title="statement not covered" >output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),true))}</span>else{<span class="cstat-no" title="statement not covered" >output.push("")}</span>}<span class="cstat-no" title="statement not covered" ></span>k</span>eys.forEach(<span class="fstat-no" title="function not covered" >function(key){<span class="cstat-no" title="statement not covered" ></span>if(!key.match(/^\d+$/)){<span class="cstat-no" title="statement not covered" >output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,true))}</span>}</span>);<span class="cstat-no" title="statement not covered" >r</span>eturn output}<span class="fstat-no" title="function not covered" ></span>function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){<span class="cstat-no" title="statement not covered" ></span>var name,str,desc;<span class="cstat-no" title="statement not covered" >d</span>esc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]};<span class="cstat-no" title="statement not covered" >i</span>f(desc.get){<span class="cstat-no" title="statement not covered" >if(desc.set){<span class="cstat-no" title="statement not covered" >str=ctx.stylize("[Getter/Setter]","special")}</span>else{<span class="cstat-no" title="statement not covered" >str=ctx.stylize("[Getter]","special")}</span>}</span>else{<span class="cstat-no" title="statement not covered" >if(desc.set){<span class="cstat-no" title="statement not covered" >str=ctx.stylize("[Setter]","special")}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!hasOwnProperty(visibleKeys,key)){<span class="cstat-no" title="statement not covered" >name="["+key+"]"}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!str){<span class="cstat-no" title="statement not covered" >if(ctx.seen.indexOf(desc.value)&lt;0){<span class="cstat-no" title="statement not covered" >if(isNull(recurseTimes)){<span class="cstat-no" title="statement not covered" >str=formatValue(ctx,desc.value,null)}</span>else{<span class="cstat-no" title="statement not covered" >str=formatValue(ctx,desc.value,recurseTimes-1)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(str.indexOf("\n")&gt;-1){<span class="cstat-no" title="statement not covered" >if(array){<span class="cstat-no" title="statement not covered" >str=str.split("\n").map(<span class="fstat-no" title="function not covered" >function(line){<span class="cstat-no" title="statement not covered" ></span>return"  "+line}</span>).join("\n").substr(2)}</span>else{<span class="cstat-no" title="statement not covered" >str="\n"+str.split("\n").map(<span class="fstat-no" title="function not covered" >function(line){<span class="cstat-no" title="statement not covered" ></span>return"   "+line}</span>).join("\n")}</span>}</span>}</span>else{<span class="cstat-no" title="statement not covered" >str=ctx.stylize("[Circular]","special")}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(isUndefined(name)){<span class="cstat-no" title="statement not covered" >if(array&amp;&amp;key.match(/^\d+$/)){<span class="cstat-no" title="statement not covered" >return str}<span class="cstat-no" title="statement not covered" ></span>n</span>ame=JSON.stringify(""+key);<span class="cstat-no" title="statement not covered" >i</span>f(name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){<span class="cstat-no" title="statement not covered" >name=name.substr(1,name.length-2);<span class="cstat-no" title="statement not covered" >n</span>ame=ctx.stylize(name,"name")}</span>else{<span class="cstat-no" title="statement not covered" >name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");<span class="cstat-no" title="statement not covered" >n</span>ame=ctx.stylize(name,"string")}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn name+": "+str}<span class="fstat-no" title="function not covered" ></span>function reduceToSingleString(output,base,braces){<span class="cstat-no" title="statement not covered" ></span>var numLinesEst=0;<span class="cstat-no" title="statement not covered" >v</span>ar length=output.reduce(<span class="fstat-no" title="function not covered" >function(prev,cur){<span class="cstat-no" title="statement not covered" ></span>numLinesEst++;<span class="cstat-no" title="statement not covered" >i</span>f(cur.indexOf("\n")&gt;=0)<span class="cstat-no" title="statement not covered" >numLinesEst++;<span class="cstat-no" title="statement not covered" >r</span></span>eturn prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1}</span>,0);<span class="cstat-no" title="statement not covered" >i</span>f(length&gt;60){<span class="cstat-no" title="statement not covered" >return braces[0]+(base===""?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn braces[0]+base+" "+output.join(", ")+" "+braces[1]}<span class="fstat-no" title="function not covered" ></span>function isArray(ar){<span class="cstat-no" title="statement not covered" ></span>return Array.isArray(ar)}</span>exports.isArray=isArray;<span class="fstat-no" title="function not covered" >function isBoolean(arg){<span class="cstat-no" title="statement not covered" ></span>return typeof arg==="boolean"}</span>exports.isBoolean=isBoolean;<span class="fstat-no" title="function not covered" >function isNull(arg){<span class="cstat-no" title="statement not covered" ></span>return arg===null}</span>exports.isNull=isNull;<span class="fstat-no" title="function not covered" >function isNullOrUndefined(arg){<span class="cstat-no" title="statement not covered" ></span>return arg==null}</span>exports.isNullOrUndefined=isNullOrUndefined;<span class="fstat-no" title="function not covered" >function isNumber(arg){<span class="cstat-no" title="statement not covered" ></span>return typeof arg==="number"}</span>exports.isNumber=isNumber;<span class="fstat-no" title="function not covered" >function isString(arg){<span class="cstat-no" title="statement not covered" ></span>return typeof arg==="string"}</span>exports.isString=isString;<span class="fstat-no" title="function not covered" >function isSymbol(arg){<span class="cstat-no" title="statement not covered" ></span>return typeof arg==="symbol"}</span>exports.isSymbol=isSymbol;<span class="fstat-no" title="function not covered" >function isUndefined(arg){<span class="cstat-no" title="statement not covered" ></span>return arg===void 0}</span>exports.isUndefined=isUndefined;<span class="fstat-no" title="function not covered" >function isRegExp(re){<span class="cstat-no" title="statement not covered" ></span>return isObject(re)&amp;&amp;objectToString(re)==="[object RegExp]"}</span>exports.isRegExp=isRegExp;<span class="fstat-no" title="function not covered" >function isObject(arg){<span class="cstat-no" title="statement not covered" ></span>return typeof arg==="object"&amp;&amp;arg!==null}</span>exports.isObject=isObject;<span class="fstat-no" title="function not covered" >function isDate(d){<span class="cstat-no" title="statement not covered" ></span>return isObject(d)&amp;&amp;objectToString(d)==="[object Date]"}</span>exports.isDate=isDate;<span class="fstat-no" title="function not covered" >function isError(e){<span class="cstat-no" title="statement not covered" ></span>return isObject(e)&amp;&amp;(objectToString(e)==="[object Error]"||e instanceof Error)}</span>exports.isError=isError;<span class="fstat-no" title="function not covered" >function isFunction(arg){<span class="cstat-no" title="statement not covered" ></span>return typeof arg==="function"}</span>exports.isFunction=isFunction;<span class="fstat-no" title="function not covered" >function isPrimitive(arg){<span class="cstat-no" title="statement not covered" ></span>return arg===null||typeof arg==="boolean"||typeof arg==="number"||typeof arg==="string"||typeof arg==="symbol"||typeof arg==="undefined"}</span>exports.isPrimitive=isPrimitive;exports.isBuffer=require("./support/isBuffer");<span class="fstat-no" title="function not covered" >function objectToString(o){<span class="cstat-no" title="statement not covered" ></span>return Object.prototype.toString.call(o)}<span class="fstat-no" title="function not covered" ></span>function pad(n){<span class="cstat-no" title="statement not covered" ></span>return n&lt;10?"0"+n.toString(10):n.toString(10)}</span>var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];<span class="fstat-no" title="function not covered" >function timestamp(){<span class="cstat-no" title="statement not covered" ></span>var d=new Date;<span class="cstat-no" title="statement not covered" >v</span>ar time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");<span class="cstat-no" title="statement not covered" >r</span>eturn[d.getDate(),months[d.getMonth()],time].join(" ")}</span>exports.log=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))}</span>;exports.inherits=require("inherits");exports._extend=<span class="fstat-no" title="function not covered" >function(origin,add){<span class="cstat-no" title="statement not covered" ></span>if(!add||!isObject(add))<span class="cstat-no" title="statement not covered" >return origin;<span class="cstat-no" title="statement not covered" >v</span></span>ar keys=Object.keys(add);<span class="cstat-no" title="statement not covered" >v</span>ar i=keys.length;<span class="cstat-no" title="statement not covered" >w</span>hile(i--){<span class="cstat-no" title="statement not covered" >origin[keys[i]]=add[keys[i]]}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn origin}</span>;<span class="fstat-no" title="function not covered" >function hasOwnProperty(obj,prop){<span class="cstat-no" title="statement not covered" ></span>return Object.prototype.hasOwnProperty.call(obj,prop)}</span>}).call(this,require("g5I+bs"),typeof self!=="undefined"?<span class="branch-0 cbranch-no" title="branch not covered" >self:</span>typeof window!=="undefined"?<span class="branch-0 cbranch-no" title="branch not covered" >window:</span>{})},{"./support/isBuffer":68,"g5I+bs":45,inherits:28}],70:[function(require,module,exports){module.exports=<span class="fstat-no" title="function not covered" >function(context,fn){<span class="cstat-no" title="statement not covered" ></span>if(typeof context==="function"){<span class="cstat-no" title="statement not covered" >var Context=window.AudioContext||window.webkitAudioContext;<span class="cstat-no" title="statement not covered" >i</span>f(!Context)<span class="cstat-no" title="statement not covered" >throw new Error("AudioContext not supported");<span class="cstat-no" title="statement not covered" >f</span></span>n=context;<span class="cstat-no" title="statement not covered" >c</span>ontext=new Context}<span class="cstat-no" title="statement not covered" ></span>v</span>ar self=context.createScriptProcessor(2048,1,1);<span class="cstat-no" title="statement not covered" >s</span>elf.fn=fn;<span class="cstat-no" title="statement not covered" >s</span>elf.i=self.t=0;<span class="cstat-no" title="statement not covered" >w</span>indow._SAMPLERATE=self.sampleRate=self.rate=context.sampleRate;<span class="cstat-no" title="statement not covered" >s</span>elf.duration=Infinity;<span class="cstat-no" title="statement not covered" >s</span>elf.recording=false;<span class="cstat-no" title="statement not covered" >s</span>elf.onaudioprocess=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var output=e.outputBuffer.getChannelData(0),input=e.inputBuffer.getChannelData(0);<span class="cstat-no" title="statement not covered" >s</span>elf.tick(output,input)}</span>;<span class="cstat-no" title="statement not covered" >s</span>elf.tick=<span class="fstat-no" title="function not covered" >function(output,input){<span class="cstat-no" title="statement not covered" ></span>output=output||self._buffer;<span class="cstat-no" title="statement not covered" >i</span>nput=input||[];<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;output.length;i+=1){<span class="cstat-no" title="statement not covered" >self.t=self.i/self.rate;<span class="cstat-no" title="statement not covered" >s</span>elf.i+=1;<span class="cstat-no" title="statement not covered" >o</span>utput[i]=self.fn(self.t,self.i,input[i]);<span class="cstat-no" title="statement not covered" >i</span>f(self.i&gt;=self.duration){<span class="cstat-no" title="statement not covered" >self.stop();<span class="cstat-no" title="statement not covered" >b</span>reak}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn output}</span>;<span class="cstat-no" title="statement not covered" >s</span>elf.stop=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>self.disconnect();<span class="cstat-no" title="statement not covered" >s</span>elf.playing=false;<span class="cstat-no" title="statement not covered" >i</span>f(self.recording){}}</span>;<span class="cstat-no" title="statement not covered" >s</span>elf.play=<span class="fstat-no" title="function not covered" >function(opts){<span class="cstat-no" title="statement not covered" ></span>if(self.playing)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >s</span></span>elf.connect(self.context.destination);<span class="cstat-no" title="statement not covered" >s</span>elf.playing=true;<span class="cstat-no" title="statement not covered" >s</span>etTimeout(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this.node.disconnect()}</span>,1e11);<span class="cstat-no" title="statement not covered" >r</span>eturn}</span>;<span class="cstat-no" title="statement not covered" >s</span>elf.record=<span class="fstat-no" title="function not covered" >function(){</span>};<span class="cstat-no" title="statement not covered" >s</span>elf.reset=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>self.i=self.t=0}</span>;<span class="cstat-no" title="statement not covered" >s</span>elf.createSample=<span class="fstat-no" title="function not covered" >function(duration){<span class="cstat-no" title="statement not covered" ></span>self.reset();<span class="cstat-no" title="statement not covered" >v</span>ar buffer=self.context.createBuffer(1,duration,self.context.sampleRate);<span class="cstat-no" title="statement not covered" >v</span>ar blob=buffer.getChannelData(0);<span class="cstat-no" title="statement not covered" >s</span>elf.tick(blob);<span class="cstat-no" title="statement not covered" >r</span>eturn buffer}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn self}</span>;<span class="fstat-no" title="function not covered" >function mergeArgs(opts,args){<span class="cstat-no" title="statement not covered" ></span>Object.keys(opts||{}).forEach(<span class="fstat-no" title="function not covered" >function(key){<span class="cstat-no" title="statement not covered" ></span>args[key]=opts[key]}</span>);<span class="cstat-no" title="statement not covered" >r</span>eturn Object.keys(args).reduce(<span class="fstat-no" title="function not covered" >function(acc,key){<span class="cstat-no" title="statement not covered" ></span>var dash=key.length===1?"-":"--";<span class="cstat-no" title="statement not covered" >r</span>eturn acc.concat(dash+key,args[key])}</span>,[])}<span class="fstat-no" title="function not covered" ></span>function signed(n){<span class="cstat-no" title="statement not covered" ></span>if(isNaN(n))<span class="cstat-no" title="statement not covered" >return 0;<span class="cstat-no" title="statement not covered" >v</span></span>ar b=Math.pow(2,15);<span class="cstat-no" title="statement not covered" >r</span>eturn n&gt;0?Math.min(b-1,Math.floor(b*n-1)):Math.max(-b,Math.ceil(b*n-1))}</span>},{}],71:[<span class="fstat-no" title="function not covered" >function(require,module,exports){<span class="cstat-no" title="statement not covered" ></span>var bundleFn=arguments[3];<span class="cstat-no" title="statement not covered" >v</span>ar sources=arguments[4];<span class="cstat-no" title="statement not covered" >v</span>ar cache=arguments[5];<span class="cstat-no" title="statement not covered" >v</span>ar stringify=JSON.stringify;<span class="cstat-no" title="statement not covered" >m</span>odule.exports=<span class="fstat-no" title="function not covered" >function(fn){<span class="cstat-no" title="statement not covered" ></span>var keys=[];<span class="cstat-no" title="statement not covered" >v</span>ar wkey;<span class="cstat-no" title="statement not covered" >v</span>ar cacheKeys=Object.keys(cache);<span class="cstat-no" title="statement not covered" >f</span>or(var i=0,l=cacheKeys.length;i&lt;l;i++){<span class="cstat-no" title="statement not covered" >var key=cacheKeys[i];<span class="cstat-no" title="statement not covered" >i</span>f(cache[key].exports===fn){<span class="cstat-no" title="statement not covered" >wkey=key;<span class="cstat-no" title="statement not covered" >b</span>reak}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!wkey){<span class="cstat-no" title="statement not covered" >wkey=Math.floor(Math.pow(16,8)*Math.random()).toString(16);<span class="cstat-no" title="statement not covered" >v</span>ar wcache={};<span class="cstat-no" title="statement not covered" >f</span>or(var i=0,l=cacheKeys.length;i&lt;l;i++){<span class="cstat-no" title="statement not covered" >var key=cacheKeys[i];<span class="cstat-no" title="statement not covered" >w</span>cache[key]=key}<span class="cstat-no" title="statement not covered" ></span>s</span>ources[wkey]=[Function(["require","module","exports"],"("+fn+")(self)"),wcache]}<span class="cstat-no" title="statement not covered" ></span>v</span>ar skey=Math.floor(Math.pow(16,8)*Math.random()).toString(16);<span class="cstat-no" title="statement not covered" >v</span>ar scache={};<span class="cstat-no" title="statement not covered" >s</span>cache[wkey]=wkey;<span class="cstat-no" title="statement not covered" >s</span>ources[skey]=[Function(["require"],"require("+stringify(wkey)+")(self)"),scache];<span class="cstat-no" title="statement not covered" >v</span>ar src="("+bundleFn+")({"+Object.keys(sources).map(<span class="fstat-no" title="function not covered" >function(key){<span class="cstat-no" title="statement not covered" ></span>return stringify(key)+":["+sources[key][0]+","+stringify(sources[key][1])+"]"}</span>).join(",")+"},{},["+stringify(skey)+"])";<span class="cstat-no" title="statement not covered" >r</span>eturn new Worker(window.URL.createObjectURL(new Blob([src],{type:"text/javascript"})))}</span>}</span>,{}]},{},[2]);
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Fri Apr 21 2017 07:38:59 GMT+0000 (UTC)</div>
</div>
</body>
</html>
